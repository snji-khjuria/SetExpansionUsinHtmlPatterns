(function(k){var g=window.AmazonUIPageJS||window.P,p=g._namespace||g.attributeErrors,b=p?p("DetailPageAlohaAssets"):g;b.guardFatal?b.guardFatal(k)(b,window):b.execute(function(){k(b,window)})})(function(k,g,p){k.when("A","a-modal").register("aloha.utils",function(b,g){return{showAjaxErrorModal:function(b,c,d){var a=g.get(b);null===a?a=g.create(b,{content:d,header:c}):a.update({content:d,header:c});a.show().refresh()}}})});
/* ******** */
(function(m){var p=window.AmazonUIPageJS||window.P,q=p._namespace||p.attributeErrors,f=q?q("SimilaritiesDetailJS"):p;f.guardFatal?f.guardFatal(m)(f,window):f.execute(function(){m(f,window)})})(function(m,p,q){m.when("jQuery","A").execute("sims-bind-parse-aui",function(f,d){function n(){var h=d.parseJSON;d.each(f('script[type\x3d"a-state"]'),function(k){k=f(k);if(!k.data("a-eval")){var g=k.attr("data-a-state");if(g&&(g=h(g),g.key&&-1!==f.inArray(g.key,l))){var a=h(k.html());d.state.replace(g.key,a);
k.data("a-eval",!0)}}})}var l=["sims-fbt","sims-list","view_to_purchase-sims-weblab-state"];d.on("a:pageUpdate",function(){n()})});m.when("jQuery","A","a-checkbox","p13n-sc-util","p13n-sc-call-on-visible","p13n-sc-logger").register("sims-fbt",function(f,d,n,l,h,k){function g(a){var b=this,c=a.data("sims-fbt-instance");if(c)return c;a.data("sims-fbt-instance",b);b.hasLazyInitialized=!1;f(".sims-fbt-checkbox input").show();b.$fbtRootElement=a;b.$detailsLinkText=b.$fbtRootElement.find(".sims-fbt-details-link a");
b.auiCheckboxes=[];c=this.$fbtRootElement.find("div.sims-fbt-checkbox");this.numOfItems=c.length;for(var e=0;e<this.numOfItems;e++)this.auiCheckboxes[e]=n(c[e]),this.auiCheckboxes[e].check();d.declarative.remove(b.$detailsLinkText,"details-link-click");d.declarative.remove(f(".sims-fbt-details-help-link"),"help-link-click");d.declarative.remove(f(".sims-fbt-map-details-link"),"help-link-click");d.declarative.create(b.$detailsLinkText,"details-link-click");d.declarative.create(f(".sims-fbt-details-help-link"),
"help-link-click");d.declarative.create(f(".sims-fbt-map-details-link"),"help-link-click");var g=f("#sims-fbt-container");h.register(a,function(){k.logAction({featureElement:g,action:"view",replicateAsinImpressions:!0,meta:{numsims:b.numOfItems}})});return b}g.prototype={lazyInitialize:function(){if(!this.hasLazyInitialized){this.$priceBlock=this.$fbtRootElement.find(".sims-fbt-price-box");this.$totalPriceDiv=this.$priceBlock.find(".sims-fbt-total-price");this.$addToCartButton=this.$priceBlock.find(".sims-fbt-add-to-cart");
this.$addToWishlistButton=this.$priceBlock.find(".sims-fbt-add-to-wishlist");this.$sellerInfo=this.$fbtRootElement.find(".sims-fbt-seller-info");this.$detailsText=this.$fbtRootElement.find(".sims-fbt-shipping-details-text");this.haveDetails=0!==this.$detailsText.length;try{this.FBTData=d.state("sims-fbt")}catch(a){l.log.error("[sims-fbt] Unable to find Data Attribute (page state) "+a);return}this.images=[];this.plusSigns=[];for(var b=0;b<this.numOfItems;b++)this.images[b]=this.$fbtRootElement.find(".sims-fbt-image-"+
(b+1)),0<b&&(this.plusSigns[b]=this.$fbtRootElement.find(".sims-fbt-plus-"+(b+1)));this.hasLazyInitialized=!0}},toggleSellerInfo:function(){this.lazyInitialize();var a=this.$sellerInfo.is(":hidden");a||this.$sellerInfo.hide();this.updateSellerText(a);a&&this.$sellerInfo.show(200)},handleCheckboxChange:function(a){var b=a.$declarativeParent,c=a.data,e=parseInt(c.itemNum,10);this.lazyInitialize();this.auiCheckboxes[e-1].disable();a=this.$priceBlock;this.auiCheckboxes[e-1].isUnchecked()&&(a=a.add(this.handleItemUnchecked(b,
c,e)));var f=this;a.fadeOut(function(){f.handleItemChecked(b,c,e)})},handleItemChecked:function(a,b,c){this.updateButtons(a);this.updateTotalPrice(a);this.updateSellerText(this.$sellerInfo.is(":visible"));if(0<=this.findFirstCheckedItem()){b=this.$priceBlock;this.auiCheckboxes[c-1].isChecked()&&(a.find(".sims-fbt-checkbox-label").removeClass("sims-fbt-unselected-item"),a=this.findFirstVisibleItem(),1<=a&&(c>a?b=b.add(this.plusSigns[c-1]):c<a&&(b=b.add(this.plusSigns[a-1]))),b=b.add(this.images[c-
1]));var e=this;b.fadeIn(function(){e.auiCheckboxes[c-1].enable()})}else this.auiCheckboxes[c-1].enable()},handleItemUnchecked:function(a,b,c){a.find(".sims-fbt-checkbox-label").addClass("sims-fbt-unselected-item");a=this.images[c-1];1<c&&(a=a.add(this.plusSigns[c-1]));c=this.findFirstCheckedItem();1<c&&(a=a.add(this.plusSigns[c-1]));return a},findFirstVisibleItem:function(){for(var a=1;a<=this.numOfItems;a++)if(this.images[a-1].is(":visible"))return a;return-1},findFirstCheckedItem:function(){for(var a=
1;a<=this.numOfItems;a++)if(this.auiCheckboxes[a-1].isChecked())return a;return-1},updateButtons:function(a){a=this.getOfferListingIDsSeletected();for(var b=1,c="preOrderText",e=a.length-1;0<=e;e--)if(!this.FBTData.itemDetails[a[e]].isPreorder){c="addToCartText";b=0;break}b?this.$addToCartButton.removeClass("a-button-primary").addClass("a-button-preorder"):this.$addToCartButton.removeClass("a-button-preorder").addClass("a-button-primary");1<=a.length?(this.$addToCartButton.find(".a-button-text").text(this.FBTData[c][a.length]),
this.$addToCartButton.attr("disabled")&&(this.$addToCartButton.removeClass("a-button-disabled"),this.$addToCartButton.removeAttr("disabled")),this.$addToWishlistButton.find(".a-button-text").text(this.FBTData.addToWishListText[a.length]),this.$addToWishlistButton.attr("disabled")&&(this.$addToWishlistButton.removeClass("a-button-disabled"),this.$addToWishlistButton.removeAttr("disabled"))):(this.$addToCartButton.find(".a-button-text").text(this.FBTData.addToCartText[1]),this.$addToCartButton.addClass("a-button-disabled"),
this.$addToCartButton.attr("disabled","disabled"),this.$addToWishlistButton.find(".a-button-text").text(this.FBTData.addToWishListText[1]),this.$addToWishlistButton.addClass("a-button-disabled"),this.$addToWishlistButton.attr("disabled","disabled"))},updateTotalPrice:function(a){var b=this.getOfferListingIDsSeletected(),c=/(<span class=\"sims-fbt-price-value\">)(.*)(<\/span>)/,e=0,f=a=0,d=0;if(0===b.length)this.$totalPriceDiv.hide();else{for(var g=0;g<b.length&&!d;g++){if(this.FBTData.itemDetails[b[g]].doesMAPPolicyApply){d=
1;break}else isFinite(this.FBTData.itemDetails[b[g]].price)&&(e+=parseFloat(this.FBTData.itemDetails[b[g]].price,10));isFinite(this.FBTData.itemDetails[b[g]].points)&&(a+=parseInt(this.FBTData.itemDetails[b[g]].points,10),f+=parseFloat(this.FBTData.itemDetails[b[g]].pointsValue,10))}this.$totalPriceDiv.show();b=this.$totalPriceDiv.find(".sims-fbt-total-price-value");d?(b.html(this.FBTData.MAPText),b.removeClass("a-color-price").addClass("sims-fbt-map-text").addClass("a-size-base")):(d=this.FBTData.currencySymbol,
g=this.formatPrice(e),d=d.match(c)?d.replace(c,"$1"+g+"$3"):d+g,b.html(d),b.removeClass("sims-fbt-map-text").addClass("a-color-price").removeClass("a-size-base"));c=this.$totalPriceDiv.find(".sims-fbt-points-wrapper");0<a?(e=parseInt(100*f/e+.5,10),f=c.find(".sims-fbt-points-value"),d=c.find(".sims-fbt-points-percentage"),f.html(a),d.html(e),c.show()):c.hide()}},getOfferListingIDsSeletected:function(){var a=[];f("input",".sims-fbt-checkbox").each(function(){this.checked&&a.push(this.value)});return a},
formatPrice:function(a){for(var b=(a-parseInt(a,10)).toFixed(2),b=b.replace("0.","."),c=parseInt(a,10),e=0;0<c;){var d=c%10,c=parseInt(c/10,10),b=d.toString()+b;e++;0===e%3&&0<c&&(b=","+b)}"EUR"===this.FBTData.currencyCode?(b=b.replace(/,/,"+"),b=b.replace(/\./,","),b=b.replace(/\+/,".")):"JPY"===this.FBTData.currencyCode&&(b=b.replace(".00",""));1>Math.abs(a)&&(b="0"+b);return b},updateSellerText:function(a){var b="",c="",e="",e=0;if(this.haveDetails){for(c=1;c<=this.numOfItems;c++)this.auiCheckboxes[c-
1].isChecked()&&(b+=c,e++);c=0===e?this.getString("noDetails"):1===e?"":"seller"===this.FBTData.shippingDetails[b]?this.getString("differentSellers"):"availabilityone"===this.FBTData.shippingDetails[b]?this.getString("differentAvailabilityOne"):"availabilitysome"===this.FBTData.shippingDetails[b]?this.getString("differentAvailabilitySome"):"";e=0===e?"":""===c?this.getString(a?"hideDetailsLong":"showDetailsLong"):this.getString(a?"hideDetails":"showDetails");c!==this.$detailsText.text()&&this.$detailsText.text(c);
e!==this.$detailsLinkText.text()&&this.$detailsLinkText.text(e)}},getString:function(a){if(this.FBTData&&this.FBTData.fbtStrings)return this.FBTData.fbtStrings[a]}};(function(){function a(){return f("#sims-fbt-content").data("sims-fbt-instance")}function b(){var a=f("#sims-fbt-content");a.length&&new g(a)}d.declarative("help-link-click","click",function(a){a.$event.preventDefault();p.open(a.$event.target.href,"AmazonHelp","width\x3d550,height\x3d550,resizable\x3d1,scrollbars\x3d1,toolbar\x3d0,status\x3d0").focus();
return!1});d.declarative("details-link-click","click",function(b){b.$event.preventDefault();(b=a())&&b.toggleSellerInfo()});d.declarative("fbt-checkbox-click","change",function(b){var e=a();e&&e.handleCheckboxChange(b)});d.state.bind("sims-fbt",b);d.on("afterReady",b)})();return g});m.when("A","jQuery","p13n-sc-call-on-visible","p13n-sc-logger").execute("sims-vtp-logger",function(f,d,n,l){var h=d(".vtp-container");0<h.length&&n.register(h,function(){l.logAction({featureElement:h,action:"view",replicateAsinImpressions:!0})})});
m.when("A","jQuery","p13n-sc-call-on-visible","p13n-sc-logger").execute("sims-vtp-logger",function(f,d,n,l){var h=d("#vtp_hero-sims-feature");0<h.length&&n.register(h,function(){l.logAction({featureElement:h,action:"view",replicateAsinImpressions:!0})})});(function(f,d){m.when("jQuery","A","a-carousel-framework","p13n-sc-util").register("sims-prime-filter-checkbox-carousel",function(d,l,h,k){l.declarative("filterPrimeCheckbox-change","change",function(g){var a=g.$target.prop("checked");if(g=g.$declarativeParent.parents().find(".sims-carousel-holder")){var b=
g.data("similarity-type");if(b){var c;if(c=a?d("#"+b+"-sims-filtered-carousel").html():d("#"+b+"-sims-unfiltered-carousel").html())return g.replaceWith(function(){return d(c).hide().fadeIn()}),a=a?"p13n:sims:prime-list:checkbox:checked":"p13n:sims:prime-list:checkbox:unchecked",k.count(a,(f.ue.count(a)||0)+1),h.createAll(),h.initializeAll(),!0;k.log.error("Sims-prime-filtering: Unable to find a carousel to replace the existing carousel with")}else k.log.error("Sims-prime-filtering: unable to find the required data-attribute similarityType")}else k.log.error("Sims-prime-filtering: sims-carousel-holder could not be found")})})})(p,
document)});
/* ******** */
(function(m){var q=window.AmazonUIPageJS||window.P,E=q._namespace||q.attributeErrors,b=E?E("SoftlinesRecommendationsAssets"):q;b.guardFatal?b.guardFatal(m)(b,window):b.execute(function(){m(b,window)})})(function(m,q,E){m.when("A","jQuery","softlines-utils","atf").register("looks-data-cache",function(b,d,c){var a=d("#multipleRecommendations"),f=[],e=!1,k=[],g="cts",l=!1,m={};if(0<a.length){var p=a.attr("data-ids");if(c.isString(p))if(p=b.parseJSON(p),d.isPlainObject(p)&&d.isArray(p.recommendations)){b=
p.recommendations;for(var q=b.length,p=0;p<q;p++){var h=b[p];if(d.isPlainObject(h)&&d.isArray(h.asins)){var n=h.asins;if(d.isArray(n)){n=n.splice(0,Math.min(4,n.length));h.asins=n;k.push(h);for(var E=n.length,L=[],h=0;h<E;h++){var D=n[h];d.isPlainObject(D)&&c.isString(D.asin)&&L.push(D.asin)}n=L.join();n=encodeURIComponent(n);f.push(n)}}}1<q&&(e=!0)}else if(d.isPlainObject(p)&&d.isPlainObject(p.recommendations)&&(b=p.recommendations.recommendations,g=p.recommendations.reftagSuffix,null!==p.recommendations.recommendationUrlParams&&
(m=d.param(p.recommendations.recommendationUrlParams)),l=!0,d.isArray(b))){q=b.length;for(p=0;p<q;p++)if(h=b[p],d.isArray(h)){n=h.splice(0,Math.min(4,h.length));k.push(n);E=n.length;L=[];for(h=0;h<E;h++)D=n[h],d.isPlainObject(D)&&c.isString(D.id)&&L.push(D.id);n=L.join();n=encodeURIComponent(n);f.push(n)}1<q&&(e=!0)}}var D=a.attr("data-asin"),X=a.attr("data-injectedViewModel"),I=a.attr("data-showSimplifiedPrice"),na=a.attr("data-showRecommendationsPrimeEligibility"),ga=a.attr("data-primeEligibleLocale");
return{getLooks:function(){return k},getLooksAsins:function(){return f},getAsin:function(){return D},getRecommendationUrlParams:function(){return m},getReftagSuffix:function(){return g},isShovelerArrowsEnabled:function(){return e},isNewFormat:function(){return l},getInjectedViewModel:function(){return X},getShowSimplifiedPrice:function(){return I},getShowRecommendationsPrimeEligibility:function(){return na},getIsPrimeEligibleLocale:function(){return ga}}});m.when("A","jQuery","recommendations-carousel-data",
"softlines-utils","looks-data-cache","atf").register("complete-the-look-carousel-data",function(b,d,c,a,f){b=b.extend({},c);var e={SOFTLINES_CTL:"ctl-carousel",SOFTLINES_RECS_CTL:"srecs-ctl-carousel",ctl:"ctl-carousel",srecsc:"srecs-ctl-carousel"};b.getCounterPrefix=function(a){return e[a]};b.getProducts=function(){var b=[],c=f.getLooks(),e,m,p=c.length;for(e=0;e<p;e++){var q=c[e];if(d.isPlainObject(q)&&d.isArray(q.asins)){var h=q.asins,n=h.length;for(m=0;m<n;m++){var E=h[m];d.isPlainObject(E)&&a.isString(E.asin)&&
b.push(E.asin)}}if(d.isArray(q))for(h=q,n=h.length,m=0;m<n;m++)E=h[m],d.isPlainObject(E)&&a.isString(E.id)&&(q="",null!==E.asinSpecificUrlParams&&(q=d.param(E.asinSpecificUrlParams)),b.push(E.id+":"+q))}return b};b.getDataSetType=function(){var b=f.getLooks(),c=b.length,e="";if(!0===f.isNewFormat())return f.getReftagSuffix();0<c&&(b=b[0],d.isPlainObject(b)&&d.isArray(b.asins)&&(b=b.asins,0<b.length&&(b=b[0],d.isPlainObject(b)&&a.isString(b.asinDataSetType)&&(e=b.asinDataSetType))));return e};return b});
m.when("jQuery","softlines-utils","looks-data-cache","atf").register("lookFeedback",function(b,d,c){function a(){0<p.length&&0<m.length&&(p.removeClass("visibleFeedbackBlock"),m.removeClass("hidden"),p.addClass("hidden"),m.addClass("visibleFeedbackBlock"));"undefined"!==typeof Storage&&localStorage.setItem(e,"1")}function f(a){b.ajax({timeout:4E3,type:"GET",url:"/gp/softlines/logger/seed/"+g+"/look/"+k+("/ref=ctl_look_"+l+"_vote_"+a),data:{vote:a}})}var e,k,g=c.getAsin(),l,m=b("#afterCtlFeedback"),
p=b("#beforeCtlFeedback");b("#ctlButtonYes").click(function(){a();f("yes")});b("#ctlButtonNo").click(function(){a();f("no")});return{updateFeedback:function(a){l=a;--a;var b=c.getLooksAsins();0<=a&&a<b.length&&(k=b[a]);e=g+k;"undefined"!==typeof Storage&&(a=localStorage.getItem(e),0<p.length&&0<m.length&&(p.removeClass("hiddenFeedbackBlock"),"1"===a?(p.addClass("hidden"),m.removeClass("hidden"),m.addClass("visibleFeedbackBlock")):(p.removeClass("hidden"),p.addClass("visibleFeedbackBlock"),m.addClass("hidden"))))}}});
m.when("A","metrics-logger").register("csm-metrics-logger",function(b,d){var c=q.ue,a=b.extend({},d);a.addCount=function(a,b){var d=c.count(a)||0;c.count(a,d+b)};return a});m.when("jQuery","softlines-utils","looks-data-cache").register("ob-link-generator",function(b,d,c){return{getOutfitBuilderUrlForPageNumber:function(a){--a;var f,e=b("#outfitBuilder"),k=c.getLooksAsins();0<=a&&a<k.length&&0<e.length&&(e=e.data("outfitbuilderurlprefix"),d.isStringNotEmpty(e)&&(f=e+k[a]));return f}}});m.when("A",
"jQuery","a-carousel-framework","a-carousel-ajax-standard","complete-the-look-carousel-data","looks-data-cache","softlines-utils","csm-metrics-logger","ob-link-generator","lookFeedback","ready").execute("complete-the-look-ajax",function(b,d,c,a,f,e,k,g,l,m){var p=f.getDataSetType(),q=f.getCounterPrefix(p);b=b.extend({},a);b.getItems=function(b,c,d){d.asin=e.getAsin();d.dataSetType=f.getDataSetType();d.reftagSuffix=e.getReftagSuffix();d.recommendationsUrlParams=e.getRecommendationUrlParams();var g=
e.getInjectedViewModel();k.isStringNotEmpty(g)&&(d.injectViewModel=g);d.showSimplifiedPrice=e.getShowSimplifiedPrice();d.showRecommendationsPrimeEligibility=e.getShowRecommendationsPrimeEligibility();d.isPrimeEligibleLocale=e.getIsPrimeEligibleLocale();a.getItems(b,c,d)};b.init=function(b){m.updateFeedback(1);var c=f.getProducts();b.setAttr("ajax",{url:"/gp/product/ajax-handlers/complete-the-look-carousel.html",id_list:c});return a.init(b)};b.afterInit=function(b){a.afterInit(b);var c=e.getLooks(),
f=0;d.isArray(c)&&(f=c.length);g.addCount(q+":shown",1);b.onChange("pageNumber",function(a,b){var c=":back";a>b&&(c=":next");a===f&&1===b&&(c=":back");b===f&&1===a&&(c=":next");m.updateFeedback(a);var e=d("#outfitBuilder");if(0<e.length){var h=l.getOutfitBuilderUrlForPageNumber(a);k.isStringNotEmpty(h)&&e.attr("href",h)}g.addCount(q+":page:"+a+c,1)})};c.registerStrategy("ajax","complete-the-look",b)});m.when("A","jQuery","a-carousel-framework","looks-data-cache","complete-the-look-carousel-data",
"csm-metrics-logger","ready").execute("complete-the-look-display",function(b,d,c,a,f,e){function k(a){function b(a){a.dom.$viewport.css("height","")}a.onChange("pageNumber",function(){a.dom.$carousel.children("li").css("visibility","")});a.onChange("pageSize",function(c,d){c>d&&b(a)});a.onChange("loading",function(c){c||b(a)});a.onChange("firstVisibleItem",function(){b(a)});a.onChange("animating",function(b,c){if(!b){var e=a.getAttr("firstVisibleItem")-1,f=e+a.getAttr("pageSize");a.dom.$carousel.children("li").each(function(a,
b){var c=a>=e&&a<f;d(b).css("visibility",c?"":"hidden").attr("aria-hidden",c?"false":"true")})}});a.onChange("single_page_align minimum_gutter_width",function(){this.repaint(a)});a.onChange("minimum_gutter_width",function(){this.repaint(a)});a.onChange("pageNumber",function(a){m.when("is-softlines-recommendations-edp-enabled").execute(function(b){b&&m.when("srecs-edp-carousel-page-change-handler").execute(function(b){b.refreshEDP(a)})})})}var g=.82;b=f.getDataSetType();var l=f.getCounterPrefix(b),
q=d("#recommendations");c.registerStrategy("display","complete-the-look",{repaint:function(b){a.isShovelerArrowsEnabled()||(g=1);b.getDimensions();var c=q.width()*g,d=Math.round(.225*c),e=Math.round(.0125*c);b.setAttr("currentGutter",0);b.setAttr("pageSize",4);var f=b.dom.$carousel,k=f.children("li"),c=k.length,l=b.getAttr("firstVisibleItem")-1,m=l+4,E=d+"px",na="0 "+e+"px";k.each(function(a,b){var c=a>=l&&a<m;b.style.visibility=c?"":"hidden";b.style.width=E;b.style.margin=na;b.setAttribute("aria-hidden",
c?"false":"true")});e=k.first().outerWidth(!0);k=c*e;f.removeClass("a-text-right a-text-center");f.css("width",k+"px");f={carousel:{width:k,outerWidth:f.outerWidth()},items:[]};for(k=0;k<c;k++)f.items.push({width:d,outerWidth:e});b.updateDimensionsCache(f);b.gotoIndex(b.getAttr("firstVisibleItem"),{animationDuration:0});b.triggerEvent("repaint")},resize:function(a,b){b.viewport&&void 0!==b.viewport.width&&(this.repaint(a),e.addCount(l+":resized",1))},init:function(b){var c=a.isShovelerArrowsEnabled(),
d=[];c&&(d=f.getProducts());0<d.length&&b.setAttr("set_size",d.length);b.setAttr("minimum_gutter_width",0);b.setAttr("first_item_flush_left",!0);this.repaint(b);c&&(c=b.getDimensions(),b.dom.$container.find(".a-carousel-left, .a-carousel-right, .a-carousel-viewport").css("height",Math.max(c.viewport.height,c.items[0]?c.items[0].height:0)+"px"));c=b.getAttr("firstVisibleItem");1<c&&(b.setAttr("firstVisibleItem",c),c=Math.ceil(c/b.getAttr("pageSize")),b.gotoPage(c));k(b)}})});m.when("jQuery").register("softlines-utils",
function(b){function d(a){return"undefined"!==b.type(a)&&"null"!==b.type(a)}function c(a){return d(a)&&"string"===b.type(a)}return{isNotNull:d,isString:c,isStringNotEmpty:function(a){return c(a)&&0<a.length}}});m.register("metrics-logger",function(){return{addCount:function(b,d){}}});m.register("recommendations-carousel-data",function(){return{getProducts:function(){}}});m.when("jQuery","atf").register("is-softlines-recommendations-edp-enabled",function(b){var d=!1;0<b("#recommendationsData").length&&
(d=!0);return d});m.when("is-softlines-recommendations-edp-enabled").execute(function(b){b&&(m.when("A","jQuery","atf").register("recommendations-data-cache",function(b,c){var a,f,e,k=!1,g=!1,l,m=c("#recommendationsData");if(0<m.length){a=m.attr("data-seed-asin");var p=m.attr("data-recommended-asins");"undefined"!==typeof p&&(f=b.parseJSON(p));e=m.attr("data-dataset-type");k="true"===m.attr("data-is-multiple-looks-enabled");g="true"===m.attr("data-is-shoveler-enabled");p=m.attr("data-edp-defect-display-data");
"undefined"!==typeof p&&(l=b.parseJSON(p))}return{getSeedAsin:function(){return a},getRecommendedAsins:function(){return f},setRecommendedAsins:function(a){0<m.length&&c.isArray(a)&&(a=JSON.stringify(a),m.attr("data-recommended-asins",a),f=b.parseJSON(a))},getRecommendationsDatasetType:function(){return e},isShovelerEnabled:function(){return g},isMultipleLooksEnabled:function(){return k},getEDPDefectDisplayData:function(){return l}}}),m.when("A","jQuery","recommendations-data-cache","ready").register("softlines-recommendations-edp-helper",
function(b,c,a){function f(){var b=e.featureContext(),d={},f=b.cqAttributeType,m=b.cqFlagName,q=b.resolver,h=b.featureName,n=h+"-"+b.dataHash;m&&0<m.length&&(d.flag=m);var m=a.getRecommendedAsins(),E=a.getRecommendationsDatasetType();d.recommendedAsins=encodeURIComponent(m);d.datasetType=E;m=JSON.stringify(m)+E;m in e.cacheStorage?d=e.cacheStorage[m]:(d=k.generateTemplateViewModel(n,b.defects,e,d,f,q),e.cacheStorage[m]=d);f="#"+b.placeHolderId;b=c("#"+b.templateId).html();k.renderEDP(f,b,d,h)}var e,
k;b.on("SoftlinesEDPRecommendationsActionEventHandler",function(a){e=a;m.when("EDPUtils").execute(function(a){k=a;f()})});return{getSrecsEDPScopeHandler:function(){return e},srecsEDPActionEvent:f}}),m.when("softlines-recommendations-edp-helper","looks-data-cache","recommendations-data-cache","ready").register("srecs-edp-carousel-page-change-handler",function(b,c,a){return{refreshEDP:function(f){var e=c.getLooksAsins();--f;0<=f&&f<e.length&&(e=e[f]);e=decodeURIComponent(e);e=e.split(",");a.setRecommendedAsins(e);
b.srecsEDPActionEvent()}}}))})});
/* ******** */
(function(g){var e=window.AmazonUIPageJS||window.P,m=e._namespace||e.attributeErrors,a=m?m("SoftlinesPWAssets"):e;a.guardFatal?a.guardFatal(g)(a,window):a.execute(function(){g(a,window)})})(function(g,e,m){g.when("A","LUXController","softlines-common-utils","afterLoad","a-state").register("PWAddressValidator",function(a,f,k){var c=a.$,d,h=function(){function h(c){if(e.hasOwnProperty(c)&&e.addressId)return e.addressId;if(!c)return!1;var d=k.getCurrentAsin();a.ajax("/gp/product/ajax-handlers/pw-address-validator.html?ie\x3dUTF8\x26",
{method:"get",params:{asin:d,pwAddressIdList:c},success:b,error:function(){console.log("PWAddress validation AJAX call failed for adderss ID : "+c);return!1}})}function b(a){a=a?a.replace(/(\n+\s+)+/g,""):"";k.isStringNotEmpty(a)&&c(a).each(function(a){var b=c(this);a=b.data("addressid");b=b.data("eligibility");if(a&&b)return e[a]=b,console.log(a+" : "+b),b})}function q(){d=a.state("pwState")?a.state("pwState"):{}}function r(){d.hasOwnProperty("isTryState")&&(g.isTryState=d.isTryState);d.hasOwnProperty("isPWEnabled")&&
(g.isPWEnabled=d.isPWEnabled);var b=a.state("unifiedLocation")?a.state("unifiedLocation"):{},b=b.hasOwnProperty("urlParams")?b.urlParams:{},b=k.extendAndOverride(b,g);a.state("unifiedLocation",{urlParams:b})}var g={isTryState:!1,isPWExperienceEnabled:!0,isLocUXPageRefresh:!0,isPWEnabled:!1},l={},e={},m=f.locationChangeEventName,n=f.locationTypes;q();r();f&&d.hasOwnProperty("isPWEnabled")&&d.isPWEnabled&&(l=f.getLocationData(),l.hasOwnProperty("addressId")&&l.addressId&&(e[l.addressId]="ELIGIBLE"));
a.state.bind("pwState",function(a,b){if(b.isTryState||b.isPWEnabled)q(),r()});a.on(m,function(a){l=a;a=l.locationType;!a||a!==n.accountAddress&&a!==n.defaultAddress||h(l.addressId)});return{getLocationData:function(){return l},getAddressEligibilityMap:function(){return e},getAddressIdPWEligibility:h,locationTypes:n,eligibleValue:"ELIGIBLE",ineligibleValue:"INELIGIBLE"}};d=a.state("pwState")?a.state("pwState"):{};return d.hasOwnProperty("isPWExperienceEnabled")&&d.isPWExperienceEnabled?h():{}});"use strict";
g.when("A","pw-common-utils","a-modal","atf").execute(function(a,f,k){var c=a.$;f.registerTrySelectHandler(function(){a.state("pwState",{isTryState:!0,isPWChildState:!0});b({isTryState:!0})});f.registerBuySelectHandler(function(){f.isPwBuyBoxVisible()&&(a.state("pwState",{isTryState:!1,isPWChildState:!0}),b({isTryState:!1}))});var d=function(){c(document).undelegate("#pw-add-to-cart-button","click.pwBuyboxAtc");c(document).delegate("#pw-add-to-cart-button","click.pwBuyboxAtc",function(){var a=k.get(c("#watchWarrantyModalPwAtc"));
if(!a||a.isVisible())e.ue&&e.ue.log("LEWIS_ADD_TO_CART","PW_DUMMY_CSM_CHANNEL"),c("#pwAddToCart").submit()})},h=function(){a.on("a:pageUpdate",function(){var b=p();b&&(b.isPWChildState=f.isPwBuyBoxVisible(),a.state("pwState",b),b.isPWChildState&&d())})},p=function(){var a,b=c("#pwController_feature_div");f.isNotEmpty(b)&&(b=b.find("script"),f.isNotEmpty(b)&&(b=b.html())&&(a=c.parseJSON(b)));return a},b=function(a){var b=p();b&&(b=c.extend(b,a),(a=f.toString(b))&&c("#pwController_feature_div").find("script").html(a))};
g.when("ready","a-state").execute(function(){var b=a.state("pwState")?a.state("pwState"):{};b.hasOwnProperty("isPWExperienceEnabled")&&b.isPWExperienceEnabled&&(h(),d())})});g.declare("PWConfig",{buyBox:{auiEvents:{tryRowSelectEvent:"a:accordion:pwBuyBoxAccordion:tryAccordionRow:select",buyRowSelectEvent:"a:accordion:pwBuyBoxAccordion:buyAccordionRow:select"},tryAccordionRowID:"#tryAccordionRow"}});"use strict";g.when("A").execute(function(a){var f=a.$;a.state.bind("pwState",function(a,c){if((c.isTryState||
c.isPWEnabled)&&a.isPWChildState){var d,h;a.isTryState&&a.isPWEnabled?(d=f(".pw-try-feature"),h=f(".pw-buy-feature")):(d=f(".pw-buy-feature"),h=f(".pw-try-feature"));0<d.length&&d.removeClass("pw-hidden");0<h.length&&h.addClass("pw-hidden")}})});"use strict";g.when("A","pw-common-utils","afterLoad").execute(function(a,f){function k(a){var c=f.isPwBuyBoxVisible();a=!a.isTryState&&a.isPWEnabled&&c;!h&&a&&(a=d("#pwOnboardingHintPopoverTriggerId"))&&a.click()}function c(){return d(".pwOnboardingHintContent").parents(".a-popover-wrapper")}
var d=a.$,h=!1,e;g.when("ready","a-state").execute(function(){var b=a.state("pwState")?a.state("pwState"):{},c=a.state("pwOnboardingHintState")?a.state("pwOnboardingHintState"):{};c.hasOwnProperty("deviceType")&&b.hasOwnProperty("isTryState")&&b.hasOwnProperty("isPWEnabled")&&(e=c.deviceType,k(b))});a.state.bind("pwState",function(a){!a.isTryState&&a.isPWChildState&&k(a)});a.on("a:popover:dismiss:pwOnboardingHint",function(b){h=!0;f.isNotEmpty(e)&&a.ajax("/gp/product/ajax-handlers/pw-onboarding-hint-shown.html?ie\x3dUTF8\x26",
{method:"post",params:{deviceType:e}})});a.on("a:popover:beforeShow:pwOnboardingHint",function(a){if(a=c())a.addClass("pwOnboardingHintPopoverWrapper"),(a=a.children(".a-arrow-border"))&&a.addClass("pwOnboardingHide")});a.on("a:popover:afterShow:pwOnboardingHint",function(a){(a=c())&&(a=a.children(".a-popover-inner"))&&a.addClass("pwOnboardingHintPopoverInner")})});"use strict";g.when("A","PWConfig").register("pw-common-utils",function(a,f){var e=function(){};e.prototype.isNotEmpty=function(a){return a&&
a.length};e.prototype.isPwBuyBoxVisible=function(c){c=a.$(f.buyBox.tryAccordionRowID);return this.isNotEmpty(c)};e.prototype.registerTrySelectHandler=function(c){a.on(f.buyBox.auiEvents.tryRowSelectEvent,c)};e.prototype.registerBuySelectHandler=function(c){a.on(f.buyBox.auiEvents.buyRowSelectEvent,c)};e.prototype.toString=function(c){var d=c;if("object"===typeof c){var e="",d="";a.each(c,function(a,b){d+=e+'"'+b+'":'+a;e=","});d&&(d="{"+d+"}")}return d};return new e})});
/* ******** */
(function(b){var f=window.AmazonUIPageJS||window.P,h=f._namespace||f.attributeErrors,a=h?h("FreeSampleAssets"):f;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,f,h){b.when("A","a-popover","ready").execute(function(a,c){0===a.$("#freeSampleInlineJavascript").length&&b.register("sampling-feature",function(){function b(){var c=a.$("#csxfsSelectedBlock").height()*d.IMAGE_PADDING_FACTOR;a.$("#csxfsImageSelected").css("padding-top",c);a.$("#csxfsYourGiftText").css({left:d.MOVE_MAX_X,
opacity:0});a.$("#csxfsSampleImages").css({height:0,opacity:0});a.$(".csxfs_normal").each(function(){a.$(this).css("borderWidth",d.BORDERWIDTH_MIN)})}function f(b){b=a.$("#"+b);var d=a.$("#a-popover-csxDetailsPopOver");c.create(b,{name:"csxDetailsPopOver",width:715,position:"triggerBottom",content:d.html(),activate:a.capabilities.touch?"onmouseover":"onclick"})}function h(b,c){"1"!==a.$("#buybox_feature_div").css("opacity")?setTimeout(function(){h(b,c)},500):(a.$(".csxfs_featurecontainer").show(),
l=!1,p(),f("csxfsTitleDetailsLink"),f("csxfsSecondaryDetailsLink"),m()?(a.$("#csxfsSelectSampleButton, #csxfsImageSelected").bind("click",function(){b.animateIn(c)}),a.$(".csxfs_normal").bind("click",v).bind("click",function(){b.animateOut(c)}),a.$(".csxfs_normal").hover(A,B),a.$("#csxfsNoThanks").bind("click",x).unbind("click",v)):(a.$("#csxfsImageSelected").bind("click",z),a.$("#csxfsAcceptSampleButton").bind("click",v),a.$("#csxfsDeclineSampleButton").bind("click",x)),a.$("#csxfsImageSelected").hasClass("csxfs_faded_image")?
(u=!1,a.$("#addToCart").find("#freeSampleOfferListingID").val(""),a.$("#csxfsSelectedAsin").val("")):(a.$("#freeSampleOfferListingID").val(a.$("#csxfsImg0").data("offerlistingid")),a.$("#csxfsSelectedAsin").val(a.$("#csxfsImg0").data("asin"))))}var d={MOVE_MAX_X:16,MOVE_MIN_X:0,BORDERWIDTH_MAX:1,BORDERWIDTH_MIN:0,DELAY:"slow",FEATURE_CONTAINER_HEIGHT:114},l=!0,k=function(){a.$("#csffsFeaturecontainer").animate({height:d.FEATURE_HEIGHT},d.DELAY,function(){a.$("#csxfsSelectedSampleText").css({left:d.MOVE_MAX_X,
opacity:0})});a.$("#csxfsSamplesBlock").removeClass("a-hidden");a.$("#csxfsSelectedBlock").addClass("a-hidden");a.$("#csxfsImageSelected").removeClass("csxfs_faded_image");a.$("#csxfsSampleImages").animate({height:d.SAMPLES_HEIGHT,opacity:1},d.DELAY);a.$(".csxfs_normal").each(function(){a.$(this).animate({borderWidth:d.BORDERWIDTH_MAX},"3000")});a.$("#csxfsYourGiftText").animate({left:d.MOVE_MIN_X,opacity:1},d.DELAY);e(!0);return!1},e=function(b){b?(a.$("#csxfsFreeSampleDeclinedTitle").hide(),a.$("#csxfsSelectedSampleText").removeClass("csxfs_nosampleselected_text"),
a.$("#csxfsSampleTitle").show(),a.$("#csxfsFreeSampleTitle").show()):(a.$("#csxfsFreeSampleDeclinedTitle").show(),a.$("#csxfsSelectedSampleText").addClass("csxfs_nosampleselected_text"),a.$("#csxfsSampleTitle").hide(),a.$("#csxfsFreeSampleTitle").hide())},n=function(){l=!1;a.$("#csxfsLnkDiffGiftSec").hide();a.$("#csxfsLnkChooseGift").show();a.$("#csxfsLnkNoGift").hide();e(!1);a.$("#csxfsImageSelected").addClass("csxfs_faded_image");a.$("#freeSampleOfferListingID").remove();a.$("#csxfsAcceptSample").show();
a.$.get(a.$(this).data("foresterurl"));return!1},m=function(){return 1<a.$("#csxfsItemsCount").val()?!0:!1},g=function(){var b=a.$(this).data("foresterurl");b&&a.$.get(b);m()?q():(p(),a.$("#addToCart").find("#freeSampleOfferListingID").val(a.$("#csxfsImg0").data("offerlistingid")),a.$("#csxfsSampleTitle").text(a.$("#csxfsImg0").data("title")).show(),a.$("#csxfsImageSelected").removeClass("csxfs_faded_image"),a.$("#csxfsLnkNoGift").show(),e(!0),a.$("#csxfsAcceptSample").hide())},q=function(){a.$("#csxfsLnkDiffGiftSec").show();
a.$("#csxfsLnkChooseGift").hide();a.$("#csxfsLnkNoGift").show();k();return!1},p=function(){l||(a.$("#addToCart").prepend(a.$('<input type="hidden" id="freeSampleOfferListingID" name="freeSampleOfferListingID" value="">')),l=!0)},y=function(){var c=a.$(this).find("img").attr("src"),e=a.$(this).data("title");a.$("#csxfsSampleImages").animate({height:0,opacity:0},d.DELAY);a.$("#csxfsSamplesBlock").addClass("a-hidden");a.$("#csxfsImageSelected").attr("src",c);a.$("#csxfsSampleTitle").text(e);a.$("#csxfsSelectedBlock").removeClass("a-hidden");
c=a.$("#csxfsSelectedBlock").height()*d.IMAGE_PADDING_FACTOR;a.$("#csxfsImageSelected").css("padding-top",c);a.$("#csffsFeaturecontainer").animate({height:d.FEATURE_CONTAINER_HEIGHT},"3000",function(){a.$("#csxfsYourGiftText").css({left:d.MOVE_MAX_X,opacity:0})});a.$("#csxfsSelectedSampleText").animate({left:d.MOVE_MIN_X,opacity:1},d.DELAY);a.$(".csxfs_normal").each(function(){a.$(this).removeClass("csxfs_highlight")});a.$(this).addClass("csxfs_highlight");b();p();a.$("#addToCart").find("#freeSampleOfferListingID").val(a.$(this).data("offerlistingid"));
a.$.get(a.$(this).data("foresterurl"))},t,u=!0,v=function(){u=!0;a.$("#csxfsSampleTitle").removeClass("csxfs_hidden_elements");a.$("#csxfsNoSample").addClass("csxfs_hidden_elements");a.$("#csxfsImageSelected").removeClass("csxfs_faded_image");if(m()){var b=a.$("#csxfsSampleTitle").text().trim(),c=a.$(this).data("title"),b=b.substring(0,b.indexOf(" ")+1)+c;a.$("#csxfsSampleTitle").text(b);a.$("#csxfsSelectProductSubheadingText").text(c);t=c;c=a.$(this).find("img").attr("src");a.$("#csxfsImageSelected").attr("src",
c);a.$(".csxfs_normal").removeClass("csxfs_highlight");a.$(this).addClass("csxfs_highlight");a.$("#csxfsButtonTextChange").removeClass("csxfs_hidden_elements");a.$("#csxfsButtonTextSelect").addClass("csxfs_hidden_elements");a.$("#csxfsFreeSampleTitle").removeClass("csxfs_hidden_elements");a.$("#csxfsTitleDetailsLink").removeClass("csxfs_hidden_elements");a.$("#csxfsSelectSampleTitle").addClass("csxfs_hidden_elements");a.$("#csxfsCountSampleChoices").addClass("csxfs_hidden_elements");a.$("#freeSampleOfferListingID").val(a.$(this).data("offerlistingid"));
a.$("#csxfsSelectedAsin").val(a.$(this).data("asin"));a.$.get(a.$(this).data("foresterurl"))}else a.$("#csxfsDeclineSampleButton").removeClass("csxfs_hidden_elements"),a.$("#csxfsAcceptSampleButton").addClass("csxfs_hidden_elements"),a.$("#freeSampleOfferListingID").val(a.$("#csxfsImg0").data("offerlistingid")),a.$("#csxfsSelectedAsin").val(a.$("#csxfsImg0").data("asin")),a.$.get(a.$("#csxfsImg0").data("foresterurl"))},x=function(){u=!1;a.$("#csxfsSampleTitle").addClass("csxfs_hidden_elements");a.$("#csxfsNoSample").removeClass("csxfs_hidden_elements");
a.$("#csxfsImageSelected").addClass("csxfs_faded_image");if(m()){a.$(".csxfs_normal").removeClass("csxfs_highlight");a.$("#csxfsNoThanks").addClass("csxfs_highlight");var b=a.$(this).data("title");a.$("#csxfsSelectProductSubheadingText").text(b);t=b;a.$("#csxfsButtonTextChange").addClass("csxfs_hidden_elements");a.$("#csxfsButtonTextSelect").removeClass("csxfs_hidden_elements");a.$("#csxfsFreeSampleTitle").addClass("csxfs_hidden_elements");a.$("#csxfsTitleDetailsLink").addClass("csxfs_hidden_elements");
a.$("#csxfsSelectSampleTitle").removeClass("csxfs_hidden_elements");a.$("#csxfsCountSampleChoices").removeClass("csxfs_hidden_elements")}else a.$("#csxfsDeclineSampleButton").addClass("csxfs_hidden_elements"),a.$("#csxfsAcceptSampleButton").removeClass("csxfs_hidden_elements");a.$("#freeSampleOfferListingID").val("");a.$("#csxfsSelectedAsin").val("");a.$.get(a.$("#csxfsNoThanks").data("foresterurl"));return!1},z=function(){u?x():v()},A=function(){t=a.$("#csxfsSelectProductSubheadingText").text();
a.$("#csxfsSelectProductSubheadingText").text(a.$(this).data("title"))},B=function(){a.$("#csxfsSelectProductSubheadingText").text(t)};return{init:function(){a.$(".csxfs_featurecontainer").show();var c=a.$("#csffsFeaturecontainer").hasClass("a-hidden");a.$("#csffsFeaturecontainer").removeClass("a-hidden");d.FEATURE_HEIGHT=a.$("#csxfsSamplesBlock").removeClass("a-hidden").height();d.SAMPLES_HEIGHT=a.$("#csxfsSampleImages").height();a.$("#csxfsSamplesBlock").addClass("a-hidden");d.FEATURE_CONTAINER_HEIGHT=
a.$("#csffsFeaturecontainer").height();c&&a.$("#csffsFeaturecontainer").addClass("a-hidden");a.$("#csxfsImageSelected").hasClass("csxfs_faded_image")&&a.$("#addToCart").find("#freeSampleOfferListingID").val("");b();a.$("#csxfsLnkDiffGift").bind("click",k);a.$("#csxfsLnkNoGift").bind("click",n);a.$(".csxfs_normal").bind("click",y);a.$("#csxfsImageSelected").bind("click",g);a.$("#csxfsLnkChooseGift").bind("click",q);a.$("#csxfsAcceptSample").bind("click",g)},initV2:h}})})});
/* ******** */
(function(h){var m=window.AmazonUIPageJS||window.P,q=m._namespace||m.attributeErrors,a=q?q("HSXDetailPageFeaturesAssets"):m;a.guardFatal?a.guardFatal(h)(a,window):a.execute(function(){h(a,window)})})(function(h,m,q){h.when("jQuery","A").execute(function(a,g){g.on("a:popover:ajaxContentLoaded:g2s2SizeChartView",function(b){function c(b){return k+a.param({asin:p,sizeChartDept:b,deviceType:n})}function f(){var b=a("#sizechart_department_dropdown_native_select").children(":selected").attr("data-deptName"),
b=c(b);g(b)}function g(b){a.ajax({url:b,cache:!0,beforeSend:function(){if(d.data(b)!==q){var a=d.data(b);d.html(a);return!1}d.addClass(m);return!0},complete:function(){d.removeClass(m)},success:function(a){d.data(b,a);d.html(a)}})}function h(a){g(a.data.rwAjaxSizeChartUrl)}b=a("#spinnerContainer");var e=a("#sizeChartSpinnerUrl").attr("data-sizechart-spinner-url");b.css("background-image","url("+e+")");b=b.attr("data-showTab");e=a("#sizeChartHeight").attr("data-height");a(".heightG2S2SizeChartPC").css("height",
e+"px");if("true"===b){var d=a("#tabContent"),k="/gp/product/ajax-handlers/apparel-sizing-chart.html/ref=dp_sizechart?ie=UTF8&isUDP=1&",m="loadingSpinnerSizeChart",p=d.attr("data-asin"),n=d.attr("data-deviceType");b=a("#dataForJs").attr("data-numberOfDepts");if("false"===a("#dataForJs").attr("data-show-department-dropdown"))for(e=0;e<b;e++){var l=a("#dept"+e).attr("data-deptName"),x=a("#dept"+e).attr("data-isActive"),l=c(l);"true"===x&&d.data(l,d.html());a("#dept"+e).click({rwAjaxSizeChartUrl:l},
h)}else a("#sizechart_department_dropdown_native_select").change(f),l=a("#sizechart_department_dropdown_native_select").children(":selected").attr("data-deptName"),l=c(l),d.data(l,d.html())}})});h.when("jQuery","A","cf").execute(function(a,g){function b(){var a=g.viewport().height,b=a-e.heightBuffer;m&&(a/=2,b=a-a*e.popupHeightBufferPercent/100);return Math.min(Math.max(b,e.minHeight),e.maxHeight)}function c(){var c=f.attr("data-header"),q="data-"+h,p=f.attr("href"),n=b(),p={name:"g2s2SizeChartView",
url:p+"&height="+n};m?(c=g.viewport().width*e.widthPercent/100,c=Math.min(Math.max(c,e.minWidth),e.maxWidth),a.extend(p,{width:c.toString(),position:"triggerBottom"})):a.extend(p,{width:"800",header:c});c=JSON.stringify(p);d.attr(q,c)}var f=a("#size-chart-url"),h=f.attr("data-sizeChartActionType"),m="a-popover"===h,e={widthPercent:70,minWidth:300,maxWidth:800,minHeight:300,maxHeight:700,popupHeightBufferPercent:5,heightBuffer:300},d=a("#size-chart-popover");g.on("resize",function(){var c=a("#fit-guide"),
e=b();if(0===c.length){if(0<d.length){var c=d.data(h),f="",n=c.url.split("?"),l=n[0],n=n[1],m="";if(n)for(var n=n.split("&"),q=n.length,t=0;t<q;t++)"height"!==n[t].split("=")[0]&&(f+=m+n[t],m="&");c.url=l+"?"+f+(m+"height="+e);d.data(h,c)}}else g.capabilities.ios||c.height(e)});0<d.length&&c()})});
/* ******** */
(function(a,b,c){a.execute(function(){a.when("A","preventMulticlick:forceFormSubmit","ready").execute(function(a,b){var e=!1,d=function(d){var c=a.$(document);c&&c.delegate(d,"click",function(){var f=a.$(d);if(!f)return!0;if(e)return f.attr("disabled",!0),!1;b(f);e=!0;setTimeout(function(){e=!1;f.attr("disabled",!1)},3E4);return!0})};a.on("mash:willReappear",function(){e=!1});d("#one-click-button");d("#oneClickBuyButton");d("#prime-toggle-main")});a.when("A","ready").register("preventMulticlick:forceFormSubmit",
function(a){return function(a){}})})})(function(){var a=window.AmazonUIPageJS||window.P,b=a._namespace||a.attributeErrors;return b?b("DetailPageOffersMulticlickAssets"):a}(),window);(function(a,b,c){a.execute(function(){})})(function(){var a=window.AmazonUIPageJS||window.P,b=a._namespace||a.attributeErrors;return b?b("DetailPageDesktopOffersAssets"):a}(),window);
/* ******** */
(function(b){var a=window.AmazonUIPageJS||window.P,d=a._namespace||a.attributeErrors,c=d?d("ActionPanelAssets"):a;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,a,d){b.when("A","jQuery","action-panel").register("usedBuyBoxDPv2",function(c,e,a){var d=function(){e("#one-click-button-ubb, #toggleBuyBox #used #add-to-cart-button-ubb").click(function(){e("#addToCart").attr("action",function(c,b){return b.replace("ref=dp_start-bbf_1_glance","ref=dp_start-ubbf_1_glance")});
return!0});b.when("a-popover").execute(function(b){var a=function(a){a.preventDefault();a=e("#usedItemConditionInfoLink");b.create(a,{width:250,position:"triggerBottom",activate:c.capabilities.touch?"onmousemove":"onclick",closeButton:!1,popoverLabel:"Used condition details",name:"usedItemConditionDetailsPopover",dataStrategy:"preload"}).show()};e(document).undelegate("#usedItemConditionInfoLink","click",a);e(document).delegate("#usedItemConditionInfoLink","click",a)})};return{init:function(){d()}}})});
/* ******** */
(function(n){var p=window.AmazonUIPageJS||window.P,x=p._namespace||p.attributeErrors,h=x?x("BuyBackAssets"):p;h.guardFatal?h.guardFatal(n)(h,window):h.execute(function(){n(h,window)})})(function(n,p,x){n.when("A","ready").register("buyback-util",function(h,p){function m(a){var b=a%10;10<=a&&(b+=m(Math.floor(a/10)));return b}var b=h.$;return{hide:function(){for(var a=0;a<arguments.length;a++)b("#"+arguments[a]).removeClass("show").addClass("hide")},show:function(){for(var a=0;a<arguments.length;a++)b("#"+
arguments[a]).removeClass("hide").addClass("show")},hideInline:function(){for(var a=0;a<arguments.length;a++)null!==b("#"+arguments[a])&&b("#"+arguments[a]).addClass("hide")},showInline:function(){for(var a=0;a<arguments.length;a++)null!==b("#"+arguments[a])&&b("#"+arguments[a]).removeClass("hide")},isValidBuyBackIMEI:function(){var a=b("#buyBackIMEITextInput").val(),e=0,c=0;if(15!==a.length||-1!==a.indexOf("."))return!1;a=Number(b("#buyBackIMEITextInput").val());if(isNaN(a))return!1;for(var f=15;1<=
f;f--)c=a%10,0===f%2&&(c*=2),e+=m(c),a=Math.floor(a/10);return 0===e%10?!0:!1},getFormattedPrice:function(a){a=a.toFixed(2);var b="";0<a.indexOf(".")&&(b=a.substring(a.indexOf("."),a.length));var c=Math.floor(a),c=c.toString();a=c.substring(c.length-3);c=c.substring(0,c.length-3);""!==c&&(a=","+a);return c.replace(/\B(?=(\d{2})+(?!\d))/g,",")+a+b},applyBuyBackOffer:function(a){var e=!1,c={type:"post",url:"/gp/product/features/buyback/buyBackDiscountHandler.html?"+b.param({asin:a.asin,category:a.buyBackCategory,
currencyCode:a.currencyCode,postalCode:a.postalCode,sellerId:a.sellerId,categoryIdentifier:a.categoryIdentifier,productPrice:a.buyBoxOfferBuyingPrice,buyBackOfferId:a.selectedBuyBackOfferData.offerId,discountValue:a.selectedBuyBackOfferData.discountPrice}),async:!1,success:function(b){var c;try{c=JSON.parse(b)}catch(h){e=!1}"undefined"!==typeof c&&"SUCCESS"===c.status&&(e=!0,a.totalSponsoredValue=c.sponsoredDiscount)},error:function(){e=!1}};b.ajax(c);return e},updateBestBuyBackOfferForCategory:function(a){var e=
!1,c={type:"post",url:"/gp/product/features/buyback/buyBackOffersForCategory.html?"+b.param({encryptedMarketPlaceId:a.encryptedMarketPlaceId,asin:a.asin,productPrice:a.productPrice,brand:a.brand,subCategoryName:a.subCategoryName,encryptedMerchantId:a.sellerId,postalCode:a.postalCode,buyBackCategory:a.categoryChosen,rbnHierarchyNodes:a.productCategory}),async:!1,success:function(b){var c;try{c=JSON.parse(b)}catch(h){e=!1}"undefined"!==typeof c&&"SERVICE-SUCCESS"===c.status&&(e=!0,a.buyBackExchangeItems=
"",""!==c.BestBuyBackOffer&&null!==c.BestBuyBackOffer&&(b=JSON.parse(c.BestBuyBackOffer),a.buyBackExchangeItems=b.containedBuyBackProductNodes),a.buyBackCategory=c.BuyBackCategory,a.buyBackprompt1Text=c.Option1PromptText,a.buyBackprompt2Text=c.Option2PromptText,a.buyBackprompt3Text=c.Option3PromptText)},error:function(){e=!1}};b.ajax(c);return e},validateBrandAndModelBasedOnIMEI:function(a){a={asin:a.asin,imeiNumber:a.imeiNumber,brand:a.selectedBuyBackOptions[0],model:a.selectedBuyBackOptions[1],
category:a.buyBackCategory.toLowerCase()};var e="FAILED";a={type:"post",url:"/gp/product/features/buyback/verifyIMEIHandler.html?"+b.param(a),async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(h){e="FAILED"}"undefined"!==typeof b&&"SUCCESS"===b.status?e="SUCCESS":"undefined"!==typeof b&&"MISMATCH"===b.status&&(e="MISMATCH")},error:function(){e="FAILED"}};b.ajax(a);return e},setSelectedBuyBackOffer:function(a){var e=!0;b.each(a.buyBackExchangeItems,function(c,f){f.header===a.selectedBuyBackOptions[0]&&
b.each(f.containedBuyBackProductNodes,function(c,f){if(f.header===a.selectedBuyBackOptions[1]){if(""===a.selectedBuyBackOptions[2]&&null!==f.buyBackProductDetails)return a.selectedBuyBackOfferData=f.buyBackProductDetails.buyBackOfferDetailsList[0],e=!1;b.each(f.containedBuyBackProductNodes,function(b,c){if(c.header===a.selectedBuyBackOptions[2]&&null!==c.buyBackProductDetails)return a.selectedBuyBackOfferData=c.buyBackProductDetails.buyBackOfferDetailsList[0],e=!1})}});return e});return e},auiNewPageStateParseLogicBuyBack:function(){var a=
h.parseJSON,e=["buyBackPageState"];h.each(b('script[type="a-state"]'),function(c){c=b(c);if(!c.data("a-eval")){var f=c.attr("data-a-state");if(f&&(f=a(f),f.key&&-1!==b.inArray(f.key,e))){var m=a(c.html());h.state.replace(f.key,m);c.data("a-eval",!0)}}})},getSponsoredDiscount:function(a,e,c,f){var h=0;a={type:"post",url:"/gp/product/features/buyback/buyBackAjaxHandler.html?"+b.param({asin:a.asin,category:a.buyBackCategory,currencyCode:a.currencyCode,postalCode:a.buyBackPostalCode,sellerId:a.sellerId,
categoryIdentifier:a.categoryIdentifier,productPrice:a.buyBoxOfferBuyingPrice,buyBackOfferId:e,discountValue:c,imeiNumber:f}),async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(e){h=0}"undefined"!==typeof b&&"SUCCESS"===b.status&&(h=b.sponsoredDiscount)},error:function(){h=0}};b.ajax(a);return h},getMaxDiagnosticsDiscount:function(a){var e=0;a={type:"post",url:"/gp/product/features/buyback/buyBackDiagnosticOffer.html?"+b.param({sessionId:a.dpSessionId,asin:a.asin,diagnosticRunId:a.imeiNumber,
productPrice:a.buyBoxOfferBuyingPrice}),async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(h){e=0}"undefined"!==typeof b&&"SERVICE-SUCCESS"===b.status&&(e=b)},error:function(){e=0}};b.ajax(a);return e},getModelNameFromModelId:function(a){var e="";a={type:"post",url:"/gp/product/features/buyback/diagnosticMobileModelName.html?"+b.param({mobileModelId:a}),async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(h){e=""}"undefined"!==typeof b&&"SERVICE-SUCCESS"===b.status&&(e=b)},error:function(){e=
""}};b.ajax(a);return e},updateCustomerdata:function(a,e,c,f){var h=!1;a={type:"post",url:"/gp/product/features/buyback/updateBuyBackCustomerDataBySession.html?"+b.param({sessionId:a.dpSessionId,asin:a.asin,buyBackData:e,sponsoredOffers:c,diagnosticOffer:f}),async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(e){h=!1}"undefined"!==typeof b&&"SERVICE-SUCCESS"===b.status&&(h=!0)},error:function(){h=!1}};b.ajax(a);return h}}});n.when("A","a-button","a-dropdown","buyback-util","bbMetric",
"ready").execute(function(h,p,m,b,a){function e(a){var b={inlineContent:d.selectOldProductDetailsToolTipText,position:"triggerBottom"};n.when("A","jQuery").execute(function(d,e){d.declarative.create(e("#"+a),"a-tooltip",b)})}function c(a){n.when("A","jQuery").execute(function(b,d){b.declarative.remove(d("#"+a),"a-tooltip")})}function f(a){""!==a&&null!==m.getSelect(q('[id="'+a+'"]'))&&m.getSelect(q('[id="'+a+'"]')).setValue("")}function y(){var a=h.state("buyBackPageState");q.isEmptyObject(a)||(d.selectOldProductDetailsToolTipText=
a.selectOldProductDetailsToolTipText,d.productCategory=a.buyBackCategory,d.buyBackCategory=a.buyBackCategory,d.enableRefactoring=a.enableRefactoring,d.buyBackprompt1Text=a.buyBackDropDown1prompt,d.buyBackprompt2Text=a.buyBackDropDown2prompt,d.buyBackprompt3Text=a.buyBackDropDown3prompt,d.categoryIdentifier=a.categoryIdentifier,d.buyBackExchangeItems=a.buyBackExchangeItems,d.currencyCode=a.currencyCode,d.buyBackMobile=a.buyBackMobile,d.buyBoxOfferBuyingPrice=Number(a.buyBoxOfferBuyingPrice),d.asin=
a.asin,d.sellerId=a.sellerId,d.brand=a.brand,d.subCategoryName=a.subCategoryName,d.postalCode=a.buyBackPostalCode,d.encryptedMarketPlaceId=a.marketPlaceId,d.productPrice=a.productPrice,d.crossCategoryOfferAvailable=a.crossCategoryOfferAvailable)}function B(){p("#buyBackBuyNowButton").enable();c("buyBackBuyNowToolTip")}function u(){p("#buyBackBuyNowButton").disable();e("buyBackBuyNowToolTip")}function v(g){a.increment("BuyBack:web:discountApply:count");u();a.startTimer("BuyBack:web:ajaxSave");var e=
b.applyBuyBackOffer(d);a.stopTimer("BuyBack:web:ajaxSave");e?(g=d.selectedBuyBackOfferData.discountPrice+d.totalSponsoredValue,q("#buyBackDiscountPrice").text(b.getFormattedPrice(g)),q("#buyBackSponsoredDiscount").text(b.getFormattedPrice(d.totalSponsoredValue)),0<d.totalSponsoredValue?b.show("buyBackSponsoredDiscountText"):b.hide("buyBackSponsoredDiscountText"),b.show("buyBackOfferAppliedSuccess","priceAfterBuyBackDiscountSection","buyBackDetailsVerifyText","buyBackTermsAndConditions"),b.hide("buyBackCollectOldProductDetailsText",
"maxBuyBackDiscountSection","buyBackServiceFailedAlert"),g=b.getFormattedPrice(d.buyBoxOfferBuyingPrice-(d.selectedBuyBackOfferData.discountPrice+d.totalSponsoredValue)),q("#priceAfterBuyBackDiscount").text(g),d.buyBackCategory.toLowerCase()!==d.buyBackMobile.toLowerCase()?B():(b.show("buyBackIMEISection","buyBackVerifyIMEIText"),b.hide("buyBackTermsAndConditions","buyBackIMEIUpdate")),a.increment("BuyBack:web:dataSaveSuccess:count")):(a.increment("BuyBack:web:dataSaveFailed:count"),b.show("buyBackServiceFailedAlert",
"buyBackCollectOldProductDetailsText","maxBuyBackDiscountSection"),b.hide("buyBackDetailsVerifyText","buyBackOfferAppliedSuccess","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackIMEISection"),f(g))}function A(){h.on("a:dropdown:select",function(g){"buyBackDropDown0"===g.name?z():"buyBackDropDown1"===g.name?(a.increment("BuyBack:web:dropDown1Select:count"),b.hide("buyBackSelectDropDown2Alert","buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackDetailsVerifyText",
"buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert"),d.selectedBuyBackOptions[0]=q("#buyBackDropDown1").val(),b.show("buyBackDropDowns2"),q('[id="'+d.previousSelectedBuyBackOptions[0]+'Id"]').removeClass("show").addClass("hide"),q('[id="'+d.selectedBuyBackOptions[0]+'Id"]').removeClass("hide").addClass("show"),"tv"===d.buyBackCategory.toLowerCase()&&b.show("buyBackItemWorkingConditionText"),b.show("buyBackCollectOldProductDetailsText",
"maxBuyBackDiscountSection"),d.categoryChosen.toLowerCase()===d.buyBackMobile?b.hide("buyBackDropDown3"):b.show("buyBackDropDown3"),f(d.previousSelectedBuyBackOptions[0]),""!==d.previousSelectedBuyBackOptions[1]&&(g=d.previousSelectedBuyBackOptions[0]+d.previousSelectedBuyBackOptions[1],q('[id="'+g+'Id"]').removeClass("show").addClass("hide"),f(g)),d.previousSelectedBuyBackOptions[0]=d.selectedBuyBackOptions[0],u()):g.name===q("#buyBackDropDown1").val()?(a.increment("BuyBack:web:dropDown2Select:count"),
d.selectedBuyBackOptions[1]=q('[id="'+d.selectedBuyBackOptions[0]+'"]').val(),u(),d.buyBackCategory.toLowerCase()===d.buyBackMobile.toLowerCase()?(b.hide("buyBackDropDown3","buyBackIMEIMismatchAlert","buyBackValidIMEIAlert","buyBackIMEIUpdateText","buyBackCollectOldProductDetailsText"),b.show("buyBackHowToGetIMEI","buyBackIMEISection","buyBackDetailsVerifyText"),q("#buyBackIMEITextInput").removeClass("a-form-error"),q("#buyBackIMEITextInput").val(""),b.setSelectedBuyBackOffer(d)||v(d.selectedBuyBackOptions[0])):
(b.hide("buyBackOfferAppliedSuccess","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackValidIMEIAlert","buyBackIMEIMismatchAlert","buyBackIMEIUpdateText","buyBackDropDown3"),b.show("buyBackCollectOldProductDetailsText","maxBuyBackDiscountSection","buyBackDropDowns3"),""!==d.previousSelectedBuyBackOptions[1]&&(g=d.previousSelectedBuyBackOptions[0]+d.previousSelectedBuyBackOptions[1],q('[id="'+g+'Id"]').removeClass("show").addClass("hide"),
f(g)),q('[id="'+d.selectedBuyBackOptions[0]+d.selectedBuyBackOptions[1]+'Id"]').removeClass("hide").addClass("show"),d.previousSelectedBuyBackOptions[1]=d.selectedBuyBackOptions[1])):g.name===d.selectedBuyBackOptions[0]+d.selectedBuyBackOptions[1]&&(a.increment("BuyBack:web:dropDown3Select:count"),d.selectedBuyBackOptions[2]=q('[id="'+d.selectedBuyBackOptions[0]+d.selectedBuyBackOptions[1]+'"]').val(),b.setSelectedBuyBackOffer(d)||v(d.selectedBuyBackOptions[0]+d.selectedBuyBackOptions[1]))});q("#buyBackIMEITextInput").bind("change input",
function(){a.increment("BuyBack:web:imeiInput:count");b.hide("buyBackValidIMEIAlert","buyBackIMEIUpdate","buyBackServiceFailedAlert","buyBackTermsAndConditions","buyBackIMEIMismatchAlert");b.show("buyBackHowToGetIMEI","buyBackVerifyIMEIText");q("#buyBackIMEITextInput").removeClass("a-form-error");u()});q("#buyBackApplyButton").unbind("click").click(function(){a.increment("BuyBack:web:apply:count");d.imeiNumber=q("#buyBackIMEITextInput").val();if(b.isValidBuyBackIMEI()){var g=b.validateBrandAndModelBasedOnIMEI(d);
"FAILED"===g?(a.increment("BuyBack:web:imeiServiceFailed:count"),u(),b.show("buyBackServiceFailedAlert","buyBackVerifyIMEIText"),b.hide("buyBackTermsAndConditions","buyBackIMEIMismatchAlert","buyBackValidIMEIAlert","buyBackIMEIUpdate")):"MISMATCH"===g?(a.increment("BuyBack:web:imeiMismatch:count"),u(),q("#buyBackIMEITextInput").addClass("a-form-error"),b.show("buyBackIMEIMismatchAlert","buyBackVerifyIMEIText"),b.hide("buyBackTermsAndConditions","buyBackServiceFailedAlert","buyBackValidIMEIAlert",
"buyBackIMEIUpdate")):"SUCCESS"===g&&(a.increment("BuyBack:web:correctIMEI:count"),b.show("buyBackIMEIUpdate","buyBackTermsAndConditions"),b.hide("buyBackHowToGetIMEI","buyBackVerifyIMEIText","buyBackIMEIMismatchAlert","buyBackValidIMEIAlert","buyBackServiceFailedAlert"),B())}else q("#buyBackIMEITextInput").addClass("a-form-error"),b.hide("buyBackIMEIUpdate","buyBackTermsAndConditions","buyBackServiceFailedAlert"),b.show("buyBackValidIMEIAlert","buyBackHowToGetIMEI","buyBackVerifyIMEIText"),u()})}
function r(a,b,d,e,c){if("undefined"===typeof b)return"";var f="<span class='a-dropdown-container'><select name='"+e+d+"' id='"+e+d+"' tabindex='-1' class='a-native-dropdown a-button-span12 a-spacing-none'><option class='a-prompt' value=''>"+c+"</option>";q.each(b,function(a,b){f=f+"<option value='"+b.header+"'>"+b.header+"</option>"});return f=f+"</select><span tabindex='-1' id='"+e+d+"Id' class='a-button a-button-dropdown a-spacing-none a-button-span12 hide' ><span class='a-button-inner'><span class='a-button-text a-declarative' data-action='a-dropdown-button' role='button' tabindex='0'><span class='a-dropdown-prompt'>"+
c+"</span></span><i class='a-icon a-icon-dropdown'></i></span></span></span>"}function k(){if("undefined"!==typeof d.buyBackExchangeItems){var a="",b="";q.each(d.buyBackExchangeItems,function(e,c){a+=r(e,c.containedBuyBackProductNodes,c.header,"",d.buyBackprompt2Text);var f=c.header;q.each(c.containedBuyBackProductNodes,function(a,g){b+=r(a,g.containedBuyBackProductNodes,g.header,f,d.buyBackprompt3Text)})});q("#buyBackDropDowns2").html(a);q("#buyBackDropDowns3").html(b)}}function w(){if("undefined"!==
typeof d.buyBackExchangeItems&&""!==d.buyBackExchangeItems){m.getSelect("buyBackDropDown1").getOptions().remove();m.getSelect("buyBackDropDown1").addOptions(D(d.buyBackExchangeItems));var a=d.buyBackprompt1Text;m.getSelect("buyBackDropDown1").update({option_prompt:a});n.when("A").execute(function(a){a.$("#buyBackDropDown1Id").show()});b.show("buyBackDropDown1Id","buyBackDropDowns1");k()}}function D(a){var b=[];h.each(a,function(a){b.push({text:a.header,value:a.header})});return b}function z(){h.on("a:dropdown:select",
function(g){"buyBackDropDown0"===g.name&&(a.increment("BuyBack:web:dropDown0Select:count"),a.startTimer("BuyBack:web:getBuyBackCrossCategoryOffers"),b.hide("buyBackSelectDropDown2Alert","buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert","buyBackDropDown3","buyBackValidIMEIAlert","buyBackIMEIUpdate","buyBackMobileWorkingConditionText","mobileExchangeNotAvailableAtPincode",
"buyBackItemWorkingConditionText"),b.show("buyBackCollectOldProductDetailsText","maxBuyBackDiscountSection"),d.categoryChosen=q("#buyBackDropDown0").val(),d.selectedBuyBackOptions=["","",""],d.previousSelectedBuyBackOptions=["",""],g=b.updateBestBuyBackOfferForCategory(d),""===d.buyBackExchangeItems||!1===g?(a.increment("BuyBack:web:crossCategoryOfferNotAvailableStringShown:count"),a.startTimer("BuyBack:web:crossCategoryOfferNotAvailable"),d.buyBackExchangeItems="",b.hide("buyBackDropDowns1","buyBackDropDowns2",
"buyBackDropDowns3","buyBackSelectDropDown2Alert","buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert","buyBackDropDown1Id","buyBackCollectOldProductDetailsText"),b.hide("buyBackCollectOldProductDetailsText"),b.show("mobileExchangeNotAvailableAtPincode"),u(),a.stopTimer("BuyBack:web:crossCategoryOfferNotAvailable")):(d.categoryChosen.toLowerCase()===
d.buyBackMobile&&(b.hide("buyBackDropDown3"),b.show("buyBackMobileWorkingConditionText")),"tv"===d.categoryChosen.toLowerCase()&&b.show("buyBackItemWorkingConditionText"),m.getSelect("buyBackDropDown1").update({option_prompt:d.buyBackprompt1Text}),a.stopTimer("BuyBack:web:getBuyBackCrossCategoryOffers")),""!==d.buyBackExchangeItems&&w())})}var q=h.$,d={selectedBuyBackOptions:["","",""],previousSelectedBuyBackOptions:["",""],imeiNumber:"",totalSponsoredValue:0,enableRefactoring:!1,categoryChosen:"",
productCategoryToDbMapping:{tv:"TV",refrigerator:"Refrigerator",laptop:"Laptop",washingmachine:"WashingMachine",tablet:"Tablet",ac:"AC"},bulkyCategories:["tv","washingmachine","refrigerator","ac"]};h.on("a:accordion:buybackAccordion:withExchangeOffer-accordion:select",function(g){q=h.$;g=document.getElementById("buyBackDropDown0");var e=d.crossCategoryOfferAvailable;y();var c=q("#isSlotsAvailable").attr("value");-1<d.bulkyCategories.indexOf(d.buyBackCategory.toLowerCase())&&c!==x&&"false"===c?(a.increment("BuyBack:web:hnbFaddBuyBackSuppression:count"),
a.startTimer("BuyBack:web:hnbFaddBuyBackSuppression"),q("#buyBackDropDowns3").parent().addClass("aok-hidden"),q("#buyBackDropDown0").parent().parent().addClass("aok-hidden"),b.hide("maxBuyBackDiscountSection","buyBackDropDowns1","buyBackDropDowns2","buyBackDropDowns3","buyBackSelectDropDown2Alert","buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert",
"buyBackDropDown1Id","buyBackCollectOldProductDetailsText"),b.show("mobileExchangeNotAvailableAtPincode"),p("#buyBackBuyNowButton").disable(),a.stopTimer("BuyBack:web:hnbFaddBuyBackSuppression")):e!==x&&null!==g&&"false"===d.crossCategoryOfferAvailable&&(a.increment("BuyBack:web:mobileOffersNotAvailable:count"),d.productCategory.toLowerCase()!==d.categoryChosen.toLowerCase()&&(d.buybackCategory=d.productCategory,d.categoryChosen=d.productCategoryToDbMapping[d.productCategory],b.updateBestBuyBackOfferForCategory(d),
k()),b.hide("buyBackDropDowns0SectionId","buyBackDropDown0Id","buyBackDropDown0","mobileExchangeNotAvailableAtPincode","buyBackIMEISection"),b.show("buyBackDropDown1","buyBackDropDown1Id","buyBackDropDowns1"))});h.on("a:pageUpdate",function(){b.auiNewPageStateParseLogicBuyBack();y();z();d.enableRefactoring&&k();A()});(function(){var a=q("#buyBackDropDown0").val();"undefined"!==typeof a&&""!==a&&f("buyBackDropDown0");a=q("#buyBackDropDown1").val();if("undefined"!==typeof a&&""!==a){var b=q('[id="'+
a+'"]').val();f("buyBackDropDown1");"undefined"!==typeof b&&""!==b&&(f(a),f(a+b))}})();y();z();d.enableRefactoring&&k();A()});n.when("A","ready").register("bbMetric",function(h){var n=p.ue,m={};return{increment:function(b){"undefined"!==typeof n&&"undefined"!==typeof n.count&&b&&n.count(b,(n.count(b)||0)+1)},stopTimer:function(b){"function"===typeof p.uet&&m.hasOwnProperty(b)&&(delete m[b],p.uet("be",b,{wb:1}),p.uex("ld",b,{wb:1}))},startTimer:function(b){"function"!==typeof p.uet||m.hasOwnProperty(b)||
(m[b]=1,p.uet("bb",b,{wb:1}))}}})});
/* ******** */
(function(H){var r=window.AmazonUIPageJS||window.P,q=r._namespace||r.attributeErrors,I=q?q("SDCXDetailPageAssets"):r;I.guardFatal?I.guardFatal(H)(I,window):I.execute(function(){H(I,window)})})(function(H,r,q){H.when("A","jQuery").execute(function(I,y){function L(a){L.prototype.popoverRangeDisplay=function(d,c){var b=[];b.push(d.getUTCDate(),"&nbsp;",a[d.getUTCMonth()].substr(0,3),"&nbsp;",d.getUTCFullYear());b.push(" - ");b.push(c.getUTCDate(),"&nbsp;",a[c.getUTCMonth()].substr(0,3),"&nbsp;",c.getUTCFullYear());
return b.join("")};L.prototype.timeRangeDisplay=function(a,c){return a+" - <br/>"+c}}function z(a,d){a="__"+a;d=d&&u.isDebugEnabled();return function(c){function b(a,b,c,g){a[b]&&g||(a[b]=c,d&&u.debug("     key "+b+" = "+c))}this[a]||(this[a]={});if(c.data)for(var g in c.data)c.data.hasOwnProperty(g)&&b(this[a],g,c.data[g],c.optional);else if(c.key)if(c.value!==q)b(this[a],c.key,c.value,c.optional);else return this[a][c.key]}}function J(a,d,c,b){b='<option value="';a&&(b+=a);b+='"';c&&(b+='selected="selected" ');
b+='><span class="sd-timeslot-rowindex-date">';d&&(b+=d);b+="</span>";return b+="</option>"}function M(a){var d=["__",a,"Fn"].join("");return function(a){var b;a.register&&a.fn&&(this[d]||(this[d]=[]),this[d][a.register]=a.fn);if(a.nil&&this[d])for(b in this[d])if(this[d].hasOwnProperty(b))this[d][b]();if(a.arg&&this[d])for(b in this[d])if(this[d].hasOwnProperty(b))this[d][b](a.arg)}}function D(a,d){var c="__dom"+d+"_"+a,b="__dom_cached"+d+"_"+a;return function(){if(this[b]){if(this[c])return this[c]}else{this[b]=
!0;var g=this.config({key:a});g||r.console&&r.console.firebug&&console.warn(["no",d,a,"configured"].join(" "));if(g=SDFramework.jq("#"+g))return this[c]=g;r.console&&r.console.firebug&&console.warn(["no",d,"DOM element found"].join(" "))}}}function R(a){var d={};d.config=z("region_config");a&&d.config(a);d.add=function(a){a&&(this.__regions=a)};d.load=function(a){this.__loadedRegions||(this.__loadedRegions=!0,this.__regions?this._insert(a)(this.__regions):this._ajaxLoad(a))};d.pick=function(a){return function(){var b=
SDFramework.jq(["#",this.id," option:selected"].join("")).val();a.config({key:"region",value:b});a.selectCalendar()}};d._insert=function(a){var b=this;return function(d,h){b.__regions=d;var e="";b.config({key:"str_selectRegion"})&&(e=J("",b.config({key:"str_selectRegion"}),!0));var n=!1,m;for(m in d)d[m].oK&&d[m].oV&&(n=!0,e+=J(d[m].oK,d[m].oV,!1));b._loading(!1);if(m=(m=b.config({key:"dom_regionList"}))?SDFramework.jq("#"+m):0)n?(m.html(e).attr("disabled",!1),m.change(b.pick(a)),m.focus(b.pick(a))):
(m.attr("disabled",!0),(e=b.config({key:"str_noRegions"}))&&m.html(J("",e,!0)))}};d._ajaxLoad=function(a){var b=this._insert(a);a={merchant:a.config({key:"id_merchant"}),marketplace:a.config({key:"id_marketplace"}),ASIN:a.config({key:"id_asin"}),SKU:a.config({key:"id_sku"}),FMID:a.config({key:"id_fmid"}),regionRequest:1};if(this.config({key:"load_url"})){this._loading(!0);var d=SDFramework.jq.getJSON(this.config({key:"load_url"}),a,b);SDFramework.jq().ajaxError(function(){return function(a,e,c){e===
d&&b()}}())}else b()};d._loading=function(a){var b=this.config({key:"dom_regionLoading"});(b=b?SDFramework.jq("#"+b):0)&&b.css("display",a?"inline":"none");this.config({key:"dom_regionList"})&&SDFramework.jq("#"+this.config({key:"dom_regionList"})).css("display",a?"none":"inline")};return d}function S(a,d,c){var b={pickenabled:0,clickenabled:0};b.config=z("zipcode");a&&b.config(a);b._zi=D("dom_zipInput","zipcode");b.enable=function(a){this._zi()&&!this.pickenabled&&(this._zi().unbind("keyup"),this._zi().bind("keyup",
this.pick(a)),this._zi().bind("keypress",function(a){if(13==a.keyCode)return a.preventDefault(),a.stopPropagation(),!1}),this.pickenabled=1,this._zi().unbind("focus"),this._zi().bind("focus",this.focus(a)),this._zi().unbind("blur"),this._zi().bind("blur",this.blur(a)));var b=this.config({key:"dom_zipGo"});b&&(b=SDFramework.jq("#"+b))&&!this.clickenabled&&(b.bind("click",this.click(a)),this.clickenabled=1)};b.click=function(a){var b=this,e=this._zi();return function(){b.select(e.val(),a,!0,b.config({key:"postal_code_length"}));
return!1}};b.focus=function(a){var b=this;this._zi();return function(a){a=b.config({key:"dom_zipDefaultClass"});var c="#"+b.config({key:"dom_zipInput"}),d="#"+b.config({key:"dom_zipValue"}),f="#"+b.config({key:"dom_zipLabel"});y(c+"."+a).size();d=y(d).html();y(c).val(d);y(c).removeClass(a);y(f).hide()}};b.blur=function(a){var b=this;this._zi();return function(a){a="#"+b.config({key:"dom_zipInput"});var c="#"+b.config({key:"dom_zipEmpty"}),d=b.config({key:"dom_zipDefaultClass"}),f="#"+b.config({key:"dom_zipLabel"});
""===y(a).val()&&(c=y(c).html(),y(a).addClass(d),y(a).val(c),y(f).html(c),y(f).show())}};b.selectCallback=function(a,b){this.selectTimer=q;a.config({key:"zipcode",value:b});a.selectCalendar()};b.invalidate=function(a,b){var e=this;this.selectTimer&&clearTimeout(this.selectTimer);this.selectTimer=setTimeout(function(){e.selectCallback(a,b)},500)};b.select=function(a,b,e){this&&(this._enter_err&&this._enter_err().css("display","none"),this._valid_err&&this._valid_err().css("display","none"));var c=
"#"+this.config({key:"dom_zipValue"});y(c).html(a);(c=this.is_valid_zip_code(a,this.config({key:"postal_code_length"})))?e&&(this[c]().css("display","block"),b.config({key:"zipcode",value:q}),b.unselectCalendar()):this.invalidate(b,a)};b.pick=function(a){var b=this;return function(e){if(this){var d=SDFramework.jq(this).val(),m="#"+b.config({key:"dom_zipPrefix"}),f="#"+b.config({key:"dom_zipEmpty"}),t="#"+b.config({key:"dom_zipValue"}),m=SDFramework.jq(m).html(),f=SDFramework.jq(f).html();e=y(t).html()!=
d||13==e.keyCode;d&&(d=SDFramework.jq.trim(d.replace(m,"")),d=SDFramework.jq.trim(d.replace(f,"")));c&&e&&b.select(d,a,!0,6)}}};b.validate_zipcode=function(a,b,e){function c(a,b){a||(a="");if(!f.config({key:"postal_format"}).test(a))return"_valid_err"}function d(a){if(!a)return"_enter_err"}var f=this;return 1<a?c:d};b._enter_err=D("dom_zipEntError","entererror");b._valid_err=D("dom_zipValError","validerror");b.is_valid_zip_code=b.validate_zipcode(d,b._enter_err,b._valid_err);return b}function T(a){function d(a,
c,d){function e(a){var b=a.inputs;b&&b.clearSlotFields();if(b=a.message)b.clear(),b.parent&&b.parent()&&b.parent().hide();a.shoppingCart&&a.__setCanPlaceSdOrder(!1);(a=a.cutoff)&&a.enable(!1)}function n(a){var b={};a!==q&&a.today!==q&&a.c_m_id!==q&&a.tmr_m!==q&&a.tmr_d!==q?(b.today_m=a.c_m_id,b.today_d=a.today,b.tmr_m=a.tmr_m,b.tmr_d=a.tmr_d):(a=new Date,b.today_m=a.getMonth(),b.today_d=a.getDate(),a=new Date(a.getTime()+864E5),b.tmr_m=a.getMonth(),b.tmr_d=a.getDate());return b}return function(m){if(m)if(c.hasRes(m,
d)){var f=c.getRes(m,d);if(f)if(SDUtils.isEmptyObject(f))e(a);else{var t=a.inputs;t&&t.updateSlotFields(f);if(t=a.message){var k=0,p=a.config({key:"sd_calendar"}),x=a.config({key:"id_offerlist_id"});calID=a.zipcode?"Z:"+a.config({key:"zipcode"})+"\nO:"+x:"R:1\nO:"+x;var x=p.calData.getCal(calID),G,C;for(C in x.days)if(x.days.hasOwnProperty(C)){var v=x.days[C];v[0]===m&&(G=v[1])}(m=a.message.config({key:"timeslotDeterminationFn"}))&&m(x)&&(k=1,t.serviceCharges=x.serviceCharges);m=p.config({key:"dateDisplay"});
t.serviceDisplay=x.serviceDisplay;t.update(f.ultStart,f.ultEnd,k,f,G,m,n(x))}G=a.cutoff;f=f.ultCutoff;G&&f?G.hasTimeLeft(f)?(G.update(f),a.__setCanPlaceSdOrder(!0)):(G.enable(!0,!0),a.__setCanPlaceSdOrder(!1)):a.__setCanPlaceSdOrder(!0)}else e(a)}else e(a);else e(a)}}var c={};c.config=z("config");c.shoppingCart=new N.AddToCartWrapper;c.oneClick=new N.OneClickWrapper;c.cutoff=null;c.inputs=new ScheduledDelivery.Data.FormPersistence;c.checkbox=new ScheduledDelivery.BuyBox.SDIntentCheckbox;c.slotInput=
new ScheduledDelivery.BuyBox.SlotStorage(a?a.slotInputClass:"sd_slot_input",a?a.widgetRoot:"sd_div");c.initMessage=function(){this.message=P();this.message.showDropdown=0;this.message.showServices=1};c.noSlotNotSureMessagePresent=!1;c.noSlotUnknownMessagePresent=!1;c.unselectCalendar=function(){var a=this.config({key:"sd_calendar"});a&&(a.deactivateCalendar(),this.onCalendarUnselected())};c.onCalendarUnselected=function(){this.message&&this.message.clear();this.cutoff&&this.cutoff.hasOwnProperty("enable")&&
this.cutoff.enable(!1);var a=this.config({key:"sd_calendar"});a&&(a=a.active,this.slotInput.storeSlotInput(a),this.slotInput.clearSlotInput(a));this.shoppingCart&&this.shoppingCart.hasOwnProperty("enable")&&this.checkbox.isChecked()&&this.__setCanPlaceSdOrder(!1)};c.__setCanPlaceSdOrder=function(a){this.checkbox&&this.checkbox.exists()&&this.checkbox.isChecked()&&this.shoppingCart&&this.shoppingCart.enable(a)};c.selectCalendar=function(){var a=this.config({key:"sd_calendar"});if(a)if(this.config({key:"id_offerlist_id"})===
q||this.zipcode&&this.config({key:"zipcode"})===q)a.calendar();else if(this.config({key:"id_address"})!==q||"A1PA6795UKMFR9"!==this.config({key:"id_marketplace"})&&this.config({key:"zipcode"})!==q){var c=this.config({key:"shipoption"})||0,h=this.config({key:"id_offerlist_id"}),c={merchant:this.config({key:"id_merchant"}),marketplace:this.config({key:"id_marketplace"}),asin:this.config({key:"id_asin"}),quantity:this.config({key:"id_quantity"})?this.config({key:"id_quantity"}):1,SKU:this.config({key:"id_sku"}),
FMID:this.config({key:"id_fmid"}),offerListingID:h,shipoption:c};if(this.zipcode){var e=this.config({key:"zipcode"});c.id="Z:"+e+"\nO:"+h;1===this.config({key:"isAFN"})&&this.config({key:"id_address"})?c.address=this.config({key:"id_address"}):(c.zipcode=e,c.address=e)}else c.id="R:1\nO:"+h,c.region=1;(h=a.config({key:"load_url"}))||(h="/gp/product/features/scheduled-delivery/get-slots-json.html?powerbar=0");a.config({key:"load_url",value:h});a.config({key:"load_payload",value:c});a.selectCalled({register:"buyboxUI",
fn:d(this,a,c.id)});a.calendar(c.id)}else a.buyboxNoAddrMessage(),a.calendar()};c.initializeDOM=function(a){function c(a){var b=a.config({key:"sd_calendar"}),d=a.slotInput.repopulateSlotInput(b.active),f=a.config({key:"dom_mainElement"}),h=a.config({key:"dom_notSureError"}),k=a.config({key:"dom_unknownError"}),p=a.config({key:"isAFN"});f&&(SDFramework.jq("#"+f).show(),(f=a.shoppingCart)&&a.checkbox&&a.checkbox.exists()&&a.checkbox.isChecked()&&f.enable(d),(d=a.cutoff)&&d.enable(!1),(d=a.oneClick)&&
d.enable(!1),a.regions&&(a.regions.config({key:"load_url",value:"jurisdictions.json"}),a.regions.load(a),a.regions.pick(a)),a.zipcode&&(a.zipcode.enable(a),SDFramework.jq("#sd_zipcode_go").click(),(d=a.config({key:"dom_zipInput"}))&&SDFramework.jq("#"+d).keyup()),b.popup&&b.popup.logClientSideMetrics&&b.popup.logClientSideMetrics(b.popup.clientSideMetrics.selectSD));1===p&&a.noSlotNotSureMessagePresent&&h&&SDFramework.jq("#"+h).show();1===p&&a.noSlotUnknownMessagePresent&&k&&SDFramework.jq("#"+k).show()}
function d(a){var b=a.config({key:"dom_mainElement"}),c=a.config({key:"dom_notSureError"}),f=a.config({key:"dom_unknownError"});b&&(SDFramework.jq("#"+b).hide(),a.shoppingCart&&a.shoppingCart.enable(!0),a.oneClick&&a.oneClick.enable(!0));c&&(a.noSlotNotSureMessagePresent=SDFramework.jq("#"+c).is(":visible"),SDFramework.jq("#"+c).hide());f&&(a.noSlotUnknownMessagePresent=SDFramework.jq("#"+f).is(":visible"),SDFramework.jq("#"+f).hide());b=a.config({key:"sd_calendar"});c=b.active;b.popup&&b.popup.logClientSideMetrics&&
b.popup.logClientSideMetrics(b.popup.clientSideMetrics.unselectSD);a.slotInput.storeSlotInput(c);a.slotInput.clearSlotInput(c)}return function(){var e=a.checkbox;e&&(e.exists()&&!e.isChecked()||c(a),e.bindDOM(),e.onCheck.handlers.add(function(){c(a)}),e.onClear.handlers.add(function(){d(a)}),e.setChecked(!1),e.exists()&&d(a))}}(c);return c}function U(){function a(a,b){if(!a||0===a.length)return 0;a=a.get(0);var d=SDFramework.jq.data(a,"mutex");return b?d?d+1:1:d&&0<d?d-1:0}var d={};d.config=z("continue");
d.enable=function(c){var b=this.config({key:"enabledButton"}),d=this.config({key:"disabledButton"}),b=b?SDFramework.jq("input[name="+b+"]"):null,d=d?SDFramework.jq("#"+d):null;c?a(d,0)||(b&&0<b.length&&b.css("display","block"),d&&0<d.length&&d.css("display","none")):(d&&0<d.length&&(a(d,1),d.css("display","block")),b&&0<b.length&&b.css("display","none"))};return d}function P(){var a={};a.config=z("message");a._dom_container=D("element_container","message");a._dom=D("element","message");a._dom_service=
D("element_service","message");a.clear=function(){this._dom()&&(this._dom().html(""),this._dom_container().hide());this._dom_service()&&this._dom_service().html("")};a.hide=function(){this._dom()&&(this._dom().hide(),this._dom().parent().hide());this._dom_service()&&(this._dom_service().hide(),this._dom_service().parent().hide())};a.show=function(){this._dom()&&(this._dom_container().show(),this._dom().show());this._dom_service()&&(this._dom_container().show(),this._dom_service().show())};a.update=
function(a,c,b,g,h,e,n){if(a||c)if(a&&c||(b=!1),this._dom()){var m=a?b?this.dateDisplay.slotDisplayDateFn(new Date(1E3*a)):this.dateDisplay.displayDateFn(new Date(1E3*a)):null;e=c?b?this.dateDisplay.slotDisplayDateFn(new Date(1E3*c)):this.dateDisplay.displayDateFn(new Date(1E3*c)):null;b&&g&&(m="&nbsp;"+g.localStartTime,e=g.localEndTime+" "+this.dateDisplay.displayDateFn(new Date(1E3*c)));c=b?this.config({key:"str_slot"}):this.config({key:"str_date"});b&&g?(b=new Date(1E3*a),b.getUTCDay(),(c=0===
this.showDropdown&&this.config({key:"sd_item_delivery_message"})!==q?this.config({key:"sd_item_delivery_message"}):this.config({key:"str_slot_message"}))||(c=""),0===this.showDropdown&&(e="",n&&b.getUTCMonth()===n.today_m&&b.getUTCDate()===n.today_d?e=this.config({key:"sd_today"})+",":n&&b.getUTCMonth()===n.tmr_m&&b.getUTCDate()===n.tmr_d&&(e=this.config({key:"sd_tomorrow"})+","),c=c.replace("%dot",e)),c=c.replace("%dts",g.localStartTime),c=c.replace("%dday",""),c=c.replace("%dte",g.localEndTime),
c=c.replace("%dd",h)):(h=c,n=(n=m)?n:"",e=e?e:"",b=b?[n,"-",e].join(" "):""!==n?n:e,c=h+b);this._dom().html(c);this._dom().parent().show();0===this.showDropdown&&this.updateServiceMessage(this.getServices(g.reservationId));1===this.showServices&&this.showAvailableServices()}else r.console&&r.console.firebug&&r.console.warn("No message element available");else r.console&&r.console.firebug&&r.console.log("message update called with no start or end"),this.clear()};a.showAvailableServices=function(){this._dom_service().parent().hide();
if(this.serviceCharges!==q&&null!==this.serviceCharges&&!SDUtils.isEmptyObject(this.serviceCharges)){var a="",c;for(c in this.serviceCharges)if(this.serviceCharges.hasOwnProperty(c)){if(-1===c.indexOf(":"))msg_str=this.serviceDisplay[c].services===q?this.serviceDisplay[c].serviceDisplay:this.serviceDisplay[c].services.OLD.serviceDisplay;else{var b=c.split(":");msg_str=this.serviceDisplay[b[0]].services[b[1]].serviceDisplay}msg_str=msg_str.replace("%formattag_start",'<li class="sd_bb_services">');
msg_str=msg_str.replace("%formattag_end","</li>");msg_str=msg_str.replace("%formatCost_start",'<span class="a-color-price">');msg_str=msg_str.replace("%formatCost_end","</span>");msg_str=msg_str.replace("%service_cost",this.serviceCharges[c]);a+=msg_str}this._dom_service().html(a);this._dom_service().parent().show()}};a.updateServiceMessage=function(a){this._dom_service().parent().hide();var c=this.config({key:"sd_item_delivery_service_message"});if(!(null===a||1>a.length||c===q)){for(var b="",g=
0;g<a.length;g++)if(-1===a[g].indexOf(":"))b=this.serviceDisplay[a[g]].services===q?b+"<br> - "+this.serviceDisplay[a[g]].serviceAbbr:b+"<br> - "+this.serviceDisplay[a[g]].services.OLD.serviceAbbr;else var h=a[g].split(":"),b=b+"<br> - "+this.serviceDisplay[h[0]].services[h[1]].serviceAbbr;c=c.replace("%services",b);this._dom_service().html(c);this._dom_service().parent().show()}};a.getServices=function(a){if(null===a||a===q)return null;a=a.split(";");if(4>a.length||1>a[3].length)return null;a=a[3].split("^");
for(var c=[],b=0;b<a.length;b++)if(-1!==a[b].indexOf(":"))for(var g=a[b].split(":")[1],h=0;h<g.length;h++)c.push(a[b].charAt(0).toUpperCase()+":"+g.charAt(h));else for(g=a[b].split(""),h=0;h<g.length;h++)this.serviceDisplay[g[h].toUpperCase()]!==q&&c.push(g[h].toUpperCase());return c};return a}function V(a){function d(a){var b=a.inputs;b&&b.clearSlotFields();if(b=a.message)b.clear(),b.parent&&b.parent()&&b.parent().hide();(a=a.cbutton)&&a.enable(0)}function c(a){var b=r.console;b&&b.firebug&&b.warn(a)}
function b(a){var b={};a!==q&&a.today!==q&&a.c_m_id!==q&&a.tmr_m!==q&&a.tmr_d!==q?(b.today_m=a.c_m_id,b.today_d=a.today,b.tmr_m=a.tmr_m,b.tmr_d=a.tmr_d):(a=new Date,b.today_m=a.getMonth(),b.today_d=a.getDate(),a=new Date(a.getTime()+864E5),b.tmr_m=a.getMonth(),b.tmr_d=a.getDate());return b}function g(a,e,h){return function(k){if(k&&!k.nil)if(e.hasRes(k,h)){var p=e.getRes(k,h);SDUtils.isEmptyObject(p)&&(d(a),c("No reservation selected for "+k));var g=a.inputs;g&&g.updateSlotFields(p);if(g=a.message){var n=
0,C=a.config({key:"sd_calendar"}),v=C.calData.getCal(404),q=a.message.config({key:"timeslotDeterminationFn"});q&&q(v)&&(n=1);var A,l;for(l in v.days)v.days.hasOwnProperty(l)&&(q=v.days[l],q[0]===k&&(A=q[1]));k=C.config({key:"dateDisplay"});g.serviceDisplay=v.serviceDisplay;g.update(p.ultStart,p.ultEnd,n,p,A,k,b(v))}(p=a.cbutton)&&p.enable(1)}else d(a),c("Time UI time")}}function h(a,b){if(b){var e=b.config({key:"sd_calendar"});if(e)if(a){var c;if(ScheduledDelivery.Debug.forceNoSlots)c={};else{c=b.config({key:"id_merchant"});
var d=b.config({key:"id_marketplace"}),h=b.config({key:"id_request"}),n=b.config({key:"id_asin"}),C=b.config({key:"id_sku"}),v=b.config({key:"id_fmid"}),q=b.config({key:"id_quantity"}),A=b.config({key:"id_offerlist_id"}),l=b.config({key:"id_address"}),w=b.config({key:"id_itemList_id"}),r=b.config({key:"id_shipoption"}),u;u=y.browser;if(null===u)u="";else{var z="unknown";u.mozilla?z="mozilla":u.msie?z="msie":u.webkit?z="webkit":u.safari?z="safari":u.opera&&(z="opera");u=z+":"+u.version}c={merchant:c,
marketplace:d,requestId:h,asin:n,sku:C,FMID:v,quantity:q,offerListingID:A,address:l,itemListId:w,shipoption:r,browserType:u,templateSlotID:b.config({key:"id_template_slot"}),ie:"UTF8"}}e.config({key:"load_payload",value:c});(c=e.config({key:"load_url"}))||(c="/gp/product/features/scheduled-delivery/get-slots-json.html?powerbar=0");e.config({key:"load_url",value:c});e.calData.clearCals();e.calendar(404);e.selectCalled({register:"shipoptionUI",fn:g(b,e,404)})}else e.calendar()}}function e(a){return function(){var b=
a.config({key:"id_is_selected"});h(0,a);b&&h(1,a)}}var n={};n.config=z("config");n.inputs=new ScheduledDelivery.Data.FormPersistence;n.message=P();n.cbutton=U();a?y("body").bind(a,e(n)):r.console&&console.warn("Unable to bind load fn to dom element.");return n}function W(){function a(){}function d(a){var d,h,e;h=0;e='<table id="sd-timeslot"><thead>';h='<tr><td colspan="9"><table class="sd-legend"><tr class="sd-legend"><td><table><tr>';h+='<td class="sd-timeslot-weekday-date-small">&nbsp;</td><td><span class"sd-legend">'+
c.config({key:"not_available_key"})+"</span></td>";h+="</tr></table></td>";h+="<td><table><tr>";h+='<td class="sd-timeslot-highlight-date-small">&nbsp;</td><td><span class"sd-legend">'+c.config({key:"available_key"})+"</span></td>";h+="</tr></table></td>";h+="<td><table><tr>";h+='<td class="sd-timeslot-selected-date-small">&nbsp;</td><td><span class"sd-legend">'+c.config({key:"selected_key"})+"</span></td>";h+="</tr></table></td>";h+="</tr></table></td></tr>";e+=h;var n=a.ids;h=new Date;var m=new Date(3E3,
0,1);for(d in n)n.hasOwnProperty(d)&&(new Date(1E3*n[d].su)<m&&(m=new Date(1E3*n[d].su)),new Date(1E3*n[d].eu)>h&&(h=new Date(1E3*n[d].eu)));d=m;e+='<tr class="sd-timeslot-scroll-title">';e+='<th><span class="sd-timeslot-scroll-title">'+c.config({key:"months"})[a.c_m_id]+" "+d.getUTCFullYear()+"</span></th>";e+='<th><span class="sd-timeslot-scroll-title">'+c.config({key:"months"})[a.n_m_id]+" "+h.getUTCFullYear()+"</span></th>";e+="</tr>";e+="</thead>";e+="<tbody>";e+="<tr>";e+='<td valign="top">';
e+='<div id="sdcal-curr-month">';e+='<table class="sdcal-table" cellpadding="0" cellspacing="0" width=224px style="table-layout: fixed;">';for(h=0;7>h;h++)e+='<col width="32px"/>';e+='<thead class="sdcal-head">';e+="<tr>";for(h=0;7>h;h++)e+='<td class="sd-timeslot-index-date">'+c.config({key:"days"})[h]+"</td>";e+="</tr>";e+="</thead>";e+="<tbody>";e+="</tbody>";e+="</table>";e+="</div> \x3c!-- sdcal-curr-month --\x3e";e+="</td>";e+='<td valign="top">';e+='<div id="sdcal-next-month" style="float:right;">';
e+='<table class="sdcal-table" cellpadding="0" cellspacing="0" width=224px style="table-layout: fixed;">';for(h=0;7>h;h++)e+='<col width="32px"/>';e+='<thead class="sdcal-head">';e+="<tr>";for(h=0;7>h;h++)e+='<td class="sd-timeslot-index-date">'+c.config({key:"days"})[h]+"</td>";e+="</tr>";e+="</thead>";e+="<tbody>";e+="</tbody>";e+="</table>";e+="</div> \x3c!-- sdcal-next-month --\x3e";e+="</td>";e+="</tr>";return e+="</table>"}var c={};c.config=z("config");c._dom=D("element","popup");c.popupInitialized=
!1;c.popupContent=[];c.enable=function(a){a?(a=this.config({key:"linkId"}),a=SDFramework.jq("#"+a),a.show()):((a=this._dom())&&a.hide(),a=this.config({key:"linkId"}),a=SDFramework.jq("#"+a),a.hide())};c.onSelect=function(){var a=this.config({key:"available"}),c=this.config({key:"element"});SDFramework.jq("#"+c+" ."+a).click(function(a){return function(){var b=SDFramework.jq(this).attr("id"),b=a._dateId({parse:b});a.select(b);b?a.selectCalled({arg:b}):a.selectCalled({nil:!0})}}(this))};c.click=function(){return function(){}};
c.setup=function(b){function g(a){var b=Math.ceil((a.c_m_len+a.c_m_delta)/7);a=Math.ceil((a.n_m_len+(a.c_m_delta+a.c_m_len)%7)/7);return Math.max(b,a)}function h(a,b){var e=["c_m_len","c_m_delta","n_m_len"],c;for(c in e)if(e.hasOwnProperty(c)){if(!a.hasOwnProperty(e[c]))return["No",c,"data value"].join(" ");if(0>a[e[c]])return["Negative",c,"data value",e[c]].join(" ")}e=["next_month_id","current_month_id"];for(c in e)if(!b.config({key:e[c]}))return["No",e[c],"configured"].join(" ")}function e(a,b,
e){function c(a,b){if(1>a||a>f)return SDFramework.jq("<td>&nbsp;</td>").addClass(b.config({key:"notaday"}));var e=SDFramework.jq("<td>"+a+"</td>");e.addClass(b.config({key:"day"}));e.addClass(b.config({key:"notavailable"}));e.attr("id",b._dateId({date:a+h}));return e}var d,f,h;e?(d=b.config({key:"next_month_id"}),f=a.n_m_len,h=a.c_m_len,e=(a.c_m_delta+a.c_m_len)%7):(d=b.config({key:"current_month_id"}),f=a.c_m_len,h=0,e=a.c_m_delta);d=["#",b.config({key:"element"})," #",d," table.sdcal-table tbody"].join("");
a=g(a);d=SDFramework.jq(d);d.html("");for(var m=0;m<a;++m){for(var n=SDFramework.jq("<tr></tr>"),l=1;7>=l;++l)n.append(c(7*m+l-e,b));d.append(n)}}if(this._dom()){if(!this.popupInitialized){var n=this.config({key:"linkId"}),m=SDFramework.jq("#"+n);this.popupInitialized=!0}if(n=h(b,this))r.console&&r.console.firebug&&console.warn("Invalid data: "+n);else{var f=this.config({key:"element"}),n=SDFramework.jq("#"+f);n[0]?n[0].innerHTML=d(b):r.console&&r.console.firebug&&console.warn("No "+f+" element");
e(b,this,0);e(b,this,1);b.today&&this.config({key:"today"})&&SDFramework.jq(this._dateId({id:b.today})).addClass(this.config({key:"today"}));H.when("jQuery","legacy-popover").execute(function(b){m.removeAmazonPopoverTrigger();m.amazonPopoverTrigger({width:540,location:["left","bottom","right"],locationAlign:"middle",localContent:"#"+f,title:'<span class="sd-timeslot-calendar-title">'+c.config({key:"popup_date_title"})+"</span>",modal:!0,semiStatic:!0,onHide:a,draggable:!0,closeText:c.config({key:"closeText"}),
closeEventInclude:["CLICK_OUTSIDE","CLICK_TRIGGER"]})})}}};c._dateId=function(a){if(this.config({key:"prefix"})){if(a.parse)return a.parse.split("-").pop();if(a.date)return[this.config({key:"prefix"}),a.date].join("-");if(a.id){var c=this.config({key:"element"});c&&(c=["#",c," "].join(""));a=[this.config({key:"prefix"}),a.id].join("-");return c+"#"+a}}};c.add=function(a){a=SDFramework.jq(this._dateId({id:a}));a.removeClass(this.config({key:"notavailable"}));a.addClass(this.config({key:"available"}))};
c.selectCalled=M("select");c.select=function(a){var c=this.config({key:"current_month_id"}),d=this.config({key:"next_month_id"}),e=this.config({key:"selected"}),n=this.config({key:"element"}),c=["#",n," #",c," .",e].join(""),d=["#",n," #",d," .",e].join(""),n=SDFramework.jq(c),d=SDFramework.jq(d);n.removeClass(e);d.removeClass(e);a&&(a=this._dateId({id:a}),SDFramework.jq(a).addClass(e))};return c}function X(){function a(a){return function(){var b=SDFramework.jq(["select#",this.id," option:selected"].join(""));
b.val()?a.selectCalled({arg:b.val()}):a.selectCalled({nil:!0})}}var d={};d.config=z("config");d._dom=D("element","dropdrown");d.__slots=[];d.__slotIds={};d.enable=function(c){if(this._dom()){var b=this.config({key:"str_disable"});c?(b&&this.make(),this._dom().attr("disabled",!1),a(this)()):(this._dom().attr("disabled",!0),b&&this._dom().html(J("",b,!0)))}else r.console&&r.console.firebug&&console.warn("no dropdown DOM element found")};d.make=function(){var a=this.config({key:"str_select"});if(a){this._dom()||
r.console&&r.console.firebug&&console.warn("Unable to find DOM element for makeDropdown");a=J("",a,!0);if(0<this.__slots.length){this.__slots.sort(function(a,b){if(a.details.startDateUTC&&a.details.endDateUTC&&b.details.startDateUTC&&b.details.endDateUTC){var e=a.details,c=b.details,d=e.startDateUTC-c.startDateUTC;if(0!==d)return d;d=e.endDateUTC-c.endDateUTC;return 0!==d?d:(e.services!==q?e.services:"").length<=(c.services!==q?c.services:"").length}var e=a.id,c=b.id,h=d=0,g=0,n=0;0<=e.indexOf("-")?
(d=parseInt(e.substring(0,e.indexOf("-")),10),h=parseInt(e.substring(e.indexOf("-")+1),10)):d=parseInt(e,10);0<=c.indexOf("-")?(g=parseInt(c.substring(0,c.indexOf("-")),10),n=parseInt(c.substring(c.indexOf("-")+1),10)):g=parseInt(c,10);return 100*(d-g)+(h-n)});for(var b=0;b<this.__slots.length;b++){var d=this.__slots[b],h=d.id,d=d.details,e=d.name,n="";d.services&&0<d.services.length&&(n=d.services.sort().join(""));a+=J(h,e,!1,n)}}this._dom().html(a)}else r.console&&r.console.firebug&&console.warn("Missing str_select for makeDropdown")};
d.clear=function(){this.__slots=[];this.__slotIds={}};d.add=function(a,b,d,h,e){if(!this.__slotIds[a]){this.__slotIds[a]=1;var n={};n.name=b;n.startDateUTC=h;n.endDateUTC=e;n.services=d?d:"";b={};b.id=a;b.details=n;this.__slots.push(b)}};d.selectCalled=M("select");d.select=function(a){try{this._dom().val(a)}catch(b){}};d.onSelect=function(){this._dom().change(a(this));this._dom().focus(a(this))};return d}function Y(a){function d(a,b){var d=a.ids[b];if(!d)return!1;var h=a.shipOfferingID,e=a.carrierFss,
n;if(e){n=(new ScheduledDelivery.Data.ReservationIdParser(d.id)).getCarriers();for(var m=[],f=0;f<n.length;f++)m.push(e[n[f]]);n=ScheduledDelivery.Data.FulfillmentServiceSubclass.pickTightestSla.apply(q,m)}SDFramework.jq("#sd_buybox_root").trigger("slotSelected");return{slotId:d.srsids,reservationId:d.id,reservationType:d.rt,start:d.su,ultStart:d.s,mltStart:d.sm,localStartTime:d.sut,end:d.eu,ultEnd:d.e,mltEnd:d.em,localEndTime:d.eut,cutoff:d.cu,ultCutoff:d.c,mltCutoff:d.cm,timeZone:d.t,tz:d.tz,minShip:d.minShip,
maxShip:d.maxShip,shipOffer:h,fss:n}}a={};a.calendarData=z("calendar_data");a.clearCals=function(){this.__calendar_data=null;this.calendarData=z("calendar_data")};a.getCal=function(a){return this.calendarData({key:a})};a.hasCal=function(a){return this.calendarData({key:a})?!0:!1};a.hasRes=function(a,b){if(!a)return!1;if(!this.hasCal(b))return u.debug("no cal for "+b),!1;var g=this.getCal(b);if(!g.ids)return u.debug("no ids in cal "+b),!1;g=d(g,a);return SDUtils.isEmptyObject(g)?(u.debug("No res data for "+
a),!1):!0};a.getRes=function(a,b){if(!this.hasRes(a,b))return{};var g=this.getCal(b);return g.ids[a]?d(g,a):(u.warn("getRes messup"),{})};a.load=function(a,b){b._loading(!0);var d=b.config({key:"load_url"});r.console&&r.console.firebug&&console.warn("loading URL : "+d);var h=b.config({key:"load_payload"}),d={url:d,type:"POST",dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:h,traditional:!0,success:function(a,b,c){return function(d,h){c.calendarData({key:b,value:d});
a._loading(!1);a.calendar(b);SDFramework.jq("#sd_buybox_root").trigger("slotsReturned")}}(b,a,this),error:function(a){return function(b,c,d){r.console&&r.console.firebug&&console.warn("unable to get calendar");a._loading(!1,1);a.deactivateCalendar();SDFramework.jq("#sd_buybox_root").trigger("slotsErrored")}}(b,a,this),timeout:2E4};SDFramework.jq.ajax(d)};return a}function O(a,d,c,b,g,h,e,n){var m={};m.identifier=a;m.startDate=d;m.startDateUTC=d;m.endDate=c;m.endDateUTC=c;m.key=g;m.selected=!1;m.textDisplay=
h;m.cost=0;m.areNonVisibleServices=!1;m.config=z("config");m.showAsterisk=function(){return this.areNonVisibleServices&&n};m.getServices=function(a){var b=[];a=a.split("^");for(var e=0;e<a.length;e++){var c=a[e];if(-1!==c.indexOf(":"))for(var d=c.split(":"),c=d[0],d=d[1],h=0;h<d.length;h++)b.push(c+":"+d.charAt(h));else for(d=0;d<c.length;d++)b.push(c.charAt(d))}return b};m.initializeWithScheduledDelivery=function(a){this.identifier=a.id;this.startDate=new Date(1E3*a.s);this.endDate=new Date(1E3*
a.e);this.startDateUTC=new Date(1E3*a.su);this.endDateUTC=new Date(1E3*a.eu);this.startTimeDisplay=a.sut;this.endTimeDisplay=a.eut;this.promotion=a.prom;this.cost=a.costDisplay;this.services=this.getServices(a.service);this.areNonVisibleServices=!1;this.serviceDisplay="";for(var b in this.services)this.services.hasOwnProperty(b)&&(a=this.services[b].charAt(0),e[a]?this.serviceDisplay+=e[a].serviceAbbr+", ":this.areNonVisibleServices=!0);this.serviceDisplay=0<this.serviceDisplay.length?this.serviceDisplay.substring(0,
this.serviceDisplay.length-2):""};b&&m.initializeWithScheduledDelivery(b);m.selectSlot=function(a){this.selected=a};m.timePlacement=function(a,b,e){var c=a.getTime(),d=this.startDate.getTime(),h,g;switch(e){case "D":h=c/864E5|0;g=d/864E5|0;break;case "H":h=a.getUTCHours();g=this.startDate.getUTCHours();break;case "M":h=a.getUTCMinutes(),g=this.startDate.getUTCMinutes()}return(g-h)/b|0};m.slotPlacement=function(a,b,e,c){return{timeSpot:this.timePlacement(a,e,c),daySpot:this.timePlacement(a,b,"D")}};
m.toString=function(){var a=this.startTimeDisplay,b=this.endTimeDisplay,a=this.textDisplay?a+"-"+b+" "+this.textDisplay:this.dateDisplay&&this.dateDisplay.displayDateFn?a+"-"+b+" "+this.dateDisplay.displayDateFn(this.endDate):a+"-"+b+" "+this.endDate.toDateString(),b=!this.cost||this.cost.match(/^\s*$/)||"open"==this.cost||"&nbsp;"==this.cost?"&nbsp;":"("+this.cost+")",e="";this.showAsterisk()&&(e="*");return[a," ",this.serviceDisplay," ",b,e].join("")};return m}function Z(a,d){function c(a,b){var c=
null;-1!==a.indexOf(":")?(c=a.split(":"),c=b[c[0]].services[c[1]]):c=b[a];return c}function b(a){if(a===q)return"";for(var b=[],c=0;c<a.length;c++)if(-1!==a[c].indexOf("^"))b.push(a[c]);else for(var d=a[c].split(""),f=0;f<d.length;f++)b.push(d[f]);b.sort();return b.join("^")}var g={};g.config=z("config");g.parent=a;g.uiOwner=d;g.slots=[];g.allSlots=[];g.currentServices=[];g.slotsPerService=[];g.slotsForServiceCombinations=[];g.services=[];g.serviceStrings=[];g.pivotDateTime=null;g.pivotDay=3;g.nightSlotEndTimeLimit=
19;g.initialized=!1;g.initialize=function(a,b){this.initialized||(this.daySpan||(this.daySpan=this.uiOwner.config({key:"daySpan"})),this.dayLength||(this.dayLength=this.uiOwner.config({key:"dayLength"})),this.setPivotDate(a),this.initializeServiceType("",!0),this.defaultSlotId=b,this.initialized=!0)};g.getDefaultBaseSlot=function(){if(this.serviceStrings===q)return this.sortedSlotList()[0];for(var a=0;a<this.sortedSlotList().length;a++){var b=this.sortedSlotList()[a],c=b.services;if(c===q||1>c.length||
!this.containVisibleService(c))return b}return this.sortedSlotList()[0]};g.containVisibleService=function(a){for(var b=0;b<a.length;b++)if(this.serviceStrings[a[b]]!==q)return!0;return!1};g.getDefaultSlot=function(a){if(this.defaultSlotId)return"NO_DEFAULT"===this.defaultSlotId?null:this.getSlotByKey(this.defaultSlotId);if(0===a)return this.getDefaultBaseSlot();for(var b=a=null,c=0;c<this.sortedSlotList().length;c++){var d=this.sortedSlotList()[c];if(parseInt(d.endTimeDisplay.split(":")[0],10)>=this.nightSlotEndTimeLimit){if(null===
a||a.startDateUTC>d.startDateUTC)a=d}else if(null===b||b.startDateUTC>d.startDateUTC)b=d}return null!==b?b:a};g.setSlots=function(a,b){var d=new Date,g=a.getCal(b);this.initialize(d,g.defaultSlotId);if(g){var f=this.uiOwner.config({key:"surcharge_message"}),f=f&&0<=f.indexOf("*"),t;for(t in g.ids)if(g.ids.hasOwnProperty(t)){var k=void 0,p=void 0;for(p in g.days)g.days[p][0]&&g.days[p][0]==t&&(k=g.days[p][1]);k=O(null,null,null,g.ids[t],t,k,g.serviceDisplay,f);p=g.serviceDisplay;if(k.endDate>new Date){var x=
k,G=this.parent.config({key:"dateDisplay"});x.dateDisplay=G;this.allSlots.push(k);var x=k.services,G=p,C=[],v=void 0;for(v in x)(-1!==x[v].indexOf(":")||G[x[v]])&&C.push(x[v]);0===C.length&&C.push("");x=C;G=null;if(1<x.length){x.sort();C=x.join("");v=void 0;for(v in x)x.hasOwnProperty(v)&&(this.currentServices[x[v]]=!1,(G=c(x[v],p))||(x[v]=""),""===x[v]&&(this.slots.push(k),this.currentServices[""]=!0),this.services[x[v]]=x[v]);this.slotsForServiceCombinations[C]||(this.slotsForServiceCombinations[C]=
[]);this.slotsForServiceCombinations[C].push(k)}else 1==x.length&&(x=x[0],this.currentServices[x]=!1,(G=c(x,p))||(x=""),""===x&&(this.slots.push(k),this.currentServices[""]=!0),this.slotsPerService[x]||(this.slotsPerService[x]=[]),this.slotsPerService[x].push(k),this.services[x]=x)}}this.copyServiceStrings(g.serviceDisplay);this.formatServiceChargesString(g.serviceCharges)}g=d;t=this.uiOwner.config({key:"dayLength"});f=t/2|0;g=this.sortedSlotList()[0].startDate;1===this.orderDayAsFirstDay&&(g=d);
this.setPivotDay((g.getUTCDay()+f)%t);this.setPivotDate(g)};g.copyServiceStrings=function(a){for(var b in a)if(a.hasOwnProperty(b)&&(this.serviceStrings[b]={serviceString:a[b].serviceString,serviceLearnMore:a[b].serviceLearnMore},a[b].services)){var c=a[b].services,d;for(d in c)c.hasOwnProperty(d)&&(this.serviceStrings[b+":"+d]={serviceString:c[d].serviceString,serviceLearnMore:c[d].serviceLearnMore})}};g.formatServiceChargesString=function(a){for(var b in a)a.hasOwnProperty(b)&&this.serviceStrings.hasOwnProperty(b)&&
this.serviceStrings[b].serviceString&&(this.serviceStrings[b].serviceString=this.serviceStrings[b].serviceString.replace("%service_cost",a[b]))};g.initializeServiceType=function(a,b){this.currentServices[a]=b};g.setServiceType=function(a,b){this.currentServices[a]===q&&(a="");this.currentServices[a]=b;var c=[],d;for(d in this.currentServices)"undefined"!=typeof d&&""!==d&&this.currentServices[d]&&c.push(d);0===c.length?this.slots=this.slotsPerService[""]:1==c.length?this.slots=this.slotsPerService[c[0]]:
(c.sort(),c=c.join(""),this.slots=this.slotsForServiceCombinations[c])};g.lastGrid=null;g.setPivotDay=function(a){0<=a&&6>=a&&(this.pivotDay=a)};g.setPivotDate=function(a){this.pivotDateTime=a?new Date(a.getTime()):new Date;this.pivotDateTime.setUTCHours(0,0,0,0);var b=this.pivotDateTime.getUTCDay();this.pivotDateTime.setUTCDate(this.pivotDateTime.getUTCDate()+this.pivotDay-b);this.pivotDateTime.setUTCDate(this.pivotDateTime.getUTCDate());var b=this.uiOwner.config({key:"dayLength"}),c=+b/2|0,d=new Date(this.pivotDateTime.getTime());
d.setUTCDate(d.getUTCDate()-c);var f=new Date(this.pivotDateTime.getTime());f.setUTCDate(f.getUTCDate()+c);f.setUTCHours(23,59,59,999);a.getTime()>f.getTime()?this.pivotDateTime.setUTCDate(this.pivotDateTime.getUTCDate()+b):a.getTime()<d.getTime()&&this.pivotDateTime.setUTCDate(this.pivotDateTime.getUTCDate()-b)};g.slotsInRange=function(){var a=+this.uiOwner.config({key:"dayLength"})/2|0,b=new Date(this.pivotDateTime);b.setUTCDate(b.getUTCDate()-a);a=[];this.sortedSlotList();if(this.slots)for(var c=
0;c<this.slots.length;c++){var d=this.slots[c].timePlacement(b,this.daySpan,"D");0<=d&&d<this.dayLength&&(a[d]||(a[d]=[]),a[d].push(this.slots[c]))}return this.lastGrid=a};g.sortedSlotList=function(){this.initialize(new Date);return this.allSlots.sort(function(a,b){return 0===a.startDate-b.startDate?a.endDate-b.endDate:a.startDate-b.startDate})};g.orderedRowKeys=function(a){a=[];var b=[],c=0;for(c in this.lastGrid)if(c==parseInt(c,10))for(var d in this.lastGrid[c])d==parseInt(d,10)&&a.push({start:60*
this.lastGrid[c][d].startDate.getUTCHours()+this.lastGrid[c][d].startDate.getUTCMinutes(),end:60*this.lastGrid[c][d].endDate.getUTCHours()+this.lastGrid[c][d].endDate.getUTCMinutes(),stime:this.lastGrid[c][d].startTimeDisplay,etime:this.lastGrid[c][d].endTimeDisplay});a.sort(function(a,b){return a.start==b.start?a.end-b.end:a.start-b.start});0<a.length&&b.push(a[0]);for(d=1;d<a.length;d++)a[d-1].start==a[d].start&&a[d-1].end==a[d].end||b.push(a[d]);return b};g.getSlotById=function(a){if(!a)return null;
for(var b=0;b<this.allSlots.length;b++)if(this.allSlots[b].identifier==a)return this.allSlots[b];return null};g.getSlotByTimes=function(a,e,c){if(!(a&&e&&c&&this.allSlots))return null;var d=c.split(";");c=[];4<=d.length&&(c=d[3].split("^"));for(d=0;d<this.allSlots.length;d++){var f=this.allSlots[d],g;if(g=f.startDate.getTime()==1E3*a&&f.endDate.getTime()==1E3*e)g=c,g=b(f.services)===b(g);if(g)return f}return null};g.getCurrentSlotByTimes=function(a,b){if(!a||!b||!this.slots)return null;for(var c=
0;c<this.slots.length;c++){var d=this.slots[c];if(d.startDate.getTime()==a&&d.endDate.getTime()==b)return d}return null};g.getSlotByKey=function(a){for(var b=0;b<this.allSlots.length;b++)if(this.allSlots[b].key===a)return this.allSlots[b];return null};return g}function aa(a){function d(a,b){var e,c=f.config({key:"notavailable"});e=f.config({key:"slotButton"});var d="",h="";if(-1===a&&-1===b)return c=f.config({key:"notavailable"}),e='<td class="'+e+'" rowspan="1">'+('<div class="'+c+'">'),e+="</div>",
e+="</td>";var g=1;if(f.model.lastGrid[b])for(var m=0;m<f.model.lastGrid[b].length;m++)if(a.start==60*f.model.lastGrid[b][m].startDate.getUTCHours()+f.model.lastGrid[b][m].startDate.getUTCMinutes()&&a.end==60*f.model.lastGrid[b][m].endDate.getUTCHours()+f.model.lastGrid[b][m].endDate.getUTCMinutes()){c=f.config({key:"available"});f.model.lastGrid[b][m].promotion&&(c+=" "+f.config({key:"promotionavailable"}));d=f.model.lastGrid[b][m].key;h=f.model.lastGrid[b][m].cost;f.model.lastGrid[b][m].showAsterisk()&&
(h+="*");var n=f.model.lastGrid[b][m],l=f.selected_id;if(!l&&n.selected||l==n.key)c+=" "+f.config({key:"selected"});f.model.lastGrid[b][m].rowspan!==q&&(g=f.model.rowspan)}[f.config({key:"prefix"}),d].join("-");e='<td id="'+d+'" class="'+e+" "+c+' ap_custom_close" rowspan="'+g+'">';e=c===f.config({key:"notavailable"})?e+"&nbsp;":e+h;return e+="</td>"}function c(a,b){var e=a+"Nav"+b,c;c=""+('<td class="'+f.config({key:e+"Class"})+'">');c+=f.config({key:e+"Inner"});return c+"</td>"}function b(){function b(){var e=
f.model.pivotDateTime.getUTCMonth(),c=f.model.pivotDateTime.getUTCFullYear(),d=f.model.pivotDateTime.getUTCDate();f.selected_id===q&&(f.selected_id=SDFramework.jq("#"+f.config({key:"element"})+" ."+f.config({key:"selected"})).attr("id"));f.navigateLateralSlots(0,d,e,c);e=f.selected_id;c=c=null;e&&(c=f.model.getSlotByKey(e),c=f.model.getCurrentSlotByTimes(c.startDate.getTime(),c.endDate.getTime()));c&&(a.enableInconsistentWithBuybox(!1),f.selected_id=c.key,m(f,c.key))}function e(b){var c=this.id;SDFramework.jq(this).bind("click",
function(b){a.enableInconsistentWithBuybox(!1);f.selected_id=c;m(f,c)});SDFramework.jq(this).dblclick(function(){SDFramework.jq(".ap_close").click()})}var c=SDFramework.jq(".sd-timeslot-scroll-title-left-enabled"),d=SDFramework.jq(".sd-timeslot-scroll-title-right-enabled"),h=SDFramework.jq("td."+f.config({key:"available"})),g=SDFramework.jq("td."+f.config({key:"selected"}));c.bind("click",function(a){a=f.model.pivotDateTime.getUTCMonth();var b=f.model.pivotDateTime.getUTCFullYear(),e=f.model.pivotDateTime.getUTCDate();
f.navigateLateralSlots(-1,e,a,b)});d.bind("click",function(a){a=f.model.pivotDateTime.getUTCMonth();var b=f.model.pivotDateTime.getUTCFullYear(),e=f.model.pivotDateTime.getUTCDate();f.navigateLateralSlots(1,e,a,b)});SDFramework.jq(".sdServiceType").click(function(a){var e=SDFramework.jq(this);a=e.is(":checked");e=e.attr("servicetype");f.selectService(e,a);b()});SDFramework.jq(".sdHSelectServiceType").change(function(a){SDFramework.jq(".sdHServiceType",this).each(function(){var a=SDFramework.jq(this),
b=a.is(":selected"),a=a.attr("servicetype");f.selectService(a,b)});setTimeout(b,0)});h.each(e);g.each(e)}function g(a,b,e){for(var c=0;c<e.length;c++)if(a==60*e[c].startDate.getUTCHours()+e[c].startDate.getUTCMinutes()&&b==60*e[c].endDate.getUTCHours()+e[c].endDate.getUTCMinutes())return c;return-1}function h(a){var b=0;if(3>a.length)return null;for(var e=-1,b=0;b<a.length-2;b++)if(a[b].start==a[b+1].start){e=b;break}if(0>e)return null;for(var c=a[e].end,d=a[e+1].end,b=e+2;b<a.length&&!(a[b].start!=
c||a[b].end>d);b++){if(a[b].end==d)return[e,b];c=a[b].end}return null}function e(){var a=f.config({key:"rootWidgetId"});SDFramework.jq("#"+a).attr("alreadyShowingPopup",1);0===f.showDropdown&&SDFramework.jq("#"+a).parents("td").eq(0).prev().find("input[type=radio]").click();r.popoverTimer&&(a=r.popoverTimer[f.config({key:"widgetIndex"})],a!==q&&clearTimeout(a));f.logClientSideMetrics(f.clientSideMetrics.openCalendar);for(var a=null!==f.selectedSlot?f.selectedSlot.services:[],e=0;e<a.length;e++)f.model.setServiceType(a[e],
1);a=f.config({key:"element"});a=SDFramework.jq("#"+a);e=f.getCalendarHtml();a&&a[0]&&(a[0].innerHTML=e);b();SDFramework.jq("#ap_overlay").bind("touchend",function(){this.click()})}function n(){f.select(f.selected_id);f.logClientSideMetrics(f.clientSideMetrics.closeCalendar);var a=f.config({key:"rootWidgetId"});SDFramework.jq("#"+a).attr("alreadyShowingPopup",0)}function m(a,b){var e=a.config({key:"element"}),c=a.config({key:"selected"});a.config({key:"available"});SDFramework.jq("#"+e+" ."+c).removeClass(c);
b&&(SDFramework.jq("#"+b).addClass(c),e=a.model.getSlotByKey(b),a.logClientSideMetricsForSlot(a.clientSideMetrics.selectSlot,e))}var f={};f.config=z("config");f._dom=D("element","popup");f.popupInitialized=!1;f.model=Z(a,f);f.selectedSlot=null;f.enable=function(a){a?(a=this.config({key:"linkId"}),a=SDFramework.jq("#"+a),a.show()):(this._dom()&&this._dom().hide(),a=this.config({key:"linkId"}),a=SDFramework.jq("#"+a),a.hide())};f.onSelect=function(){};f.click=function(){};f.colorSwatch=function(){var a=
[];a.push('<div class="calendar-header">');a.push('<span class="calendar-swatch calendar-not-available">&nbsp;</span><span class="calendar-legend">'+f.config({key:"not_available_key"})+"</span>");a.push('<span class="calendar-swatch calendar-available">&nbsp;</span><span class="calendar-legend">'+f.config({key:"available_key"})+"</span>");a.push('<span class="calendar-swatch calendar-selected">&nbsp;</span><span class="calendar-legend">'+f.config({key:"selected_key"})+"</span>");this.promotionAvailable&&
a.push('<span class="calendar-swatch calendar-promotion-available">&nbsp;</span><span class="calendar-legend">'+f.config({key:"promotion_available_key"})+"</span>");a.push("</div>");return a.join("")};f.refreshSlots=function(){for(var a in this.model.allSlots)if(this.model.allSlots.hasOwnProperty(a)){var b=this.model.allSlots[a];b.originalEndDate&&(b.endDate=b.originalEndDate);b.originalEndTimeDisplay&&(b.endTimeDisplay=b.originalEndTimeDisplay);b.rowspan=q;b.promotion!==q&&(this.promotionAvailable=
!0)}};f.getCalendarHtml=function(){var a=this.config({key:"days"}),b,e,g,m,n,v,F=this.config({key:"dayLength"}),r=+F/2|0;b=e=0;var l="";this.model.initialize(new Date);this.refreshSlots();this.model.slotsInRange();l+=this.colorSwatch();l+='<table class="sd-timeslot-header" border=0 cellpadding=2 cellspacing=0 width="470"><thead>';n=new Date(this.model.pivotDateTime.getTime());n.setUTCDate(n.getUTCDate()-r);v=new Date(this.model.pivotDateTime.getTime());v.setUTCDate(v.getUTCDate()+r);b=n.getUTCDay();
g=this.model.pivotDateTime.getUTCMonth();m=this.model.pivotDateTime.getUTCFullYear();e=this.model.pivotDateTime.getUTCDate();var w;w=this.config({key:"surcharge_message"});var u=[];u.push('<tr class="sd_notice">');u.push('<td colspan="3">');u.push('<span class="sd_notice">');u.push(w);u.push("</span>");u.push("</td>");u.push("</tr>");u.push("<tr>");u.push('<td colspan="3">');u.push('<hr class="sd_dashed" />');u.push("</td>");u.push("</tr>");w=u.join("");l+=w;w="";u=f.config({key:"months"});u=new L(u);
w=w+'<tr class="sd-timeslot-scroll-title">'+c("left",f._canMove(-1,e,g,m)?"Enabled":"Disabled");w+='<td class="sd-timeslot-scroll-title">';w+='<span class="sd-timeslot-scroll-title">';w+=u.popoverRangeDisplay(n,v);w+="</span>";w+="</td>";w+=c("right",f._canMove(1,e,g,m)?"Enabled":"Disabled");w+="</tr>";l+=w;l+="</thead>";l+="</table>";l+='<table class="sd-timeslot-table" width="470px" style="table-layout: fixed;">';l+="<tbody>";this.model.monthOfDays=[];this.model.dayOfDays=[];g=new Date;l+='<tr class="sd-timeslot-index-date">';
l+='<th class="sd-timeslot-index-date sdleft">&nbsp;</th>';for(e=m=0;e<=2*r;e++)v=new Date(n.getTime()),v.setDate(v.getUTCDate()+e),l+='<th class="sd-timeslot-index-date">',w=(b+e)%7,w=0>w?7+w:w,l+='<span class="sd-timeslot-index-date">',l=1===this.model.orderDayAsFirstDay&&f.config({key:"sd_today"})!==q&&g.getFullYear()===v.getFullYear()&&g.getUTCMonth()===v.getUTCMonth()&&g.getUTCDate()===v.getUTCDate()?l+f.config({key:"sd_today"}):l+a[w],l+="<br />"+v.getDate(),l+="</span>",l+="</th>",this.model.monthOfDays[m]=
v.getUTCMonth(),this.model.dayOfDays[m]=v.getUTCDate(),m++;l+="</tr>";a=this.model.orderedRowKeys(!0);if(0===a.length){l+="<tr>";for(b=-r;b<=r;b++)l+=d(-1,-1);l+="</tr>";l+="<tr>";l+='<td class="sd-timeslot-index-date sdleft"></td>';l+='<td class="sd-message" colspan='+F+'><span class="sd-message">'+f.config({key:"no_slots_for_week"})+"</span></td>";l+="</tr>"}this.model.cellsToMerge=h(a);this.model.availableDay=q;this.model.hideCells={};null!==this.model.cellsToMerge&&f.checkSlots(a);this.model.availableDay!==
q&&0>=this.model.availableDay&&(a.splice(this.model.cellsToMerge[0]+1,1),this.model.rowspan=this.model.cellsToMerge[1]-this.model.cellsToMerge[0]);r=new L(f.config({key:"months"}));for(e=0;e<a.length;e++){n=a[e];b=[n.stime,n.etime];l+="<tr>";l+='<td class="sd-timeslot-rowindex-date sdleft"><span class="sd-timeslot-rowindex-date">'+r.timeRangeDisplay(b[0],b[1])+"</span></td>";for(b=0;b<F;b++)f.isHidden(e,b)===q&&(l+=d(n,b));l+="</tr>"}var l=l+"</tbody>",l=l+"</table>",r={},F={},E;for(E in this.model.services)-1!==
E.indexOf(":")&&(a=E.split(":"),F[a[0]]!==q?F[a[0]].push(a[1]):(F[a[0]]=[],F[a[0]].push(a[1]),r[a[0]]=1));for(var y in this.model.services)this.model.services.hasOwnProperty(y)&&-1===y.indexOf(":")&&(r[y]?F[y].push("OLD"):(E=l,l=y,f.config({key:"strings"}),f.model.serviceStrings[l]?(a=f.model.serviceStrings[l].serviceString,b=f.model.serviceStrings[l].serviceLearnMore,n=[],n.push('<div class="sd_notice">'),a&&(n.push('<input type="checkbox" class="sdServiceType" ',f.model.currentServices[l]?"checked":
"",' serviceType="',l,'" />'),n.push(a)),b&&(n.push(" "),n.push(b)),n.push("</div>"),l=n.join("")):l="",l=E+l));for(var z in F)if(F.hasOwnProperty(z)){l+='<div class="sd_notice">';l+="<br />";l+=f.model.serviceStrings[z].serviceString;f.model.serviceStrings[z].serviceLearnMore&&(l+=" "+f.model.serviceStrings[z].serviceLearnMore);l+="<br />";l+='<select class="sdHSelectServiceType">';l+='<option value="none">-</option>';for(y=0;y<F[z].length;y++)E=F[z][y],r=z+":"+E,a=!1,b="",a="OLD"===E?f.model.currentServices[z]:
f.model.currentServices[r],b=f.model.serviceStrings[r].serviceString,l+='<option class="sdHServiceType" servicetype="',l="OLD"===E?l+z:l+r,l+='"',a&&(l+='selected="selected"'),l+=">",l+=b,l+="</option>";l+="</select>";l+="</div>"}return l};f.checkSlots=function(a){var b=this.config({key:"dayLength"});this.model.availableDay=0;this.model.matchingDays=[];for(var e=0;e<b;e++)this.model.lastGrid[e]&&f.processMatchingColumn(f.checkColumn(a,e),a,e);f.hideRow(b)};f.hideRow=function(a){if(!(0>=this.model.availableDay))for(a=
0;a<this.model.matchingDays.length;a++)f.hideOneCell(this.model.cellsToMerge[1],this.model.matchingDays[a])};f.processMatchingColumn=function(a,b,e){if(!(0>a)){a=this.model.lastGrid[e][a];a.originalEndDate=new Date(a.endDate.getTime());a.originalEndTimeDisplay=a.endTimeDisplay;a.endDate.setUTCHours(b[this.model.cellsToMerge[0]].end/60|0);a.endDate.setUTCMinutes(b[this.model.cellsToMerge[0]].end%60);a.endTimeDisplay=b[this.model.cellsToMerge[0]].etime;a.rowspan=1;for(b=this.model.cellsToMerge[0]+1;b<
this.model.cellsToMerge[1];b++)f.hideOneCell(b,e);this.model.rowspan=this.model.cellsToMerge[1]-this.model.cellsToMerge[0]+1}};f.checkColumn=function(a,b){var e=this.model.cellsToMerge[0],c=g(a[e+1].start,a[e+1].end,this.model.lastGrid[b]);if(0>c)return-1;this.model.availableDay++;if(0<=g(a[e].start,a[e].end,this.model.lastGrid[b]))return-1;for(e+=2;e<a.length&&e<=this.model.cellsToMerge[1];e++)if(0<=g(a[e].start,a[e].end,this.model.lastGrid[b]))return-1;this.model.availableDay--;this.model.matchingDays.push(b);
return c};f.isHidden=function(a,b){return this.model.hideCells['"'+this.model.monthOfDays[b]+"-"+this.model.dayOfDays[b]+"-"+a+'"']};f.hideOneCell=function(a,b){this.model.hideCells['"'+this.model.monthOfDays[b]+"-"+this.model.dayOfDays[b]+"-"+a+'"']=1};f.clientSideMetrics={};f.clientSideMetrics.selectSD="1";f.clientSideMetrics.loadSlots="2";f.clientSideMetrics.openCalendar="3";f.clientSideMetrics.selectSlot="4";f.clientSideMetrics.closeCalendar="5";f.clientSideMetrics.nextPageCalendar="6";f.clientSideMetrics.prevPageCalendar=
"7";f.clientSideMetrics.unselectSD="8";f.clientSideMetrics.selectionChanged="9";f.clientSideMetrics.initializeSDPopup="10";f.logClientSideMetrics=function(a){this.logClientSideMetricsForSlot(a,this.selectedSlot)};f.logClientSideMetricsForSlot=function(a,b){var e="",c="",d="",f="",h="",g="",m="",l="DP",n="",r="";if(this.model){if(this.model.parent){var u=this.model.parent.config({key:"load_payload"});u&&(e=u.marketplace,c=u.asin,g=u.shipoption,n=u.address);this.model.parent.isSpc&&this.model.parent.isSpc()?
l="SPC":(u=this.model.parent.config({key:"id_select_fn"}))&&("shipoptionselectpage"===u.substring(0,20)?l="SOSP":"emptySetSOCallback"===u&&(l="YA"))}this.model.getDefaultBaseSlot&&this.model.getDefaultBaseSlot()&&this.model.getDefaultBaseSlot().startDate&&this.model.getDefaultBaseSlot().startDate.getTime&&(d=this.model.getDefaultBaseSlot().startDate.getTime());this.model.allSlots&&this.model.allSlots.length!==q&&(r=this.model.allSlots.length.toString())}b&&(f=b.startDate.getTime(),h=b.services,m=
b.identifier);if(c instanceof Array)for(u=0;u<c.length;u++)ue.log(["mpid=",e,"&asin=",c[u],"&a=",a,"&fas=",d,"&ss=",f,"&svc=",encodeURIComponent(h),"&so=",encodeURIComponent(g),"&sid=",encodeURIComponent(m),"&page=",l,"&addr=",n,"&snum=",r].join(""),"scheduled-delivery",null);else ue.log(["mpid=",e,"&asin=",c,"&a=",a,"&fas=",d,"&ss=",f,"&svc=",encodeURIComponent(h),"&so=",encodeURIComponent(g),"&sid=",encodeURIComponent(m),"&page=",l,"&addr=",n,"&snum=",r].join(""),"scheduled-delivery",null)};f.setup=
function(a){function c(a,b){var e=["c_m_len","c_m_delta","n_m_len","timeslots"],d;for(d in e)if(e.hasOwnProperty(d)){if(!a.hasOwnProperty(e[d]))return["No",d,"data value"].join(" ");if(0>a[e[d]])return["Negative",d,"data value",e[d]].join(" ")}e=["next_month_id","current_month_id"];for(d in e)if(!b.config({key:e[d]}))return["No",e[d],"configured"].join(" ")}function d(){var a=m.config({key:"element"}),a=SDFramework.jq("#"+a),e=m.getCalendarHtml();a&&a[0]&&(a[0].innerHTML=e);b()}if(!this.popupInitialized){var h=
this.config({key:"linkId"}),g=SDFramework.jq("#"+h);this.popupInitialized=!0}var m=this;if(this._dom())if((h=c(a,this))&&r.console&&r.console.firebug)console.warn("Invalid data: "+h);else{a.today&&this.config({key:"today"})&&SDFramework.jq(this._dateId({id:a.today})).addClass(this.config({key:"today"}));var v=m.config({key:"element"});H.when("jQuery","legacy-popover").execute(function(a){g.removeAmazonPopoverTrigger();g.unbind("touchend.sd");g.bind("touchend.sd",function(){this.click()});g.unbind("click.sd");
g.bind("click.sd",function(){return!SDUtils.protectAgainstDoubleAction("calendarButton")});g.amazonPopoverTrigger({width:545,location:["left","bottom","right","top","centered"],locationAlign:"middle",localContent:"#"+v,title:'<span class="sd-timeslot-calendar-title">'+f.config({key:"popup_time_title"})+"</span>",modal:!0,semiStatic:!0,onShow:e,onHide:n,draggable:!0,closeText:f.config({key:"closeText"}),closeEventInclude:["CLICK_OUTSIDE","CLICK_TRIGGER"]})});d()}};f._dateId=function(a){if(this.config({key:"prefix"})){if(a.parse)return a.parse.split("-").pop();
if(a.date)return[this.config({key:"prefix"}),a.date].join("-");if(a.id){var b=this.config({key:"element"});b&&(b=["#",b," "].join(""));a=[this.config({key:"prefix"}),a.id].join("-");return b+"#"+a}}};f.add=function(a){};f.selectCalled=M("select");f.selectService=function(a,b){this.model.setServiceType(a,b)};f.select=function(a){var b=this.config({key:"element"}),e=this.config({key:"selected"});this.config({key:"available"});this.config({key:"slotButton"});SDFramework.jq("#"+b+" ."+e).removeClass(e);
a&&(SDFramework.jq("#"+a).addClass(e),this.selectCalled({arg:a}),b=!1,e="",this.selectedSlot?(e=this.selectedSlot.key,this.selectedSlot.selected=!1):b=!0,this.selectedSlot=this.model.getSlotByKey(a))&&(this.selectedSlot.selected=!0,b?this.logClientSideMetrics(this.clientSideMetrics.loadSlots):e!==this.selectedSlot.key&&this.logClientSideMetrics(this.clientSideMetrics.selectionChanged));this.selectedSlot&&this.model.setPivotDate(this.selectedSlot.startDate)};f._canMove=function(a,b,e,c){var d=this.model.sortedSlotList(),
f=d[0],d=d[d.length-1],h=new Date,g=this.config({key:"dayLength"});if(!f||!d)return!1;var m=+g/2|0;h.setUTCFullYear(2004);h.setUTCMonth(0);h.setUTCDate(1);h.setUTCFullYear(c);h.setUTCMonth(e);h.setUTCDate(b);h.setUTCHours(0,0,0,0);h.setUTCDate(h.getUTCDate()+a*g);a=new Date(h.getTime());a.setUTCDate(a.getUTCDate()-m);a.setUTCHours(0,0,0,0);b=new Date(h.getTime());b.setUTCDate(b.getUTCDate()+m);b.setUTCHours(23,59,59,999);return b<new Date||b<f.endDate||a>d.startDate?!1:!0};f.navigateLateralSlots=
function(a,e,c,d){if(this._canMove(a,e,c,d)){var f=SDFramework.jq("#"+this.config({key:"element"})),h=new Date,g=this.config({key:"dayLength"});h.setUTCFullYear(2004);h.setUTCMonth(0);h.setUTCDate(1);h.setUTCFullYear(d);h.setUTCMonth(c);h.setUTCDate(e);h.setUTCHours(0,0,0,0);h.setUTCDate(h.getUTCDate()+a*g);this.model.setPivotDate(h);this.model.slotsInRange();e=this.getCalendarHtml();f.html(e);b();f=-1===a?this.clientSideMetrics.prevPageCalendar:this.clientSideMetrics.nextPageCalendar;0!==a&&this.logClientSideMetrics(f);
return e}};return f}function ba(){function a(a,b,e,c){var d=SDUtils.isBeacon(a);e?d&&0<b?a.slideDown(b):a.show():d&&0<b?a.slideUp(b):a.hide();a=a.parents(".sd_widget_root").find(".sd_controls");c?a.show():a.hide()}function d(a,b){a.each(function(){t(this).amazonPopoverTrigger({location:["right","auto"],locationAlign:"top",locationMargin:-10,width:null,skin:null,hoverHideDelay:0,hoverShowDelay:0,showOnHover:!0,showCloseButton:!1,literalContent:b})})}function c(a){a.css("cursor","not-allowed");a.addClass("sd-disabled")}
function b(a){a.css("cursor","");a.removeClass("sd-disabled")}function g(a,b){var e={noSlotNotSure:t("#"+a.config({key:"dom_noslotsNotSure"})),noSlotUnknown:t("#"+a.config({key:"dom_noslotsUnknown"})),ineligibleZip:t("#"+a.config({key:"dom_slotsContent"})),slotsContent:t("#"+a.config({key:"dom_slotsContent"}))},c;for(c in e)c===b?e[c].show():e[c].hide()}function h(e,k,h){if(e.config({key:"hideWidgetOnError"})){var m=h?h.slotQualityInfo:null;h=m?m.slotQualityDetail:"";m=m?m.errorCode:"";k||(h="NORMAL");
k="noSlotUnknown";switch(h){case "SYSTEM_UNKNOWN_PROMISE":k="noSlotUnknown";"JurisdictionNotFound"===m&&(k="slotsContent");break;case "BUSINESS_UNKNOWN_PROMISE":case "CAPACITY_FULL":k="noSlotUnknown";break;case "SD_INVENTORY_STATE_RESTRICTED":k="noSlotNotSure";break;case "NORMAL":k="slotsContent"}g(e,k);k={JurisdictionNotFound:t("#"+e.config({key:"dom_zipEntError"}))};for(var n in k)n===m?k[n].show():k[n].hide();f(e,"NORMAL"===h)}else{if("ATVPDKIKX0DER"==e.config({key:"load_payload"}).marketplace&&
k){switch(h.slotQualityInfo.slotQualityDetail){case "CAPACITY_FULL":n=".sd_call_date_msg";break;case "SD_INVENTORY_STATE_RESTRICTED":n=".sd_estimate_msg";break;default:n=".sd_no_promise_msg"}t(".sd_phone_number").css("position","static");n=t(n).html();0!==t(".sd_change_phone_number").length&&(n+=t(".sd_change_phone_number").html())}else n=h?h.errorMsg:"";var m=e.config({key:"dom_noslots"}),m=t("#"+m),q=e.config({key:"dom_reload"}),q=t("#"+q),r=e.config({key:"message_hook"}),l=t("#calendarLink"+e.popup.__config.widgetIndex),
w;r&&0<r.length&&(w=r.add(l).add("#sd_dummy_click_div_"+e.popup.__config.widgetIndex));k?(w?(k=w,d(k,'<div class="sdWarn"><span class="swSprite s_alertSm"></span>'+n+"</div>"),c(k)):(n&&(k=m.find("div.sd_err_from_result_content"),k.html(n),SDUtils.isBeacon(m)&&(k=k.find("h6"),k.contents().replaceAll(k).wrap("<h4/>"))),a(m,300,!0,!1),c(l)),q.show(),e.disableAndDeselect(h)):(w?(k=w,k.removeAmazonPopoverTrigger(),b(k)):b(l),a(m,0,!1,!0),q.hide(),e=t("#"+e.config({key:"dom_widget_root"})).parents("td").eq(0).prev().find("input[type=radio]"),
e.removeAttr("disabled"),e.parents("div.fake-label.a-box").removeClass("sd-disabled"))}}function e(a){if(a.isSpc()){var b=a.config({key:"dom_widget_root"});a=a.config({key:"dom_no_widget_root"});t("#"+b+" .sd_widget").show();t("#"+b).show();t("#"+a).hide()}}function n(a){if(a.isSpc()){var b=a.config({key:"id_is_selected"}),e=a.config({key:"dom_widget_root"});a=a.config({key:"dom_no_widget_root"});b?(t("#"+e+" .sd_widget").show(),t("#"+e).show(),t("#"+a).hide()):(t("#"+e+" .sd_widget").show(),t("#"+
e).hide(),t("#"+a).show())}}function m(a,b){var e=new ScheduledDelivery.Data.ReservationIdParser(a),c=new ScheduledDelivery.Data.ReservationIdParser(b),d=e.getCharges(),k=c.getCharges();return d.currencyCode===k.currencyCode&&.01>Math.abs(k.perItem-d.perItem)&&.01>Math.abs(k.perShipment-d.perShipment)&&e.getEncodedServices()===c.getEncodedServices()}function f(a,b){var e=t("#"+a.config({key:"dom_slotTrigger"}));e.prop?e.prop("disabled",!b):b?e.removeAttr("disabled"):e.attr("disabled","disabled");
b?e.parents(".sd-button").removeClass("sd-button-disabled"):e.parents(".sd-button").addClass("sd-button-disabled")}var t=SDFramework.jq,k={};k.icon=z("icon");k.config=z("config");k.calData=Y(this);k.popup={};k.popup.config=z("config");k.popup.selectCalled=M("select");k.dropdown=X();k.active=q;k.enableInconsistentWithBuybox=function(b){var e=this.config({key:"dom_inconsistent"});a(t("#"+e),200,b,!0)};k.buyboxNoAddrMessage=function(){g(this,"noSlotUnknown")};k.isSpc=function(){var a=this.config({key:"id_select_fn"});
return a&&"spcpage"===a.substring(0,7)};k.isSosp=function(){var a=this.config({key:"id_select_fn"});return a&&"shipoptionselectpage"===a.substring(0,20)};k.isSpcSd=function(){if(this.isSpc()){var a=this.config({key:"message_hook"});return a&&0<a.length&&0<=a.attr("src").indexOf("radio-on")}return!1};k.spcThrowCvIfSelected=function(){if(this.isSpcSd()){y("#"+this.config({key:"dom_widget_root"})+" input[type=hidden]").attr("value","");var a=this.config({key:"id_select_fn"});(a=a&&eval(a))&&a({},this.config({key:"dom_widget_root"}))}};
k.handleNoSlotSelection=function(){if(this.isSosp()){var a=this.config({key:"dom_widget_root"}),a=SDFramework.jq("#"+a);a.find(".sd_change_phone_number").show();a.find(".sd_promises").show();a.find(".sd_promise_msg").show();a.find(".sd_promise_msg >span").addClass("sd_no_slot_selection_msg")}};k.calendar=function(a){if(a)if(this.calData.hasCal(a)){this._loading(!1);this._enableIcon(!0);f(this,!0);var b=this.config({key:"dom_retry"}),c=this;t("#"+b).click(function(){g(c,"slotsContent")});b=null;if(!this.active||
this.active!=a){var d=this.calData.getCal(a),v=this.popup.__config,q=this.popup.__selectFn;if(d&&d.days&&0!==d.days.length)h(this,!1),n(this);else{this.logClientSideMetricsForNoSlots(k.clientSideMetrics.initializeSDPopup);e(this);h(this,!0,d);this.deactivateCalendar();this.active=0;this.spcThrowCvIfSelected();return}var r=this.config({key:"timeslotDeterminationFn"});if(r&&r(d)){this.popup=aa(this);this.popup.__config=v;this.popup.__selectFn=q;H.when("scheduledDelivery","ready").execute(k.getDocLoadFn());
this.popup.showDropdown=this.showDropdown;this.popup.model.orderDayAsFirstDay=this.orderDayAsFirstDay;this.popup.model.setSlots(this.calData,a);this.popup.logClientSideMetrics(this.popup.clientSideMetrics.initializeSDPopup);b=this.popup.model.getSlotByTimes(this.config({key:"selectedStart"}),this.config({key:"selectedEnd"}),this.config({key:"selectedSlot"}));!b&&this.config({key:"selectedStart"})&&this.config({key:"selectedEnd"})?(this.enableInconsistentWithBuybox(!0),b=this.popup.model.getDefaultSlot(this.daySlotAsDefaultSlot),
this.spcThrowCvIfSelected()):b?this.enableInconsistentWithBuybox(!1):b=this.popup.model.getDefaultSlot(this.daySlotAsDefaultSlot);var l=t("#sd_dummy_click_div_"+v.widgetIndex);l&&0<l.length&&l.click(function(a){var b=y("#sd_widgets_"+v.widgetIndex).parents("td").eq(0).prev().find("input[type=image]");b&&0<b.length&&b.click();a.stopPropagation()})}else{this.popup=W();this.popup.__config=v;this.popup.__selectFn=q;d=this.calData.getCal(a).ids;q=this.config({key:"selectedStart"});r=this.config({key:"selectedEnd"});
for(l in d)if(d[l].hasOwnProperty("s")&&d[l].hasOwnProperty("e")){var w=d[l].s,u=d[l].e,E=d[l].eu;d[l].su==q&&E==r&&(b||(b=O(null,null,null,d[l],l)));w==q&&u==r&&(b||(b=O(null,null,null,d[l],l)))}b?this.enableInconsistentWithBuybox(!1):(this.enableInconsistentWithBuybox(!0),this.spcThrowCvIfSelected());t(document).ready(k.getDocLoadFn())}this.active=a;this._changeCalendar()}this.dropdown&&this.dropdown.hasOwnProperty("enable")&&this.dropdown.enable(!0);this.popup&&this.popup.hasOwnProperty("enable")&&
this.popup.enable(!0);b?(this.isSpcSd()&&!m(b.identifier,this.config({key:"selectedSlot"}))&&this.config({key:"existing",value:"populating this field here will force a resubmit on the following call"}),this.popup.select(b.key),this.dropdown&&(this.dropdown.select(b.key),this.dropdown.selectCalled({arg:b.key}),this.dropdown._dom().change(function(){}))):this.handleNoSlotSelection()}else this._loadCalendar(a);else this.deactivateCalendar()};k.deactivateCalendar=function(){this._enableIcon(!1);f(this,
!1);this.dropdown&&this.dropdown.hasOwnProperty("enable")&&this.dropdown.enable(!1);this.popup&&this.popup.hasOwnProperty("enable")&&this.popup.enable(!1);var a=this.config({key:"clientCallbacks"});a&&a.calendarDisabled&&a.calendarDisabled()};k._changeCalendar=function(){function a(b){return{id:b[0],name:b[1]}}var b=this.calData.getCal(this.active);this.popup&&this.popup.setup(b);this.dropdown&&this.dropdown.clear();if(b&&b.days){var e=this.config({key:"timeslotDeterminationFn"});if(e&&e(b)){var b=
this.popup.model.sortedSlotList(),c;for(c in b)if(c){var d=b[c];this.popup&&this.popup.add(d.key);this.dropdown&&this.dropdown.add(d.key,d.toString(),d.services,d.startDateUTC,d.endDateUTC)}}else for(d in b.days)b.days.hasOwnProperty(d)&&(c=a(b.days[d]),this.popup&&this.popup.add(c.id),this.dropdown&&this.dropdown.add(c.id,c.name,""));this.dropdown&&(this.dropdown.make(),this.dropdown.onSelect());if(this.popup)this.popup.onSelect();c=function(a){};b=function(a){};this.dropdown&&(c=function(a){var b=
a.dropdown;return function(a){b.select(a)}});this.popup&&(b=function(a){var b=a.popup;return function(a){b.select(a)}});if(this.dropdown||this.popup){this.popup.selectCalled({register:"dropdown",fn:c(this)});this.dropdown&&this.dropdown.selectCalled({register:"popup",fn:b(this)});var k=this;c=function(a){if(a&&k.config({key:"existing"})&&k.config({key:"existing"})!=a){k.config({key:"existing",value:a});a=k.config({key:"id_select_fn"});var b={};y("#"+k.config({key:"dom_widget_root"})+" input[type=hidden]").each(function(){var a=
y(this).attr("key"),e=y(this).attr("value");a&&(b[a]=e)});var e;a&&(e=eval(a));a=k.config({key:"dom_widget_root"});e&&e(b,a)}else k.config({key:"existing",value:a})};r.$&&this.config({key:"message_hook"})&&$(this.config({key:"message_hook"}).get(0)).unbind("click");(b=this.config({key:"message_hook"}))&&0<b.length&&-1==b.attr("src").indexOf("radio-on")&&b.bind("click",c);this.popup&&this.popup.selectCalled({register:"rcxCallback",fn:c});this.dropdown&&this.dropdown.selectCalled({register:"rcxCallback",
fn:c})}}else r.console&&r.console.firebug&&console.warn("no calendar data"),this.deactivateCalendar()};k.selectCalled=function(a){this.dropdown&&this.dropdown.selectCalled(a);this.popup&&this.popup.selectCalled&&this.popup.selectCalled(a)};k.hasRes=function(a,b){return this.calData.hasRes(a,b)};k.getRes=function(a,b){return this.calData.getRes(a,b)};k._loadCalendar=function(a){this.calData.hasCal(a)&&this.calendar(a);this.calData.load(a,this)};k._enableIcon=function(a){var b=this.icon({key:"dom_disabled"}),
e=this.icon({key:"dom_enabled"});b?(b=t(b),a?b.hide():b.show()):r.console&&r.console.firebug&&console.warn("no disabled calendar icon configured");e?(e=t(e),a?e.show():e.hide()):r.console&&r.console.firebug&&console.warn("no active calendar icon configured")};k._getConfigDOM=function(a){a=this.config({key:a});return t(a?"#"+a:[])};k.disableAndDeselect=function(a){var b=t("#"+this.config({key:"dom_widget_root"})).parents("td").eq(0).prev().find("input:radio"),e=t("input[name='csm.scheduledDelivery']");
(0===e.length||1<t("input[name="+b.attr("name")+"]:radio:not(:disabled)").length)&&"ATVPDKIKX0DER"!=this.config({key:"load_payload"}).marketplace?(b.attr("disabled","disabled"),b.is(":checked")&&t("input[name="+b.attr("name")+"]:radio:not(:disabled):first").attr("checked",!0)):(a=a?a.defaultDates:{ultStart:2E5,ultEnd:200001,timeZone:"PST",minShip:1,maxShip:2},e.attr("value",encodeURIComponent(ScheduledDelivery.Data.Json.serialize({refdataVersion:"AFN",slot:{reservationId:"X",start:a.ultStart,mltStart:a.ultStart,
end:a.ultEnd,mltEnd:a.ultEnd,timeZone:a.timeZone,tz:"America/Los_Angeles",minShip:a.minShip,maxShip:a.maxShip,fss:"NOT_FAST_TRACK"},qualityInfo:{slotQuality:"DEFERRED",slotQualityDetail:"BUSINESS_UNKNOWN_PROMISE"}}))));b.parents("div.fake-label.a-box").addClass("sd-disabled")};k._loading=function(b,e){var c=this._getConfigDOM("dom_loadbar"),d=this._getConfigDOM("dom_reload"),k=this._getConfigDOM("dom_failbar"),f=this._getConfigDOM("dom_bar");b?(f.hide(),a(k,100,!1,!1),d.hide(),c.show()):e?(c.hide(),
f.hide(),a(k,100,!0,!1),d.show(),this.disableAndDeselect()):(c.hide(),a(k,100,!1,!0),d.hide(),f.show())};k.getDocLoadFn=function(){var a=this;return function(){var b=a.icon({key:"dom_enabled"});b&&(b=t(b),a.popup.hasOwnProperty("click")&&b.click(a.popup.click()))}};k.clientSideMetrics={};k.clientSideMetrics.initializeSDPopup="10";k.logClientSideMetricsForNoSlots=function(a){var b="",e="",c="",d="DP",k="",f=this.config({key:"load_payload"});f&&(b=f.marketplace,e=f.asin,c=f.shipoption,k=f.address);
this.isSpc()?d="SPC":(f=this.config({key:"id_select_fn"}))&&("shipoptionselectpage"===f.substring(0,20)?d="SOSP":"emptySetSOCallback"===f?d="YA":"emptyORCSetSOCallback"===f&&(d="ORC"));if(e instanceof Array)for(f=0;f<e.length;f++)ue.log(["mpid=",b,"&asin=",e[f],"&a=",a,"&fas=&ss=&svc=&so=",encodeURIComponent(c),"&sid=&page=",d,"&addr=",k,"&snum=0"].join(""),"scheduled-delivery",null);else ue.log(["mpid=",b,"&asin=",e,"&a=",a,"&fas=&ss=&svc=&so=",encodeURIComponent(c),"&sid=&page=",d,"&addr=",k,"&snum=0"].join(""),
"scheduled-delivery",null)};t(document).ready(k.getDocLoadFn());return k}function B(a){B.prototype.months=[a.strings["assoc-january_5173"],a.strings["assoc-february_5174"],a.strings["assoc-march_5175"],a.strings["assoc-april_5176"],a.strings["assoc-may_5177"],a.strings["assoc-june_5178"],a.strings["assoc-july_5179"],a.strings["assoc-august_5180"],a.strings["assoc-september_5181"],a.strings["assoc-october_5182"],a.strings["assoc-november_5183"],a.strings["assoc-december_5184"]];B.prototype.days=[a.strings.sd_sunday_short,
a.strings.sd_monday_short,a.strings.sd_tuesday_short,a.strings.sd_wednesday_short,a.strings.sd_thursday_short,a.strings.sd_friday_short,a.strings.sd_saturday_short];B.prototype.weekdays=[a.strings.sd_sunday,a.strings.sd_monday,a.strings.sd_tuesday,a.strings.sd_wednesday,a.strings.sd_thursday,a.strings.sd_friday,a.strings.sd_saturday];B.prototype.monthShort=[a.strings.sd_january_abbrev,a.strings.sd_february_abbrev,a.strings.sd_march_abbrev,a.strings.sd_april_abbrev,a.strings.sd_may_abbrev,a.strings.sd_june_abbrev,
a.strings.sd_july_abbrev,a.strings.sd_august_abbrev,a.strings.sd_september_abbrev,a.strings.sd_october_abbrev,a.strings.sd_november_abbrev,a.strings.sd_december_abbrev];97==a.locale_date?(B.prototype.textDateFn=function(a){return a.getUTCFullYear()+" "+this.months[a.getUTCMonth()].substr(0,3)+" "+a.getUTCDate()},B.prototype.displayDateFn=function(a){return this.weekdays[a.getUTCDay()]+", "+a.getUTCFullYear()+" "+this.months[a.getUTCMonth()]+" "+a.getUTCDate()}):15==a.locale_date?(B.prototype.textDateFn=
function(a){return a.getUTCDate()+" "+this.months[a.getUTCMonth()].substr(0,3)+" "+a.getUTCFullYear()},B.prototype.displayDateFn=function(a){return this.weekdays[a.getUTCDay()]+", "+a.getUTCDate()+" "+this.months[a.getUTCMonth()]+" "+a.getUTCFullYear()}):(B.prototype.textDateFn=function(a){return this.months[a.getUTCMonth()].substr(0,3)+" "+a.getUTCDate()+", "+a.getUTCFullYear()},B.prototype.displayDateFn=function(a){return this.weekdays[a.getUTCDay()]+", "+this.months[a.getUTCMonth()]+" "+a.getUTCDate()+
", "+a.getUTCFullYear()});B.prototype.slotDisplayDateFn=function(a){var c;if(a){var b=a.getUTCHours();a.getUTCMinutes();c=11<b?"pm":"am";b%=12;b=0===b?12:b;c=b+c}else c=null;return c+" "+this.displayDateFn(a)}}function Q(a){function d(b){if(!b||!b.message)return{};if(b=b.message)e?b.config({data:{str_date:a.strings.sd_install_order_date,str_slot:a.strings.sd_install_order_time}}):(b.config({data:{str_date:a.strings.sd_delivery_order_date,str_slot:a.strings.sd_delivery_order_time,sd_item_delivery_message:a.strings.sd_item_delivery_message,
sd_item_delivery_service_message:a.strings.sd_item_delivery_service_message,sd_installation:a.strings.sd_installation,sd_recycling:a.strings.sd_recycling,sd_haulaway:a.strings.sd_haulaway,sd_today:a.strings.sd_today,sd_tomorrow:a.strings.sd_tomorrow}}),a.strings.sd_for_these_items_range?b.config({key:"str_slot_message",value:a.strings.sd_for_these_items_range}):b.config({key:"str_slot_message",value:a.strings.sd_for_this_item_range}));return b}function c(b){if(b){var c=b.dropdown;c&&(c.config({key:"str_select",
value:a.strings.select_date_34088}),a.buybox?c.config({key:"str_disable",value:a.strings.sd_select_postal_code}):c.config({key:"str_disable",value:a.strings.sd_select_option}));if(c=b.popup)c.config({key:"sd_today",value:a.strings.sd_today}),c.config({key:"not_available_key",value:a.strings.sd_capacity_notavailable_52061}),c.config({key:"available_key",value:a.strings.sd_capacity_available_52060}),c.config({key:"promotion_available_key",value:a.strings.sd_capacity_promotion_available}),c.config({key:"selected_key",
value:a.strings.sd_selected}),c.config({key:"no_slots_for_week",value:a.strings.sd_no_slots_for_week}),e?(c.config({key:"popup_time_title",value:a.strings.sd_select_install_time}),c.config({key:"popup_date_title",value:a.strings.sd_select_install_date})):(c.config({key:"popup_time_title",value:a.strings.sd_select_delivery_time}),c.config({key:"popup_date_title",value:a.strings.sd_select_delivery_date})),c.config({key:"strings",value:a.strings}),c.config({key:"surcharge_message",value:"MFN2013"===
a.sdUseCase&&a.strings.sd_surcharge_notice_mfn||a.strings.sd_surcharge_notice_afn||a.strings.sd_surcharge_notice});a.buybox?b.config({key:"pickDateText",value:a.strings.sd_select_postal_code}):b.config({key:"pickDateText",value:a.strings.sd_select_option});0===b.config({key:"showDropdown"})&&b.config({key:"sd_item_delivery_message",value:a.strings.sd_item_delivery_message});b.config({key:"learnMoreText",value:a.strings.sd_learn_more});b.config({key:"reloadText",value:a.strings.sd_reload});e?(b.config({key:"noSlotsAddress",
value:a.strings.sd_no_installation_times}),b.config({key:"retrieveError",value:a.strings.sd_install_retrieve_error}),-1===a.merchantType.indexOf("Local")?b.config({key:"noSlotsAddressBB",value:a.strings.sd_install_no_scheduled_error}):b.config({key:"noSlotsAddressBB",value:a.strings.sd_installation_not_available_for_zipcode})):(b.config({key:"noSlotsAddress",value:a.strings.sd_no_delivery_times}),b.config({key:"retrieveError",value:a.strings.sd_delivery_retrieve_error}),b.config({key:"noSlotsAddressBB",
value:a.strings.sd_delivery_no_scheduled_error}));b.config({key:"inconsistentWithBuybox",value:a.strings.sd_previous_slot_not_available});b.config({key:"tryAgain",value:a.strings.sd_try_again});b.config({key:"sd_select_another_date_and_time",value:a.strings.sd_select_another_date_and_time})}}function b(a,b){a&&(a.config({data:{day:b.strings.day_33013,days:b.strings.days_30885,hour:b.strings.hour_33014,hours:b.strings.hours_30886,min:b.strings.minute_33015,mins:b.strings.minutes_30887,str_missed:"The time to place this order has passed.",
str_gen_before:"Order within the next "}}),e?a.config({key:"str_gen_after",value:"to guarantee installation date."}):a.config({key:"str_gen_after",value:"to guarantee delivery date."}))}function g(a,b){a&&a.config({data:{str_noRegions:b.strings.sd_no_regions,str_selectRegion:b.strings.sd_select_region_37475}})}function h(a,b){a&&("ATVPDKIKX0DER"==b.marketplaceID||"A1PA6795UKMFR9"==b.marketplaceID||"A13V1IB3VIYZZH"==b.marketplaceID?a.config({key:"postal_format",value:/^\d{5}$/}):"A1F83G8C2ARO7P"==
b.marketplaceID?a.config({key:"postal_format",value:/^[a-zA-Z]{1,2}[0-9rR][0-9a-zA-Z]? [0-9][abd-hjlnp-uw-zABD-HJLNP-UW-Z]{2}$/}):"A1VC38T7YXB528"==b.marketplaceID&&a.config({key:"postal_format",value:/^\d{3}-?\d{4}$/}),a.config({data:{str_length_error:b.strings.sd_zip_format_error,str_enter_error:b.strings.sd_postal_required_error,str_enter:b.strings.sd_enter_postal_code}}))}var e=a.merchantType&&-1!==a.merchantType.indexOf("Installation");if(a){var n=a.calendar,m=a.checkout,f=a.buybox,m=a.shipoption||
m||f,t=new B(a);n&&(n.dateDisplay=t,n.config({key:"dateDisplay",value:t}),n.popup.config({key:"months",value:t.months}),n.popup.config({key:"days",value:t.days}),t=a.strings.sd_popover_close,t&&""!==t||(t=a.strings.click_close_5690),n.popup.config({key:"closeText",value:t}));d(m).dateDisplay=new B(a);c(n);f&&(n=f.config,e?n({data:{str_select_date:a.strings.sd_select_install_date}}):n({data:{str_select_date:a.strings.sd_select_delivery_date}}),b(f.cutoff,a),g(f.regions,a),h(f.zipcode,a))}}function K(a,
d,c,b,g,h){d=d?d:{};this.UISettings=b=b?b:{};this.domSettings=g;this.dataField=h;this.UISettings.showDropdown=this.UISettings.showDropdown!==q&&0===this.UISettings.showDropdown?0:1;this.UISettings.orderDayAsFirstDay=this.UISettings.orderDayAsFirstDay!==q&&1===this.UISettings.orderDayAsFirstDay?1:0;this.UISettings.daySlotAsDefaultSlot=this.UISettings.daySlotAsDefaultSlot!==q&&1===this.UISettings.daySlotAsDefaultSlot?1:0;this.calendarRef=ba();this.widgetIndex=a;this.calendarRef.orderDayAsFirstDay=this.UISettings.orderDayAsFirstDay;
this.calendarRef.daySlotAsDefaultSlot=this.UISettings.daySlotAsDefaultSlot;this.calendarRef.showDropdown=this.UISettings.showDropdown;K.prototype.isTimeslot=function(a){if(!a||!a.hasOwnProperty("ids"))return!1;if("MFN2013"===b.sdUseCase)return!0;var c=0,d;for(d in a.ids)if(a.ids.hasOwnProperty(d)&&a.ids[d]){var f=a.ids[d];if(f.hasOwnProperty("e")&&f.hasOwnProperty("s")&&23>(f.e-f.s)/3600){c=1;break}}return c||a.timeslots};this.calendarRef.config({key:"dateDisplay",value:this.dateDisplay});this.calendarRef.config({data:{id_merchant:"A1",
id_marketplace:"M1",timeslotDeterminationFn:this.isTimeslot}});1===this.UISettings.showDropdown?this.calendarRef.dropdown.config({key:"element",value:"sduiDropdown"+a}):this.calendarRef.dropdown=null;this.calendarRef.popup.config({data:{element:"sdcal-popup"+a,current_month_id:"sdcal-curr-month",next_month_id:"sdcal-next-month",notaday:"sdcal-notaday",day:"sdcal-day",notavailable:"sdcal-noavail",available:"sdcal-avail",promotionavailable:"sdcal-promavail",selected:"sdcal-select",today:"sdcal-today",
prefix:"sdcal",closeText:"close",slotButton:"sd-timeslot-slot",daySpan:"1",dayLength:7,linkId:g?g.widgetRoot+" ."+g.calendarTrigger:"calendarLink"+a,rootWidgetId:g?g.widgetRoot:"sd_widgets_"+a,widgetIndex:a,leftNavEnabledClass:"sd-timeslot-scroll-title-left-enabled",leftNavEnabledInner:"&#8249;&#8249;",leftNavDisabledClass:"sd-timeslot-scroll-title-left-disabled",leftNavDisabledInner:"&#8249;&#8249;",rightNavEnabledClass:"sd-timeslot-scroll-title-right-enabled",rightNavEnabledInner:"&#8250;&#8250;",
rightNavDisabledClass:"sd-timeslot-scroll-title-right-disabled",rightNavDisabledInner:"&#8250;&#8250;"}},1);this.calendarRef.config({key:"selectedSlot",value:d.reservationId});this.calendarRef.config({key:"selectedStart",value:d.ultStart});this.calendarRef.config({key:"selectedEnd",value:d.ultEnd});this.calendarRef.config({key:"showDropdown",value:this.UISettings.showDropdown})}function ca(a,d,c,b){function g(a){function b(a){var e=["custom-value"];a=SDFramework.jq("input[value='"+a+"']");0<a.length?
(a=a.attr("name").match(/\.\d+\.\d+/),e.push(a[0])):e=[];return e.join("")}a&&a.setMappings({reservationId:[b("SD-ResID")||"custom-value.1.1"],mltStart:[b("SD-StartTime")||"custom-value.1.2"],mltEnd:[b("SD-EndTime")||"custom-value.1.3"],mltCutoff:[b("SD-CutoffTime")||"custom-value.1.5"],timeZone:[b("SD-WindowTZ")||"custom-value.1.4",b("SD-CutoffTZ")||"custom-value.1.6"],minShip:[b("SD-MinShipDtUTC")||"custom-value.1.11"],maxShip:[b("SD-MaxShipDtUTC")||"custom-value.1.10"],shipOffer:[b("SD-ShipOfferID")||
"custom-value.1.9"],fss:[b("SD-PromiseLFSS")||"custom-value.1.12"],data:[b("SD-Data")||"custom-value.1.13"],reservationType:[b("SD-ResType")],start:[b("SD-SlotStartLTZ")],end:[b("SD-SlotEndLTZ")],tz:[b("SD-SlotLongTZ")]})}function h(a,b,e){return a&&b&&e?(a.config({key:b,value:e}),!0):!1}function e(a){a.calendarRef.config({key:"clientCallbacks",value:{calendarDisabled:function(){if(a.bbSDUI)a.bbSDUI.onCalendarUnselected()}}})}function n(a){if(this.bbSDUI=T(a.dom)){if(a.zipcode){var b=a.dom,c=this.bbSDUI,
d=a.zipcode;c&&(c.zipcode=S({data:{dom_zipInput:"undefined"===typeof b?"sd_zipcode":b.widgetRoot+" ."+b.postalInput,dom_zipGo:"sd_zipcode_go",dom_zipEntError:"undefined"===typeof b?"sd_zipcode_enter_err":b.widgetRoot+" ."+b.ineligiblePostal,dom_zipValError:"undefined"===typeof b?"sd_zipcode_valid_err":b.widgetRoot+" ."+b.invalidPostal,dom_zipDefaultClass:"undefined"===typeof b?"":b.postalDefault,dom_zipOverdisplay:"undefined"===typeof b?"":b.widgetRoot+" ."+b.postalOverdisplay,dom_zipLabel:"undefined"===
typeof b?"":b.widgetRoot+" ."+b.postalLabel,dom_zipValue:"undefined"===typeof b?"":b.widgetRoot+" ."+b.postalValue,dom_zipEmpty:"undefined"===typeof b?"":b.widgetRoot+" ."+b.postalEmpty,dom_zipPrefix:"undefined"===typeof b?"":b.widgetRoot+" ."+b.postalPrefix}},d,1))}else(b=this.bbSDUI)&&(b.regions=R({data:{dom_regionList:"sd_region",dom_regionLoading:"sd_region_loading"}}));this.itemCache=new SDUtils.Cache(m);(b=this.bbSDUI)&&a&&(b.config({data:{dom_mainElement:a.dom?a.dom.widgetRoot+" ."+a.dom.content:
"sd_divUI",dom_notSureError:a.dom?a.dom.widgetRoot+" ."+a.dom.notSureError:"",dom_unknownError:a.dom?a.dom.widgetRoot+" ."+a.dom.unknownError:"",dom_zipInput:a.dom?a.dom.widgetRoot+" ."+a.dom.postalInput:null,dom_loading:"sd_region_loading"}}),h(b.checkbox,"dom_sdCheckbox",a.dom?a.dom.widgetRoot+" ."+a.dom.enabled:"sd_intent"),a.isAFN&&(h(b,"isAFN",a.isAFN),a.addressId&&0<a.addressId.length&&h(b,"id_address",a.addressId)),h(b,"id_merchant",a.merchantID),h(b,"id_marketplace",a.marketplaceID),h(b,"id_asin",
a.asinID),h(b,"id_sku",a.msku),h(b,"id_fmid",a.fmID),h(b,"id_quantity",a.quantity),h(b,"id_offerlist_id",a.offerListingID),a.shipoption&&h(b,"shipoption",a.shipoption));g(this.bbSDUI.inputs);b=this.bbSDUI.shoppingCart;h(b,"disabledHTML",a.cartDisabledHTML);h(b,"element","#addToCartSpan, #twisterAddToCartOrig");h(b,"cursorDisabled","not-allowed");h(this.bbSDUI.oneClick,"element","#oneClickSingleClick, .oneClickDiv b, #oneClickDivId");(b=this.bbSDUI.cutoff)&&b.config({data:{element:"sd_cutoff_div",
fail:"sd_cutoff_missed_div",dom_replace:"sd_cutoff"}});a=a.dom;if(!this.calendarRef.config({key:"showDropdown"})){b=this.bbSDUI;b.initMessage();var c="sd_widgets_BB .sdMessage_buybox p",d="sd_widgets_BB .sdMessage_buybox",f="sd_widgets_BB .sdMessage_service_buybox p";a&&(c=a.widgetRoot+" ."+a.slotDisplay,d=a.widgetRoot+" ."+a.slotDisplayContainer,f=a.widgetRoot+" ."+a.serviceDisplay);b.message&&b.message.config({data:{element:c,element_container:d,element_service:f,timeslotDeterminationFn:this.isTimeslot}})}e(this)}else u.warn("SD CFG BB noUI")}
var m=["asin","merchantID","sku","fmid"],f=["asin","merchantID","heavyBulky","sku","fmid"];c=1;b&&b.sdShowDropdown!==q&&(c=b.sdShowDropdown?1:0);n.prototype=new K("BB",null,d,{showDropdown:c},a.dom);n.prototype.injectDom=function(a,b,e,c,d){this.currentSD=a;e=this.calendarRef.config({key:"pickDateText"});this.calendarRef.config({key:"learnMoreText"});var f=this.calendarRef.config({key:"noSlotsAddressBB"}),h=this.calendarRef.config({key:"retrieveError"});this.calendarRef.config({key:"tryAgain"});var g=
this.calendarRef.config({key:"showDropdown"}),l=SDFramework.jq("#sd_widgets_"+a),m=[];m.push('<span class="sd_Loading" style="display: none;">');m.push("<p>");m.push(b);m.push("</p>");m.push("</span>");1===g?(m.push('<div class="sdMessage_buybox" style="display: none;"></div>'),m.push('<div class="sdMessage_buybox" style="display: none;"><span class="swSprite s_notifySm"></span><p></p></div>')):(m.push('<div class="sdMessage_buybox" style="display: none;"><p></p></div>'),m.push('<div class="sdMessage_service_buybox" style="display: none;"><p></p></div>'));
m.push('<span class="sd_widget" style="display: none">');1===g?(m.push('<span class="sd_Active">'),m.push('<select id="sduiDropdown',a,'" class="sdbuybox" name="sduiDate" disabled >'),m.push('<option value="" selected>',e,"</option>"),m.push("</select>"),m.push("</span>"),m.push('<span class="sd_calicon sd_calicon_disabled">'),m.push(c),m.push("</span>"),m.push('<a href="#" id="calendarLink',a,'" onclick="return false;">'),m.push('<span class="sd_calicon sd_calicon_enabled" style="display: none;">'),
m.push(d)):(m.push('<span class="sd_calicon sd_calicon_disabled">'),m.push(c),m.push("</span>"),m.push('<a href="#" id="calendarLink',a,'" onclick="return false;">'),m.push('<span class="sd_calicon sd_calicon_enabled" style="display: none;">'),m.push(d),m.push(this.calendarRef.config({key:"sd_select_another_date_and_time"})));m.push("</span>");m.push("</a>");m.push("</span>");m.push('<div class="sd_err_noslots" style="display: none;">');m.push('<span id="sd_bb_no_slots_message" style="color: #ff0000; font-weight: bold;">',
f,"</span>");m.push("</div>");m.push('<div class="sd_err_connect" style="display: none;">');m.push('<span id="sd_bb_retrieve_error" style="color: #ff0000; font-weight: bold;">',h,"</span>");m.push("</div>");m.push('<div id="sdcal-popup',a,'" class="sdCalendarPopover" style="display: none"></div>');l.prepend(m.join(""))};n.prototype.establishDomHooks=function(b){var e=this.currentSD;h(this.bbSDUI,"sd_calendar",this.calendarRef);var c=this.calendarRef;c.icon({key:"dom_disabled",value:".sd_calicon_disabled"});
c.icon({key:"dom_enabled",value:".sd_calicon_enabled"});h(c,"dom_bar","sd_widgets_"+e+" .sd_calendar");h(c,"dom_failbar","sd_widgets_"+e+" .sd_err_connect");h(c,"dom_noslots","sd_widgets_"+e+" .sd_err_noslots");h(c,"dom_loadbar","sd_widgets_"+e+" .sd_Loading");"undefined"!==typeof b&&(h(c,"dom_bar",b.widgetRoot+" ."+b.content),h(c,"dom_noslots",b.widgetRoot+" ."+b.notSureError),h(c,"dom_loadbar",b.widgetRoot+" ."+b.loading),h(c,"hideWidgetOnError",1),h(c,"dom_slotsContent",b.widgetRoot+" ."+b.content),
h(c,"dom_noslotsNotSure",b.widgetRoot+" ."+b.notSureError),h(c,"dom_noslotsUnknown",b.widgetRoot+" ."+b.unknownError),h(c,"dom_zipEntError",b.widgetRoot+" ."+b.ineligiblePostal),h(c,"dom_slotDisplay",b.widgetRoot+" ."+b.slotDisplayContainer),h(c,"dom_retry",b.widgetRoot+" ."+b.retry),h(c,"dom_slotTrigger",b.widgetRoot+" ."+b.calendarTrigger));h(c,"load_url",a.load_url);h(c.dropdown,"element","")};n.prototype.initializeSpecificDom=function(){this.bbSDUI.initializeDOM()};var t=[];n.prototype.getRequestItemIDForKey=
function(a){var b=this.itemCache.operate(a,{},SDUtils.Cache.IF_EXISTS.PRESERVE,SDUtils.Cache.IF_NEW.ADD),e=b.requestItemID;e===q&&(e=t.length,b.requestItemID=e,t[e]=a);return e};n.prototype.getKeyForRequestItemID=function(a){return t[a]};n.prototype.getIsSDAvailableParams=function(a,b){for(var e={marketplaceID:a},c=0,d=0;d<b.length;d++){var h=b[d];if(h.isSDAvailable===q){e["requestItemID"+c]=this.getRequestItemIDForKey(h);for(var g=0;g<f.length;g++){var m=f[g],l=h[m];null!==l&&l!==q&&(e[m+c]=l)}c++}}return e};
n.prototype.getKeyFromConfig=function(){return{asin:this.bbSDUI.config({key:"id_asin"}),merchantID:this.bbSDUI.config({key:"id_merchant"}),sku:this.bbSDUI.config({key:"id_sku"}),fmid:this.bbSDUI.config({key:"id_fmid"})}};n.prototype.setIsSDAvailable=function(a,b){this.itemCache.update(a,{isSDAvailable:b});this.itemCache.keysAreEqual(a,this.getKeyFromConfig())&&(this.bbSDUI.config({key:"isSDAvailable",value:b}),this.refreshAppearance())};n.prototype.onTwisterChildrenIsSDAvailableResponse=function(a){u.isDebugEnabled()&&
u.debug("isSDAvailable:",a);for(var b in a)a.hasOwnProperty(b)&&this.setIsSDAvailable(this.getKeyForRequestItemID(b),a[b])};n.prototype.onTwisterChildrenIsSDAvailableError=function(a,b,e){u.isWarnEnabled()&&(u.warn("SD isSDAvailable AJAX error: "+b),e&&u.warn("(HTTP error: "+e+")"))};n.prototype.cacheChildData=function(a){for(var b=0;b<a.length;b++){var e=a[b];this.itemCache.update(e,e)}};n.prototype.batchIsSDAvailable=function(a){var b=this.bbSDUI.config({key:"id_marketplace"});a=this.getIsSDAvailableParams(b,
a);var e=this;SDFramework.jq.ajax({url:"/gp/product/features/scheduled-delivery/is-sd-available-json.html?powerbar=0",type:"POST",dataType:"json",data:a,success:function(a){e.onTwisterChildrenIsSDAvailableResponse(a)},error:function(a,b,c){e.onTwisterChildrenIsSDAvailableError(a,b,c)},timeout:2E4})};n.prototype.fetchTwisterData=function(a){this.cacheChildData(a);this.batchIsSDAvailable(a)};return new n(a)}r.ScheduledDelivery={};r.SDUtils={};var u=function(){function a(){}function d(){return!1}for(var c=
["log","info","debug","warn","error"],b={suppressDefaultConsole:a},g=0;g<c.length;g++){var h=c[g],e="is"+h.charAt(0).toUpperCase()+h.substr(1)+"Enabled";b[e]=d;b[h]=a}return b}();ScheduledDelivery.Debug={requiredArg:function(a){return a}};r.SDFramework={jq:y};(function(){SDFramework.Class=function(){function a(a){SDFramework.jq.extend(this.rep,a)}function d(a,b){return function(){return b.apply(a,arguments)}}function c(a){var b=this.rep,e;for(e in a)a.hasOwnProperty(e)&&(this.interfaceInstance[e]=
d(b,a[e]))}function b(a){SDFramework.jq.extend(this.interfaceInstance,a)}return function(d){function h(){}this.interfaceInstance=h.prototype=d;this.rep=new h;this.declarePrivate=a;this.declarePublic=c;this.declarePublicFinal=b}}();SDFramework.defineStruct=function(){var a=arguments;return function(){for(var d=0;d<a.length;d++)this[a[d]]=arguments[d]}};SDFramework.defineClass=function(a){var d=function(){var c=a.initBase?a.initBase.apply(null,arguments):this,b=new SDFramework.Class(c);a.privateFunctions&&
b.declarePrivate(a.privateFunctions);a.publicFunctions&&b.declarePublic(a.publicFunctions);a.publicFinal&&b.declarePublicFinal(a.publicFinal);if(a.events)for(var d=c,h=a.events,e=0;e<h.length;e++)d[h[e]]=new SDFramework.Event;a.init&&a.init.apply(b.rep,arguments);a.publicInit&&a.publicInit.apply(c,arguments);return c};a.publicStatic&&SDFramework.jq.extend(d,a.publicStatic);return d}})();(function(){SDUtils.isEmptyObject=function(a){for(var c in a)if(a.hasOwnProperty(c))return!1;return!0};var a=SDFramework.defineClass({init:function(a){this.i=
0;this.arr=a},publicFunctions:{hasNext:function(){return this.i<this.arr.length},next:function(){var a=this.arr[this.i];this.i++;return a}}});SDUtils.ArraySet=SDFramework.defineClass({init:function(){this.arr=[]},publicFunctions:{add:function(a){if(this.contains(a))return!1;this.arr.push(a);return!0},remove:function(a){a=SDFramework.jq.inArray(a,this.arr);if(-1==a)return!1;this.arr[a]=this.arr[this.arr.length-1];this.arr.pop();return!0},contains:function(a){return-1!=SDFramework.jq.inArray(a,this.arr)},
getCount:function(){return this.arr.length},isEmpty:function(){return 0===this.getCount()},iterator:function(){return new a(this.arr)},getAny:function(){return this.arr[0]},removeAny:function(){return this.arr.pop()}}});SDFramework.Event=function(){this.handlers=new SDUtils.ArraySet;this.dispatch=function(){for(var a=this.handlers.iterator();a.hasNext();)a.next().apply(null,arguments)}};SDUtils.Cache=function(){function a(b,e){return function(a,c){return this.operate(a,c,b,e)}}function c(a,b,c){for(var d in b)!b.hasOwnProperty(d)||
!c&&a.hasOwnProperty(d)||(a[d]=b[d])}var b={PRESERVE:q,REPLACE:1,MERGE_OVERWRITE:2,MERGE_NO_OVERWRITE:3},g={DO_NOT_ADD:q,ADD:!0};return SDFramework.defineClass({publicStatic:{IF_EXISTS:b,IF_NEW:g},init:function(a){a.length||u.error("Invalid keyspec:",a);this.spec=a;this.buckets={}},privateFunctions:{primaryKey:function(a){return a[this.spec[0]]},supplementaryKeysAreEqual:function(a,b){for(var c=this.spec,d=1;d<c.length;d++)if(a[c[d]]!==b[c[d]])return!1;return!0},operateOnBucket:function(a,b,d,g,f){for(var t=
0;t<a.length;t++){var k=a[t];if(this.supplementaryKeysAreEqual(k.key,b)){switch(g){case SDUtils.Cache.IF_EXISTS.REPLACE:k.value=d;break;case SDUtils.Cache.IF_EXISTS.MERGE_OVERWRITE:c(k.value,d,!0);break;case SDUtils.Cache.IF_EXISTS.MERGE_NO_OVERWRITE:c(k.value,d,!1)}return k.value}}f===SDUtils.Cache.IF_NEW.ADD&&a.push({key:b,value:d});return d}},publicFunctions:{keysAreEqual:function(a,b){return this.primaryKey(a)==this.primaryKey(b)&&this.supplementaryKeysAreEqual(a,b)},operate:function(a,b,c,d){var f=
this.primaryKey(a),t=this.buckets[f];return t===q?(d==g.ADD&&(this.buckets[f]=[{key:a,value:b}]),b):this.operateOnBucket(t,a,b,c,d)},set:a(b.REPLACE,g.ADD),update:a(b.MERGE_OVERWRITE,g.ADD),get:a(b.PRESERVE,g.DO_NOT_ADD),clear:function(){this.buckets={}},forEachSubkey:function(a){for(var b=0;b<this.spec.length;b++)a(this.spec[b])}}})}()})();ScheduledDelivery.Fsm=SDFramework.defineClass({init:function(a){this.initMatrix(a.graph);this.triggers=a.triggers?a.triggers:{};this.slaves=a.slaves?a.slaves:
[];a.options&&(this.state=a.options.initialState,this.defaultSearch=a.options.defaultSearch,this.context=a.options.context);this.state===q&&(this.state="init");this.defaultSearch===q&&(this.defaultSearch=!1)},privateFunctions:{initMatrix:function(a){this.matrix={};for(var d in a)if(a.hasOwnProperty(d)){var c=a[d];this.matrix[d]={};for(var b in c)c.hasOwnProperty(b)&&(this.matrix[d][b]={fn:c[b],enabled:!0})}},incrementSearch:function(a,d,c){var b=this.matrix[a.state];if(b)for(var g in b)if(b.hasOwnProperty(g)&&
!c[g]&&b[g].enabled){var h={state:g,source:a};c[g]=!0;d.push(h)}return d.shift()},path:function(a){var d=[],c={state:this.state,source:null},b={};for(b[this.state]=!0;c.state!==a;)if(c=this.incrementSearch(c,d,b),c===q)return;for(a=[];null!==c.source;)a.unshift(c.state),c=c.source;return a},getTransitionMetadata:function(a,d){var c=this.matrix[a];if(c)return c[d]},driveSlaves:function(){for(var a=0;a<this.slaves.length;a++){var d=this.slaves[a],c=d.bindings[this.state];c!==q&&d.fsm.trySetState(c)}},
doSingleStepTransition:function(a,d){var c=this.getTransitionMetadata(this.state,a);if(c&&c.enabled)return!1!==c.fn.apply(this.context,d)?(this.state=a,this.driveSlaves(),!0):!1},doMultiStepTransition:function(a,d){var c=this.path(a);if(c===q)return q;for(var b=0;b<c.length;b++)if(!this.doSingleStepTransition(c[b],d))return!1;return!0},logTransitionFailed:function(a,d){u.error('State transition from "'+a+'" to "'+d+'" failed.')},logTransitionNotDefined:function(a,d){u.error('State transition from "'+
a+'" to "'+d+'" does not exist.')}},publicFunctions:{getState:function(){return this.state},setState:function(a,d){var c=this.state,b=this.trySetState(a,d);b||(!1===b?this.logTransitionFailed(c,a):this.logTransitionNotDefined(c,a))},trySetState:function(a,d){var c=this.defaultSearch,b=[];d&&(d.search!==q&&(c=d.search),d.args!==q&&(b=d.args));var g=this.doSingleStepTransition(a,b);if(g!==q)return g;if(this.state===a)return!0;if(c)return this.doMultiStepTransition(a,b)},setTransitionEnabled:function(a,
d,c){var b=this.getTransitionMetadata(a,d);b?b.enabled=c:this.logTransitionNotDefined(a,d)},enableTransition:function(a,d){this.setTransitionEnabled(a,d,!0)},disableTransition:function(a,d){this.setTransitionEnabled(a,d,!1)},setTrigger:function(a,d,c){var b=this.triggers[a];b||(b={},this.triggers[a]=b);b[d]=c},clearTrigger:function(a,d){var c=this.triggers[a];c&&delete c[d]},trigger:function(a){var d=this.triggers[a];d?(d=d[this.state])?this.setState(d):u.error('State "'+this.state+'" cannot consume trigger "'+
a+'".'):u.error('Trigger "'+a+'" is not defined.')},tryTrigger:function(a){if(a=this.triggers[a])if(a=a[this.state])return this.trySetState(a)}}});ScheduledDelivery.Data={};ScheduledDelivery.Data.ReservationIdParser=function(){return SDFramework.defineClass({init:function(a){this.parts=a?a.split(";"):[]},publicFunctions:{getSlotId:function(){return this.parts[0]},getEncodedCarriers:function(){return this.parts[1]},getEncodedCharges:function(){return this.parts[2]},getEncodedServices:function(){return this.parts[3]},
getCharges:function(){if(this.charges===q){var a=this.getEncodedCharges(),a=a?a.split("^"):[];this.charges={perItem:parseFloat(a[0]),perShipment:parseFloat(a[1]),currencyCode:a[2]}}return this.charges},getCarriers:function(){if(this.carriers===q){var a=this.getEncodedCarriers();this.carriers=a?a.split(","):[]}return this.carriers}}})}();ScheduledDelivery.Data.FulfillmentServiceSubclass=function(){function a(a){for(var b=0;b<d.length;b++)if(d[b]==a)return b;return q}var d=["FAST_TRACK_SAME_DAY","FAST_TRACK_FUTURE_DAY",
"NOT_FAST_TRACK",q];return{score:a,pickTightestSla:function(c){for(var b=c,d=1;d<arguments.length;d++){var h=arguments[d],e=a(h),n=a(b);if(n===q||e!==q&&e<n)b=h}return b}}}();ScheduledDelivery.Data.Json=function(){function a(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=e[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(b,e){var c,k,p,x,q=g,C,v=e[b];v&&"object"===typeof v&&"function"===typeof v.toJSON&&(v=v.toJSON(b));
"function"===typeof n&&(v=n.call(e,b,v));switch(typeof v){case "string":return a(v);case "number":return isFinite(v)?String(v):"null";case "boolean":case "null":return String(v);case "object":if(!v)return"null";g+=h;C=[];if("[object Array]"===Object.prototype.toString.apply(v)){x=v.length;for(c=0;c<x;c+=1)C[c]=d(c,v)||"null";p=0===C.length?"[]":g?"[\n"+g+C.join(",\n"+g)+"\n"+q+"]":"["+C.join(",")+"]";g=q;return p}if(n&&"object"===typeof n)for(x=n.length,c=0;c<x;c+=1)"string"===typeof n[c]&&(k=n[c],
(p=d(k,v))&&C.push(a(k)+(g?": ":":")+p));else for(k in v)Object.prototype.hasOwnProperty.call(v,k)&&(p=d(k,v))&&C.push(a(k)+(g?": ":":")+p);p=0===C.length?"{}":g?"{\n"+g+C.join(",\n"+g)+"\n"+q+"}":"{"+C.join(",")+"}";g=q;return p}}var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,h,e={"\b":"\\b","\t":"\\t","\n":"\\n",
"\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;return{serialize:"object"===typeof JSON&&"function"===typeof JSON.stringify?function(a,b,e){return JSON.stringify(a,b,e)}:function(a,b,e){var c;h=g="";if("number"===typeof e)for(c=0;c<e;c+=1)h+=" ";else"string"===typeof e&&(h=e);if((n=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",{"":a})},deserialize:"object"===typeof JSON&&"function"===typeof JSON.parse?function(a,b){return JSON.parse(a,
b)}:function(a,b){function e(a,c){var d,k,h=a[c];if(h&&"object"===typeof h)for(d in h)Object.prototype.hasOwnProperty.call(h,d)&&(k=e(h,d),k!==q?h[d]=k:delete h[d]);return b.call(a,c,h)}var d;a=String(a);c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return d=eval("("+a+")"),"function"===typeof b?e({"":d},""):d;throw new SyntaxError("JSON.parse");}}}();(function(){function a(a){try{return encodeURIComponent(ScheduledDelivery.Data.Json.serialize(a)).replace(/[\\~]/g,function(a){return"%"+a.charCodeAt(0).toString(16)})}catch(b){return u.error("Could not serialize SD data to JSON.",b,a),q}}function d(a,b){if(a){if(b===q||null===b)b="";a.jquery?a.attr("value",b):c.each(a,function(a,d){c("input[name='"+d+"']").attr("value",b)})}}var c=SDFramework.jq,
b={SPECIAL:-2,DATA_MEMBER:-1,SLOT:"slot"},g={data:b.SPECIAL,refdataVersion:b.DATA_MEMBER};ScheduledDelivery.Data.FormPersistence=SDFramework.defineClass({init:function(){this.data={}},privateFunctions:{updateFields:function(a,b){c.each(this.fields[a],function(a,c){d(c,b&&b[a])});this.data[a]=b},updateData:function(){var c=this.fields[b.SPECIAL].data;c&&d(c,a(this.data))}},publicFunctions:{setMappings:function(a){var e={};c.each(b,function(a,b){e[b]={}});c.each(a,function(a,c){e[g[a]||b.SLOT][a]=c});
this.fields=e},clearSlotFields:function(){this.updateSlotFields()},updateSlotFields:function(a){this.updateFields(b.SLOT,a);this.updateData()},updateDataMembers:function(a){var e=this.fields[b.DATA_MEMBER],g=this;c.each(a,function(a,b){g.data[a]=b;d(e[a],b)});this.updateData()}}})})();ScheduledDelivery.BuyBox={};var N={};ScheduledDelivery.BuyBox.HoverPopover=function(){return SDFramework.defineClass({init:function(a){this.container=SDFramework.jq(ScheduledDelivery.Debug.requiredArg(a.containerHtml));
a.contentHtml&&this.setContent(a.contentHtml)},publicFunctions:{setContentHtml:function(a){this.container.html(a)},bind:function(a){this.parent&&this.unbind();this.parent=a;a.amazonPopoverTrigger({location:["left","auto"],locationAlign:"middle",locationMargin:-10,width:null,skin:null,hoverHideDelay:0,hoverShowDelay:0,showOnHover:!0,showCloseButton:!1,literalContent:this.container})},unbind:function(){this.parent&&(this.parent.removeAmazonPopoverTrigger(),this.parent=null)}}})}();ScheduledDelivery.BuyBox.UIOverride=
function(){function a(a){b.wrap(a)}function d(a){b.unwrap(a)}var c=SDFramework.defineClass({init:function(a){this.cssClass=a;this.html='<span class="'+a+'" />';var b="span."+a;this.wrapperSelector=b;var e=function(){return SDFramework.jq(this).parent(b).length};this.contentFilter=e;this.nonContentFilter=function(){return!e.call(this)}},publicFunctions:{filterWrappedElements:function(a){return a.filter(this.contentFilter)},filterUnwrappedElements:function(a){return a.filter(this.nonContentFilter)},
selectWrappers:function(a){return a.parent(this.wrapperSelector)},wrap:function(a){this.filterUnwrappedElements(a).wrap(this.html)},unwrap:function(a){a=this.filterWrappedElements(a);a.unwrap?a.unwrap():a.each(function(){SDFramework.jq(this).parent().replaceWith(this)})}}}),b=new c("sdXuiVisibilityWrapper");return{WrapperTemplate:c,hide:a,show:d,setVisible:function(b,c){c?d(b):a(b)}}}();ScheduledDelivery.BuyBox.SDIntentCheckbox=SDFramework.defineClass({events:["onCheck","onClear"],privateFunctions:{dom:D("dom_sdCheckbox",
"check"),dispatchClick:function(){this.isChecked()?this.onCheck.dispatch():this.onClear.dispatch()}},publicFunctions:{config:z("checkbox"),bindDOM:function(){var a=this;this.dom().click(function(){a.dispatchClick()})},isChecked:function(){var a=this.dom();return a.prop?a.prop("checked"):a.is(":checked")},exists:function(){return 0<this.dom().size()},setChecked:function(a){if(this.isChecked()!==a){var d=this.dom();d.prop?this.dom().prop("checked",a):a?d.attr("checked","checked"):d.removeAttr("checked");
this.dispatchClick()}},setVisible:function(a){a?this.dom().show():this.dom().hide()}}});ScheduledDelivery.BuyBox.SlotStorage=SDFramework.defineClass({privateFunctions:{INPUT_VALUE_PREFIX:"custom-value",validSlotExists:function(a){a=this.slots[a];var d=!1,c;for(c in a)if(a.hasOwnProperty(c)){var b=a[c];0===c.indexOf(this.INPUT_VALUE_PREFIX)&&b&&(d=!0)}return d}},init:function(a,d){this.slotInputClass=a;this.rootElement=d;this.slots={}},publicFunctions:{config:z("slotstorage"),storeSlotInput:function(a){if(a){this.slots[a]=
{};var d=this;SDFramework.jq("#"+this.rootElement+" ."+this.slotInputClass).each(function(){var c=SDFramework.jq(this),b=c.attr("name"),c=c.attr("value");d.slots[a][b]=c})}},repopulateSlotInput:function(a){if(a){var d=this.slots[a],c;for(c in d)if(d.hasOwnProperty(c)){var b=d[c],g=null,g=SDFramework.jq("#"+this.rootElement+" input[name='"+c+"']."+this.slotInputClass);0<g.size()&&(g=SDFramework.jq(g[0]),g.attr("name",c),g.attr("value",b))}return this.validSlotExists(a)}},clearSlotInput:function(a){if(a){var d=
this;SDFramework.jq("#"+this.rootElement+" ."+this.slotInputClass).each(function(){var a=SDFramework.jq(this);0===a.attr("name").indexOf(d.INPUT_VALUE_PREFIX)&&a.attr("value","")})}}}});SDUtils.isBeacon=function(a){return 0<a.parents(".a-container").length};SDUtils.protectAgainstDoubleAction=function(){var a={};return function(d,c){if(!d)return r.console&&r.console.error&&console.error("Function is not used properly, use a unique owner to identify the caller."),!1;if(a.hasOwnProperty(d))return!0;
a[d]=1;setTimeout(function(){delete a[d]},c||100);return!1}}();N.AddToCartWrapper=function(){return SDFramework.defineClass({init:function(){this.warningPopover=new ScheduledDelivery.BuyBox.HoverPopover({containerHtml:'<div class="sd_bb_warn_pop" />'});this.disabledDomFsm=new ScheduledDelivery.Fsm({graph:{hiddenNotLoaded:{shown:function(){this.disabledDOM=this.loadDisabledJQ()}},shown:{hidden:function(){this.disabledDOM.hide()}},hidden:{shown:function(){this.disabledDOM.show()}}},options:{context:this,
initialState:"hiddenNotLoaded"}});this.enabledDomFsm=new ScheduledDelivery.Fsm({graph:{shown:{hidden:function(){this.overriddenUI=this.getAddToCartSelector();this.overriddenUI.hide()}},hidden:{shown:function(){this.overriddenUI.show()}}},options:{context:this,initialState:"shown"}})},privateFunctions:{getAddToCartSelector:function(){var a=this.config({key:"element"});"undefined"==a&&(u.warn("shopping-cart: no element"),a=[]);return SDFramework.jq(a)},loadDisabledJQ:function(){var a=this.config({key:"disabledHTML"});
if("undefined"!=a){var d=this.getAddToCartSelector(),a=SDFramework.jq(a);d.after(a);d=a.is("img")?a:a.find("img");0===d.length?u.warn("Add to cart disabled image not found"):(this.warningPopover.bind(d),d.css("cursor",this.config({key:"cursorDisabled"})))}else u.warn("no disabledHTML"),a=SDFramework.jq(document.createElement("span"));return a}},publicFunctions:{config:z("shoppingCart"),enable:function(a){a?this.enableAddToCart():this.disableAddToCart()},enableAddToCart:function(){this.disabledDomFsm.trySetState("hidden");
this.enabledDomFsm.setState("shown")},disableAddToCart:function(){this.enabledDomFsm.setState("hidden");this.disabledDomFsm.setState("shown")},setWarningMessage:function(a){this.warningPopover.setContentHtml(a)}}})}();N.OneClickWrapper=function(){return SDFramework.defineClass({publicFunctions:{config:z("oneClick"),enable:function(a){var d=this.config({key:"element"});d?ScheduledDelivery.BuyBox.UIOverride.setVisible(SDFramework.jq(d),a):u.warn("one-click: no element")}}})}();ScheduledDelivery.BuyBox.DomStringUpdater=
function(){var a=ScheduledDelivery.Debug;return SDFramework.defineClass({init:function(d){this.merchantStringMappings=a.requiredArg(d.domMerchantStringMappings);this.afnLearnMoreNode=a.requiredArg(d.afnLearnMoreNode)},privateFunctions:{resolveMerchantString:function(a,c){return this.merchantStringMappings[a][c]},updateMerchantTextElements:function(a,c){for(var b in a)a.hasOwnProperty(b)&&SDFramework.jq(b).text(this.resolveMerchantString(a[b],c))},resolveLearnMoreNode:function(a,c){return a?this.afnLearnMoreNode:
this.resolveMerchantString("sd_mfn_learn_more_node",c)}},publicFunctions:{updateStrings:function(a,c){this.updateMerchantTextElements({"#sd_bb_intent_text":"schedule_delivery_34179","#sd_bb_select_delivery_date_text":"sd-select-delivery-date-buybox","#sd_bb_notify1":"notify1","#sd_bb_notify2":"notify2"},c);var b=a?this.afnLearnMoreNode:this.resolveMerchantString("sd_mfn_learn_more_node",c),g;g=a||"Installation"!=c&&"LocalInstallation"!=c?"/gp/help/customer/display.html?nodeId=":"/gp/feature.html?docId=";
SDFramework.jq("#sd_bb_learn_more").attr("href",g+b)}}})}();ScheduledDelivery.BuyBox.Widget=SDFramework.defineClass({initBase:function(a,d,c,b){return ca(a,d,c,b)},init:function(a,d,c,b){this.weblabs=b;this.domStringUpdater=a.domStringUpdater;this.jsMerchantStringMappings=a.jsMerchantStringMappings;this.marketplaceID=a.marketplaceID;this.strings=a.strings;this.initUI();d=function(){};this.visFsm=new ScheduledDelivery.Fsm({graph:{hidden:{hidden:d,visible:this.container.show},visible:{hidden:this.container.hide,
visible:d}},options:{context:this.container,initialState:"hidden"}});this.calCacheFsm=new ScheduledDelivery.Fsm({graph:{init:{needNew:this.invalidateCalendars},needNew:{needNew:this.invalidateCalendars}},options:{context:this}});this.fsm=new ScheduledDelivery.Fsm({graph:{notLoaded:{enabled:d,disabled:d,requiredEnabled:this.xToRequiredNt,requiredDisabled:d},enabled:{enabled:d,disabled:this.xToDisabledNt,requiredEnabled:this.xToRequiredNt,requiredDisabled:this.xToDisabledNt},disabled:{enabled:d,disabled:d,
requiredEnabled:this.xToRequiredNt,requiredDisabled:d},requiredEnabled:{enabled:this.xFromRequiredNt,disabled:function(){this.xFromRequiredNt();this.toDisabledNt()},requiredEnabled:d,requiredDisabled:function(){this.xFromRequiredNt();this.toDisabledNt()}},requiredDisabled:{enabled:d,disabled:d,requiredEnabled:this.xToRequiredNt,requiredDisabled:d}},slaves:[{fsm:this.visFsm,bindings:{enabled:"visible",disabled:"hidden",requiredEnabled:"visible",requiredDisabled:"hidden"}},{fsm:this.calCacheFsm,bindings:{enabled:"needNew",
requiredEnabled:"needNew"}}],triggers:{require:{enabled:"requiredEnabled",disabled:"requiredDisabled"},unrequire:{requiredEnabled:"enabled",requiredDisabled:"disabled"},enable:{enabled:"enabled",disabled:"enabled",requiredEnabled:"requiredEnabled",requiredDisabled:"requiredEnabled"},disable:{enabled:"disabled",requiredEnabled:"requiredDisabled"}},options:{context:this,initialState:"notLoaded"}});this.setEnabledTrigger(c);this.setMerchantType(a.merchantType)},publicInit:function(){},privateFunctions:{initUI:function(){this.container=
SDFramework.jq("#sd_div");this.chkSdIntent=this.bbSDUI.checkbox},setRequiredTrigger:function(a){this.required=a;this.fsm.tryTrigger(a?"require":"unrequire")},setEnabledTrigger:function(a){this.enabled=a;this.fsm.tryTrigger(a?"enable":"disable")},xToDisabledNt:function(){this.chkSdIntent.setChecked(!1)},xToRequiredNt:function(){this.bbSDUI.shoppingCart.setWarningMessage(this.strings.sd_required_buybox_disabled);this.chkSdIntent.setChecked(!0);this.chkSdIntent.setVisible(!1)},xFromRequiredNt:function(){this.chkSdIntent.setVisible(!0);
this.bbSDUI.shoppingCart.setWarningMessage(this.nonRequiredShoppingCartWarning)},setMerchantType:function(a){this.merchantType=a;Q({calendar:this.calendarRef,buybox:this.bbSDUI,merchantType:a,marketplaceID:this.marketplaceID,strings:this.strings});SDFramework.jq("#sd_bb_no_slots_message").text(this.calendarRef.config({key:"noSlotsAddressBB"}));SDFramework.jq("#sd_bb_retrieve_error").text(this.calendarRef.config({key:"retrieveError"}));this.nonRequiredShoppingCartWarning=this.jsMerchantStringMappings?
this.jsMerchantStringMappings.sd_buybox_disabled[a]:this.strings.sd_buybox_disabled;this.required||this.bbSDUI.shoppingCart.setWarningMessage(this.nonRequiredShoppingCartWarning)},invalidateCalendars:function(){this.bbSDUI.unselectCalendar();this.chkSdIntent.isChecked()&&this.bbSDUI.selectCalendar()},isCallbackWeblabConsistent:function(a){if(!a){if(!this.weblabs.sdTwisterOnChildSelect)return u.warn("Twister Ajax executed with inconsistent weblab state (T1)."),!1}else if(this.weblabs.sdTwisterOnChildSelect&&
a.sdInfo===q)return u.warn("Twister Ajax executed with inconsistent weblab state (non-T1)."),!1;return!0}},publicFunctions:{declareContainerReady:function(){this.fsm.setState(this.enabled?this.required?"requiredEnabled":"enabled":this.required?"requiredDisabled":"disabled")},updateBuyBoxObject:function(a){try{if(u.debug("Updating SD widget",a),this.isCallbackWeblabConsistent(a))if(this.weblabs.sdTwisterAjax){u.debug("SDTwister: T3");this.bbSDUI.config({key:"id_offerlist_id",value:a.offerListingID});
this.bbSDUI.config({key:"id_quantity",value:a.quantity});var d={asin:a.asin,merchantID:a.merchantID,sku:a.mSku,fmid:a.fmID,offerListingID:a.offerListingID,quantity:a.quantity},c=this.itemCache.update(d,d);c.isSDAvailable===q&&u.isWarnEnabled()&&u.warn("Cache miss on SD Availability for item:",a,"Cache state:",this.itemCache);this.bbSDUI.config({key:"id_merchant",value:c.merchantID});this.bbSDUI.config({key:"id_asin",value:c.asin});this.bbSDUI.config({key:"id_sku",value:c.sku});this.bbSDUI.config({key:"id_fmid",
value:c.fmid});this.bbSDUI.config({key:"shipoption",value:c.shipOption});this.bbSDUI.config({key:"isSDAvailable",value:c.isSDAvailable?!0:!1});this.domStringUpdater.updateStrings(c.isFBA,c.merchantType);this.setMerchantType(c.merchantType);this.setEnabledTrigger(this.bbSDUI.config({key:"isSDAvailable"}))}else this.weblabs.sdTwisterOnChildSelect?(u.debug("SDTwister: T1"),a?(this.bbSDUI.config({key:"id_merchant",value:a.merchantID}),this.bbSDUI.config({key:"id_asin",value:a.asin}),this.bbSDUI.config({key:"id_sku",
value:a.mSku}),this.bbSDUI.config({key:"id_fmid",value:a.fmID}),this.bbSDUI.config({key:"id_offerlist_id",value:a.offerListingID}),this.bbSDUI.config({key:"id_quantity",value:a.quantity}),this.bbSDUI.config({key:"shipoption",value:a.shipOption}),this.domStringUpdater.updateStrings(a.sdInfo.isFBA,a.sdInfo.merchantType),this.setMerchantType(a.sdInfo.merchantType),this.setEnabledTrigger(!0)):this.setEnabledTrigger(!1)):(u.debug("SDTwister: C"),SDFramework.jq("#sd_intent").removeAttr("disabled"),this.bbSDUI.config({key:"id_merchant",
value:a.merchantID}),this.bbSDUI.config({key:"id_asin",value:a.asin}),this.bbSDUI.config({key:"id_sku",value:a.mSku}),this.bbSDUI.config({key:"id_fmid",value:a.fmID}),this.bbSDUI.config({key:"id_offerlist_id",value:a.offerListingID}),this.bbSDUI.config({key:"id_quantity",value:a.quantity}),this.calendarRef.calData.clearCals(),0<SDFramework.jq("#sd_intent:checked").length&&SDFramework.jq("#sd_zipcode_go").click());else this.fsm.trigger("disable")}catch(b){u.error("Unable to update Scheduled Delivery widget.",
b.message,b.stack)}}}});K.prototype.initializeDom=function(){var a=this.domSettings?this.domSettings.widgetRoot:"sd_widgets_"+this.widgetIndex;SDFramework.jq("#"+a+" .sd_Loading").hide();SDFramework.jq("#"+a+" .sd_err_nojs").hide();SDFramework.jq("#"+a+" .sd_err_connect").hide()};K.prototype.establishDomHooks=function(a){a=this.domSettings?this.domSettings.widgetRoot:"sd_widgets_"+this.widgetIndex;this.calendarRef.icon({key:"dom_disabled",value:"#"+a+" .sd_calicon_disabled"});this.calendarRef.icon({key:"dom_enabled",
value:"#"+a+" .sd_calicon_enabled"});this.calendarRef.config({data:{dom_bar:a+" .sd_widget",dom_failbar:a+" .sd_err_connect",dom_noslots:a+" .sd_err_from_result",dom_inconsistent:a+" .sd_err_inconsistent",dom_reload:a+" .sd_reload",dom_loadbar:a+" .sd_Loading"}});1===this.UISettings.showDropdown&&this.calendarRef.dropdown.config({key:"element",value:"sduiDropdown"+this.widgetIndex})};K.prototype.injectDom=function(a,d,c,b,g,h,e){function n(a,b,e){l.push('<img class="sd_calicon ',a,'" src="',e,'" width="25" alt="Calendar" height="17" border="0"');
b||l.push(' style="display: none;"');l.push("/>")}function m(){n("sd_calicon_disabled",!0,g)}function f(a,b,e,c){var d;if(SDUtils.isBeacon(A)){l.push('<div class="',a," a-box ",e?"a-alert ":"","a-alert-",b,'" style="display: none;">');l.push('<div class="a-box-inner">');e&&l.push('<i class="a-icon a-icon-alert"></i>');for(d=3;d<arguments.length;d++)l.push(arguments[d]);l.push("</div>")}else for(l.push('<div class="',a,' sdWarn" style="display: none;">'),d=3;d<arguments.length;d++)l.push(arguments[d]);
l.push("</div>")}var t=this.calendarRef.config({key:"pickDateText"}),k=this.calendarRef.config({key:"learnMoreText"}),p=this.calendarRef.config({key:"reloadText"}),x=this.calendarRef.config({key:"noSlotsAddress"}),q=this.calendarRef.config({key:"inconsistentWithBuybox"}),C=this.calendarRef.config({key:"retrieveError"}),v=this.calendarRef.config({key:"tryAgain"}),r=this.calendarRef.config({key:"showDropdown"}),A=SDFramework.jq("#"+(this.domSettings?this.domSettings.widgetRoot:"sd_widgets_"+this.widgetIndex)),
l=[];l.push('<input type="hidden" name="SD-SlotID-',a,'" key="ScheduledDeliveryEntity.SlotId"                   value=""/>');l.push('<input type="hidden" name="SD-ResID-',a,'" key="ScheduledDeliveryEntity.ReservationId"            value=""/>');l.push('<input type="hidden" name="SD-ResType-',a,'" key="ScheduledDeliveryEntity.reservationType"          value=""/>');l.push('<input type="hidden" name="SD-StartTime-',a,'" key="ScheduledDeliveryEntity.startDeliveryDate"        value=""/>');l.push('<input type="hidden" name="SD-EndTime-',
a,'" key="ScheduledDeliveryEntity.endDeliveryDate"          value=""/>');l.push('<input type="hidden" name="SD-WindowTZ-',a,'" key="ScheduledDeliveryEntity.deliveryTimeZone"         value=""/>');l.push('<input type="hidden" name="SD-CutoffTime-',a,'" key="ScheduledDeliveryEntity.cutoffTime"               value=""/>');l.push('<input type="hidden" name="SD-CutoffTZ-',a,'" key="ScheduledDeliveryEntity.deliveryTimeZone"         value=""/>');l.push('<input type="hidden" name="SD-SlotStartLTZ-',a,'" key="ScheduledDeliveryEntity.deliveryRange.startDate"  value=""/>');
l.push('<input type="hidden" name="SD-SlotEndLTZ-',a,'" key="ScheduledDeliveryEntity.deliveryRange.endDate"    value=""/>');l.push('<input type="hidden" name="SD-SlotLongTZ-',a,'" key="ScheduledDeliveryEntity.deliveryRange.timezone"   value=""/>');l.push('<input type="hidden" name="SD-Date-',a,'" value=""/>');l.push('<input type="hidden" name="SD-Cutoff-',a,'" value=""/>');d&&l.push('<input type="hidden" name="SD-OrderID-',a,'" value="',d,'"/>');c&&l.push('<input type="hidden" name="SD-ItemList-',
a,'" value="',c,'"/>');l.push('<input type="hidden" name="D_MinShipDtUTC-',a,'" key="ScheduledDeliveryEntity.promiseMinShipmentDate" value=""/>');l.push('<input type="hidden" name="D_MaxShipDtUTC-',a,'" key="ScheduledDeliveryEntity.promiseMaxShipmentDate" value=""/>');l.push('<input type="hidden" name="SD-PromiseLFSS-',a,'" key="ScheduledDeliveryEntity.promiseFulfillmentServiceSubclass" value=""/>');(d=this.dataField)&&(d.id||d.name)&&(l.push('<input type="hidden"'),d.id&&l.push(' id="',d.id,'"'),
d.name&&l.push(' name="',d.name,'"'),l.push("/>"));l.push('<span class="sd_Loading" style="display: none;">');l.push('<img src="',b,'" width="114" height="9" alt="Loading" border="0" />');l.push("</span>");1===r?(l.push('<div class="sdMessage" style="display: none;">'),l.push('<div class="sdMessage" style="display: none;"><span class="swSprite s_notifySm"></span><p></p></div>'),l.push("</div>")):(l.push('<div class="sdMessage" style="display: none;"><p></p></div>'),l.push('<div class="sdMessage_service" style="display: none;"><p></p></div>'));
l.push('<span class="sd_controls v1">');l.push('<span class="sd_widget" style="display: none">');1===r?(l.push('<span class="sd_Active">'),l.push('<select id="sduiDropdown',a,'" name="sduiDate" disabled >'),l.push('<option value="" selected>',t,"</option>"),l.push("</select>"),l.push("</span>"),m(),l.push('<a href="#" class="sd_calendar_link" id="calendarLink',a,'" onclick="return false;">')):(l.push('<a href="#" class="sd_calendar_link" id="calendarLink',a,'" onclick="return false;">'),l.push('<span class="sd_Active"> <u>'),
l.push(this.calendarRef.config({key:"sd_select_another_date_and_time"})),l.push("</u></span>"),m());n("sd_calicon_enabled",!1,h);l.push("</a>");l.push("</span>");l.push('<a class="learnmore" href="',e,'" target="_blank">',k,"</a>");l.push('<span class="sd_reload" id="sd_reload_',a,'" style="display: none;">');l.push(p);l.push("</span>");l.push("</span>");f("sd_err_noslots","info",!1,"<p>",x,"</p>");f("sd_err_inconsistent","info",!1,"<p>",q,"</p>");f("sd_err_connect","info",!1,"<p>",C,' <a class="sdReloadLink" href="#">',
v,"</a></p>");f("sd_err_from_result","info",!1,'<div class="sd_err_from_result_content"/>');l.push('<div id="sdcal-popup',a,'" class="sdCalendarPopover" style="display: none"></div>');A.prepend(l.join(""));A.find(".sdReloadLink").click(function(a){A.find(".sd_reload").click()})};sd_init_checkout_configure=function(a,d,c,b,g,h,e){function n(a){return a&&"false"!==a&&"0"!==a}function m(a,b,c,d,h){if(this.chkSDUI=V("sd_loaded_"+a.currentSD)){this.chkSDUI.config({key:"sd_calendar",value:this.calendarRef});
this.calendarRef.config({key:"load_url",value:c.load_url});this.calendarRef.config({key:"message_hook",value:a.messageHook});this.calendarRef.config({key:"dom_widget_root",value:"sd_widgets_"+a.currentSD});this.calendarRef.config({key:"dom_no_widget_root",value:"sd_no_widgets_"+a.currentSD});this.calendarRef.config({key:"dom_popup_trigger",value:"calendarLink"+a.currentSD});this.calendarRef.config({key:"id_enable_fn",value:a.onEnableFn});this.calendarRef.config({key:"id_select_fn",value:a.onSelectFn});
this.calendarRef.config({key:"id_is_selected",value:n(a.isSelected)});this.calendarRef.config({key:"weblabs",value:e});if(this.chkSDUI.inputs){var g=a.currentSD,m=f.id?SDFramework.jq("#"+f.id):[f.name];this.chkSDUI.inputs.setMappings({slotId:["SD-SlotID-"+g],reservationId:["SD-ResID-"+g],reservationType:["SD-ResType-"+g],ultStart:["SD-StartTime-"+g],ultEnd:["SD-EndTime-"+g],ultCutoff:["SD-CutoffTime-"+g],timeZone:["SD-CutoffTZ-"+g,"SD-WindowTZ-"+g],minShip:["D_MinShipDtUTC-"+g],maxShip:["D_MaxShipDtUTC-"+
g],fss:["SD-PromiseLFSS-"+g],start:["SD-SlotStartLTZ-"+g],end:["SD-SlotEndLTZ-"+g],tz:["SD-SlotLongTZ-"+g],data:m});this.chkSDUI.inputs.updateDataMembers({refdataVersion:h.sdUseCase})}this.chkSDUI.message&&(this.chkSDUI.message.config({data:{element:"sd_widgets_"+a.currentSD+" .sdMessage p",element_service:"sd_widgets_"+a.currentSD+" .sdMessage_service p",timeslotDeterminationFn:this.isTimeslot}}),this.chkSDUI.message.showDropdown=h.showDropdown!==q&&0===h.showDropdown?0:1)}this.chkSDUI.config({data:{dom_message_hook:a.messageHook,
dom_sdso:"sd-shipop",id_address:c.addressId,id_merchant:b.merchant,id_marketplace:c.marketplaceId,id_request:c.requestId,id_asin:b.asin,id_sku:b.msku,id_fmid:b.fmid,id_quantity:b.quantity,id_offerlist_id:b.olid,id_itemList_id:b.itemListId,id_shipoption:a.speedKey,id_enable_fn:a.onEnableFn,id_select_fn:a.onSelectFn,id_is_selected:a.isSelected,id_template_slot:d&&d.reservationId?d.reservationId:null}})}h=null===h?{}:h;var f=a.dataField;f&&(f.id||f.name)||(f={name:"SD-Data-"+a.currentSD});m.prototype=
new K(a.currentSD,b,g,h,null,f);m.prototype.initializeSpecificDom=function(){this.initializeDom()};a=new m(a,d,c,b,h);Q({calendar:a.calendarRef,checkout:a.chkSDUI,merchantType:c.merchantType,marketplaceID:c.marketplaceID,strings:c.strings,sdUseCase:h.sdUseCase});return a};H.declare("scheduledDeliveryWidget")})});
/* ******** */
(function(a,b,c){a.guardFatal(function(){a.when("A","ready").register("CashOnDeliveryJS",function(a){var b=!1;a.on("DDM_OnAddressChangeToCOD",function(c){var d=a.state("cashOnDeliveryPageState");a.$.isEmptyObject(d)||(b=d.isCodRestrictedGl);b||(c.supportsCODDelivery?a.$("#cod_eligible_message").removeClass("a-hidden"):a.$("#cod_eligible_message").addClass("a-hidden"))})})})()})(function(){var a=window.AmazonUIPageJS||window.P,b=a._namespace||a.attributeErrors;return b?b("CashOnDeliveryAssets"):a}(),
window);
/* ******** */
(function(a,d,k){a.execute(function(){a.when("A","a-popover","tellMeMoreLinkData","ready").execute(function(a,h){function e(b){if(b!==k){var a=b.title,f=encodeURI("&originalURI="+d.location.pathname),f=b.url+f;b=b.trigger;b="#"+b;var e=g(b),l={url:f,header:a,width:450,activate:"onclick",position:"triggerLeft",closeButton:"true",popoverLabel:a,closeButtonLabel:"Dismiss"};null!==a&&null!==f&&null!==b&&(null!==c&&h.remove(c),c=h.create(e,l).lock())}}var g=a.$,c=null;e(a.state("lowerPricePopoverData"));
a.state.bind("lowerPricePopoverData",function(b,a){e(b)});g(document).delegate("button#pfw_close_close-announce","click",function(a){a.preventDefault();c.unlock().hide();c.lock()});g(document).delegate("button#pfw_cancel_close-announce","click",function(a){a.preventDefault();c.unlock().hide();c.lock()})})})})(function(){var a=window.AmazonUIPageJS||window.P,d=a._namespace||a.attributeErrors;return d?d("RetailPricingFeedbackAsset"):a}(),window);
/* ******** */
(function(u,z,O){u.execute(function(){u.when("A","jQuery","dp-client-counter").execute(function(r,d,e){function l(){setTimeout(function(){d("#primenow-atc-spinner").addClass("aok-hidden");d("#primenow-atc-button").show()},2E3)}function b(b){var f=d("#primenowQuantity").val();f||(f=1);r.ajax("/cart/ajax/additem/ref=pn_dp_bb_atc",{method:"GET",params:[{name:"quantity",value:f},{name:"itemAsin",value:b.inputs.asin},{name:"offerId",value:b.inputs.offerListingID},{name:"qid",value:b.inputs.qid},{name:"sr",
value:b.inputs.sr}],timeout:4E3,withCredentials:!0,success:function(b,c,e){l();d.isEmptyObject(b.cartErrors)?(d("#primenow-button-stack").append(a),d("#primenow-atc-changeover").show()):d.isEmptyObject(b.cartErrors.actionErrorMessage)||(c=b.cartErrors.actionErrorMessage,d("#primenow-atc-warning-text").text(c),d("#primenow-atc-warning-alert").show());r.trigger("navCartTotalQuantityEvent",b.cartSummary.totalQuantity)},error:function(a,b,c){l();d("#primenow-atc-error").show();r.trigger("dpLogFatalsEvent",
"[Prime now browser add to cart failed with status: "+b+"]","FATAL","primenow_addtocart_failure");e.inc("houdiniAddToCartFail")}})}var a;r.declarative("primenow-atc",["click"],function(c){c=c.data;e.inc("houdiniAddToCartAction");a=d("#primenow-atc-changeover");d("#primenow-atc-changeover").detach();d("#primenow-atc-warning-alert").hide();d("#primenow-atc-error").hide();d("#primenow-atc-button").hide();d("#primenow-atc-spinner").removeClass("aok-hidden");b(c)})});u.when("A","jQuery").execute(function(r,
d){function e(e){d("span[data-primenow-atc]").each(function(){var b=d(this).attr("data-primenow-atc"),b=JSON.parse(b);b.hasOwnProperty("inputs")&&b.inputs.hasOwnProperty("quantity")&&(b.inputs.quantity=e,d(this).attr("data-primenow-atc",JSON.stringify(b)))})}r.on("a:dropdown:primenowQuantity:select",function(d){e(d.value)})})})})(function(){var u=window.AmazonUIPageJS||window.P,z=u._namespace||u.attributeErrors;return z?z("DetailPagePrimeNowDesktopOffersAssets"):u}(),window);
/* ******** */
(function(h){var f=window.AmazonUIPageJS||window.P,m=f._namespace||f.attributeErrors,b=m?m("OneClickDesktopAssets"):f;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,f,m){h.when("jQuery").execute("one-click-detection-js",function(b){function J(){var a=null;try{a=f.sessionStorage.getItem("1click-tsdelta")}catch(c){b("#1click-tsdelta").length&&""!=b("#1click-tsdelta").val()&&(a=b("#1click-tsdelta").val())}return a}function e(a){try{f.sessionStorage.setItem("1click-tsdelta",
a)}catch(c){b("#1click-tsdelta").length&&b("#1click-tsdelta").val(a)}}function w(){var a=b(g);if(a.length){var c=G,d=a.offset();a.width()&&a.height()&&(d.left+=a.width()/2,d.top+=a.height()/2);k=d;a=c.left-(k.left+y.x);c=c.top-(k.top+y.y);if(0<a&&a<=z.x&&0<c&&c<=z.y){M||b(u).find("option:selected").val()==v||(c=new Date,20>c.getTime()-N||(r&&(clearTimeout(r),r=null),O<H&&(N=c.getTime(),O++,R(),r=setTimeout(Q,I))));return}}setTimeout(w,pollInterval)}function Q(){w()}function A(){if(p!=m){var a=new Date;
b(this).parents("form").append('<input type="hidden" id="1click-timestamp" name="1click-timestamp" value="'+(a.getTime()/1E3-p)+'" />');a=0;B&&(a=B/1E3);a&&b(this).parents("form").append('<input type="hidden" id="1click-prefetch-timestamp" name="1click-prefetch-timestamp" value="'+(a-p)+'" />')}}function L(a,c){if(p==m){var d=new Date(c.getResponseHeader("Date"));p=(new Date).getTime()/1E3-d.getTime()/1E3;b(l).click(A);e(p)}a.error&&C()}function C(){M=!0;r&&(clearTimeout(r),r=null)}function S(){B=
0}function T(){b("#octiframe").remove();var a=document.createElement("iframe");b(a).attr("id","octiframe");b(a).css("display","none");b(a).attr("src","https://"+f.location.host+"/gp/oneclickprefetch/prime.txt");var c=document.getElementsByTagName("body");b(c[0]).append(a)}function R(){b(d).children("#1click-trial-configuration").length||P();b("#oneClickSwatchContainer .BBOneClickInput").each(function(){var a=b(this),c=a.attr("oci_key"),a=a.attr("oci_val");0<b("#"+c).length?b("#"+c).val(a):b(d).append('<input type="hidden" id="'+
c+'" name="'+c+'" value="'+a+'" />')});var a=b(d).serialize(),c=b(g).attr("name"),c=".x"===c.substr(c.length-2,2)?c+"=1":c+".x=1";a&&(a+="&");var a=a+c,a=a+"&one-click-trial=1",e=f.location.protocol,e="https"==b(d).attr("action").substr(0,5)?e+b(d).attr("action").substr(6):"http"==b(d).attr("action").substr(0,4)?e+b(d).attr("action").substr(5):e+("//"+f.location.host+b(d).attr("action"));T();B=(new Date).getTime();h.now("oneclick-prefetcher").execute(function(b){b&&b.triggerPrefetch(e,a,L,C,S)})}
function P(){var a=y.x+"x"+y.y,c=z.x+"x"+z.y;x="D";"cart"==q?x="C":"olp"==q&&(x="O");x+=c+"O"+a+"V0I"+I+"p"+pollInterval+"P"+H;b(d).append('<input type="hidden" id="1click-trial-configuration" name="trial-configuration" value="'+x+'" />')}var p,B=0,I=0,H=0,y={x:0,y:0},z={x:0,y:0},q=null,g=null,d=null,l=null,u=null,v=null,G={left:0,top:0},k={x:0,y:0},O=0,N=0,x,D=[{interval:5E3,prefetches:9,left:-140,top:-30,width:880,height:200,pollInterval:100}],E=[{interval:5E3,prefetches:9,left:-120,top:-30,width:270,
height:230,pollInterval:500}],F=[{interval:5E3,prefetches:9,left:-160,top:-25,width:240,height:220,pollInterval:500}],r,M=!1;h.when("jQuery","cf").execute("ocd-critical-feature-event",function(a){function b(c,d){h.now("oneclick-cheetah-handler").execute(function(b){var e=a(c),f=a(d);b&&e.length&&f.length&&b.appendAttributeOnSubmit(e,f)})}a(document).mousemove(function(a){G={left:a.pageX,top:a.pageY}});a(document).mouseout(function(){G={left:Number.NaN,top:Number.NaN}});var n="";"undefined"!==typeof ocPrecacheAmznMerchant&&
(n=ocPrecacheAmznMerchant);var r='form input[name="merchant-id"][value="'+n+'"] ~ div.oneclick input',n='form input[name="merchantID"][value="'+n+'"] ~ div.oneclick input[name="submit.one-click-2-day"]',m;if(a("#oneClickBuyButton").length)m=D[Math.floor(Math.random()*(D.length-1E-4))],q="detail",l=g="#oneClickBuyButton",d=a("form#handleBuy").length?"form#handleBuy":"form#addToCart",u=a("#buyboxAddressSelectionDropDown").length?"#buyboxAddressSelectionDropDown":"select#shipTo",v="add-new",b(d,g);else if(a("#one-click-button").length)m=
D[Math.floor(Math.random()*(D.length-1E-4))],q="detail",l=g="#one-click-button",d="form#addToCart",u="select#shipTo",v="add-new",b(d,g);else if(a("#oneClickCartButton").length)m=E[Math.floor(Math.random()*(E.length-1E-4))],q="cart",l=g="#oneClickCartButton",d="form#gutterCartViewForm",u="#cartAddresSelectionDropDown",v="new";else if(a("input#oneClick").length)m=E[Math.floor(Math.random()*(E.length-1E-4))],q="cart",l=g="input#oneClick",d="form#gutterCartViewForm",u="select#addressID",v="new";else if(a(r).length)m=
F[Math.floor(Math.random()*(F.length-1E-4))],q="olp",g=a(r),l='form input[name="merchant-id"] ~ div.oneclick input',d=g.parent().parent(),u=d.children('select[name="dropdown-selection"]'),v="add-new";else if(a(n).length)m=F[Math.floor(Math.random()*(F.length-1E-4))],q="olp",g=a(n),l='form input[name="merchantID"] ~ div.oneclick input',d=g.parent().parent().parent(),u=d.children('select[name="dropdown-selection"]'),v="add-new";else return;y={x:m.left,y:m.top};z={x:m.width,y:m.height};I=m.interval;
H=m.prefetches;pollInterval=m.pollInterval;"undefined"!==typeof ocInitTimestamp&&(J()?p=J():(p=(new Date).getTime()/1E3-ocInitTimestamp,e(p)));"olp"==q?a(l).click(function(){var b=a(this.form).attr("action"),b="http"==b.substr(0,4)?b.replace("http:","https:"):"https://"+f.location.host+b;a(this.form).attr("action",b);A();return!0}):"undefined"!==typeof ocInitTimestamp&&a(l).click(A);a(d).attr("action")&&(a(l).click(C),P(),(k=a(g).offset())&&k.left&&k.top&&(a(g).width()&&a(g).height()&&(k.left+=a(g).width()/
2,k.top+=a(g).height()/2),w()))})});h.when("jQuery").register("oneclick-prefetcher",function(b){return{triggerPrefetch:function(f,e,h,m,A){b.ajax({type:"GET",url:f,data:e,contentType:"text/plain; charset=UTF-8;",dataType:"json",success:function(b,e,f){h(b,f)},error:m,complete:A})}}})});
/* ******** */
(function(a,b,c){a.execute(function(){})})(function(){var a=window.AmazonUIPageJS||window.P,b=a._namespace||a.attributeErrors;return b?b("MomDetailPageAssets"):a}(),window);
/* ******** */
(function(k){var v=window.AmazonUIPageJS||window.P,w=v._namespace||v.attributeErrors,a=w?w("GCUIBaseJS"):v;a.guardFatal?a.guardFatal(k)(a,window):a.execute(function(){k(a,window)})})(function(k,v,w){k.when("a-util","gc-util","gc-formatter","gc-validator","gc-string").register("GC",function(a){var g={},h=[].slice.call(arguments,1);a.each(h,function(c){a.extend(g,c)});return g});k.when("A","gc-util","ready").register("gc-formatter",function(a,g){function h(a,b){if(-1===a.indexOf(b))return a;
var c=a.split(b);return c.slice(0,-1).join("")+b+c.slice(-1)}function c(c,e,f){var m=b.CURRENCY_SIGN,r=b.GROUPING_SEPARATOR,n=b.DECIMAL_SEPARATOR,t=b.DIGIT_OPTIONAL,k=b.DIGIT_REQUIRED,u=e.split(b.SUBPATTERN_SEPARATOR);e=u[0];u=u[1]||"-"+e;e=0>c?u:e;var u=-1!==e.indexOf(m),q=/([,\.#0]+)/.exec(e)[1],q=h(q,r),q=h(q,n),n=q.split(n),q=n[0],n=n[1]||"",p=q.lastIndexOf(r),v=Infinity;-1!==p&&(v=q.length-1-p);q=q.replace(r,"");c=Math.abs(c);d.performRounding&&(c=g.round(c,n.length,"half_even"));c=(c+"").split(".");
var w=c[0];c=c[1]||"";c=g.toFixedLength(c,n.length,"0","right");p=Math.max(q.length,w.length);w=g.toFixedLength(w,p," ","left");q=g.toFixedLength(q,p,"#","left");r="";for(--p;0<=p;p--){var z=w.charAt(p),y=q.charAt(p);y===t?" "!==z&&(r=z+r):y===k&&(r=" "===z?"0"+r:z+r)}if(Infinity!==v&&0<v){q=r;r=d.groupingSeperator;p=[];for(y=v;q.length;){p.length&&p.unshift(r);if(q.length<=y){p.unshift(q);break}p.unshift(q.substr(q.length-y,y));q=q.substr(0,q.length-y);-1<A.indexOf("_IN")&&(y=v-1)}r=p.join("")}if(""!==
c&&""!==n){q="";v=!1;for(p=n.length-1;0<=p;p--)if(w=c.charAt(p),y=n.charAt(p),y===t){if(v||"0"!==w)v=!0,q=w+q}else y===k&&(q=w+q);""!==q&&(r=r+(u?d.currencyDecimalSeparator:d.decimalSeparator)+q)}t=e.replace(/[,\.#0]+/,r);t=t.replace(m,f?"":d.currencySymbol);return a.trim(t)}function f(a,b){if("number"===typeof a)return!1;var c=b?d.currencyDecimalSeparator:d.decimalSeparator,e=""+a;if(-1!==e.indexOf(d.currencySymbol)||-1!==e.indexOf(c)&&-1!==e.indexOf(d.groupingSeperator))return!0;if(-1!==e.indexOf(d.groupingSeperator)){if(c=
e.split(d.groupingSeperator),2<c.length||2<c[1].length)return!0}else if(-1!==e.indexOf(c)&&(c=e.split(c),1===c.length))return!0;return!1}function e(a,b){var c=b?d.currencyDecimalSeparator:d.decimalSeparator;return""!==c&&(c=c.replace(/\./g,"\\."),c=a.match(new RegExp("^(.*)"+c+"([^"+c+"]*)$")),null!==c)?c.slice(1):[a,""]}function t(a,b){if(f(a)||isNaN(a)){var c=e(""+a,b),d=c[0],c=c[1]||"00",d=g.filterNumeric(d),c=g.filterNumeric(c);return g.toDecimal(d+"."+c)}return Number(a)}function u(a){n.hasOwnProperty(a)||
k.error('No formatter with the name: "'+a+'" for locale: '+A,"gc-formatter","getLocalizedFormatter");return n[a]}var p=a.state("gc-formatter-config"),d={locale:"en_US",currencySymbol:"$",currencyDecimalSeparator:".",decimalSeparator:".",groupingSeperator:",",dateShortPattern:"M/d/yy",currencyPattern:"¤#,##0.00;(¤#,##0.00)",decimalPattern:"#,##0.###",performRounding:!0},b={CURRENCY_SIGN:"¤",GROUPING_SEPARATOR:",",DECIMAL_SEPARATOR:".",DIGIT_OPTIONAL:"#",DIGIT_REQUIRED:"0",SUBPATTERN_SEPARATOR:";",
MONTH_REPLACE_SEPARATOR:"¤"},m=a.$;"object"===typeof p&&m.extend(d,p);var A=d.locale,r=function(){var b=function(){function b(c){return a.trim(""+c)}return{interpret:b,format:function(a){return b(a)}}}(),c=function(){function a(b){return g.toInteger(g.filterNumeric(""+b))}return{interpret:a,format:function(b){return""+a(b)}}}();return{message:b,integer:c}}(),n=function(){var a=function(){function a(b){return t(b,!1)}return{interpret:a,format:function(b){b=a(b);return c(b,d.decimalPattern)}}}(),f=
function(){function a(b){b=b.trim();if(!(new RegExp("^((\\d{1,3})(\\"+d.groupingSeperator+"\\d{3})+|\\d+)?(\\"+d.decimalSeparator+"\\d{0,2})?$")).test(b))throw"gcui-strict-amount-input-errors";b=b.split(d.groupingSeperator).join("");b=e(""+b,!1);return Number(b[0]+"."+(b[1]||"00"))}return{interpret:a,format:function(b){b=a(b);return c(b,d.currencyPattern,!0)}}}(),m=function(){function a(b){return t(b,!1)}return{interpret:a,format:function(b){b=a(b);return c(b,d.currencyPattern,!0)}}}(),r=function(){function a(b){return t(b,
!0)}return{interpret:a,format:function(b){b=a(b);return c(b,d.currencyPattern)}}}(),n=function(){function a(b,c){var e=null;if(b&&"function"===typeof b.getMonth)e=b;else if(b===g.toInteger(b))e=new Date(g.toInteger(b));else if("string"===typeof b){var e=c||d.dateShortPattern,e=e.split(/[^A-Za-z]+/),f=b.split(/[^0-9]+/);if(3!==f.length)e=null;else{for(var l,m,r,z=0;3>z;z++)switch(e[z]){case "yy":l=g.toInteger(f[z]);l=(60>=l?2E3:1900)+l;break;case "yyyy":l=g.toInteger(f[z]);break;case "MONTH":case "M":case "MM":m=
g.toInteger(f[z])-1;break;case "d":case "dd":r=g.toInteger(f[z])}e=new Date(l,m,r,0,0,0)}}return e}return{interpret:a,format:function(c,e,f){c=a(c,e);e="";if(c){e=c.getFullYear();var l=c.getMonth()+1;c=c.getDate();e=(f?f:d.dateShortPattern).replace("yyyy",e).replace("yy",(""+e).substr(2,2)).replace("MONTH",b.MONTH_REPLACE_SEPARATOR+l+b.MONTH_REPLACE_SEPARATOR).replace("MM",g.toFixedLength(l,2,"0")).replace("M",l).replace("dd",g.toFixedLength(c,2,"0")).replace("d",c)}return e},monthSeparator:b.MONTH_REPLACE_SEPARATOR}}();
return{decimal:a,amount:m,currency:r,date:n,strictAmount:f}}();return{interpolateMessage:function(a,b){return a.replace(/\{([^{}]+)\}/g,function(a,c){var d=c.split(","),e=d[0],f=d[1],d=d[2],e="object"===typeof b?b[e]:b;if("number"===f)switch(d){case "integer":e=r.integer.format(e);break;case "currency":e=n.currency.format(e);break;case "percent":break;default:e=n.decimal.format(e)}else"date"===f&&(e="short"===d?n.date.format(e,c.dateShortPattern):n.date.format(e,d));return e})},getLocalizedFormatter:u,
getFormatter:function(b){if(a.contains(b,"locale:"))return u(b.split(":")[1]);r.hasOwnProperty(b)||k.error("No formatter with the name: "+b,"gc-formatter","getFormatter");return r[b]},getLocale:function(){return d.locale},prettifyClaimCode:function(a){return 14>a.length?a:a.replace(/^(.{4})(.{6})(.+)?$/,"$1-$2-$3")}}});k.when("A","gc-util").register("gc-html",function(a,g){var h=a.$;return{scaleHtml:function(a,f,e){a=a.replace(/([0-9|.]+)px/g,function(a,b){return g.round(g.multiply(b,
f),0,"up")+"px"});for(var t=["width","height","cellpadding","cellspacing"],k=0;k<t.length;k++){var p=t[k];a=a.replace(new RegExp(" "+p+"=(['\"]?)([0-9]+)(['\"]?)","g"),function(a,b,c,e){return" "+p+"="+b+g.round(g.multiply(c,f),0,"up")+e})}a=a.replace(/ src=/g," data-src=");a=h("<div />").html(a);a.find("img").each(function(){var a=h(this);e?a.attr("data-src",g.clearImageStyleCode(a.attr("data-src"))):g.addImageStyleDimensions(a)});return a=a.html().replace(/ data-src=/g," src=")},makeHtml5:function(a){a=
a.replace(/ src=/g," data-src=");a=h("<div />").html(a);a.find("table, th, td").each(function(){var a=h(this),c=a.attr("cellpadding"),t=a.attr("cellspacing"),k=a.attr("valign"),p=a.attr("align"),d=a.attr("width"),b=a.attr("height");if(a.is("table")){var m=a.find("td, th");"undefined"!==typeof c&&(c=g.toInteger(c),m.css("padding",c),a.removeAttr("cellpadding"));"undefined"!==typeof t&&(t=g.toInteger(t),a.css("border-collapse",0<t?"separate":"collapse"),a.css("border-spacing",t),a.removeAttr("cellspacing"));
"undefined"!==typeof k&&(m.css("vertical-align",k),a.removeAttr("valign"))}"undefined"!==typeof p&&(a.is("table")&&"center"===p?a.css("margin","0 auto"):a.is("td")&&a.css("text-align",p),a.removeAttr("align"));"undefined"!==typeof d&&(a.css("width",d),a.removeAttr("width"));"undefined"!==typeof b&&(a.css("height",b),a.removeAttr("height"))});return a=a.html().replace(/ data-src=/g," src=")},escapeHtml:function(a){return"string"!==typeof a?"":a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,
"&quot;").replace(/'/g,"&#39;").replace(/>/g,"&gt;")},nl2br:function(a){return"string"!==typeof a?"":a.replace(/(\r\n)|(\n\r)|(\n)|(\r)/g,"<br />")}}});k.when("A","ready").execute(function(a){var g=a.$;if(a=a.state("gc-device-info")){var g=g("html"),h="";a.type&&(h+="gc-"+a.type);a.os&&a.os.name&&(h+=" gc-"+a.os.name);h+=a.isApp?" gc-app":" gc-no-app";g.addClass(h)}});k.when("A","ready").register("gc-metrics",function(a){function g(){return"function"===typeof v.uet}function h(a){g()&&
!f.hasOwnProperty(a)&&(f[a]=1,v.uet("bb",a,{wb:1}))}function c(a){g()&&f.hasOwnProperty(a)&&(delete f[a],v.uet("be",a,{wb:1}),v.uex("ld",a,{wb:1}))}var f={};return{trackSecondaryView:function(e){g()&&(a.on("a:popover:beforeShow:"+e,function(){h(e)}),a.on("a:popover:afterShow:"+e,function(){c(e)}))},incrementCounter:function(a){v.ue&&"function"===typeof v.ue.count&&v.ue.count(a,(v.ue.count(a)||0)+1)},stopWidgetTimer:c,startWidgetTimer:h}});k.when("A","gc-util","ready").register("gc-reftag",
function(a,g){function h(c,f,h){0!==f.length&&(f=f.hasClass("gc-indexed")?f:f.closest(".gc-indexed"),0!==f.length&&(f=f.index(),f++,h=g.toInteger(h),0<h&&(f+=h),a.get("/gc/reftag?ref_="+(c+"_"+f))))}function c(a,c){f.hasOwnProperty(a)||k.error("No reftag actions exist for feature: "+a,"gc-reftag");f[a].hasOwnProperty(c)||k.error("No reftag action exists: "+c+" for feature: "+a,"gc-reftag");var g=f[a][c];g.hasOwnProperty("reftag")||k.error("No reftag exists for feature: "+a+" and action: "+c,"gc-reftag");
return g.reftag}var f=a.state("gc-reftags")||{};a.declarative("gc-record-reftag","click",function(c){c.data&&c.data.reftag&&a.get("/gc/reftag?ref_="+c.data.reftag)});a.declarative("gc-record-indexed-reftag","click",function(a){a.data&&a.data.reftag&&h(a.data.reftag,a.$target)});return{getReftag:c,getFeatureReftags:function(c){f.hasOwnProperty(c)||k.error("No reftag actions exist for feature: "+c,"gc-reftag");var g={};a.each(f[c],function(a,f){a.hasOwnProperty("reftag")||k.error("No reftag exists for feature: "+
c+" and action: "+f,"gc-reftag");g[f]=a.reftag});return g},recordIndexedReftag:h,recordReftag:function(e,f){var g=c(e,f);a.get("/gc/reftag?ref_="+g)}}});k.when("A").register("gc-storage",function(a){function g(a){if(a)return"gc-storage-"+a}a=function(){this.storage={}};a.prototype.get=function(a){if(this.storage.hasOwnProperty(a))return this.storage[a]};a.prototype.set=function(a,f){this.storage[a]=f};a.prototype.remove=function(a){this.storage.hasOwnProperty(a)&&delete this.storage[a]};
a.prototype.clear=function(){this.storage={}};var h=new a;return{get:function(a){if(a=g(a))return h.get(a)},set:function(a,f){(a=g(a))&&h.set(a,f)},remove:function(a){(a=g(a))&&h.remove(a)},clear:function(){h.clear()}}});k.when("A","gc-formatter").register("gc-string",function(a,g){function h(c){var f=a.state("gc-strings")||{};f.hasOwnProperty(c)||k.error("String does not exist: "+c,"gc-string","getString");return f[c]}return{getStrings:function(c){for(var f=a.state("gc-strings")||{},
e={},g=0;g<c.length;g++){var h=c[g];f.hasOwnProperty(h)||k.error("String does not exist: "+h,"gc-string","getStrings");e[h]=f[h]}return e},getString:h,addStrings:function(c){var f={};a.each(c,function(a,c){""===c&&k.error("String cannot be blank: "+a,"gc-string","addStrings");f[a]=c});a.state("gc-strings",f)},addString:function(c,f){var e={};""===f&&k.error("String cannot be blank: "+f,"gc-string","addString");e[c]=f;a.state("gc-strings",e)},getInterpolatedString:function(a,f){return g.interpolateMessage(h(a),
f)}}});k.when("A").register("gc-util",function(a){var g=a.$,h={keyCodes:{alt:18,backspace:8,ctrl:17,del:46,end:35,enter:13,escape:27,home:36,shift:16,tab:9,num_zero:48,num_nine:57,numpad_zero:96,numpad_nine:105,A:65,Z:90,arrow_left:37,arrow_up:38,arrow_right:39,arrow_down:40}},c=function(){function a(b){return isNaN(b)?0:Number(b)}function c(a,b){var d=((a+"").split(".")[1]||"").length,e=((b+"").split(".")[1]||"").length;return d>e?d:e}function d(a,b,c){b="number"!==typeof b?2:b;b=0>
b?0:b;if(((a+"").split(".")[1]||"").length<b)return a;"string"===typeof c&&(c=c.toLowerCase());b=Math.pow(10,b);a*=b;switch(c){case "down":a=Math.floor(a);break;case "up":a=Math.ceil(a);break;case "half_even":var e=(a+"").split(".");c=e[0];e=e[1];a=5===(e?parseInt(e.charAt(0),10):0)?0===parseInt(c,10)%10%2?Math.floor(a):Math.ceil(a):Math.round(a);break;default:case "half_up":a=Math.round(a)}return a/b}return{add:function(d,e){d=a(d);e=a(e);var f=Math.pow(10,c(d,e));return(Math.round(d*f)+Math.round(e*
f))/f},subtract:function(d,e){d=a(d);e=a(e);var f=Math.pow(10,c(d,e));return(Math.round(d*f)-Math.round(e*f))/f},multiply:function(d,e){d=a(d);e=a(e);var f=Math.pow(10,c(d,e));return Math.round(d*f)*Math.round(e*f)/(f*f)},divide:function(d,e){d=a(d);e=a(e);var f=Math.pow(10,c(d,e));return Math.round(d*f)*(1/Math.round(e*f))},round:d,toDecimal:function(c){c=a(c);return d(100*c,0)/100},toInteger:function(a){return parseInt(a,10)||0}}}(),f=function(){return{arrayMove:function(a,c,d){var e=a.length;e&&
0<=c&&0<=d&&c<e&&d<e&&a.splice(d,0,a.splice(c,1)[0])},arrayIntersection:function(b,c){return!g.isArray(b)||!g.isArray(c)||a.objectIsEmpty(b)||a.objectIsEmpty(c)?[]:g.grep(b,function(a){return null===a?!1:-1<g.inArray(a,c)})}}}(),e=function(){return{parseTemplate:function(a,c){return a.replace(/\{([\w\.]*)\}/g,function(a,b){var d=b.split("."),e=c[d.shift()];if("undefined"===typeof e)return"";for(var f=0;f<d.length;f++)if(e=e[d[f]],"undefined"===typeof e||null===e)return"";return e})},filterNumeric:function(a){a=
a.replace(/[^0-9\-]/g,"").replace(/(?!^)\-/g,"");return"-"===a?"":a},interpretString:function(b){return"boolean"===typeof b||"number"===typeof b||""===a.trim(b)?b:isNaN(b)?"true"===b||"false"===b?"true"===b:b:Number(b)},parseQueryArguments:function(a,c){var d={};if("string"!==typeof a)return d;var e=a.split("?"),f=/&?([^=]+?)=([^&#]*)/g;if(2!==e.length)return d;for(var e=e[1],l,g;null!==(l=f.exec(e));)g=l[2],d[l[1]]=c?decodeURIComponent(g):g;return d},toFixedLength:function(a,c,d,e){a+="";if(a.length>
c)return a.substr(0,c);a.length<c&&(c=Array(c-a.length+1).join(d),a="right"===e?a+c:c+a);return a},extractFileNameFromFilePath:function(a){return a&&"string"===typeof a?a.replace(/^.*[\\\/]/,""):""}}}(),t=function(){return{renameProperty:function(a,c,d){if(!a.hasOwnProperty(c)||null===a[c])return!1;if(c===d)return!0;a[d]=a[c];delete a[c];return!0}}}(),k=function(){function a(b){return b.replace(c,".")}var c=/\._(.+)_\./g,d=/(.+?)\._(.+)_\.(.+)/,e=/(.+?)\.(jpg|png|gif|jpeg|bmp|ugc)(\?.*)?$/;return{clearStyleCode:a,
addStyleCode:function(c,f,g){if(!c)return"";if(!f)return c;g&&!d.test(c)&&(g=!1);g?"_"===f.charAt(0)&&(f=f.substr(1)):(c=a(c),f="."+f);return c.replace(e,"$1"+f+".$2$3")}}}(),p=function(){return{moveElToFront:function(a){0<a.index()&&a.parent().prepend(a)},toggleElements:function(a,c){return a&&a.length&&c&&c.length?(c.hide(),a.show(),!0):!1},scrollToElement:function(a,d,e){if(a.length){var f=g("html, body");a=a.offset().top-c.toInteger(e);d?f.animate({scrollTop:a},400):f.scrollTop(a)}},pruneChildElements:function(a,
d,e){d=c.toInteger(d);a=a.children(e?e:"");a.length<=d||a.slice(d).remove()},addImageStyleDimensions:function(b){var d=b.attr("data-src");if(d&&0===d.indexOf("http")){var e=c.toInteger(b.attr("width")),f=c.toInteger(b.attr("height")),g;a.capabilities.hires&&(e*=2,f*=2);0<e?g="_SX"+e+"_":0<f&&(g="_SY"+f+"_");g&&b.attr("data-src",k.addStyleCode(d,g))}},bindEventAndSuppressKey:function(a,c,d,e,f){if(!a||!c||!d)return!1;a.bind(c,function(a){(a.keyCode||a.which)===d&&(a.preventDefault(),e&&e(a));f&&f(a)})}}}(),
d=function(){return{isNumber:function(a){var c=a.keyCode||(a.$event?a.$event.keyCode:!1)||a;return!(a.shiftKey||a.$event&&a.$event.shiftKey)&&c>=h.keyCodes.num_zero&&c<=h.keyCodes.num_nine||c>=h.keyCodes.numpad_zero&&c<=h.keyCodes.numpad_nine?!0:!1},isArrowKey:function(a){a=a.keyCode||(a.$event?a.$event.keyCode:!1)||a;return a>=h.keyCodes.arrow_left&&a<=h.keyCodes.arrow_down?!0:!1}}}();return{constants:h,add:c.add,subtract:c.subtract,multiply:c.multiply,divide:c.divide,round:c.round,toDecimal:c.toDecimal,
toInteger:c.toInteger,arrayMove:f.arrayMove,arrayIntersection:f.arrayIntersection,parseTemplate:e.parseTemplate,filterNumeric:e.filterNumeric,interpretString:e.interpretString,extractFileNameFromFilePath:e.extractFileNameFromFilePath,renameProperty:t.renameProperty,parseQueryArguments:e.parseQueryArguments,toFixedLength:e.toFixedLength,moveElToFront:p.moveElToFront,toggleElements:p.toggleElements,scrollToElement:p.scrollToElement,pruneChildElements:p.pruneChildElements,addImageStyleDimensions:p.addImageStyleDimensions,
bindEventAndSuppressKey:p.bindEventAndSuppressKey,addImageStyleCode:k.addStyleCode,clearImageStyleCode:k.clearStyleCode,keyCodeIsNumber:d.isNumber,keyCodeIsArrowKey:d.isArrowKey}});k.when("A","gc-util").register("gc-validations",function(a,g){function h(c,b){return a.contains(c,b)}function c(a){return new RegExp("^"+a+"$","i")}var f=c("[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+(\\.[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+)*"),e=c("(([a-z0-9\\-]+\\.)+([a-z]{2,63}))"),t=c("[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+(\\.[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+)*@(([a-z0-9\\-]+\\.)+([a-z]{2,63}))"),
k=c("[\\s,]*[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+(\\.[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+)*@(([a-z0-9\\-]+\\.)+([a-z]{2,63}))((\\s*,\\s*)+[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+(\\.[\\w!#$%&'*+\\/=?\\^_`{|}~\\-]+)*@(([a-z0-9\\-]+\\.)+([a-z]{2,63})))*[\\s,]*"),p=c("([2-9][0-8][0-9])[-. ]?([2-9][0-9]{2})[-. ]?([0-9]{4})");return{notNull:function(a,b){return null!==a&&a!==w},notEmpty:function(a,b){return 0<(""+a).length},lengthAtMost:function(a,b){return(""+a).length<=b},lengthAtLeast:function(a,b){return(""+a).length>=
b},linesAtMost:function(c,b){for(var e=c.split("\n"),f=e.length,g=a.state("gc-validator-fields")["AmazonDownloadLineItem.message"][1].constraint,n=0;n<e.length;n++)f+=Math.max(Math.ceil(e[n].length/g),1)-1;return f<=b},linesLengthAtMost:function(a,b){return!0},atLeast:function(a,b){return a>=b},atMost:function(a,b){return a<=b},equal:function(a,b){return a===b},notEqual:function(a,b){return a!==b},contains:h,containsOne:function(a,b){return 2===(""+a).split(b).length},excludes:function(a,b){return!h(a,
b)},isNumeric:function(a,b){return!isNaN(a)},isInteger:function(a,b){return!isNaN(a)&&0===Number(a)%1},isBoolean:function(a,b){return"boolean"===typeof a||"string"===typeof a&&("true"===a||"false"===a)},isOneEmail:function(a,b){return 1===(""+a).split(/[\s,;]+/).length},isPositive:function(a,b){return 0<a},hasEmailLocal:function(a,b){var c=(""+a).split("@");return 1>c.length?!1:f.test(c[0])},hasEmailDomain:function(a,b){var c=(""+a).split("@");return 2>c.length?!1:e.test(c[1])},isValidEmail:function(a,
b){return t.test(""+a)},isCommaSeparatedEmailList:function(a,b){return k.test(""+a)},dateAtLeast:function(a,b){return a&&b&&a.getTime()>=b.getTime()},dateAtMost:function(a,b){return a&&b&&a.getTime()<=b.getTime()},isValidPhoneNumber:function(a,b){return p.test(""+a)}}});k.when("A","gc-util","gc-formatter","gc-string","gc-validations").register("gc-validator",function(a,g,h,c,f){function e(b){var c=a.state("gc-validator-fields");c.hasOwnProperty(b)||k.error("No validator field exists with the name: "+
b,"gc-validator","getFieldValidations");return c[b]}function t(a){switch(a){case "DateToday":return a=new Date,a=new Date(a.getFullYear(),a.getMonth(),a.getDate());case "DateNextYear":return a=new Date,a=new Date(a.getFullYear()+1,a.getMonth(),a.getDate())}}function u(b){return a.contains(b,"dynamic:")?(b=b.split(":")[1],t(b)):g.interpretString(b)}function p(a){var b=[];x.each(K,function(c,d){if(a.is(c))return b=d,!1});return b}function d(a){var b={};x.each(F,function(c,d){a.is(c)&&x.extend(b,d)});
return b}function b(a,b){var c=a.parent("div.a-input-text-wrapper");(c.length?c:a).toggleClass("a-form-error",!b)}function m(d,e,f,l,m,r){var n=x.extend({formatter:w,field:w,optional:!1,events:"change",formatEvents:w,addClass:!0,listField:!1},e),t="*"!==f,q=n.formatEvents||n.events;if("undefined"===typeof f||!t||a.contains(n.events,f)){"string"!==typeof n.field&&k.error("Field is required for validation","gc-validator","validateElement");e=d.val();var u=n.field,p=n.optional,C=n.addClass,E=n.formatter;
f=!t||a.contains(q,f);n=n.listField;d.is(":checkbox")&&(e=d.is(":checked"));if((q=""===a.trim(""+e))&&t||q&&p&&!l||m)return a.trigger("gc:validate:ignored",d,u),a.trigger("gc:validate:"+u+":ignored",d,r),C&&b(d,!0),-1;if("string"===typeof E){l=h.getFormatter(E);try{f&&d.val(l.format(e)),e=l.interpret(e)}catch(D){return C=c.getString(D),a.trigger("gc:validate:failure",d,u,e,[C]),a.trigger("gc:validate:"+u+":failure",d,e,[C],r),-1}}else e=g.interpretString(e);n&&(e=e.split(/[ ,\n;]+/));r=A(d,u,e,r,
n);C&&b(d,r);return r?1:0}}function A(b,c,d,f,l){a.trigger("gc:validate:before",b,c,d);a.trigger("gc:validate:"+c+":before",b,d);var m=[],n=e(c);if(q.length&&!g.arrayIntersection(n[0].validationGroups,q).length)return a.trigger("gc:validate:skipped",b,c,d),a.trigger("gc:validate:"+c+":skipped",b,d,f),!0;if(l)for(l=0;l<d.length;l++)r(d[l],n,m);else r(d,n,m);(n=0===m.length)?(a.trigger("gc:validate:success",b,c,d),a.trigger("gc:validate:"+c+":success",b,d,f)):(a.trigger("gc:validate:failure",b,c,d,
m),a.trigger("gc:validate:"+c+":failure",b,d,m,f));return n}function r(a,b,d){for(var e=0;e<b.length;e++){var l=b[e],g=a,m=d,r,n=l.validation;f.hasOwnProperty(n)||k.error("No validation method exists with the name: "+n,"gc-validator","getValidationMethod");r=f[n];n=u(l.constraint);r.call({},g,n)||(l=c.getString(l.errorId),l=h.interpolateMessage(l,n),m.push(l))}}function n(a,b){return l(a,b)}function l(b,c,d,e){var f=b.attr("data-gc-validate");if("string"===typeof f)return f=a.parseJSON(f),m(b,f,"*",
!!c,!!d,e)}function C(a){var b=!0;a.find("[data-gc-validate]").each(function(){b=0!==n(x(this))&&b});return b}function E(b,c){var d={};b.find("[data-gc-validate]").each(function(){var b=x(this),c;c=b.attr("data-gc-validate");"string"!==typeof c?c=null:(c=a.parseJSON(c),c=c.field);d.hasOwnProperty(c)||(d[c]=[]);d[c].push(b)});var e=!0,f=a.parseJSON(b.attr("data-gc-validate-form")||"{}").requireOne||[];x.each(d,function(a,d){var g=-1!==x.inArray(a,f),m;a:{m=p(b);for(var n=0;n<m.length;n++)if(-1!==a.indexOf(m[n])){m=
!0;break a}m=!1}for(var n=!1,r=d.length-1;0<=r;r--){var t=d[r];g?(t=l(t,0===r&&!n,m,c),n=n||1===t,e=0!==t&&e):e=0!==l(t,!1,m,c)&&e}});return e}function I(a,b){return a.is("form")?E(a,b):C(a)}function v(a){a=d(a);var b=!0;x.each(a,function(a,c){var d=c.call({});b=A(null,a,d)&&b});return b}function D(a){return function(){if(H)return a.apply(null,arguments);a.apply(null,arguments)}}var x=a.$,K={},F={},q=[],G=!1,H=!1,B=!0;a.declarative("gc-validate-form","submit",function(b){var c=b.$target,d=b.$event,
c=c.is("form")?c:c.closest("form"),e=!0;G&&d.preventDefault();if(B){c.removeAttr("gc-invalid");a.trigger("gc:validate:form:before",c);try{e=(e=I(c)&&e)&&v(c)}catch(f){throw d.preventDefault(),f;}e?a.trigger("gc:validate:form:success",c,d):(c.attr("gc-invalid",""),d.preventDefault(),a.trigger("gc:validate:form:failure",c));a.trigger("gc:validate:form:after",c)}else a.trigger("gc:validate:form:disabled",b)});a.on("gc:validate:form:upload",function(b){var c=!1;b.removeAttr("gc-invalid");a.trigger("gc:validate:form:before",
b);try{c=(c=I(b,!0))&&v(b)}catch(d){throw d;}c?a.trigger("gc:validate:form:success",b):(b.attr("gc-invalid",""),a.trigger("gc:validate:form:failure",b))});a.declarative("gc-validate","click change keydown keyup keypress",function(a){"object"===typeof a.data&&m(a.$target,a.data,a.type,!1,!1)});return{validate:D(n),validateWithin:D(I),validateVirtualField:function(a,b){d(a)[b]||k.error("No virtual field exists: "+b,"gc-validator","validateVirtualField");var c=d(a)[b].call({});A(null,b,c)},validateVirtualFields:D(v),
addVirtualField:function(a,b,c){F.hasOwnProperty(a)||(F[a]={});F[a][b]=c},setIgnoredFields:function(a,b){"string"===typeof b&&(b=[b]);K[a]=b},getValidationConstraint:function(a,b){for(var c=e(a),d=0;d<c.length;d++){var f=c[d];if(f.validation===b)return u(f.constraint)}k.error("Field "+a+" has no "+b+" validation","gc-validator","getValidationConstraint")},getDynamicConstraint:t,setEnabled:function(a){"boolean"===typeof a&&(B=a)},setValidationGroups:function(a){q=a},clearValidationGroups:function(){q=
[]},addValidationGroup:function(a){-1===x.inArray(a,q)&&q.push(a)},removeValidationGroup:function(a){a=x.inArray(a,q);-1<a&&q.splice(a,1)},getValidationGroups:function(){return q},getAlwaysPreventDefault:function(){return G},setAlwaysPreventDefault:function(a){G=a},getAlwaysReturnResult:function(){return H},setAlwaysReturnResult:function(a){H=a}}});k.register("gc-promise",function(){return function(a){function g(){t?setTimeout(function(){f(k)},0):p&&"function"===typeof e&&setTimeout(function(){e(d)},
0)}function h(a){t||p||(t=!0,k=a,g())}function c(a){t||p||(p=!0,d=a,g())}var f,e,t=!1,k,p=!1,d;setTimeout(function(){try{a(h,c)}catch(b){if("function"===typeof c)return c(b)}},0);return{then:function(a,c){if("function"!==typeof a)throw Error("callback is expected to be a function");f=a;e=c;g()}}}})});
(function(k){var v=window.AmazonUIPageJS||window.P,w=v._namespace||v.attributeErrors,a=w?w("PhysicalGiftCardsDetailPageAssets"):v;a.guardFatal?a.guardFatal(k)(a,window):a.execute(function(){k(a,window)})})(function(k,v,w){k.when("A","gc-execute","twister-view-registry","detailPage:RefreshHandler","gc-formatter").execute(function(a,g,h,c,f){function e(a){var c=m.currentDimCombID;if(typeof c!==w&&c.length){var d=A.inArray(b.currentAmount.toString(),b.dimensionValues[0]),c=c.split("_")[0];a=t(d,a);var e=
b.dimensionToAsinMap[a];b.getControllerInterface().handleClick(1,a.split("_")[1],"SWATCH");d!==c&&b.getControllerInterface().handleClick(0,a.split("_")[0],"DROPDOWN");"0"===p(e,0)&&k(b.currentAmount)}}function t(a,c){var d=a+"_"+c;if(b.dimensionToAsinMap[d])return d;if(a)return"0_"+c}function k(a){var b=[],d=c.getHandlerInstance("GiftCardCustomTwister");a=d.getURLParamObject("gpo",a,0);b.push(a);d.doPageRefresh(b)}function p(a,c){var d=b.dimensionAsinToValuesMap[a];return 0<d.length?d[c]:""}function d(a){a=
l.format(a);r.text(a);n.text(a)}var b,m,A=a.$,r=A("#gc-amount-dimension"),n=A("#gc-twister-swatch-button-list .gc-twister-swatch-button .twisterSlotDiv .a-size-mini"),l=f.getLocalizedFormatter("currency");b=h.createAndRegisterExternalView("GiftCardCustomTwister");m=b.twisterControllerHandle.twisterModel.twisterState;m.currentDimCombID.charAt(0);b.currentAmount=A("#gc-initial-vgc-amount").val();d(b.currentAmount);a.declarative("gc-select-design-swatch","click",function(a){a=a.$currentTarget.find("li").attr("id");
var b=a.lastIndexOf("_");a=a.substr(b+1);e(a)});a.declarative("gc-select-design-swatch-tablet","click",function(a){e(a.data.dimValueIndex)});a.on("a:dropdown:selected:gc_dropdown_selected_design_name",function(a){typeof a!==w&&typeof a.value!==w&&a.value.length&&(a=a.value.split(",")[0],e(a))});a.on("gc:validate:amount:success",function(a){var c=m.currentDimCombID;if(typeof c!==w&&c.length){var c=c.split("_")[1],e=A.inArray(a.toString(),b.dimensionValues[0]),c=t(e,c),e=b.dimensionToAsinMap[c];b.currentAmount=
a;b.getControllerInterface().handleClick(0,c.split("_")[0],"DROPDOWN");"0"===p(e,0)&&k(a);d(a)}})});k.when("A","ready").register("gc-amount-currency-symbol-utils",function(a){a=a.$;var g=a("#gc-order-form-custom-amount"),h=a("#gc-custom-amout-currency-symbol"),c=g.attr("placeholder");return{addCurrencySymbolToCustomValue:function(){g.addClass("gc-amount-padding");g.removeAttr("placeholder");h.removeClass("aok-hidden");h.addClass("gc-currency-symbol")},removeCurrencySymbolFromCustomValue:function(){g.removeClass("gc-amount-padding");
g.attr("placeholder",c);h.removeClass("gc-currency-symbol");h.addClass("aok-hidden")}}});k.when("A","gc-execute","ready").register("gc-validation-utils",function(a,g){var h=a.$,c=h("#gc-order-form-custom-amount");return{KEYDOWN_TIMEOUT:500,disableBuyBoxOptions:{triggerPopoverOnId:"gc-disable-atc",triggerPosition:"triggerLeft"},showPopover:!0,addInputErrorHighlighting:function(){c.addClass("gc-input-error")},removeInputErrorHighlighting:function(){c.removeClass("gc-input-error")}}});
k.when("A").execute(function(a){var g=a.$("#giftcardcustomtwister_feature_div");a=a.$("#gc-order-form-custom-amount");g.length&&a.length&&k.declare("gc-execute")});k.when("A","gc-execute","vgc-validation","gc-validation-utils","gc-amount-currency-symbol-utils","ready").execute(function(a,g,h,c,f){var e=a.$,t,k=c.KEYDOWN_TIMEOUT,p=e("#gc-amount-picker"),d=e("#gc-order-form-custom-amount"),b=e("#gc-order-form-amount");e("#gc-custom-amout-currency-symbol");d.focus(function(){p.find(".a-button-selected").removeClass("a-button-selected a-button-focus");
f.addCurrencySymbolToCustomValue()});d.keydown(function(a){var c=this;clearTimeout(t);t=setTimeout(function(){var a=e(c).val(),a=h.parseCustomInputAmount(a);""!==a&&b.val(a).trigger("change")},k)});d.blur(function(){var a=e(this).val(),a=h.parseCustomInputAmount(a);""===a&&(f.removeCurrencySymbolFromCustomValue(),b.val(a).trigger("change"))});a.declarative("gc-select-amount-swatch","click",function(a){b.val(a.$target.val()).trigger("change");f.removeCurrencySymbolFromCustomValue();d.val("")})});
k.when("A","gc-execute","gc-util","gc-validation-utils","gc-string","a-popover","ready").register("vgc-validation",function(a,g,h,c,f,e){function t(a,b){m.$amountWrapper.find(".gc-inline-error").remove();c.removeInputErrorHighlighting()}function k(){var a=d("#buybox");a.addClass("gc-buybox");a.append('<div id="gc-disable-atc"></div>');a.delegate("#gc-disable-atc","click mouseover",function(a){a.preventDefault();c.showPopover?(a=d("#"+c.disableBuyBoxOptions.triggerPopoverOnId),b=e.create(a,{inlineContent:'Select or input a valid <strong style="color:#e8281e">Amount</strong> to add to Shopping Cart',
width:200,position:c.disableBuyBoxOptions.triggerPosition,closeButton:!1})):(h.scrollToElement(m.$customAmount,!0,50),m.$customAmount.trigger("click"))})}function p(a){var b=(a+"").split("."),c=b[0]||"",b=b[1]||"";2<b.length&&(a=c+"."+b.substring(0,2));return a}var d=a.$,b,m={$customAmount:d("#gc-order-form-custom-amount"),$amountField:d("#gc-order-form-amount"),$amountWrapper:d("#gc-amount-wrapper"),$amountDimensionText:d("#gc-amount-dimension")},A=d("#gc-tmpl-inline-error").html();d("#gc-tmpl-atc-error").html();
a.on("gc:validate:success",function(c,f,l){if(null!==c){var g=m.$customAmount.val(),g=p(g);""!==m.$customAmount.val()&&m.$customAmount.val(g);"AmazonRetailLineItem.amount"===f&&a.trigger("gc:validate:amount:success",l);t(c,f);d("#buybox").removeClass("gc-buybox");d("#gc-disable-atc").remove();e.remove(b)}});a.on("gc:validate:failure",function(a,b,e,f){null!==a&&(t(a,b),a=d(h.parseTemplate(A,{message:f[0]})),b&&a.attr("gc-field",b),c.addInputErrorHighlighting(),m.$amountWrapper.append(a),m.$amountDimensionText.text(""),
k())});return{parseCustomInputAmount:p}});k.when("A","gc-execute").execute(function(a){a=a.$;a("#twister").delegate("input","keyup keypress",function(a){if(13===a.keyCode)return a.preventDefault(),!1})})});
/* ******** */
(function(c,f,v){c.execute(function(){c.when("A","jQuery","a-popover","cf").register("actionpanel-modified-popover",function(b,e,d){return function(h,c){function n(){b.on.scroll(function(){var a=d.get(h);if(a&&a.isActive()){var b=a.$container.get(0).getBoundingClientRect();if(0>b.bottom||0>b.right)a.attrs("originalFocus",null),a.hide()}})}function p(){var a=e(c);l.popoverHandle=d.create(a,{closeButton:!1,closeButtonLabel:a.attr("data-close-button-label")||"close",position:"triggerBottom",name:h,popoverLabel:a.attr("data-popover-label")||
h,width:"400",activate:b.capabilities.touch?"onmouseover":"onclick"});b.capabilities.touch&&a.bind("touchend",function(b){l.popoverHandle.isActive()||a.trigger("mouseenter")});b.on("a:popover:afterShow:"+h,q);b.on("a:popover:afterHide:"+h,r);b.on("a:popover:afterUpdatePosition:"+h,t)}function u(){k=e("#actionPanelOverlay");if(!k.length){var a=document.createElement("div");g.length&&(a.id="actionPanelOverlay",k=e(a).addClass("action-panel-overlay").css({width:g.outerWidth(),top:g.position().top}).bind("touchend click",
function(a){return!1}),g.append(a))}}function t(a){var b,d=a.popover.$trigger.get(0).getBoundingClientRect();b=f.pageYOffset?f.pageYOffset:"CSS1Compat"===(document.compatMode||"")?document.documentElement.scrollTop:document.body.scrollTop;var e=g.get(0).getBoundingClientRect().left+8;a.popover.$container.css({top:d.top+b+"px",left:e+"px"})}function m(){var a=g.get(0).getBoundingClientRect();k.css("height",a.bottom-a.top+"px")}function q(a){m();k.show();a.popover.$container.hasClass("burj-action-panel-modified-popover")||
a.popover.$container.addClass("burj-action-panel-modified-popover");a.popover.$trigger.trigger("ActionPanelModifiedPopover.showPopover",a)}function r(a){k.hide();a.popover.$trigger.trigger("ActionPanelModifiedPopover.hidePopover",a)}var g=e("#actionPanel"),k,l=this;g.length&&(p(),u(),n(),e(f).resize(m))}});c.when("jQuery").register("action-panel",function(b){var e="ap-onetime ap-sns ap-deal ap-pospromo ap-mom ap-fresh ap-oos ap-b2brd ap-used ap-sampling".split(" ");return{setPanelState:function(d){if(d.mode){for(var c=
b("#actionPanel"),f=0;f<e.length;f++)c.removeClass(e[f]);d="ap-"+d.mode;0<=b.inArray(d,e)&&c.addClass(d)}}}});c.when("jQuery","action-panel").register("toggleBB",function(b,c){return{init:function(){b('input[name="toggleBuyBox"]:radio').change(function(){var d=b(this).attr("value");c.setPanelState({mode:d});"onetime"===d||"used"===d?b("#csffsFeaturecontainer").removeClass("a-hidden"):b("#csffsFeaturecontainer").addClass("a-hidden")})}}})})})(function(){var c=window.AmazonUIPageJS||window.P,f=c._namespace||
c.attributeErrors;return f?f("DetailPageOffersDPv2Assets"):c}(),window);
/* ******** */
(function(a,b,u){a.execute(function(){a.when("jQuery","ready").register("btf-headings-burj",function(e){var f,b,g,h,m,k,l,n,p,q,d,c;a.when("page-refresh:page").execute(function(a){c=a});var t=function(){if(c&&c.config){var a=!1,b;for(b in c.config)if(c.config[b].affectedFeatures&&(e(c.config[b].affectedFeatures).each(function(b,d){var c=e(d);"none"!==c.css("display")&&"1"!==c.css("opacity")&&(a=!0)}),a))return!0}return!1},r=function(){if(t())setTimeout(function(){r()},200);else{f=e(".prestige_beauty.burj-body #session-sims-feature");
f.length&&(b=f.find("h2.a-carousel-heading").parent(),g=f.find(".a-column.a-span4.a-span-last.a-text-right"),b.length&&g.length&&(b.addClass("a-push2"),g.removeClass("a-span4"),g.addClass("a-span2")));h=e(".prestige_beauty.burj-body #purchase-sims-feature");h.length&&(m=h.find("h2.a-carousel-heading").parent(),k=h.find(".a-column.a-span4.a-span-last.a-text-right"),m.length&&k.length&&(m.addClass("a-push2"),k.removeClass("a-span4"),k.addClass("a-span2")));l=e(".prestige_beauty.burj-body #cm_cr_dpwidget");
n=l.find("h2");if(l.length&&n.length){var a=n.first();a.remove();l.prepend(a)}p=e(".burj-body #product-description-iframe");p.length&&(q=e(p[0].contentDocument.documentElement),q.length&&(d=q.find("h2"),d.length&&(d.css("color","#333"),d.css("font-size","21px"),d.css("font-weight","normal"),d.css("font-family","arial, verdana, helvetica, sans-serif"))))}};return{styleBTFHeadings:r}})})})(function(){var a=window.AmazonUIPageJS||window.P,b=a._namespace||a.attributeErrors;return b?b("DetailPageBTFDPv2Assets"):
a}(),window);
/* ******** */
(function(d,l,y){d.execute(function(){d.when("jQuery","ready").register("burj-featurebullets",function(a){var f=!1,b,c,e=function(){c.fadeTo(200,.75,null,function(){f?(c.find(".closeFB").addClass("aok-hidden"),a("#featureBulletsPlaceholder").removeClass("FBplaceholder"),b.find(".a-vertical").addClass("collapsedFeatureBullets"),a("#fbExpandableSection").removeClass("expanded"),c.removeClass("expandedFeatureBullets"),c.find("h1").removeClass("expandedFBHeader"),a(".fadeTextTopforFB").hide(),a(".fadeTextBottomforFB").hide(),
b.find("#fbExpanderMoreButtonSection").show(),f=!1):(b.find(".a-vertical").removeClass("collapsedFeatureBullets"),c.addClass("expandedFeatureBullets"),a("#fbExpandableSection").addClass("expanded"),c.find("h1").addClass("expandedFBHeader"),a("#featureBulletsPlaceholder").addClass("FBplaceholder"),b.find("#fbExpanderMoreButtonSection").hide(),a("#feature-bullets")[0].offsetHeight<a("#feature-bullets")[0].scrollHeight&&(a(".fadeTextTopforFB").show(),a(".fadeTextBottomforFB").show()),c.find(".closeFB").removeClass("aok-hidden"),
f=!0);c.fadeTo(200,1)})};return{init:function(){b=a("#feature-bullets");c=a("#fbSection");a(".fadeTextTopforFB").hide();a(".fadeTextBottomforFB").hide();var h=a("#fbExpandableSection"),g=a("#fbExpandableSectionContent");g.height()>h.height()&&(g.addClass("expandableSection"),g.click(function(){e()}),a("#fbExpanderMoreButtonSection").removeClass("aok-hidden"),b.find(".moreFB").click(function(){e()}),c.find(".closeFB").click(function(){e()}),c.hover(null,function(){f&&e()}))}}});d.when("jQuery","atf").register("title-burj",
function(a){var f,b,c,e,h,g,p,q,r,k,m,n,u,v=function(){h.text(g);if(m&&f.height()<b.height()){k.removeClass("aok-hidden");if(r){q=g;for(var a=0,e=g.length-1;a<e;){h.text(g);var d=g,l=a+Math.floor((e-a)/2),n=d.indexOf(" ",l),d=d.substring(0,-1!==n?n:d.length-1);h.text(d+"...");f.height()<b.height()?e=l-1:(a=l+1,q=h.text())}r=!1}h.text(q);c.addClass("showPointerOnHover");p=!0}else m&&(k.addClass("aok-hidden"),c.removeClass("showPointerOnHover"),p=!1)},t=function(){if(p){var a=f.position().top;b.fadeTo(200,
.75,function(){m?(u(),k.removeClass("expand").addClass("collapse titleToggleClickedState"),f.addClass("expandedTitle"),b.css("top",a),e.css("top",a-8)):(n(),k.removeClass("collapse").addClass("expand titleToggleClickedState"),f.removeClass("expandedTitle"),b.css("top",""),e.css("top",""));m=!m;v();e.height(b.height()+16);b.fadeTo(200,1,function(){k.removeClass("titleToggleClickedState")})})}},x=function(){m||t()},w=function(){r=!0;v()};return{init:function(){f=a("#title_feature_div");b=a("#titleSection");
c=a("#title");e=a("#titleOverlay");h=a("#productTitle");g=h.text();p=!1;m=!0;k=a("#expandTitleToggle");d.when("A","a-tooltip","atf").execute(function(a,b){n=function(){b.create(k,{content:a.state("titleExpanderTooltipState").content,position:"triggerTop"})};u=function(){b.remove(k)};m&&n()});a("#socialFabric").append(a('<hr class="a-spacing-medium a-divider-normal">'));w();a(l).resize(w);c.click(t);k.click(t);b.hover(null,x)}}})})})(function(){var d=window.AmazonUIPageJS||window.P,l=d._namespace||
d.attributeErrors;return l?l("DetailPagePInfoDPv2Assets"):d}(),window);
/* ******** */
(function(a,b,r){a.execute(function(){a.when("A","jQuery","a-popover","cf").register("burj-twister-utils",function(a,c,k){var e;return{getActivePopover:function(){e||(e=c("#twister").find("[id^=vodd-button-]"));var f=null;e.length&&e.each(function(c,a){var b=a.id.split("vodd-button-");if((b=k.get("vodd-popover-"+b[b.length-1]))&&b.isActive())return f=b,!1});return f},getPageOffset:function(){var a,c;b.pageYOffset?(a=b.pageYOffset,c=b.pageXOffset):"CSS1Compat"===(document.compatMode||"")?(a=document.documentElement.scrollTop,
c=document.documentElement.scrollLeft):(a=document.body.scrollTop,c=document.body.scrollLeft);return{top:a,left:c}}}});a.when("A","jQuery","a-popover","burj-twister-utils","cf").execute(function(a,c,k,e){function f(){a.on.scroll(function(){var a=e.getActivePopover();if(a){var c=g.get(0).getBoundingClientRect(),b=a.$container.get(0).getBoundingClientRect();0>c.bottom&&0>b.bottom&&(a.attrs("originalFocus",null),a.hide())}})}function l(){var a=m.offset().top+m.height()-d.offset().top,b=d.height()-a;
c("#twisterOverlay").css({height:b+"px",top:a+"px"})}function n(){var a=document.createElement("div");a.id="twisterOverlay";c(a).addClass("twister-overlay").css({width:d.outerWidth()}).bind("touchend click",function(a){return!1});d.append(a)}function p(a,b){l();d.addClass("twister-popover-visible");c("#twisterOverlay").show()}function q(a,b){d.removeClass("twister-popover-visible");c("#twisterOverlay").hide()}var d=c("#actionPanel"),m=d.find("#twister_feature_div"),g=c(".burj #twister"),h;(function(){if(g.length&&
(h=g.find("[id^=vodd-button-]"),h.length)){n();var d=function(){e.getActivePopover()&&l()};a.on("a:pageUpdate",d);c(b).resize(d);h.bind("TwisterVODD.showPopup",p).bind("TwisterVODD.hidePopup",q);f()}})()})})})(function(){var a=window.AmazonUIPageJS||window.P,b=a._namespace||a.attributeErrors;return b?b("DetailPageTwisterDPv2Assets"):a}(),window);
/* ******** */
(function(e){var d=window.AmazonUIPageJS||window.P,g=d._namespace||d.attributeErrors,b=g?g("BadgingMessagingAssets"):d;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,d,g){e.when("A").register("PromiseBasedBadgeCutoff",function(b){function e(a,f,b,d){f=Math.floor(b-f);if(0>=f||!d())return null;var c={hours:Math.floor(f/3600),minutes:Math.floor(f%3600/60),seconds:f%60};d="";d=1<c.hours?1<c.minutes?a.hoursMinutes:1===c.minutes?a.hoursMinute:a.hours:1===c.hours?
1<c.minutes?a.hourMinutes:1===c.minutes?a.hourMinute:a.hour:1<c.minutes?a.minutes:0<c.minutes?a.minute:1<c.seconds?a.seconds:a.second;return d.replace(/{{hours}}|{{minutes}}|{{seconds}}/gi,function(a){return c[a.substring(2,a.length-2)]})}function d(a,b,e){null===a?b():e(a)}return{_calculateNewMessage:e,_messageUpdater:d,run:function(a,f,g,k){var c=0,l=function(){return 0!==b.$(g).length},m=function(a){b.$(k).html("");clearTimeout(c)},n=function(a){b.$(g).html(a)},h=function(){var b=Math.floor((new Date).getTime()/
1E3),b=e(a,b,f,l);d(b,m,n)},c=setInterval(h,1E3);h()}}})});
/* ******** */
(function(n){var r=window.AmazonUIPageJS||window.P,v=r._namespace||r.attributeErrors,e=v?v("ReplacementPartsAssets"):r;e.guardFatal?e.guardFatal(n)(e,window):e.execute(function(){n(e,window)})})(function(n,r,v){n.now("jQuery-ReplacementPartsAutocomplete").execute(function(e){"undefined"===typeof e&&n.when("jQuery").register("jQuery-ReplacementPartsAutocomplete",function(a){a.rppAutocomplete=function(e,h){function l(){N={data:{},length:0}}function d(b,a){a&&b&&h.cacheLength&&(!N.length||N.length>h.cacheLength?
(l(),N.length++):N[b]||N.length++,N.data[b]=a)}function c(){if(!R){R=!0;L&&clearTimeout(L);var b=A.removeClass(h.loadingClass).val();F.is(":visible")&&g();h.mustMatch&&(e.lastSelected&&e.lastSelected===b||f(null));R=!1}}function m(b){var f=a("li",E);f&&(I+=b,0>I?I=0:I>=f.size()&&(I=f.size()-1),f.removeClass("hsx-rpp-ac-over"),a(f[I]).addClass("hsx-rpp-ac-over"))}function b(){var b=a("li.hsx-rpp-ac-over",E)[0];if(!b){var g=a("li",E);h.selectOnly?1===g.length&&(b=g[0]):h.selectFirst&&(b=g[0])}return b&&
"fuzzyMatchMessage"!==a.trim(b.selectValue?b.selectValue:b.innerHTML)?(f(b),!0):!1}function f(b){b||(b=document.createElement("li"),b.extra=[],b.selectValue="");var f=a.trim(b.selectValue?b.selectValue:b.innerHTML),g=A.val();Q=e.lastSelected=f;F.html("");A.val(f);c();h.onItemSelect&&setTimeout(function(){h.onItemSelect(b,g,f,O,S[f])},1)}function g(){F.hide();if("function"===typeof h.onResultsHide)h.onResultsHide(F[0]);h.resultsId&&F.removeAttr("id")}function p(b){var f=document.createElement("span");
f.innerHTML="undefined"!==typeof b?b+"<br>":X+"<br>";b=document.createElement("div");a(b).addClass("hsx-rpp-ac-summary");b.appendChild(f);return b}function k(b,f,g,d,k){if(f){A.removeClass(h.loadingClass);if("undefined"===typeof k||!1===k)if(V&&0!==f.length)E.innerHTML="";else return c();else if(0===f.length)return;h.showCountOfResults&&E.appendChild(p(d));a.browser.msie&&F.append(document.createElement("iframe"));E.appendChild(z(b,f,g));h.autoFill&&A.val().toLowerCase()===b.toLowerCase()?(f=f[0][0],
8!==P&&(A.val(A.val()+f.substring(Q.length)),b=Q.length,f=f.length,g=A.get(0),g.createTextRange?(d=g.createTextRange(),d.collapse(!0),d.moveStart("character",b),d.moveEnd("character",f),d.select()):g.setSelectionRange?g.setSelectionRange(b,f):g.selectionStart&&(g.selectionStart=b,g.selectionEnd=f),g.focus())):h.selectFirst&&a("li:first",E).addClass("hsx-rpp-ac-over");h.fuzzyMatchHasResultCallBack&&h.fuzzyMatchHasResultCallBack(A.val());b=h.popupParent||A;g=b.offset();for(f=0;b.length&&!b.is("body");){d=
b.css("z-index");if((d=parseInt(d,99))||!isNaN(d))f=Math.max(d,f);b=b.offsetParent()}b=Math.ceil(g.left);g=Math.ceil(g.top);f+=10;d=0<h.width?h.width:h.popupParent?h.popupParent.innerWidth():A.innerWidth();k=h.popupParent?h.popupParent.innerHeight():A.outerHeight();F.css({width:parseInt(d,50)+"px",top:g+k+"px",left:b+"px","z-index":f});h.resultsId&&F.attr("id",h.resultsId);F.show();if("function"===typeof h.onResultsShow)h.onResultsShow(F[0])}else c()}function w(b){if(!b)return null;if(b&&b.hits&&
b.hits.hits)return J(b.hits.hits,!1);if(b&&b.hits&&b.hits.hit){for(var a=[],f=[],g=0;g<b.hits.hit.length;g++){var c;if(h.displayValueFields){c="";for(var d=0;d<h.displayValueFields.length;d++){var k=h.displayValueFields[d];"undefined"!==typeof b.hits.hit[g].fields[k]&&(c+=b.hits.hit[g].fields[k]+" ")}c=c.trim()}else c=b.hits.hit[g].fields.modelnumber;f[c]===v&&(f[c]=c,S[c]=b.hits.hit[g].fields,T.push(c),a[a.length]=[c])}return a}}function t(b,a){var f="";b.hasOwnProperty(a)&&(f=b[a]);return f}function y(b,
a){var f;"undefined"!==typeof b._source[a]&&(f=b._source[a]+" ");return f}function J(b,a){for(var f={series:"normalized_series",modelnumber:"normalized_model"},g=[],c=[],d=0;d<b.length;d++){var k,p;if(h.displayValueFields){k="";for(p=0;p<h.displayValueFields.length;p++){var e=f[h.displayValueFields[p]];k=!0===a?k+" "+t(b[d],e):k+y(b[d],e)}k=k.trim()}else k=!0===a?k+t(b[d],"normalized_model"):k+y(b[d],"normalized_model");p=!0===a?b[d]:b[d]._source;c[k]===v&&(c[k]=k,S[k]=p,T.push(k),g[g.length]=[k])}return g}
function z(b,g,c){var d=document.createElement("ul"),k=g.length;0<h.maxItemsToShow&&h.maxItemsToShow<k&&(k=h.maxItemsToShow);if(O=c)c=document.createElement("li"),c.innerHTML="<div class='a-size-base' style='margin-top:5px;margin-bottom:5px;cursor:normal'>'"+b.toUpperCase()+"' not found.<br>Did you mean:<div>",c.selectValue="fuzzyMatchMessage",c.extra=null,d.appendChild(c);for(var p=0;p<k;p++){var e=g[p];if(e){c=document.createElement("li");c.innerHTML=h.formatItem?h.formatItem(e,p,k):e[0];c.selectValue=
e[0];b=null;if(1<e.length){b=[];for(var m=1;m<e.length;m++)b[b.length]=e[m]}c.extra=b;d.appendChild(c);a(c).hover(function(){a("li",d).removeClass("hsx-rpp-ac-over");a(this).addClass("hsx-rpp-ac-over");I=a("li",d).indexOf(a(this).get(0))},function(){a(this).removeClass("hsx-rpp-ac-over")}).click(function(b){b.preventDefault();b.stopPropagation();f(this)})}}a(d).mousedown(function(){Y=!0}).mouseup(function(){Y=!1});return d}function n(b){h.matchCase||(b=b.toLowerCase());if("string"===typeof h.url&&
0<h.url.length){H+=1;65E3<=H&&(H=0);if(h.onRequestData)h.onRequestData(b);var f=H;h.recordCSMCounterMetric("LookForWholegoodsAttempt");h.recordCSMCounterMetric("DataQueryAjaxCall");a.get(G(b),function(a,g){"success"===g?(h.recordCSMCounterMetric("DataQueryAjaxCallSuccess"),B(b,a,f)):h.recordCSMCounterMetric("DataQueryAjaxCallFail")})}else A.removeClass(h.loadingClass)}function B(b,a,f){var c=!1,d=[],k=[];if("undefined"!==typeof a&&"undefined"!==typeof a.myModels&&"undefined"!==typeof a.myModels.data&&
0<a.myModels.data.length){var p=J(a.myModels.data,!0),d=r(b,p);u(b,d,d.length,f,"Recently Searched Models");0<d.length&&(c=!0)}"undefined"!==typeof a&&"undefined"!==typeof a.popularModels&&"undefined"!==typeof a.popularModels.data&&0<a.popularModels.data.length&&(p=J(a.popularModels.data,!0),k=r(b,p),k=x(k,d),k.sort(),u(b,k,k.length,f,"Popular Models",c),0<k.length&&(c=!0));p=w(a);if("undefined"!==typeof p&&0<p.length){p=x(p,d.concat(k));ea=a=a.hits&&"undefined"!==typeof a.hits.found?a.hits.found:
a.hits.total;var e;h.showCountOfResults&&(e=p.length,d=a,e=parseInt(e,10),d=parseInt(d,10),k=parseInt(h.maxItemsToShow,10),e=X=d<k?ca.replace("{count}",e).replace("{total}",e):0<k&&k<e?ca.replace("{count}",k).replace("{total}",d):ca.replace("{count}",e).replace("{total}",d));u(b,p,a,f,e,c);h.recordCSMCounterMetric("LookForWholegoodsAttemptSucceed")}else c||g(),b&&h.recordCSMCounterMetric("LookForWholegoodsAttemptFail")}function x(b,a){var f,g=[];for(f=0;f<b.length;f++){var c;a:{c=void 0;for(c=0;c<
a.length;c++)if(a[c][0]===b[f][0]){c=!0;break a}c=!1}c||(g[g.length]=b[f])}return g}function r(b,a){var f=[];if("undefined"!==typeof a&&0<a.length)for(var g=0;g<a.length;g++){var c=a[g],d=!1;"undefined"!==typeof c&&0<c.length&&c[0].match(new RegExp(b,"gi"))&&(d=!0);d&&(f[f.length]=a[g])}return f}function u(b,a,f,g,c,d){g===H&&(a&&null!==a&&0<a.length?k(b,a,!1,c,d):h.doFuzzyMatch&&h.fuzzyMatchUrl&&null!==h.fuzzyMatchUrl?C(b,g):k(b,a,!1,c,d))}function C(b,f){h.recordCSMCounterMetric("LookForWholegoodsAttempt");
h.recordCSMCounterMetric("DataQueryAjaxCall");a.get(M(b),function(a,g){if("success"===g){h.recordCSMCounterMetric("DataQueryAjaxCallSuccess");var c;if(c=a){var d=[];if(c&&c.suggest&&c.suggest.suggestions)for(var p=[],e=0;e<c.suggest.suggestions.length;e++)p[c.suggest.suggestions[e].suggestion]===v&&(p[c.suggest.suggestions[e].suggestion]=c.suggest.suggestions[e].suggestion,d[d.length]=[c.suggest.suggestions[e].suggestion]);c=d}else c=null;f===H&&(c&&null!==c&&0<c.length?(h.recordCSMCounterMetric("LookForWholegoodsAttemptSucceed"),
k(b,c,!0)):h.fuzzyMatchNoResultCallBack&&h.fuzzyMatchNoResultCallBack(A.val()))}else h.recordCSMCounterMetric("DataQueryAjaxCallFail")})}function M(b){var a=-1===h.fuzzyMatchUrl.indexOf("?")?"?":"&";b=h.fuzzyMatchUrl+a+h.queryParam+"="+encodeURI(b);if(h&&h.extraParams)for(var f in h.extraParams)h.extraParams.hasOwnProperty(f)&&(b+="&"+f+"="+encodeURI(h.extraParams[f]));return b}function G(b){var a=-1===h.url.indexOf("?")?"?":"&";b=h.url+a+h.queryParam+"="+encodeURI(b);if(h&&h.extraParams)for(var f in h.extraParams)h.extraParams.hasOwnProperty(f)&&
(b+="&"+f+"="+encodeURI(h.extraParams[f]));return b}function K(b,a){a&&A.removeClass(h.loadingClass);for(var f=a?a.length:0,g=null,c=0;c<f;c++){var d=a[c];if(d[0].toLowerCase()===b.toLowerCase()){g=document.createElement("li");g.innerHTML=h.formatItem?h.formatItem(d,c,f):d[0];g.selectValue=d[0];var k=null;if(1<d.length)for(var k=[],p=1;p<d.length;p++)k[k.length]=d[p];g.extra=k}}h.onFindValue&&setTimeout(function(){h.onFindValue(g)},1)}var A=a(e).attr("autocomplete","off"),H=1;h.inputClass&&A.addClass(h.inputClass);
var E=document.createElement("div"),F=a(E).hide().addClass(h.resultsClass).css("position","absolute");0<h.width&&F.css("width",h.width);a("body").append(E);e.autocompleter=this;var L=null,Q="",I=-1,N={},V=!1,P=null,Y=!1,R=!1,O=!1,S={},T=[],X="",ca=a("#summaryMessageString").text().trim(),ea=0;l();if(null!==h.data){var aa="",W={},ba=[];"string"!==typeof h.url&&(h.cacheLength=1);for(var Z=0;Z<h.data.length;Z++)ba="string"===typeof h.data[Z]?[h.data[Z]]:h.data[Z],0<ba[0].length&&(aa=ba[0].substring(0,
1).toLowerCase(),W[aa]||(W[aa]=[]),W[aa].push(ba));if(W)for(var da in W)W.hasOwnProperty(da)&&(h.cacheLength++,d(da,W[da]))}A.keydown(function(a){P=a.keyCode;switch(a.keyCode){case 38:a.preventDefault();m(-1);break;case 40:a.preventDefault();m(1);break;case 9:case 13:b()&&(A.get(0).blur(),a.preventDefault());break;case 16:case 17:case 18:break;default:I=-1,L&&clearTimeout(L),L=setTimeout(function(){(46===P||8<P&&32>P)&&g();var b=A.val();b!==Q&&(Q=b,b.length>=h.minChars?(A.addClass(h.loadingClass),
n(b)):(A.removeClass(h.loadingClass),g()))},h.delay)}}).focus(function(){V=!0}).blur(function(){V=!1;Y||(L&&clearTimeout(L),L=setTimeout(c,200))});c();h.focus&&A.focus();this.triggerFuzzyMatch=function(){A.focus();C(A.val(),H)};this.flushCache=function(){l()};this.setExtraParams=function(b){h.extraParams=b};this.handleReceiveData=function(b,a){V=!0;B(b,a,H)};this.getResultCount=function(){return ea};this.findValue=function(){var b=A.val();h.matchCase||(b=b.toLowerCase());"string"===typeof h.url&&
0<h.url.length?a.get(G(b),function(a){a=w(a);K(b,a)}):K(b,null)};return this};a.fn.rppAutocomplete=function(e,h,l){h=h||{};h.url=e;h.data="object"===typeof l&&l.constructor===Array?l:null;h=a.extend({autoFill:!1,cacheLength:1,cellSeparator:"|",delay:400,extraParams:{},focus:!1,inputClass:"hsx-rpp-ac-input",lineSeparator:"\n",loadingClass:"",matchCase:0,matchSubset:1,matchContains:0,maxItemsToShow:-1,minChars:1,mustMatch:0,onResultsShow:null,onResultsHide:null,popupParent:null,queryParam:"q",doFuzzyMatch:!1,
fuzzyMatchUrl:null,fuzzyMatchHasResultCallBack:null,fuzzyMatchNoResultCallBack:null,resultsClass:"hsx-rpp-ac-results",resultsId:null,selectFirst:!1,selectOnly:!1,showCountOfResults:!1,width:0},h);h.width=parseInt(h.width,10);h.popupParent&&(h.popupParent=a(h.popupParent),0===h.popupParent.length&&(h.popupParent=null));var d=[];this.each(function(c){d[c]=new a.rppAutocomplete(this,h)});return d};a.fn.rppAutocompleteArray=function(a,e){return this.rppAutocomplete(null,e,a)};a.fn.indexOf=function(a){for(var e=
0;e<this.length;e++)if(this[e]===a)return e;return-1};return a.rppAutocomplete})});n.now("HSXMetricsLogger").execute(function(e){"undefined"===typeof e&&n.when("A","HSXSushiLogger","HSXCSMLogger").register("HSXMetricsLogger",function(a,e,h){var l=e.createLogger(),d=function(b,f,g){var c=a.state("rpp"),d=r.ue;if(!a.objectIsEmpty(d)){var e=r.ue_mid,m=r.ue_sid,d=d.rid;g||(g={});if(c){c.finderName&&(g.finderName=c.finderName);c.pageType&&(g.pageType=c.pageType);c.browseNode&&(g.browseNode=
c.browseNode);c.ptd&&(g.ptd=c.ptd);c.category&&(g.category=c.category);c.weblabName&&(g.weblabName=c.weblabName);c.weblabTreatment&&(g.weblabTreatment=c.weblabTreatment);if(c.stripeParams){var h=g,J=c.stripeParams.scope,q="default";-1!==["inkandtoner","personalcomputers","camera"].indexOf(J)&&(q=J);h.scope=q}c.asin&&!g.asin&&(g.asin=c.asin);c.modelBrand&&!g.modelBrand&&(g.modelBrand=c.modelBrand);c.modelSeries&&!g.modelSeries&&(g.modelSeries=c.modelSeries);c.modelNumber&&!g.modelNumber&&(g.modelNumber=
c.modelNumber)}g.marketplaceId=e;g.requestId=d;g.session=m;g.deviceType="desktop";g.featureName=b;g.action=f;l.recordMetrics(g)}},c=function(b,a){h.incrementCounterMetrics(b+a)},m=function(b,a){h.recordErrorMetrics(b,a)};return{createLogger:function(){return{emitMetrics:d,emitCSMCounterMetrics:c,emitCSMJSErrorMetrics:m}}}})});n.now("HSXSushiLogger").execute(function(e){"undefined"===typeof e&&n.when("A").register("HSXSushiLogger",function(a){var e,h=function(h){if(!a.objectIsEmpty(h)&&
h.marketplaceId){var d={};switch(h.marketplaceId){case "A1F83G8C2ARO7P":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A1RKKUPIHCS9HS":case "A1PA6795UKMFR9":case "A21TJRUUN4KGV":d.endpoint="unagi-eu.amazon.com";d.sourceGroup="com.amazon.hsx.eel.eu";break;case "A1VC38T7YXB528":d.endpoint="unagi-fe.amazon.com";d.sourceGroup="com.amazon.hsx.eel.fe";break;case "AAHKV2X7AFYLW":d.endpoint="unagi-cn.amazon.com";d.sourceGroup="com.amazon.hsx.eel.cn";break;default:d.endpoint="unagi-na.amazon.com",d.sourceGroup=
"com.amazon.hsx.eel.na"}a.$.post("https://"+d.endpoint+"/1/events/"+(e?e:d.sourceGroup),JSON.stringify({events:[{data:h}]}),null,"application/json")}};return{createLogger:function(a){a&&(e=a);return{recordMetrics:h}}}})});n.when("ready").register("HSXCSMLogger",function(){var e={};e.ue=r.ue;e.ueLogError=r.ueLogError;e.errorLogLevel={ERROR:"ERROR",FATAL:"FATAL",WARN:"WARN"};e.incrementCounterMetrics=function(a){e.ue&&e.ue.count&&e.ue.count(a,(e.ue.count(a)||0)+1)};e.recordErrorMetrics=
function(a,q){e.ueLogError&&a&&(q?e.ueLogError(a,q):e.ueLogError(a))};return e});n.now("ReplacementPartsStripeModelHelpModule").execute(function(e){"undefined"===typeof e&&n.when("A","a-popover","a-dropdown","jQuery","ready").register("ReplacementPartsStripeModelHelpModule",function(a,e,h,l){var d={config:{imageCdn:"https://images-na.ssl-images-amazon.com/images/G/01/replacement-parts/",videoConfigUrl:"/gp/replacement-parts/ajax/modelnumber-help-videos.html",videoCdn:"https://images-na.ssl-images-amazon.com/images/I/",
videoImageUrl:"https://images-na.ssl-images-amazon.com/images/I/518MvDgpM3L.jpg",videoPlayerSwf:"https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/2.0.1102.0/flash/AiryBasicRenderer._V304902271_.swf",modelHelpContentUrl:"/gp/replacement-parts/ajax/modelnumber-help-content.html"}};d.helpMeFindModelNumber=d.helpMeFindModelNumber||{};d.helpMeFindModelNumber.videoPlayer=null;d.helpMeFindModelNumber.videosInfo={};d.helpMeFindModelNumber.data={major_appliance:{modelHelpVersion:"v1",
displayText:"Major Appliance",subCategoryDisplayName:"Sub Category",subcategory:{refrigerator:{displayText:"Refrigerator",filter:{side_by_side:{displayText:"Side by Side",videoId:"B1BHS+SwL3S.mp4|B1t17BkYLqS.mp4|C1ckoC44s8S.mp4"},freezer_on_top:{displayText:"Freezer on Top",videoId:"B1BHS+SwL3S.mp4|B1t17BkYLqS.mp4|C1ckoC44s8S.mp4"}}},washer_dryer_combo:{displayText:"Washer/Dryer Combo",filter:{top_load:{displayText:"Top Load",videoId:"B1NV84bJRZS.mp4|B1O9OfJcquS.mp4|C1FgSig7xtS.mp4"},front_load:{displayText:"Front Load",
videoId:"B1NV84bJRZS.mp4|B1O9OfJcquS.mp4|C1FgSig7xtS.mp4"}}},washing_machine:{displayText:"Washing Machine",filter:{top_load:{displayText:"Top Load",videoId:"B1KN9u9AyXS.mp4|B12qf+slWKS.mp4|C1PtbxowzTS.mp4"},front_load:{displayText:"Front Load",videoId:"B1KN9u9AyXS.mp4|B12qf+slWKS.mp4|C1PtbxowzTS.mp4"}}},freezer_chest:{displayText:"Freezer Chest",videoId:"B1bpnTS3nmS.mp4|B1lISbDh0RS.mp4|C122snPACDS.mp4"},freezer_upright:{displayText:"Freezer Upright",videoId:"B1bpnTS3nmS.mp4|B1lISbDh0RS.mp4|C122snPACDS.mp4"},
dishwasher:{displayText:"Dishwasher",videoId:"B1Yimrnp+FS.mp4|B1yfKJE2PIS.mp4|C14jp+jQllS.mp4"},dryer_old_style_old_style:{displayText:"Dryer(Old Style)",videoId:"B1q5XSVe3FS.mp4|B1fpb0srS-S.mp4|C1GO2PIkcmS.mp4"},dryer_new_style:{displayText:"Dryer(New Style)",videoId:"B1q5XSVe3FS.mp4|B1fpb0srS-S.mp4|C1GO2PIkcmS.mp4"},ice_machine:{displayText:"Ice Machine",videoId:"B1A6XweWNyS.mp4|B1fEU5bQZhS.mp4|C1EiQCtRb-S.mp4"},microwave_counter:{displayText:"Microwave(Counter Top)",videoId:"B1Z8AxKsTvS.mp4|B18Vd0H4zpS.mp4|C1S4YpC6dyS.mp4"},
oven_micro_combo:{displayText:"Oven/Micro. Combo",videoId:"B1EwTA+7JWS.mp4|B1xvsCZdlLS.mp4|C102gmDSmwS.mp4"},range_vent_hood:{displayText:"Range Vent Hood",videoId:"B1USJPSddQS.mp4|B1Bx1yFOZiS.mp4|C100PtfQCUS.mp4"},range_stove_oven:{displayText:"Range/Stove/Oven",videoId:"B1EwTA+7JWS.mp4|B1xvsCZdlLS.mp4|C102gmDSmwS.mp4"},trash_compactor:{displayText:"Trash Compactor",videoId:"B129JbJSLxS.mp4|B1CKZ1d3chS.mp4|C1GYzQsBbYS.mp4"},water_filter:{displayText:"Water Filter",videoId:"B1zEJ9x9DfS.mp4|B1AK+9PxKvS.mp4|C1KdPxNR3rS.mp4"},
hot_water_dispenser:{displayText:"Hot Water Dispenser",videoId:"B13gGvGg6eS.mp4|B1e8R-P5LeS.mp4|C17ZviPXJTS.mp4"},garbage_disposer:{displayText:"Garbage Disposer",videoId:"B18MdNOMMoS.mp4|B1Hhbgw9TwS.mp4|C1fVN5e-hgS.mp4"},water_heater:{displayText:"Water Heater"}}},outdoor_power:{modelHelpVersion:"v1",displayText:"Outdoor Power",subCategoryDisplayName:"Sub Category",subcategory:{chainsaw:{displayText:"Chainsaw"},edger:{displayText:"Edger"},hedge_trimmer:{displayText:"Hedge Trimmer"},lawn_mower:{displayText:"Lawn Mower",
filter:{push:{displayText:"Push"},tractor:{displayText:"Tractor"},zero_turn:{displayText:"Zero Turn"}}},leaf_blower:{displayText:"Leaf Blower"},pole_pruner:{displayText:"Pole Pruner"},pressure_washer:{displayText:"Pressure Washer"},small_engine:{displayText:"Small Engine"},snow_blower:{displayText:"Snow Blower"},string_trimmer:{displayText:"String Trimmer"},tiller:{displayText:"Tiller",filter:{large:{displayText:"Large"},small:{displayText:"Small"}}}}},PowerTools:{modelHelpVersion:"v2",hasLeftPanelContent:!0,
displayText:"Power Tools",subCategoryDisplayName:"Brand",subcategory:{BlackandDecker:{displayText:"Black and Decker"},Bosch:{displayText:"Bosh"},Bostich:{displayText:"Bostich"},Dewalt:{displayText:"Dewalt"},RoyalDirtDevil:{displayText:"Dirt Devil / Royal"},Echo:{displayText:"Echo"},Eureka:{displayText:"Eureka"},Hitachi:{displayText:"Hitachi"},Hoover:{displayText:"Hoover"},Karcher:{displayText:"Karcher"},Makita:{displayText:"Makita"},Metabo:{displayText:"Metabo"},Milwaukee:{displayText:"Milwaukee"},
PorterCable:{displayText:"Porter Cable"},Rigid:{displayText:"Rigid"},RotoZip:{displayText:"RotoZip"},Ryobi:{displayText:"Ryobi"},Skil:{displayText:"Skil"},Worx:{displayText:"Worx"}}},hvac:{modelHelpVersion:"v1",displayText:"HVAC",subCategoryDisplayName:"Sub Category",subcategory:{furnace:{displayText:"Furnace",videoId:"B1DFldRSP2S.mp4|B1DR4alaHiS.mp4|C18Sc5f6w5S.mp4"},air_conditioner:{displayText:"Air Conditioner",videoId:"B14NdYTrYtS.mp4|B1lHVihWATS.mp4|C1pl-DHFB2S.mp4"},central_air:{displayText:"Central Air",
videoId:"B1j10Tg3MtS.mp4|B1c8CFPJ2xS.mp4|C1jAwRebZVS.mp4"},dehumidifier:{displayText:"Dehumidifier"},humidifier:{displayText:"Humidifier"}}},vacuum:{modelHelpVersion:"v1",displayText:"Vacuums",subCategoryDisplayName:"Sub Category",subcategory:{vacuum_cleaner:{displayText:"Vacuum Cleaner",filter:{upright:{displayText:"Upright"},central:{displayText:"Central"},canister:{displayText:"Canister"}}}}},Grills:{modelHelpVersion:"v2",hasLeftPanelContent:!1,displayText:"Grills",subCategoryDisplayName:"Brand",
subcategory:{CharBroil:{displayText:"Char-Broil"},Kenmore:{displayText:"Kenmore"},Weber:{displayText:"Weber"},Charmglow:{displayText:"Charmglow"},Solaire:{displayText:"Solaire"},Other:{displayText:"Other"}}},Sports:{modelHelpVersion:"v2",hasLeftPanelContent:!0,displayText:"Sports",subCategoryDisplayName:"Sub Category",subcategory:{Treadmills:{displayText:"Treadmills"},EllipticalEquipment:{displayText:"Elliptical Equipment"},StationaryBike:{displayText:"Stationary Bike"},StepMachine:{displayText:"Step Machine"},
Trampoline:{displayText:"Trampoline"}}},Plumbing:{modelHelpVersion:"v2",hasLeftPanelContent:!0,displayText:"Plumbing",subCategoryDisplayName:"Sub Category",subcategory:{Toilets:{displayText:"Toilets"}}}};d.clearSelect=function(a){for(var d=h.getSelect(a).getOptions().size(),b=[],f=0;f<d;f++)b[f]=f;h.getSelect(a).removeOption(b)};d.helpMeFindModelNumber.initialize=function(){d.helpMeFindModelNumber.loadVideoPlayerConfig();d.helpMeFindModelNumber.populateCategory()};d.helpMeFindModelNumber.populateCategory=
function(){var a=0,e;for(e in d.helpMeFindModelNumber.data)d.helpMeFindModelNumber.data.hasOwnProperty(e)&&(h.getSelect("hsx-rpp-modelNumberMarkerCategory").addOption({text:d.helpMeFindModelNumber.data[e].displayText,value:e},a),a++);h.getSelect("hsx-rpp-modelNumberMarkerCategory").removeOption(a);0<h.getSelect("hsx-rpp-modelNumberMarkerCategory").getOptions().size()&&(a=h.getSelect("hsx-rpp-modelNumberMarkerCategory").getOption(0),h.getSelect("hsx-rpp-modelNumberMarkerCategory").setValue(a.info()[0].value),
d.helpMeFindModelNumber.populateSubcategory(a.info()[0].value))};d.helpMeFindModelNumber.populateSubcategory=function(a){d.clearSelect("hsx-rpp-modelNumberMarkerSubcategory");var e=d.helpMeFindModelNumber.data[a],b=0;d.videosList=d.videosList||{};for(var f in e.subcategory)if(e.subcategory.hasOwnProperty(f)){var g=d.helpMeFindModelNumber.data[a].subcategory[f];if(g.filter)for(var p in g.filter){if(g.filter.hasOwnProperty(p)){var k=g.filter[p];d.videosList[a+"_"+f+"_"+p]=k.videoId!==v?k.videoId:"";
h.getSelect("hsx-rpp-modelNumberMarkerSubcategory").addOption({text:g.displayText+" "+k.displayText,value:a+"|"+f+"|"+p},b);b++}}else d.videosList[a+"_"+f]=g.videoId!==v?g.videoId:"",h.getSelect("hsx-rpp-modelNumberMarkerSubcategory").addOption({text:g.displayText,value:a+"|"+f},b),b++}0<h.getSelect("hsx-rpp-modelNumberMarkerSubcategory").getOptions().size()&&(a=h.getSelect("hsx-rpp-modelNumberMarkerSubcategory").getOption(0),h.getSelect("hsx-rpp-modelNumberMarkerSubcategory").setValue(a.info()[0].value),
d.loadModelHelpContentForKey(a.info()[0].value))};d.helpMeFindModelNumber.loadVideoPlayerConfig=function(){a.ajax(d.config.videoConfigUrl,{method:"get",success:function(a){a.swf&&(d.config.videoPlayerSwf=a.swf);a.css&&n.load.css(a.css);a.js&&n.load.js(a.js);a.videosInfo&&l.each(a.videosInfo,function(a,b){var f=b.videoUrl.substring(b.videoUrl.lastIndexOf("/")+1);d.helpMeFindModelNumber.videosInfo[f]=b})}})};d.bindEvents=function(c,e){var b=a.$("#hsx-rpp-modelnumberBadgeBig").attr("src");b&&(b=b.substring(0,
b.lastIndexOf("/")+1))&&(d.config.imageCdn=b);a.on("a:dropdown:hsx-rpp-modelNumberMarkerCategory:select",function(b){"-1"!==b.value&&(c.emitMetrics(e,"ModelNumberHelpSwitchCategory",{categoryName:b.value}),d.helpMeFindModelNumber.populateSubcategory(b.value))});a.on("a:dropdown:hsx-rpp-modelNumberMarkerSubcategory:select",function(b){"-1"!==b.value&&d.loadModelHelpContentForKey(b.value)})};d.loadModelHelpContentForKey=function(a){a=a.split("|");if(2<=a.length){var e=d.helpMeFindModelNumber.data[a[0]];
e&&("v2"===e.modelHelpVersion?d.v2.load(a[0],a[1]):(d.switchModelHelpLayout("v1"),d.setModelNumberMarkerImage(a.join("_")),d.loadModelHelpVideo(a.join("_"))))}};d.switchModelHelpLayout=function(a,d){"v2"===a?(l("#hsx-rpp-modelNumberMarkerVideoContainer").hide(),l("#hsx-rpp-modelNumberMarkerImageContainer").hide(),l(".hsx-rpp-modelHelpRightPanel").show(),d?(l("#hsx-rpp-modelNumberMarkersContainer").hide(),l(".hsx-rpp-modelHelpLeftPanel").show()):(l("#hsx-rpp-modelNumberMarkersContainer").show(),l(".hsx-rpp-modelHelpLeftPanel").hide())):
(l(".hsx-rpp-modelHelpLeftPanel").hide(),l(".hsx-rpp-modelHelpRightPanel").hide(),l("#hsx-rpp-modelNumberMarkersContainer").show(),l("#hsx-rpp-modelNumberMarkerVideoContainer").show(),l("#hsx-rpp-modelNumberMarkerImageContainer").show())};d.v2={};d.v2.load=function(c,e){var b=d.helpMeFindModelNumber.data[c].hasLeftPanelContent;a.ajax(d.config.modelHelpContentUrl+"?category="+encodeURIComponent(c)+"&subCategory="+encodeURIComponent(e)+"&hasLeftPanelContent="+(b?"1":"0"),{method:"get",data:{},success:function(a){l(".hsx-rpp-modelHelpLeftPanel").length||
l('<div class="a-section hsx-rpp-modelHelpLeftPanel hsx-rpp-stack-horizontal"></div>').insertBefore("#hsx-rpp-modelNumberMarkersContainer");l(".hsx-rpp-modelHelpRightPanel").length||l('<div class="hsx-rpp-modelHelpRightPanel"></div>').insertBefore("#hsx-rpp-modelNumberMarkerVideoContainer");b&&l(".hsx-rpp-modelHelpLeftPanel").html(a.leftPanelHTML);l(".hsx-rpp-modelHelpRightPanel").html(a.rightPanelHTML);d.switchModelHelpLayout("v2",b)}})};d.setModelNumberMarkerImage=function(c){a.$("#hsx-rpp-modelNumberMarkerImage").attr("src",
d.config.imageCdn+c+".jpg")};d.loadModelHelpVideo=function(a){if(d.videosList&&""!==d.videosList[a]){a=d.videosList[a].split("|");for(var e={videoImageUrl:d.config.videoImageUrl,videoUrl:d.config.videoCdn+a[0]},b=0;b<a.length;b++)if(d.helpMeFindModelNumber.videosInfo[a[b]]){e=d.helpMeFindModelNumber.videosInfo[a[b]];break}""===l("#hsx-rpp-modelNumberMarkerVideoContainer").html()||null===d.helpMeFindModelNumber.videoPlayer?n.when("Airy").execute(function(b){d.helpMeFindModelNumber.videoPlayer=b.embed({parentId:"hsx-rpp-modelNumberMarkerVideoContainer",
streamingUrls:[e.videoUrl],swfUrl:d.config.videoPlayerSwf,slateImages:{preloadSlate:e.videoImageUrl,postMediaSlate:e.videoImageUrl},bindings:{videounsupported:function(b,a){l("#hsx-rpp-modelNumberMarkerVideoContainer").hide()}}})}):d.helpMeFindModelNumber.videoPlayer.loadMedia({mediaSourceInfo:e.videoUrl,slateImages:{preloadSlate:e.videoImageUrl,postMediaSlate:e.videoImageUrl}});l("#hsx-rpp-modelNumberMarkerVideoContainer").show()}else l("#hsx-rpp-modelNumberMarkerVideoContainer").hide()};return d})});
n.now("ReplacementPartsStripeFeedbackWidgetModule").execute(function(e){"undefined"===typeof e&&(n.when("A","a-modal","a-dropdown","jQuery").register("ReplacementPartsStripeFeedbackWidgetModule",function(a,e,h,l){var d={contentLoaded:!1,config:{widgetUrl:"/gp/replacement-parts/ajax/feedback-widget.html"},loadWidget:function(c,e,b){if(!d.contentLoaded){var f=a.$(location).attr("href"),f=encodeURI(f),g={};"undefined"!==typeof e&&(g.feedbackButtonId=e);g.previousUrl=f;"undefined"!==typeof b&&
("undefined"!==typeof b.modelSeries&&0<b.modelSeries.length&&"undefined"!==typeof b.modelNumber&&0<b.modelNumber.length?g.modelSeries=b.modelSeries+" "+b.modelNumber:"undefined"!==typeof b.modelSeries&&0<b.modelSeries.length?g.modelSeries=b.modelSeries:"undefined"!==typeof b.modelNumber&&0<b.modelNumber.length&&(g.modelSeries=b.modelNumber),"undefined"!==typeof b.modelBrand&&(g.brand=b.modelBrand),"undefined"!==typeof b.asin&&(g.asin=b.asin),"undefined"!==typeof b.ptd&&(g.ptd=b.ptd));a.ajax(d.config.widgetUrl,
{method:"get",params:g,success:function(b){a.$("#"+c).append(b);d.content=b}})}}};return d}),n.when("A","ReplacementPartsStripeFeedbackWidgetModule").execute(function(a){a.on("a:dropdown:selected:hsx-rpp-feedback-reason",function(e){"feedback_question_about_order"===e.value?(a.$("#hsx-feedback-help").removeClass("a-hidden"),a.$("#hsx-feedback-comment-div").addClass("a-hidden"),a.$("#hsx-feedback-slot2-row").addClass("a-hidden"),a.$("div.a-popover-footer > .a-button-primary").addClass("a-hidden")):
(a.$("#hsx-feedback-help").addClass("a-hidden"),a.$("#hsx-feedback-comment-div").removeClass("a-hidden"),a.$("#hsx-feedback-slot2-row").removeClass("a-hidden"),a.$("div.a-popover-footer > .a-button-primary").removeClass("a-hidden"))})}))});n.now("ReplacementPartsStripeUtility").execute(function(e){"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});"function"!==typeof String.prototype.endsWith&&(String.prototype.endsWith=
function(a){return-1!==this.indexOf(a,this.length-a.length)});"undefined"===typeof e&&n.when("A","a-dropdown","a-popover","ready").register("ReplacementPartsStripeUtility",function(a,e,h){var l={searchParameterConfig:{prefix:"bsm://",delimeter:"|",stripeOverrideDelimeter:"~",parameter:"rpp"},autocompleteMaxItemsToShow:20,bulletTextCache:"",clearSelect:function(a){for(var c=e.getSelect(a).getOptions().size(),m=[],b=0;b<c;b++)m[b]=b;e.getSelect(a).removeOption(m)},getQueryParameterByName:function(a){a=
a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},getFormField:function(d,c){if(0<a.$(d).find("input[name="+c+"]").length)return a.$(d).find("input[name="+c+"]").val()},getEncodedParameter:function(d,c,e){var b=l.searchParameterConfig.delimeter,f=l.searchParameterConfig.prefix,f=f+d+b;"undefined"!==typeof c&&0<c.length&&(f+=c);f+=b;f+=e;a.state("rpp")&&a.state("rpp").overriddenStripeId&&
(f=f+l.searchParameterConfig.stripeOverrideDelimeter+a.state("rpp").overriddenStripeId);return encodeURIComponent(f)},getEncodedParameterForSmartbox:function(a,c){var e=l.searchParameterConfig.prefix,b=l.searchParameterConfig.delimeter;return a?e+(a.brand?a.brand.text+"^"+a.brand.value:"")+b+(a.series?a.series.text+"^"+a.series.value:"")+b+(a.model?a.model.text+"^"+a.model.value:"")+b+c:null},getKeys:function(d){var c=[];d&&a.$.each(d,function(a,b){c.push(a)});return c},hideElement:function(a){a.addClass("aok-hidden");
a.hide()},htmlDecode:function(a){var c=document.createElement("div");c.innerHTML=a;return 0===c.childNodes.length?"":c.childNodes[0].nodeValue},setFormField:function(d,c,e){""===e?0<a.$(d).find("input[name="+c+"]").length&&a.$(d).find("input[name="+c+"]").remove():0<a.$(d).find("input[name="+c+"]").length?a.$(d).find("input[name="+c+"]").val(e):a.$('<input type="hidden" />').attr({name:c,value:e}).addClass("asFormInput").appendTo(d)},showElement:function(a){a.removeClass("aok-hidden");a.show()},normalizeModelField:function(a){if("undefined"===
typeof a)return"";a=a.toUpperCase().trim();return a.replace(/\s+/g," ")},normalizeValue:function(a){if("undefined"===typeof a)return"";a=a.toUpperCase();return a.replace(/[^A-Z0-9]+/g,"")},getButtonText:function(d){return a.$(d)[0].innerHTML.toString().trim()},getClickedValue:function(d){return a.$(d).attr("value")},getSeeAllPartsLink:function(){return""},getRhWithoutKeyword:function(d){d=d.split(",");var c=[];a.$(d).each(function(a,b){var f=b.split(":");0<f.length&&"k"!==f[0]&&c.push(b)});return c.join(",")},
isInNode:function(a){var c=r.location.href,e=l.getQueryParameterByName("rh");return e.endsWith("n:"+a)||-1<e.indexOf("n:"+a+",k")||-1<c.indexOf("node="+a)?!0:!1},showEnterModelPopover:function(d){var c=a.$("#"+d);c&&null!==h.get(c)&&(h.get(c).show(),setTimeout(function(){h.remove(c)},1E3))},showBullet:function(){l.showElement(a.$("#replacementPartsFitmentBullet"))},setBulletText:function(d){var c=a.state("rpp");if(!c||"dropdown"!==c.finderName&&"smartbox"!==c.finderName)a.$("#replacementPartsFitmentBulletInner").html(d);
else if("enter-model"!==c.stripeState)if("smartbox"===c.finderName&&""===l.bulletTextCache&&(l.bulletTextCache=a.$("#replacementPartsFitmentBulletInner").contents()),"result-found"===c.stripeState){var e="",e="smartbox"===c.finderName?a.$("#hsx-rpp-bullet-fits-message").clone():a.$("#hsx-rpp-bullet-fits-message");e.find(".hsx-rpp-bullet-model-info").html(d);a.$("#replacementPartsFitmentBulletInner").html(e);l.showElement(e)}else a.$("#replacementPartsFitmentBulletInner").html(d);else""!==l.bulletTextCache&&
a.$("#replacementPartsFitmentBulletInner").html(l.bulletTextCache)},enableInputById:function(d){a.$("#"+d).removeAttr("disabled").removeClass("a-form-disabled")},prepareBulletText:function(d,c,e){var b=a.state("rpp");if("dropdown"===b.finderName)switch(d){case "result-found":return c;case "no-result":l.hideElement(a.$("#replacementPartsFitmentBullet"))}else switch(d){case "result-found":return"smartbox"===b.finderName?c:a.$("#replacementPartsFitmentBullet").data("fitsmessage")+c+".";case "no-result":if(0===
e)l.hideElement(a.$("#replacementPartsFitmentBullet"));else return a.$("#replacementPartsFitmentBullet").data("doesntfitmessage")+c+"."}},config:{brandListUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=brandList",checkFitmentUrl:"/gp/replacement-parts/ajax/hsx-rpp-dp-ajax-handler.html?ie=UTF8",modelListUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=modelList",modelFuzzyMatchUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=modelSearch",modelQueryUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=modelInfo",
modelSearchUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=modelSearch",modelSuggestUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=modelSuggest",combinedModelSuggestUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=combinedModelSuggest&ie=UTF8&getMyModels=1&isDropdownStripe=1",modelnumberSeriesQueryUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=modelnumberSeriesInfo",partFuzzyMatchUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=partSearch",partQueryUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=partInfo",
partSuggestUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=partSuggest",seriesListUrl:"/gp/replacement-parts/ajax/query-index.html?qtype=seriesList",getMyModelUrl:"/gp/replacement-parts/ajax/my-model.html?getMyModel=1",putMyModelUrl:"/gp/replacement-parts/ajax/my-model.html",noFitmentDataPopoverUrl:"/gp/replacement-parts/ajax/no-fitment-data-popover.html"}};return l})});n.now("ReplacementPartsSearchStripe").execute(function(e){"undefined"===typeof e&&n.when("A","a-popover","a-dropdown",
"HSXMetricsLogger","ReplacementPartsStripeModelHelpModule","ReplacementPartsStripeFeedbackWidgetModule","ReplacementPartsStripeUtility","jQuery-ReplacementPartsAutocomplete","ready").register("ReplacementPartsSearchStripe",function(a,e,h,l,d,c,m){var b={};b.config=a.$.extend({},m.config,{searchAlias:"replacement-parts",showAllPartsForModelReftag:"sx_rpp_stripe_showallparts",metricsPrefix:"hsxRPPSearchStripeV1"});b.initialize=function(){b.metricsLogger=l.createLogger();a.state("rpp")||a.state.parse();
a.$("#hsx-rpp-stripeAction").attr("action",a.state("rpp").widgetRedirectURL);a.$(".hsx-rpp-btnCheckAnother").click(function(){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"ClearModel");b.submitForm("","")});a.$("#hsx-rpp-lnkHelpFindModelNumber").click(function(){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"HelpMeFindModelNumberClicked")});a.$(".hsx-rpp-btnClearSelectSeries").click(function(){b.hideSelectModelSeriesFitmentContainer()});a.$(".hsx-rpp-btnShowAllPartsForModel").click(function(){b.searchAllPartsForModel()});
a.$("#hsx-rpp-btnSearchPart").click(function(){var f=a.$("#hsx-rpp-txtPartSearch").val();b.searchPart(f)});a.$("#hsx-rpp-txtPartSearch").keyup(function(f){13===f.keyCode&&(f=a.$("#hsx-rpp-txtPartSearch").val(),b.searchPart(f))});b.modelNumberAutocomplete=a.$("#hsx-rpp-txtModelNumber").rppAutocomplete(b.config.modelSuggestUrl,{doFuzzyMatch:!1,maxItemsToShow:m.autocompleteMaxItemsToShow,fuzzyMatchUrl:b.config.modelFuzzyMatchUrl,fuzzyMatchHasResultCallBack:function(a){b.metricsLogger.emitMetrics(b.config.metricsPrefix,
"FuzzyMatchShown",{modelNumber:a})},fuzzyMatchNoResultCallBack:function(){b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"LookForWholegoodsAttempt");b.checkForPartNumber(a.$("#hsx-rpp-txtModelNumber").val())},onItemSelect:function(a,f,g,c){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"AutocompleteUsed",{typedModelNumber:f,modelNumber:g,isFuzzyMatch:c});b.checkModelNumber()},recordCSMCounterMetric:function(a){b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,a)}})[0];
"enter-model"===a.state("rpp").stripeState&&(d.helpMeFindModelNumber.initialize(),d.bindEvents(b.metricsLogger,b.config.metricsPrefix),""!==a.$("#hsx-rpp-txtModelNumber").val()||a.$("#hsx-rpp-txtModelNumber").is(":focus")||b.showEnterModelPopover(),a.$("#hsx-rpp-lnkModelNumberPrompt").click(b.triggerEnterModelPopover),a.$("#hsx-rpp-txtModelNumber").click(b.removeEnterModelPopover),a.on("a:dropdown:hsx-rpp-selectModelSeries:select",function(a){b.removeSelectSeriesPopover();b.pickModelSeries(a.value)}),
a.$("#hsx-rpp-partNumberSearchLink").click(function(b){b=a.$("#hsx-rpp-stripeAction");m.setFormField(b,"keywords",a.$("#hsx-rpp-partNumberSearchLink").text());a.$(b).submit();return!1}));a.$("#hsx-rpp-btnCheckFitment").click(b.checkModelNumber);a.$("#hsx-rpp-txtModelNumber").bind("paste",function(a){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"PasteModelNumber")});a.$("#hsx-rpp-txtModelNumber").keyup(function(a){b.clearModelNumberWarnings();13===a.keyCode&&b.checkModelNumber()});if("enter-model"===
a.state("rpp").stripeState)b.metricsLogger.emitMetrics(b.config.metricsPrefix,"Loaded",{stripeState:a.state("rpp").stripeState}),b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"Loaded");else{var f=a.state("rpp").modelNumber,g=a.state("rpp").modelBrand;a.state("rpp",{modelNumber:m.htmlDecode(f),modelBrand:m.htmlDecode(g)});b.metricsLogger.emitMetrics(b.config.metricsPrefix,"Loaded",{stripeState:a.state("rpp").stripeState,modelNumber:f,modelBrand:g,resultCount:a.state("rpp").resultCount,
browseNodes:a.state("rpp").browseNode})}m.enableInputById("hsx-rpp-txtModelNumber");c.loadWidget("hsx-rpp-feedbackContainer","hsx-rpp-feedbackButton",a.state("rpp"))};b.clearModelNumberWarnings=function(){a.$("#hsx-rpp-modelNumberErrorMessage").hide();a.$("#hsx-rpp-PartnumberDetectedMessage").hide();a.$("#hsx-rpp-modelNumberNotFoundMessage").hide()};b.checkModelNumber=function(){b.clearModelNumberWarnings();var f=a.$("#hsx-rpp-txtModelNumber").val().replace(/ /g,"");""!==f&&(50<=f.length?a.$("#hsx-rpp-modelNumberNotFoundMessage").show():
(b.metricsLogger.emitMetrics(b.config.metricsPrefix,"LookupModel",{modelNumber:f}),b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCall"),a.$("#hsx-rpp-feedback-model-series").attr("value",f),a.$("#hsx-rpp-feedback-brand").attr("value",""),a.ajax(b.config.modelQueryUrl,{method:"get",params:{q:f},success:function(a){b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCallSuccess");b.processCheckModelNumberResult(f,a)},error:function(){b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,
"DataQueryAjaxCallFail");a.$("#hsx-rpp-modelNumberErrorMessage").show()}})))};b.triggerEnterModelPopover=function(){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"EnterModelPopover");b.showEnterModelPopover()};b.showEnterModelPopover=function(){var f='<div class="hsx-rpp-modelnumber-popover-content">'+a.$(".hsx-rpp-modelnumber-popover-content").html()+"</div>",g=a.$(".hsx-rpp-enterModelPopupPlaceHolder");g.css({width:a.$("#hsx-rpp-txtModelNumber").width()+"px"});b.enterModelPopoverInstance=e.create(g,
{content:f,name:"hsx-rpp-enterModelNumberPrompt",position:"triggerBottom",popoverLabel:"Enter your model number to make sure this fits"});b.enterModelPopoverInstance.show();setTimeout(function(){b.enterModelPopoverInstance&&null!==b.enterModelPopoverInstance&&b.enterModelPopoverInstance.hide()},1E3)};b.removeEnterModelPopover=function(f){b.enterModelPopoverInstance&&null!==b.enterModelPopoverInstance&&(e.remove(a.$("#hsx-rpp-checkFitmentContainerEnterModelNumber")),b.enterModelPopoverInstance=null);
f&&f.preventDefault()};b.showSelectSeriesPopover=function(f){var g=a.$(".hsx-rpp-modelseries-popover-content").html();f&&"brand"===f?(g=g.replace(/series/g,"brand"),h.getSelect("hsx-rpp-selectModelSeries").update({option_prompt:"Select Brand"})):h.getSelect("hsx-rpp-selectModelSeries").update({option_prompt:"Select Series"});f='<div class="hsx-rpp-modelseries-popover-content">'+g+"</div>";g=a.$(".hsx-rpp-selectSeriesPopoverHolder");g.css({width:a.$("#hsx-rpp-selectModelSeriesSpan").width()+"px"});
g.css({marginLeft:a.$("#hsx-rpp-moreInfoModelNumber").width()+7+"px"});b.selectSeriesPopoverInstance=e.create(g,{content:f,name:"hsx-rpp-selectModelSeriesPrompt",position:"triggerBottom"});a.$("#hsx-rpp-selectModelSeriesSpan").click(function(){b.removeSelectSeriesPopover()});b.selectSeriesPopoverInstance.show()};b.removeSelectSeriesPopover=function(f){b.selectSeriesPopoverInstance&&null!==b.selectSeriesPopoverInstance&&(e.remove(a.$("#hsx-rpp-checkFitmentContainerSelectModelSeries")),b.selectSeriesPopoverInstance=
null);f&&f.preventDefault()};b.searchAllPartsForModel=function(){var f=a.$("#hsx-rpp-stripeAction");f.attr("action","/s/ref="+b.config.showAllPartsForModelReftag);m.setFormField(f,"keywords","");m.setFormField(f,"rh","");m.setFormField(f,"node",a.state("rpp").rootBrowseNode);var f=a.state("rpp").modelNumber,g=a.state("rpp").modelBrand;b.metricsLogger.emitMetrics(b.config.metricsPrefix,"SearchAllPartsForModel",{modelNumber:f,modelBrand:g});b.submitForm(f,g)};b.searchPart=function(f){var g=a.state("rpp").modelNumber,
c=a.state("rpp").modelBrand,d=a.$("#hsx-rpp-stripeAction"),e=m.getFormField(d,"keywords"),h=m.getFormField(d,"rh"),e=h.replace(e,f);m.setFormField(d,"keywords",f);m.setFormField(d,"rh",e);a.$("#twotabsearchtextbox").val(f);b.metricsLogger.emitMetrics(b.config.metricsPrefix,"SearchPart",{keyword:f,prevRH:h,reformedRH:e});b.submitForm(g,c)};b.submitForm=function(b,g){var c=a.$("#hsx-rpp-stripeAction");m.setFormField(c,"rppModelNumber",b);m.setFormField(c,"rppModelBrand",g);if("enter-model"===a.state("rpp").stripeState){var d=
a.$('#hsx-rpp-stripeAction input[name="rh"]').val();m.setFormField(c,"rh",m.getRhWithoutKeyword(d));m.setFormField(c,"keywords","")}else a.objectIsEmpty(b)&&a.objectIsEmpty(g)&&m.setFormField(c,"rd","1");a.$(c).submit()};b.showSelectModelSeriesFitmentContainer=function(f){a.$("#hsx-rpp-checkFitmentContainerSelectModelSeries").removeClass("hsx-rpp-hidden");a.$("#hsx-rpp-checkFitmentContainerSelectModelSeries").addClass("hsx-rpp-stack-horizontal");a.$("#hsx-rpp-checkFitmentContainerEnterModelNumber").removeClass("hsx-rpp-stack-horizontal");
a.$("#hsx-rpp-checkFitmentContainerEnterModelNumber").addClass("hsx-rpp-hidden");a.$("#hsx-rpp-resultContainer").hide();a.$("#hsx-rpp-checkFitmentContainer").show();b.showSelectSeriesPopover(f)};b.hideSelectModelSeriesFitmentContainer=function(){b.removeSelectSeriesPopover();a.$("#hsx-rpp-txtModelNumber").val("");a.$("#hsx-rpp-checkFitmentContainerSelectModelSeries").removeClass("hsx-rpp-stack-horizontal");a.$("#hsx-rpp-checkFitmentContainerSelectModelSeries").addClass("hsx-rpp-hidden");a.$("#hsx-rpp-checkFitmentContainerEnterModelNumber").removeClass("hsx-rpp-hidden");
a.$("#hsx-rpp-checkFitmentContainerEnterModelNumber").addClass("hsx-rpp-stack-horizontal");a.$("#hsx-rpp-resultContainer").hide();a.$("#hsx-rpp-checkFitmentContainer").show();a.$("#hsx-rpp-txtModelNumber").focus();b.metricsLogger.emitMetrics(b.config.metricsPrefix,"ClearModel")};b.populateModelSeries=function(a,g){m.clearSelect("hsx-rpp-selectModelSeries");for(var c=!1,d=0;d<g.length;d++)0<d&&g[d-1].fields.brand!==g[d].fields.brand&&(c=!0);b.metricsLogger.emitMetrics(b.config.metricsPrefix,"ModelCollision",
{modelNumber:a,hasBrandCollision:c});for(d=0;d<g.length;d++){var e=g[d].fields.modelnumber;g[d].fields.series&&(e+=g[d].fields.series);c&&(e=g[d].fields.brand+" "+e);h.getSelect("hsx-rpp-selectModelSeries").addOption({text:e,value:""+d},d)}return c?"brand":"series"};b.pickModelSeries=function(f){f=b.modelSearchResult.hits.hit[f];var g=f.fields.modelnumber;f.fields.series&&(g+=f.fields.series);a.$("#hsx-rpp-feedback-model-series").attr("value",f.fields.modelnumber);a.$("#hsx-rpp-feedback-brand").attr("value",
f.fields.brand);b.metricsLogger.emitMetrics(b.config.metricsPrefix,"SelectModel",{modelNumber:g});b.submitForm(g,f.fields.brand)};b.checkForPartNumber=function(f){b.clearModelNumberWarnings();""!==f&&(b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCall"),a.ajax(b.config.partQueryUrl,{method:"get",params:{q:f},success:function(a){b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCallSuccess");b.processPartNumberResult(f,a)},error:function(){b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,
"DataQueryAjaxCallFail");a.$("#hsx-rpp-modelNumberErrorMessage").show()}}))};b.processPartNumberResult=function(f,g){b.modelSearchResult=g;0<g.hits.found?(a.$("#hsx-rpp-partNumberSearchLink").text(g.hits.hit[0].fields.partnumber),b.metricsLogger.emitMetrics(b.config.metricsPrefix,"PartNumberFound",{partNumber:g.hits.hit[0].fields.partnumber}),b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"LookForWholegoodsAttemptSucceed"),a.$("#hsx-rpp-PartnumberDetectedMessage").show()):(a.$("#hsx-rpp-enteredModelNumberLink").text(f),
b.metricsLogger.emitMetrics(b.config.metricsPrefix,"ModelNumberNotFound",{modelNumber:f}),b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"LookForWholegoodsAttemptFail"),a.$("#hsx-rpp-modelNumberNotFoundMessage").show())};b.processCheckModelNumberResult=function(f,g){b.modelSearchResult=g;if(1<g.hits.found){a.$("#hsx-rpp-moreInfoModelNumber").html(f);var c=b.populateModelSeries(f,g.hits.hit);b.showSelectModelSeriesFitmentContainer(c)}else 0<g.hits.hit.length?b.pickModelSeries(0):b.modelNumberAutocomplete&&
b.modelNumberAutocomplete.triggerFuzzyMatch?b.modelNumberAutocomplete.triggerFuzzyMatch():b.checkForPartNumber(f)};return b})});n.now("ReplacementPartsDetailPageStripe").execute(function(e){"undefined"===typeof e&&n.when("A","a-popover","a-dropdown","HSXMetricsLogger","ReplacementPartsStripeModelHelpModule","ReplacementPartsStripeFeedbackWidgetModule","ReplacementPartsStripeUtility","jQuery-ReplacementPartsAutocomplete","ready").register("ReplacementPartsDetailPageStripe",function(a,
e,h,l,d,c,m){var b={};b.config=a.$.extend({},m.config,{showAllPartsForModelReftag:"dp_rpp_stripe_showallparts",metricsPrefix:"hsxRPPDetailPageStripeV1"});b.initialize=function(){a.$("#replacementPartsFitmentBullet .hsx-rpp-fitment-focus").click(function(f){f.preventDefault();a.$("html,body").animate({scrollTop:a.$("#hsx-rpp-stripeContainer").offset().top},"fast");a.$("#hsx-rpp-txtModelNumber").focus();b.showEnterModelPopover();b.metricsLogger.emitMetrics(b.config.metricsPrefix,"FitmentBulletClicked")});
b.metricsLogger=l.createLogger();m.showElement(a.$("#hsx-rpp-stripeContainer"));d.helpMeFindModelNumber.initialize();d.bindEvents(b.metricsLogger,b.config.metricsPrefix);a.$("#hsx-rpp-lnkHelpFindModelNumber").click(function(){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"HelpMeFindModelNumberClicked")});a.$("#hsx-rpp-btnCheckFitment").click(b.checkModelNumber);a.$("#hsx-rpp-txtModelNumber").bind("paste",function(a){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"PasteModelNumber")});a.$("#hsx-rpp-txtModelNumber").keyup(function(a){b.clearModelNumberWarnings();
13===a.keyCode&&b.checkModelNumber()});a.$(".hsx-rpp-btnCheckAnother").click(function(){b.hideSelectModelSeriesFitmentContainer()});b.modelNumberAutocomplete=a.$("#hsx-rpp-txtModelNumber").rppAutocomplete(b.config.modelSuggestUrl,{doFuzzyMatch:!1,maxItemsToShow:m.autocompleteMaxItemsToShow,fuzzyMatchUrl:b.config.modelFuzzyMatchUrl,fuzzyMatchHasResultCallBack:function(a){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"FuzzyMatchShown",{modelNumber:a})},fuzzyMatchNoResultCallBack:function(f){b.metricsLogger.emitMetrics(b.config.metricsPrefix,
"ModelNumberNotFound",{modelNumber:f});b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"LookForWholegoodsAttemptFail");a.$("#hsx-rpp-enteredModelNumberLink").html(f);a.$("#hsx-rpp-modelNumberErrorMessage").show()},onItemSelect:function(a,f,c,d){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"AutocompleteUsed",{typedModelNumber:f,modelNumber:c,isFuzzyMatch:d});b.checkModelNumber()},recordCSMCounterMetric:function(a){b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,a)}})[0];
a.$(document).delegate("#hsx-rpp-txtModelNumber","focusin",b.removeEnterModelPopover);a.on("a:dropdown:hsx-rpp-selectModelSeries:select",function(a){b.removeSelectSeriesPopover();b.pickModelSeries(a.value)});b.metricsLogger.emitMetrics(b.config.metricsPrefix,"Loaded",{asin:a.state("rpp").asin,stripeState:a.state("rpp").stripeState,modelBrand:a.state("rpp").modelBrand,modelNumber:a.state("rpp").modelNumber});b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"Loaded");var f=a.state("rpp").modelBrand+
" "+a.state("rpp").modelNumber;"enter-model"===a.state("rpp").stripeState&&(m.showElement(a.$("#hsx-rpp-checkFitmentContainer")),""!==a.$("#hsx-rpp-txtModelNumber").val()||a.$("#hsx-rpp-txtModelNumber").is(":focus")||b.showEnterModelPopover(),a.$("#hsx-rpp-lnkModelNumberPrompt").click(b.triggerEnterModelPopover));m.setBulletText(m.prepareBulletText(a.state("rpp").stripeState,f,a.state("rpp").showBullet));"no-result"===a.state("rpp").stripeState&&0===a.state("rpp").showBullet||m.showBullet();a.$(".hsx-rpp-seeAllPartsThatFit").click(function(){b.showAllPartsThatFit(a.state("rpp").modelNumber,
a.state("rpp").modelBrand)});m.enableInputById("hsx-rpp-txtModelNumber");c.loadWidget("hsx-rpp-feedbackContainer","hsx-rpp-feedbackButton",a.state("rpp"))};b.triggerEnterModelPopover=function(){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"EnterModelPopover");b.showEnterModelPopover()};b.showEnterModelPopover=function(){var f='<div class="hsx-rpp-modelnumber-popover-content">'+a.$(".hsx-rpp-modelnumber-popover-content").html()+"</div>",g=a.$(".hsx-rpp-enterModelPopupPlaceHolder");g.css({width:a.$("#hsx-rpp-txtModelNumber").width()+
"px"});b.enterModelPopoverInstance=e.create(g,{content:f,name:"hsx-rpp-enterModelNumberPrompt",position:"triggerBottom",popoverLabel:"Enter your model number to make sure this fits"});b.enterModelPopoverInstance.show();setTimeout(function(){b.enterModelPopoverInstance&&null!==b.enterModelPopoverInstance&&b.enterModelPopoverInstance.hide()},1E3)};b.removeEnterModelPopover=function(f){b.enterModelPopoverInstance&&null!==b.enterModelPopoverInstance&&(e.remove(a.$("#hsx-rpp-txtModelNumber")),b.enterModelPopoverInstance=
null);f&&f.preventDefault()};b.clearModelNumberWarnings=function(){a.$("#hsx-rpp-modelNumberErrorMessage").hide()};b.checkModelNumber=function(){b.clearModelNumberWarnings();var f=a.$("#hsx-rpp-txtModelNumber").val().replace(/ /g,"");""!==f&&(50<=f.length?a.$("#hsx-rpp-modelNumberNotFoundMessage").show():(b.metricsLogger.emitMetrics(b.config.metricsPrefix,"LookupModel",{modelNumber:f}),b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCall"),a.$("#hsx-rpp-feedback-model-series").attr("value",
f),a.$("#hsx-rpp-feedback-brand").attr("value",""),a.ajax(b.config.modelQueryUrl,{method:"get",params:{q:f},success:function(a){b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCallSuccess");b.processCheckModelNumberResult(f,a)},error:function(){a.$("#hsx-rpp-enteredModelNumberLink").html(f);b.metricsLogger.emitMetrics(b.config.metricsPrefix,"CheckModelNumberError",{modelNumber:f});b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCallFail");a.$("#hsx-rpp-modelNumberErrorMessage").show()}})))};
b.populateModelSeries=function(a,g){m.clearSelect("hsx-rpp-selectModelSeries");for(var c=!1,d=0;d<g.length;d++)0<d&&g[d-1].fields.brand!==g[d].fields.brand&&(c=!0);b.metricsLogger.emitMetrics(b.config.metricsPrefix,"ModelCollision",{modelNumber:a,hasBrandCollision:c});for(d=0;d<g.length;d++){var e=g[d].fields.modelnumber;g[d].fields.series&&(e+=g[d].fields.series);c&&(e=g[d].fields.brand+" "+e);h.getSelect("hsx-rpp-selectModelSeries").addOption({text:e,value:""+d},d)}return c?"brand":"series"};b.processCheckModelNumberResult=
function(f,g){b.modelSearchResult=g;if(1<g.hits.found){a.$("#hsx-rpp-moreInfoModelNumber").html(f);var c=b.populateModelSeries(f,g.hits.hit);b.showSelectModelSeriesFitmentContainer(c)}else 0<g.hits.hit.length?b.pickModelSeries(0):b.modelNumberAutocomplete&&b.modelNumberAutocomplete.triggerFuzzyMatch?(b.metricsLogger.emitMetrics(b.config.metricsPrefix,"FuzzyMatchShown",{modelNumber:f}),b.modelNumberAutocomplete.triggerFuzzyMatch()):(b.metricsLogger.emitMetrics(b.config.metricsPrefix,"ModelNumberNotFound",
{modelNumber:f}),a.$("#hsx-rpp-enteredModelNumberLink").html(f),a.$("#hsx-rpp-modelNumberErrorMessage").show())};b.showSelectSeriesPopover=function(f){var g=a.$(".hsx-rpp-modelseries-popover-content").html();f&&"brand"===f?(g=g.replace(/series/g,"brand"),h.getSelect("hsx-rpp-selectModelSeries").update({option_prompt:"Select Brand"})):h.getSelect("hsx-rpp-selectModelSeries").update({option_prompt:"Select Series"});f='<div class="hsx-rpp-modelseries-popover-content">'+g+"</div>";g=a.$(".hsx-rpp-selectSeriesPopoverHolder");
g.css({width:a.$("#hsx-rpp-selectModelSeriesSpan").width()+"px"});g.css({marginLeft:a.$("#hsx-rpp-moreInfoModelNumberContainer").width()+7+"px"});b.selectSeriesPopoverInstance=e.create(g,{content:f,name:"hsx-rpp-selectModelSeriesPrompt",position:"triggerBottom"});a.$("#hsx-rpp-selectModelSeriesSpan").click(function(){b.removeSelectSeriesPopover()});b.selectSeriesPopoverInstance.show()};b.removeSelectSeriesPopover=function(f){b.selectSeriesPopoverInstance&&null!==b.selectSeriesPopoverInstance&&(e.remove(a.$("#hsx-rpp-checkFitmentContainerSelectModelSeries")),
b.selectSeriesPopoverInstance=null);f&&f.preventDefault()};b.showSelectModelSeriesFitmentContainer=function(f){a.$("#hsx-rpp-checkFitmentContainerSelectModelSeries").removeClass("hsx-rpp-hidden");a.$("#hsx-rpp-checkFitmentContainerSelectModelSeries").addClass("hsx-rpp-centerResultMessage");a.$("#hsx-rpp-enterModelNumberContainer").removeClass("hsx-rpp-centerResultMessage");a.$("#hsx-rpp-enterModelNumberContainer").addClass("hsx-rpp-hidden");a.$("#hsx-rpp-fitsContainer").hide();a.$("#hsx-rpp-notfitsContainer").hide();
m.showElement(a.$("#hsx-rpp-checkFitmentContainer"));b.showSelectSeriesPopover(f)};b.hideSelectModelSeriesFitmentContainer=function(){b.removeSelectSeriesPopover();a.$("#hsx-rpp-txtModelNumber").val("");a.$("#hsx-rpp-checkFitmentContainerSelectModelSeries").removeClass("hsx-rpp-centerResultMessage");a.$("#hsx-rpp-checkFitmentContainerSelectModelSeries").addClass("hsx-rpp-hidden");a.$("#hsx-rpp-enterModelNumberContainer").addClass("hsx-rpp-centerResultMessage");a.$("#hsx-rpp-enterModelNumberContainer").removeClass("hsx-rpp-hidden");
a.$("#hsx-rpp-fitsContainer").hide();a.$("#hsx-rpp-notfitsContainer").hide();m.showElement(a.$("#hsx-rpp-checkFitmentContainer"));a.$("#hsx-rpp-txtModelNumber").focus();b.metricsLogger.emitMetrics(b.config.metricsPrefix,"ClearModel");a.state("rpp",{stripeState:"enter-model"})};b.pickModelSeries=function(f,g){var c=b.modelSearchResult.hits.hit[f],d=c.fields.brand,e=c.fields.modelnumber,h=c.fields.modelnumber,m;c.fields.series&&(h+=c.fields.series,m=c.fields.series);b.metricsLogger.emitMetrics(b.config.metricsPrefix,
"SelectModel",{modelNumber:h});a.$("#hsx-rpp-feedback-model-series").attr("value",e);a.$("#hsx-rpp-feedback-brand").attr("value",d);m===v&&(m="BASE");b.checkFitment(d,e,m,h,a.state("rpp").asin,g)};b.checkFitment=function(f,c,d,e,h,t){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"CheckFitment",{asin:h,modelBrand:f,modelNumber:c,series:d});b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCall");a.ajax(b.config.checkFitmentUrl,{method:"get",params:{brand:m.normalizeValue(f),
model:m.normalizeModelField(c),series:m.normalizeModelField(d),asin:h},success:function(a){a&&1===a.success&&a.payload&&"yes"===a.payload.fitment_decision?(b.metricsLogger.emitMetrics(b.config.metricsPrefix,"FitmentRecordFound",{asin:h,modelBrand:f,modelNumber:c,series:d}),b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCallSuccess"),b.showFitsMessage(e,f)):(t&&!0===t&&b.metricsLogger.emitMetrics(b.config.metricsPrefix,"InconsistentFitment",{asin:h,modelBrand:f,modelNumber:c,
series:d}),b.metricsLogger.emitMetrics(b.config.metricsPrefix,"NoFitmentRecordFound",{asin:h,modelBrand:f,modelNumber:c,series:d}),b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCallSuccess"),b.showNotFitsMessage(e,f))},error:function(){b.metricsLogger.emitMetrics(b.config.metricsPrefix,"CheckFitmentError",{asin:h,modelBrand:f,modelNumber:c,series:d});b.metricsLogger.emitCSMCounterMetrics(b.config.metricsPrefix,"DataQueryAjaxCallFail");b.showNotFitsMessage(e,f)}})};b.showFitsMessage=
function(f,c){var d=c+" "+f;a.state("rpp",{stripeState:"result-found",modelBrand:c,modelNumber:f});a.$(".hsx-rpp-seeAllPartsThatFit").click(function(){b.showAllPartsThatFit(f,c)});a.$("#hsx-rpp-fitsModelNumber").html(d);m.showElement(a.$("#hsx-rpp-fitsContainer"));m.hideElement(a.$("#hsx-rpp-notfitsContainer").hide());m.hideElement(a.$("#hsx-rpp-checkFitmentContainer").hide());m.setBulletText(m.prepareBulletText(a.state("rpp").stripeState,d,a.state("rpp").showBullet))};b.showNotFitsMessage=function(f,
c){var d=c+" "+f;a.state("rpp",{stripeState:"no-result",modelBrand:c,modelNumber:f});a.$(".hsx-rpp-seeAllPartsThatFit").click(function(){b.showAllPartsThatFit(f,c)});a.$("#hsx-rpp-notfitsModelNumber").html(d);m.hideElement(a.$("#hsx-rpp-fitsContainer"));m.showElement(a.$("#hsx-rpp-notfitsContainer"));m.hideElement(a.$("#hsx-rpp-checkFitmentContainer"));m.setBulletText(m.prepareBulletText(a.state("rpp").stripeState,d,a.state("rpp").showBullet))};b.showAllPartsThatFit=function(f,c){var d="3741181";
a.state("rpp").rootBrowseNode&&(d=a.state("rpp").rootBrowseNode);d="/s/ref="+b.config.showAllPartsForModelReftag+"?node="+d+"&rppModelNumber="+encodeURIComponent(f);d+="&rppModelBrand="+encodeURIComponent(c);b.metricsLogger.emitMetrics(b.config.metricsPrefix,"SeeAllPartsThatFit");r.location.replace(d)};return b})});n.now("ReplacementPartsDropdownStripe").execute(function(e){"undefined"===typeof e&&n.when("A","a-popover","a-dropdown","a-button","jQuery","HSXMetricsLogger","ReplacementPartsStripeModelHelpModule",
"ReplacementPartsStripeFeedbackWidgetModule","ReplacementPartsStripeUtility","jQuery-ReplacementPartsAutocomplete","ready").register("ReplacementPartsDropdownStripe",function(a,e,h,l,d,c,m,b,f){function g(b,a,f){p(b);b=k.config.noFitmentDataPopoverUrl;b+="?category="+k.category;b=e.create(a,{url:b+("&selectedBrand="+f),width:"400",position:"triggerBottom"});b.show()}function p(b){null!==b&&"undefined"!==b&&e.remove(b)}var k={config:{},autocompleteInstances:[],noDataBrands:[],category:"",SEARCH_PAGE_TYPE:"search",
DETAIL_PAGE_TYPE:"detail",BROWSE_PAGE_TYPE:"browse",FEEDBACK_BRAND_ID:"#hsx-rpp-feedback-brand",FEEDBACK_MODEL_ID:"#hsx-rpp-feedback-model-series",FITSID:"#hsx-rpp-fitsContainer",NOTFITSID:"#hsx-rpp-notfitsContainer",CHECKFITMENTID:"#hsx-rpp-checkFitmentContainer",STRIPE_CONTAINER:"#hsx-rpp-stripeContainer",TEXT_INPUT_ID:"#hsx-rpp-number-series-query",NO_DATA_POPOVER_TRIGGER:"#hsx-rpp-number-series-query",qGroup:"inkandtoner",BRAND_BUTTON_TEXT:"Brand",finderName:"dropdown",DELAY_MS:250,timer:0,initialize:function(){a.state("rpp")||
a.state.parse();var g=a.state("rpp").pageType;k.category=a.state("rpp").stripeParams.category;"brandsMissingFitment"in a.state("rpp").stripeParams&&(k.noDataBrands=a.state("rpp").stripeParams.brandsMissingFitment.split("#"));k.autocompleteInstances=[];k.metricsLogger=c.createLogger();b.loadWidget("hsx-rpp-feedbackContainer","hsx-rpp-feedbackButton",a.state("rpp"));a.state("rpp").stripeParams&&a.state("rpp").stripeParams.scope&&(k.qGroup=a.state("rpp").stripeParams.scope);if(g===k.DETAIL_PAGE_TYPE||
g===k.BROWSE_PAGE_TYPE)k.config=a.$.extend({},f.config,{showAllPartsForModelReftag:"dp_rpp_stripe_showallparts",defaultRootBrowseNode:a.state("rpp").rootBrowseNode,fitmentMessagingTextMaxLength:35,metricsPrefix:"hsxRPPDetailPageStripe"}),k.initializeDetailPage();g===k.SEARCH_PAGE_TYPE&&(k.config=a.$.extend({},f.config,{showAllPartsForModelReftag:"sx_rpp_stripe_showallparts",searchAlias:"replacement-parts",modelSuggestUrl:f.config.modelSuggestUrl+"&qGroup="+k.qGroup,metricsPrefix:"hsxRPPSearchStripe"}),
k.initializeSearchPage());a.$("#hsx-rpp-lnkHelpFindModelNumber").click(function(){k.metricsLogger.emitMetrics(k.config.metricsPrefix,"HelpMeFindModelNumberClicked")});a.$(".hsx-rpp-popover-option-empty").hide();a.$("#hsx-rpp-brand-popover-filter").bind("paste",function(b){k.metricsLogger.emitMetrics(k.config.metricsPrefix,"PasteBrand")});a.$(k.TEXT_INPUT_ID).bind("paste",function(b){k.metricsLogger.emitMetrics(k.config.metricsPrefix,"PasteModelNumber")});a.$("#hsx-rpp-brand-popover-trigger").click(function(b){b=
"#hsx-rpp-onload-popover-search";g===k.DETAIL_PAGE_TYPE&&(b="#hsx-rpp-onload-popover");e.remove(a.$(b));e.get(a.$("#hsx-rpp-brand-popover-action"))&&e.get(a.$("#hsx-rpp-brand-popover-action")).show()});a.$(".hsx-rpp-seeAllPartsThatFit").click(function(){k.showAllPartsThatFit(a.state("rpp").modelBrand,a.state("rpp").modelSeries,a.state("rpp").modelNumber)});a.$(k.TEXT_INPUT_ID).keyup(function(b){k.clearWarnings();var f=a.$(this).val();13===b.keyCode&&0<f.length&&k.processEnterKeyup(f)});k.BRAND_BUTTON_TEXT=
a.$("#hsx-rpp-brand-popover-trigger-announce").text().trim()},initializeSearchPage:function(){if("enter-model"===a.state("rpp").stripeState)f.showEnterModelPopover("hsx-rpp-onload-popover-search"),k.metricsLogger.emitMetrics(k.config.metricsPrefix,"Loaded",{stripeState:a.state("rpp").stripeState}),k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"Loaded");else{var b=a.state("rpp").modelNumber,c=a.state("rpp").modelBrand,g=a.state("rpp").modelSeries,d=a.state("rpp").modelDisplayBrand;a.state("rpp",
{modelNumber:f.htmlDecode(b),modelBrand:f.htmlDecode(c),modelSeries:f.htmlDecode(g)});k.metricsLogger.emitMetrics(k.config.metricsPrefix,"Loaded",{stripeState:a.state("rpp").stripeState,modelNumber:b,modelBrand:c,modelDisplayBrand:d,modelSeries:g,resultCount:a.state("rpp").resultCount,browseNodes:a.state("rpp").browseNode});a.$(k.FEEDBACK_BRAND_ID).attr("value",c);a.$(k.FEEDBACK_MODEL_ID).attr("value",g+" "+b)}a.$("#hsx-rpp-stripeAction").attr("action",a.state("rpp").widgetRedirectURL);a.$("#hsx-rpp-part-number").bind("paste",
function(){k.metricsLogger.emitMetrics(k.config.metricsPrefix,"PastePartNumber")})},initializeDetailPage:function(){a.state("rpp");a.state("rpp");a.state("rpp");"enter-model"===a.state("rpp").stripeState&&(f.showEnterModelPopover("hsx-rpp-onload-popover"),f.showElement(a.$(k.CHECKFITMENTID)));k.metricsLogger.emitMetrics(k.config.metricsPrefix,"Loaded",{asin:a.state("rpp").asin,stripeState:a.state("rpp").stripeState,modelBrand:a.state("rpp").modelBrand,modelNumber:a.state("rpp").modelNumber,series:a.state("rpp").modelSeries});
k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"Loaded");a.$("#replacementPartsFitmentBullet").find(".hsx-rpp-fitment-focus").click(function(b){b.preventDefault();f.showElement(a.$(k.STRIPE_CONTAINER));b={scrollTop:a.$("#hsx-rpp-stripeContainer").offset().top};a.$("html,body").animate(b,"fast");a.$("#hsx-rpp-brand-popover-trigger-announce").trigger("click");f.showEnterModelPopover("hsx-rpp-onload-popover");k.metricsLogger.emitMetrics(k.config.metricsPrefix,"FitmentBulletClicked");a.state("rpp",
{bulletAlreadyClicked:!0})})}};a.declarative("hsx-rpp-brand-popover-wrapper","click",function(b){k.selectBrand(b)});a.declarative("hsx-rpp-brand-popover-wrapper","keyup",function(b){k.popoverFilter(b)});a.declarative("hsx-rpp-btnCheckAnother","click",function(b){a.state("rpp").finderName===k.finderName&&(a.state("rpp").pageType===k.DETAIL_PAGE_TYPE?(k.metricsLogger.emitMetrics(k.config.metricsPrefix,"ClearModel"),k.reset()):(k.metricsLogger.emitMetrics(k.config.metricsPrefix,"ClearModel"),k.submitSearchForm("",
"","")))});a.declarative("hsx-rpp-smartbox-btnSearchPart","click",function(b){a.state("rpp").finderName===k.finderName&&"submit"===b.$target.attr("type")&&(b=a.$("#hsx-rpp-txtPartSearch").val(),k.searchPart(b))});a.declarative("hsx-rpp-smartbox-btnSearchPart","keyup",function(b){a.state("rpp").finderName===k.finderName&&13===b.$event.keyCode&&"hsx-rpp-txtPartSearch"===b.$target.attr("id")&&(b=b.$target.val(),k.searchPart(b))});a.declarative("hsx-rpp-smartbox-btnSeeAllParts","click",function(b){a.state("rpp").finderName===
k.finderName&&k.searchAllPartsForModel()});k.selectBrand=function(b){var f=b.$target.attr("class"),c="",h="",h=-1!==f.indexOf("hsx-rpp-brand-popover-option"),f=-1!==f.indexOf("a-button-text");if(h||f)c=b.$target.attr("value"),h=b.$target.text(),a.state("rpp",{modelBrand:c}),a.state("rpp",{modelDisplayBrand:h}),e.get(a.$("#hsx-rpp-brand-popover-action")).hide(),l("#hsx-rpp-brand-popover-trigger").text(h),a.$(k.TEXT_INPUT_ID).val(""),k.metricsLogger.emitMetrics(k.config.metricsPrefix,"BrandSelected",
{modelBrand:c,displayBrand:h,favorite:f}),a.$(k.FEEDBACK_BRAND_ID).attr("value",h),a.$(k.FEEDBACK_MODEL_ID).attr("value",""),b=d(k.NO_DATA_POPOVER_TRIGGER),f=e.get(b),h=h.trim(),-1<k.noDataBrands.indexOf(h)?(g(f,b,h),a.$(k.TEXT_INPUT_ID).addClass("a-form-disabled").attr("disabled","disabled"),k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"LookForWholegoodsAttemptFail")):(p(f),a.$(k.TEXT_INPUT_ID).unbind("focus").bind("focus",function(b){b={};a.state("rpp").asin&&(b.asin=a.state("rpp").asin);
a.state("rpp").modelBrand&&(b.brand=a.state("rpp").modelBrand);a.state("rpp").browseNode&&(b.browseNode=a.state("rpp").browseNode);k.qGroup&&(b.scope=k.qGroup);a.state("rpp").category&&(b.category=a.state("rpp").category);k.metricsLogger.emitMetrics(k.config.metricsPrefix,"DataQueryAjaxCall");a.$.ajax(k.config.getMyModelUrl,{type:"GET",contentType:"application/json",data:a.$.param(b,!1),dataType:"json",success:function(b){k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"DataQueryAjaxCallSuccess");
k.autocompleteInstances[0].handleReceiveData("",b)},error:function(){k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"DataQueryAjaxCallFail")}})}),k.enableModelSearchInput())};k.processEnterKeyup=function(b){if(0<k.autocompleteInstances.length){var f=k.autocompleteInstances[0].getResultCount(),f=parseInt(f,10);1===f?(k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"DataQueryAjaxCall"),a.get(k.config.combinedModelSuggestUrl,{params:{q:b,qBrand:a.state("rpp").modelBrand,qGroup:k.qGroup,
asin:a.state("rpp").asin,browseNode:a.state("rpp").browseNode,qCategory:a.state("rpp").category},success:function(f){var c="undefined"!==typeof f.hits.hits?f.hits.hits[0]._source:f.hits.hit[0].fields;f=c.brand?c.brand:c.normalized_brand;var g=c.series?c.series:c.normalized_series,c=c.modelnumber?c.modelnumber:c.normalized_model,d;d=(g+c).toLowerCase().replace(/\s/g,"");b=b.toLowerCase().replace(/\s/g,"");k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"DataQueryAjaxCallSuccess");b===
d?(a.state("rpp").pageType===k.DETAIL_PAGE_TYPE&&k.checkFitment(f,g,c,a.state("rpp").asin),a.state("rpp").pageType===k.SEARCH_PAGE_TYPE&&k.filterSearchByModel(f,g,c),a.state("rpp").pageType===k.BROWSE_PAGE_TYPE&&k.showAllPartsThatFit(f,g,c)):0===a.$(".hsx-rpp-ac-summary > #hsx-rpp-selectResultMessage").length&&k.showSelectAutocompleteResultMessage()},error:function(){k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"DataQueryAjaxCallFail")}})):1<f?k.showSelectAutocompleteResultMessage():
(a.$("#hsx-rpp-noResultsMessage").show(),k.metricsLogger.emitMetrics(k.config.metricsPrefix,"ModelNumberNotFound",{modelNumber:b,modelBrand:a.state("rpp").modelBrand}),k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"LookForWholegoodsAttemptFail"))}};k.showSelectAutocompleteResultMessage=function(){0===a.$(".hsx-rpp-ac-summary > #hsx-rpp-selectResultMessage").length&&a.$(".hsx-rpp-ac-summary").append(a.$("#hsx-rpp-selectResultMessage").clone().removeClass("hsx-rpp-hidden"))};k.enableModelSearchInput=
function(b){b=a.state("rpp").modelBrand;k.clearWarnings();var c=k.config.combinedModelSuggestUrl;0===k.autocompleteInstances.length?k.autocompleteInstances=a.$(k.TEXT_INPUT_ID).rppAutocomplete(c,{doFuzzyMatch:!1,displayValueFields:["series","modelnumber"],maxItemsToShow:f.autocompleteMaxItemsToShow,showCountOfResults:!0,onItemSelect:function(b,f,c,g,d){k.metricsLogger.emitMetrics(k.config.metricsPrefix,"ModelNumberSelected",{typedModelNumber:f,modelNumber:c,modelBrand:a.state("rpp").modelBrand,isFuzzyMatch:g});
b=d.brand?d.brand:d.normalized_brand;f=d.series?d.series:d.normalized_series;d=d.modelnumber?d.modelnumber:d.normalized_model;a.state("rpp").pageType===k.DETAIL_PAGE_TYPE&&k.checkFitment(b,f,d,a.state("rpp").asin);a.state("rpp").pageType===k.SEARCH_PAGE_TYPE&&k.filterSearchByModel(b,f,d);a.state("rpp").pageType===k.BROWSE_PAGE_TYPE&&k.showAllPartsThatFit(b,f,d)},onRequestData:function(b){clearTimeout(k.timer);k.timer=setTimeout(function(){k.metricsLogger.emitMetrics(k.config.metricsPrefix,"ModelNumberEntered",
{modelNumber:b,modelBrand:a.state("rpp").modelBrand})},k.DELAY_MS)},recordCSMCounterMetric:function(b){k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,b)},extraParams:{qBrand:b,qGroup:k.qGroup,asin:a.state("rpp").asin,browseNode:a.state("rpp").browseNode,qCategory:a.state("rpp").category}}):k.autocompleteInstances[0].setExtraParams({qBrand:b,qGroup:k.qGroup,qCategory:a.state("rpp").category,asin:a.state("rpp").asin,browseNode:a.state("rpp").browseNode});a.$(k.TEXT_INPUT_ID).removeAttr("disabled").removeClass("a-form-disabled");
setTimeout(function(){a.$(document.activeElement).attr("id")!==k.TEXT_INPUT_ID&&a.$(k.TEXT_INPUT_ID).focus()},500)};k.reset=function(){l("#hsx-rpp-brand-popover-trigger").text(k.BRAND_BUTTON_TEXT);a.$(k.TEXT_INPUT_ID).attr("disabled","disabled").addClass("a-form-disabled").val("");a.$(k.FITSID).hide();a.$(k.NOTFITSID).hide();f.showElement(a.$(k.CHECKFITMENTID));a.$(".hsx-rpp-popover-filter").val("")};k.checkFitment=function(b,c,g,d){var e={asin:d,modelBrand:b,modelDisplayBrand:a.state("rpp").modelDisplayBrand,
modelNumber:g,series:c};k.metricsLogger.emitMetrics(k.config.metricsPrefix,"CheckFitment",e);k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"DataQueryAjaxCall");a.$(k.FEEDBACK_MODEL_ID).attr("value",c+" "+g);a.ajax(k.config.checkFitmentUrl,{method:"get",params:{brand:f.normalizeValue(b),series:f.normalizeModelField(c),model:f.normalizeModelField(g),asin:d,doBrandSeriesCheck:1,scope:k.qGroup},success:function(a){a&&1===a.success&&a.payload&&"yes"===a.payload.fitment_decision?(k.metricsLogger.emitMetrics(k.config.metricsPrefix,
"FitmentRecordFound",e),k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"DataQueryAjaxCallSucceed"),k.showFitsMessage(b,c,g)):(k.metricsLogger.emitMetrics(k.config.metricsPrefix,"NoFitmentRecordFound",e),k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"DataQueryAjaxCallSucceed"),k.showNotFitsMessage(b,c,g))},error:function(){k.metricsLogger.emitMetrics(k.config.metricsPrefix,"CheckFitmentError",e);k.metricsLogger.emitCSMCounterMetrics(k.config.metricsPrefix,"DataQueryAjaxCallFail");
k.showNotFitsMessage(b,c,g)}})};k.filterSearchByModel=function(b,c,g){var d=a.$("#hsx-rpp-stripeAction"),e=a.$('#hsx-rpp-stripeAction input[name="rh"]').val();f.setFormField(d,"rh",f.getRhWithoutKeyword(e));f.setFormField(d,"keywords","");a.$(k.FEEDBACK_BRAND_ID).attr("value",b);a.$(k.FEEDBACK_MODEL_ID).attr("value",c+" "+g);k.putMyModel(g,c,b,k.qGroup);k.submitSearchForm(g,c,b)};k.putMyModel=function(b,f,c,g){a.ajax(k.config.putMyModelUrl,{method:"get",params:{brand:c,model:b,series:f,scope:g}})};
k.showFitsMessage=function(b,c,g){var d=b+" ";c&&(d+=c+" ");d+=g;a.state("rpp",{stripeState:"result-found"});f.setBulletText(f.prepareBulletText(a.state("rpp").stripeState,d,a.state("rpp").showBullet));f.showBullet();a.$(".hsx-rpp-seeAllPartsThatFit").click(function(){k.showAllPartsThatFit(b,c,g)});d.length>k.config.fitmentMessagingTextMaxLength+3&&(d=d.substring(0,k.config.fitmentMessagingTextMaxLength+3)+"...");a.$("#hsx-rpp-fitsModelNumber").html(d);f.hideElement(a.$(k.NOTFITSID).hide());f.hideElement(a.$(k.CHECKFITMENTID).hide());
f.showElement(a.$(k.FITSID))};k.showNotFitsMessage=function(b,c,g){var d=b+" ";c&&(d+=c+" ");d+=g;a.state("rpp",{stripeState:"no-result"});f.setBulletText(f.prepareBulletText(a.state("rpp").stripeState,d,0));a.$(".hsx-rpp-seeAllPartsThatFit").click(function(){k.showAllPartsThatFit(b,c,g)});d.length>k.config.fitmentMessagingTextMaxLength+3&&(d=d.substring(0,k.config.fitmentMessagingTextMaxLength+3)+"...");a.$("#hsx-rpp-notfitsModelNumber").html(d);f.hideElement(a.$(k.FITSID));f.hideElement(a.$(k.CHECKFITMENTID));
f.showElement(a.$(k.NOTFITSID))};k.showAllPartsThatFit=function(b,a,c){b="/s/ref="+k.config.showAllPartsForModelReftag+"?node="+k.config.defaultRootBrowseNode+"&rpp="+f.getEncodedParameter(b,a,c);r.location.assign(b);k.metricsLogger.emitMetrics(k.config.metricsPrefix,"SeeAllPartsThatFit")};k.searchAllPartsForModel=function(){var b=a.$("#hsx-rpp-stripeAction");b.attr("action","/s/ref="+k.config.showAllPartsForModelReftag);f.setFormField(b,"keywords","");f.setFormField(b,"rh","");f.setFormField(b,"node",
a.state("rpp").rootBrowseNode);var b=a.state("rpp").modelNumber,c=a.state("rpp").modelSeries,g=a.state("rpp").modelBrand;k.metricsLogger.emitMetrics(k.config.metricsPrefix,"SearchAllPartsForModel",{modelNumber:b,modelBrand:g,modelSeries:c});k.submitSearchForm(b,c,g)};k.searchPart=function(b){var c=a.state("rpp").modelNumber,g=a.state("rpp").modelSeries,d=a.state("rpp").modelBrand,e=a.$("#hsx-rpp-stripeAction"),h=f.getFormField(e,"keywords"),p=f.getFormField(e,"rh"),h=p.replace(h,b);f.setFormField(e,
"keywords",b);f.setFormField(e,"rh",h);a.$("#twotabsearchtextbox").val(b);k.metricsLogger.emitMetrics(k.config.metricsPrefix,"SearchPart",{keyword:b,prevRH:p,reformedRH:h});k.submitSearchForm(c,g,d)};k.popoverFilter=function(b){var c=b.$target.val().toLowerCase();if(13===b.keyCode){b=a.$(".hsx-rpp-brand-popover-option").length;var g=a.$(".hsx-rpp-brand-popover-option:hidden").length;1===b-g&&(b=a.$(".hsx-rpp-brand-popover-option:visible")[0],a.$(b).trigger("click"))}a.$(".hsx-rpp-brand-popover-option").each(function(b,
f){var g=a.$(f).attr("value").toLowerCase(),d=a.$(f).text().toLowerCase();0===g.indexOf(c)||0===d.indexOf(c)?a.$(f).show():a.$(f).hide()});b=a.$(".hsx-rpp-brand-popover-option").length;g=a.$(".hsx-rpp-brand-popover-option:hidden").length;0!==b&&g===b?(f.showElement(a.$("#hsx-rpp-brand-popover-filter").siblings("span.hsx-rpp-popover-option-empty")),clearTimeout(k.timer),k.timer=setTimeout(function(){k.metricsLogger.emitMetrics(k.config.metricsPrefix,"BrandNotFound",{modelBrand:a.$("#hsx-rpp-brand-popover-filter").val()})},
k.DELAY_MS)):f.hideElement(a.$("#hsx-rpp-brand-popover-filter").siblings("span.hsx-rpp-popover-option-empty"))};k.createEntityFilters=function(b,a,f,c,g,d){var e=[];e.brand=[];e.model=[];e.series=[];e.brand.value=f;e.brand.text=c;e.model.value=b;e.model.text=a;e.series.value=g;e.series.text=d;return e};k.submitSearchForm=function(b,c,g){var d=a.$("#hsx-rpp-stripeAction"),e=a.state("rpp").modelDisplayBrand,e=k.createEntityFilters(b,b,g,e,c,c),e=f.getEncodedParameterForSmartbox(e,k.finderName);f.setFormField(d,
f.searchParameterConfig.parameter,e);a.objectIsEmpty(b)&&a.objectIsEmpty(c)&&a.objectIsEmpty(g)&&f.setFormField(d,"rd","1");a.$(d).submit()};k.clearWarnings=function(){a.$("#hsx-rpp-errorMessage").hide();a.$("#hsx-rpp-noResultsMessage").hide()};k.getBrandOption=function(b,a,f,c){var g=15;"undefined"!==typeof c&&-1!==c&&(g=c);b=b.length<g+3?b:b.substring(0,g)+"...";return'<span class="hsx-rpp-popover-option '+f+'" title="'+b+'" value="'+a+'" tabindex="0">'+b+"</span>"};return k})});n.when("A",
"a-popover","SmartboxTextHandler","HSXMetricsLogger","SmartboxDisplayHandler","ReplacementPartsStripeFeedbackWidgetModule","ready").register("SmartboxAutoComplete",function(e,a,q,h,l,d){var c={},m;c.config={delay:250,keysToIgnoreFromSearch:[112,113,114,115,116,117,118,119,120,122,123,124,125,126,16,17,20,33,34,37,38,39,40],minimumLength:2};c.initialize=function(b){e.state("rpp")&&e.state(q.config.entityFiltersPageStateKey)||e.state.parse();m=e.$("#"+b);c.metricsLogger=h.createLogger();c.mouseDownSelected=
!1;l.initialize(b);q.initialize(l);e.$("#hsx-rpp-smartbox-search");d.loadWidget("hsx-rpp-feedbackContainer","hsx-rpp-feedbackButton",e.state("rpp"));m.keydown(function(b){if(40===b.keyCode)b.preventDefault(),l.moveSelect(1);else if(38===b.keyCode)b.preventDefault(),l.moveSelect(-1);else if(13===b.keyCode||9===b.keyCode)c.handleEnterPress(),b.preventDefault()});e.$("#hsx-rpp-lnkModelNumberPrompt").click(c.triggerEnterModelPopover);m.focus(function(b){if(!0===l.experienceEnhancePopoverClose)m.blur(),
l.experienceEnhancePopoverClose=!1;else{l.removeExperienceEnhancePopover(e.$("#hsx-rpp-smartbox-txtModelNumber"));q.config.customerEngaged||(c.metricsLogger.emitMetrics(q.config.metricsPrefix,"CustomerEngaged"),q.config.customerEngaged=!0);var a=m.val();""===a?(q.myModelQuery(),q.autoPrefilled()):1<a.length&&c.textHandler(b)}});m.keyup(function(b){-1===e.$.inArray(b.keyCode,c.config.keysToIgnoreFromSearch)&&c.delay(function(){c.textHandler(b)},c.config.delay)});m.bind("paste",function(b){c.delay(function(){q.getCurrentQueryType()===
q.config.qType.autocomplete&&c.metricsLogger.emitMetrics(q.config.metricsPrefix,"PasteModel");c.textHandler(b)},c.config.delay)});c.textHandler(e.$.Event("keyup",{keyCode:null}));m.blur(function(){c.mouseDownSelected||l.hideSuggestionBox()});e.$("#hsx-rpp-smartbox-suggestions").bind("mousedown","li",function(b){c.mouseDownSelected=!0}).bind("mouseup","li",function(b){c.mouseDownSelected=!1});e.$("#hsx-rpp-smartbox-suggestions").delegate("a","click",function(b){c.metricsLogger.emitMetrics(q.config.metricsPrefix,
"PartSelected",{"partNumber:":m.val()});e.state.replace(q.config.partVerifiedKey,{state:!0});q.searchPart(e.$(this).text())});e.$("#hsx-rpp-smartbox-suggestions").bind("click","li",function(b){b.preventDefault();var a=e.$(b.target);"B"===b.target.tagName&&(a=a.parent());c.updateFilterWithSelectedItem(a)})};c.textHandler=function(b){if(!q.config.partSearch){var a=e.$.trim(m.val());"undefined"!==typeof a&&(8===b.keyCode&&a.length<c.config.minimumLength?(q.entityContext={},q.autoPrefilled()):(a.length>=
c.config.minimumLength||0<q.getFiltersCount())&&-1===e.$.inArray(b.keyCode,c.config.keysToIgnoreFromSearch)&&q.search(a))}};c.handleEnterPress=function(){var b=l.getHighlightedListItem();if("undefined"===typeof b){var a=m.val(),b=c.checkExactMatchItem(a);null===b&&c.metricsLogger.emitMetrics(q.config.metricsPrefix,"ModelNumberNotFound",{modelNumber:a})}c.updateFilterWithSelectedItem(b)};c.checkExactMatchItem=function(b){var a=e.$("li",e.$("#hsx-rpp-smartbox-results-popover"));b=b.trim().toLowerCase().split(/[ -]+/);
for(var c=0;c<a.length;c++){for(var d=e.$(a[c]).data("modelInfo").toLowerCase().split(" "),k=b.slice(),h=0;h<d.length;h++)if(""!==d[h]&&0!==d[h].length){var m=k.indexOf(d[h]);if(-1<m)k.splice(m,1);else break}if(0===k.length&&h===d.length)return e.$(a[c])}return null};c.updateFilterWithSelectedItem=function(b){if(b){var a=b.data("action");if(!e.objectIsEmpty(a))if("searchPart"===a)q[a](b.data("modelInfo"));else c.metricsLogger.emitMetrics(q.config.metricsPrefix,"AutocompleteUsed",{entity:"AutoComplete",
value:b.data("id")}),m.val(b.data("modelInfo").toLowerCase()),q.updateEntityFilterWithSelectedItem(b);else if(b.data("entity")){var a=b.data("entity"),g=b.text();c.metricsLogger.emitMetrics(q.config.metricsPrefix,"AutocompleteUsed",{entity:a,value:g});q.updateEntityFilter(a,g,b.data("id"),q.config.entityFilterSource.customerSelection)}}};c.triggerEnterModelPopover=function(){c.metricsLogger.emitMetrics(q.config.metricsPrefix,"EnterModelPopover");c.enterModelPopoverInstance||c.updatePopoverInstance();
c.enterModelPopoverInstance&&(c.enterModelPopoverInstance.show(),setTimeout(function(){c.enterModelPopoverInstance&&null!==c.enterModelPopoverInstance&&c.enterModelPopoverInstance.hide()},2E3))};c.updatePopoverInstance=function(){var b='<div class="hsx-rpp-modelnumber-popover-content">'+e.$(".hsx-rpp-modelnumber-popover-content").html()+"</div>",f=e.$(".hsx-rpp-enterModelPopupPlaceHolder");f.css({width:e.$(".hsx-rpp-smartbox-search").width()+"px"});c.enterModelPopoverInstance=a.create(f,{content:b,
name:"hsx-rpp-enterModelNumberPrompt",position:"triggerBottom",width:e.$(".hsx-rpp-smartbox-search").width()+"px",popoverLabel:"Enter your model number to make sure this fits"})};c.delay=function(){var b=0;return function(a,c){clearTimeout(b);b=setTimeout(a,c)}}();e.declarative("hsx-rpp-smartbox-btnSearchPart","click keyup",function(b){if(e.state("rpp").finderName===q.finderName){var a="";"click"===b.type&&"a-button-input"===b.$target.attr("class")&&(a=e.$.trim(m.val()));"keyup"===b.type&&13===b.$event.which&&
(a=e.$.trim(m.val()));0<a.length&&(c.metricsLogger.emitMetrics(q.config.metricsPrefix,"PartSecondarySearch",{partKeyword:a}),q.searchPart(a))}});e.declarative("hsx-rpp-btnCheckAnother","click",function(b){e.state("rpp").finderName===q.finderName&&(e.state("rpp",{stripeState:q.config.state.enterModel}),c.metricsLogger.emitMetrics(q.config.metricsPrefix,"ClearModel"),q.resetStripe())});e.$("#hsx-rpp-lnkHelpFindModelNumber").click(function(){e.state("rpp").finderName===q.finderName&&c.metricsLogger.emitMetrics(q.config.metricsPrefix,
"HelpMeFindModelNumberClicked")});e.declarative("hsx-rpp-smartbox-input","click keydown mouseenter",function(b){b=!m||!m.is(e.$("#hsx-rpp-smartbox-txtModelNumber"));e.state("rpp").finderName===q.finderName&&b&&c.initialize("hsx-rpp-smartbox-txtModelNumber")});e.declarative("hsx-rpp-smartbox-btnSearchPart","click keydown mouseenter",function(b){b=!m||!m.is(e.$("#hsx-rpp-txtPartSearch"));e.state("rpp").finderName===q.finderName&&b&&c.initialize("hsx-rpp-txtPartSearch")});return c});n.when("A",
"a-popover","a-button","HSXMetricsLogger","ReplacementPartsStripeUtility","ReplacementPartsStripeModelHelpModule","ready").register("SmartboxTextHandler",function(e,a,q,h,l,d){var c={},m;c.entityContext={};c.currentState=null;c.DETAIL_PAGE_TYPE="detail";c.SEARCH_PAGE_TYPE="search";c.BROWSE_PAGE_TYPE="browse";c.finderName="smartbox";c.config={queryUrl:"/gp/replacement-parts/ajax/smartbox-query.html",configUrl:"/gp/replacement-parts/ajax/smartbox-config.html",checkFitmentUrl:"/gp/replacement-parts/ajax/hsx-rpp-dp-ajax-handler.html",
putMyModelUrl:"/gp/replacement-parts/ajax/my-model.html",getMyModelUrl:"/gp/replacement-parts/ajax/my-model.html?getMyModel=1",metricsPrefix:"hsxRPPSmartbox",showAllPartsForModelReftag:"dp_rpp_stripe_showallparts",entityFiltersPageStateKey:"hsx-rpp-entity-filters",myModelPageStateKey:"hsx-rpp-my-model-data",stripe:"sb",customerEngaged:!1,qType:{autocomplete:"smartboxAutocomplete",partVerification:"partVerification",part:"part"},modelTypes:{recentlySearchedModels:"myModels",popularModels:"popularModels",
elasticSearchModels:"elasticSearchModels"},entityFilterSource:{autocomplete:"Smartbox Auto Complete"},state:{resultsFound:"result-found",noResults:"no-result",enterModel:"enter-model"},entities:{brand:{required:"true",text:"display_brand",value:"normalized_brand"},model:{required:"true",text:"display_model",value:"normalized_model"},series:{required:"true",text:"display_series",value:"normalized_series"},part:{required:"false",text:"part_number",value:"part_number",action:"searchPart"}},entitySequence:["brand",
"series","model"],orderMap:{brand:["brand","series","model"],series:["series","model","brand"],model:["model","brand","series"]}};c.initialize=function(b){m=b;c.metricsLogger=h.createLogger();(b=e.state(c.config.entityFiltersPageStateKey))&&0!==l.getKeys(b).length||e.state(c.config.entityFiltersPageStateKey,{});(b=e.state(c.config.myModelPageStateKey))&&0!==l.getKeys(b).length||c.initializeMyModelCache();c.config.pageType=e.state("rpp").pageType;c.config.metricsPrefix=c.config.pageType===c.DETAIL_PAGE_TYPE?
c.config.metricsPrefix+"DetailPage":c.config.metricsPrefix+"SearchPage";(b=e.state("rpp"))?c.parseWidgetConfig(b):c.metricsLogger.emitMetrics(c.config.metricsPrefix,"WidgetConfigLoadFailed");c.metricsLogger.emitMetrics(c.config.metricsPrefix,"StripeLoaded",{stripeState:c.currentState,resultCount:e.state("rpp").resultCount});c.currentState===c.config.state.enterModel&&c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"StripeLoaded");c.bindEventonEntityFilterUpdate();c.currentState!==c.config.state.enterModel&&
m.adjustTextboxPosition();var a="ink_toner"!==c.config.category&&"camera"!==c.config.category&&"pc"!==c.config.category;c.currentState===c.config.state.enterModel&&a&&(d.helpMeFindModelNumber.initialize(),d.bindEvents(c.metricsLogger,c.config.metricsPrefix));a=c.getModelBrandDisplayValue();l.setBulletText(l.prepareBulletText(c.currentState,a,b.showBullet));c.currentState!==c.config.state.noResults&&0!==b.showBullet&&l.showBullet();c.myModelQuery();e.$("#replacementPartsFitmentBullet").find(".hsx-rpp-fitment-focus").click(function(b){b.preventDefault();
l.showElement(e.$("#hsx-rpp-stripeContainer"));b={scrollTop:e.$("#hsx-rpp-stripeContainer").offset().top};e.$("html,body").animate(b,"fast");c.metricsLogger.emitMetrics(c.config.metricsPrefix,"FitmentBulletClicked");e.state("rpp",{bulletAlreadyClicked:!0});e.$("#hsx-rpp-smartbox-txtModelNumber").focus()});e.state.bind("rpp",c.updateBulletForStateChange);e.declarative("hsx-rpp-smartbox-btnSeeAllParts","click",function(b){e.state("rpp").finderName===c.finderName&&c.showAllPartsThatFit()});c.config.hideStripeOnLoad||
c.currentState!==c.config.state.enterModel||""!==e.$("#hsx-rpp-smartbox-txtModelNumber").val().trim()||m.showExperienceEnhancePopover(e.$("#hsx-rpp-smartbox-txtModelNumber"),c.config.pageType,c.config.category);e.on("a:popover:dismiss:rpp-smartbox-experienceEnhance-popover",function(){m.removeExperienceEnhancePopover(e.$("#hsx-rpp-smartbox-txtModelNumber"));m.experienceEnhancePopoverClose=!0})};c.updateBulletForStateChange=function(b,a){if(a.stripeState&&"detail"===b.pageType){var g=c.getModelBrandDisplayValue();
l.setBulletText(l.prepareBulletText(e.state("rpp").stripeState,g,e.state("rpp").showBullet));l.showBullet()}};c.parseWidgetConfig=function(b){c.config.partSearch=b.partSearch;c.config.asin=b.asin;c.config.browseNode=b.browseNode;c.config.category=b.category;c.currentState=b.stripeState;c.config.hideStripeOnLoad=b.hideStripeOnLoad;b.stripeParams&&(c.config.scope=b.stripeParams.scope);c.config.pageType!==c.DETAIL_PAGE_TYPE&&c.currentState!==c.config.state.enterModel&&(c.config.partSearch=!0);e.$.ajax(c.config.configUrl,
{type:"GET",contentType:"application/json",dataType:"json",success:function(b){b?c.pullStringsFromPageState(b):c.metricsLogger.emitMetrics(c.config.metricsPrefix,"EntityConfigNull",{entityConfigVersion:c.config.entityConfigVersion})},error:function(){c.metricsLogger.emitMetrics(c.config.metricsPrefix,"EntityConfigCallFailed",{entityConfigVersion:c.config.entityConfigVersion})}})};c.pullStringsFromPageState=function(b){b?c.config.strings=b:c.metricsLogger.emitMetrics(c.config.metricsPrefix,"StringsUndefined")};
c.bindEventonEntityFilterUpdate=function(){e.state.bind(c.config.entityFiltersPageStateKey,function(b,a){c.updateFeedbackParams();m.updateSuggestions({});!0===c.isDataAvailableForFitmentCheck()&&c.doFitmentCheck()})};c.isDataAvailableForFitmentCheck=function(){var b=e.state(c.config.entityFiltersPageStateKey);if(b){var a=!0;e.$.each(c.config.entitySequence,function(g,d){if("true"===c.config.entities[d].required&&!b[d])return a=!1});return a}};c.doFitmentCheck=function(){c.config.pageType===c.SEARCH_PAGE_TYPE?
(c.putMyModel(),c.submitForm()):c.config.pageType===c.BROWSE_PAGE_TYPE?c.showAllPartsThatFit():c.checkFitment()};c.showAllPartsThatFit=function(){c.metricsLogger.emitMetrics(c.config.metricsPrefix,"SeeAllPartsThatFit");if(c.config.pageType===c.DETAIL_PAGE_TYPE){var b=e.state(c.config.entityFiltersPageStateKey),b=l.getEncodedParameterForSmartbox(b,c.config.stripe),a=e.state("rpp").rootBrowseNode;r.location.assign("/s/ref="+c.config.showAllPartsForModelReftag+"?node="+a+"&rpp="+b)}else b=e.$("#hsx-rpp-stripeAction"),
l.setFormField(b,"keywords",""),l.setFormField(b,"rh",""),l.setFormField(b,"node",e.state("rpp").rootBrowseNode),c.submitForm()};c.searchAllPartsForModel=function(){c.metricsLogger.emitMetrics(c.config.metricsPrefix,"SearchAllPartsForModel");var b=e.$("#hsx-rpp-stripeAction");l.setFormField(b,"keywords","");l.setFormField(b,"rh","");l.setFormField(b,"node",e.state("rpp").rootBrowseNode);c.submitForm()};c.submitForm=function(){var b=e.state(c.config.entityFiltersPageStateKey),a="";b&&(a=l.getEncodedParameterForSmartbox(b,
c.config.stripe));var g=e.$("#hsx-rpp-txtPartSearch").val(),b=e.$("#hsx-rpp-stripeAction");b.attr("action","/s/ref="+c.config.showAllPartsForModelReftag);l.setFormField(b,"rpp",a);c.currentState===c.config.state.enterModel?(a=e.$("#hsx-rpp-stripeAction input[name='rh']").val(),l.setFormField(b,"rh",l.getRhWithoutKeyword(a)),l.setFormField(b,"keywords","")):"undefined"!==typeof g&&l.setFormField(b,"keywords",g);l.setFormField(b,"rd","1");e.$(b).submit()};c.searchPart=function(b){if(b){var a=e.$("#hsx-rpp-stripeAction"),
g=l.getFormField(a,"keywords"),d=l.getFormField(a,"rh"),g=d.replace(g,b);l.setFormField(a,"keywords",b);l.setFormField(a,"rh",g);a.attr("action","/s/ref="+c.config.showAllPartsForModelReftag);e.$("#twotabsearchtextbox").val(b);c.metricsLogger.emitMetrics(c.config.metricsPrefix,"SearchPart",{keyword:b,prevRH:d,reformedRH:g});e.$(a).submit()}};c.putMyModel=function(){var b=e.state(c.config.entityFiltersPageStateKey),a=b.model?b.model.value:"",g=b.series?b.series.value:"",d=c.config.asin,k=c.config.scope;
e.ajax(c.config.putMyModelUrl,{method:"get",params:{brand:l.normalizeValue(b.brand?b.brand.value:""),model:l.normalizeModelField(a),series:l.normalizeModelField(g),asin:d,scope:k},error:function(){c.metricsLogger.emitMetrics(c.config.metricsPrefix,"putMyModel failed")}})};c.updateEntityFilterWithSelectedItem=function(b){if(b){var a=b.data("id");b=b.data("modelType");if(a){var g=e.state(c.config.entityFiltersPageStateKey),d=a.split("#");if(d&&1<d.length){var k={},h=0;e.$.each(c.config.entitySequence,
function(b,a){if("true"===c.config.entities[a].required){var f=d[h++];(f=f?f.split("^"):null)&&2===f.length&&(g[a]={text:f[0],value:f[1],source:c.config.entityFilterSource.autocomplete},""!==a&&(k["display_"+a]=f[0],k["normalized_"+a]=f[1]))}});b===c.config.modelTypes.popularModels&&c.metricsLogger.emitMetrics(c.config.metricsPrefix,"PopularModelSelected",{"modelBrand ":g.brand.value,"modelNumber ":g.model.value,"modelSeries ":g.series.value});a=e.state(c.config.myModelPageStateKey);a.myModels.data.unshift(k);
e.state.replace(c.config.myModelPageStateKey,a);g.modelType=b;e.state.replace(c.config.entityFiltersPageStateKey,g);m.hideSuggestionBox()}}}};c.search=function(b){if(null!==b){var a={};b=e.$.trim(b);a.input=b;var g=c.getCurrentQueryType();a.qType=g;c.config.scope&&(a.scope=c.config.scope);c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"DataQueryAjaxCall");c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"LookForWholegoodsAttempt");e.$.ajax(c.config.queryUrl,{type:"GET",contentType:"application/json",
data:e.$.param(a,!1),dataType:"json",success:function(d){var k={};k[g]={};k[g]=c.parseSearchResults(d,b);g===c.config.qType.autocomplete&&(d=e.state(c.config.myModelPageStateKey),c.myModelDataExists(d,"data")?(k[g].myModels=c.parseSearchResultsForMyModel(d.myModels,b),k[g].popularModels=c.parseSearchResultsForMyModel(d.popularModels,b)):c.metricsLogger.emitMetrics(c.config.metricsPrefix,"NoMyModelData",a));c.searchResultsHandler(k,g,b);c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,
"DataQueryAjaxCallSucceed")},error:function(){c.metricsLogger.emitMetrics(c.config.metricsPrefix,"SearchCallFailed",a);c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"DataQueryAjaxCallFail");c.searchResultsErrorHandler(g,b,c.config.strings.ajax_error)}})}};c.myModelQuery=function(){var b=e.state(c.config.myModelPageStateKey);if(!c.myModelDataExists(b,"data")){var a={};c.config.pageType===c.DETAIL_PAGE_TYPE?c.config.asin&&(a.asin=c.config.asin):c.config.browseNode&&(a.browseNode=c.config.browseNode);
c.config.scope&&(a.scope=c.config.scope);c.config.category&&(a.category=c.config.category);c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"DataQueryAjaxCall");e.$.ajax(c.config.getMyModelUrl,{type:"GET",contentType:"application/json",data:e.$.param(a,!1),dataType:"json",success:function(b){c.myModelDataExists(b,"data")&&(e.state.replace(c.config.myModelPageStateKey,b),c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"DataQueryAjaxCallSucceed"))},error:function(){c.metricsLogger.emitMetrics(c.config.metricsPrefix,
"MyModelQueryFailed",a);c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"DataQueryAjaxCallFail")}})}};c.initializeMyModelCache=function(){e.state(c.config.myModelPageStateKey,{myModels:{"meta-data":{count:0},data:[]},popularModels:{"meta-data":{count:0},data:[]}})};c.myModelDataExists=function(b,a){return b&&(b.myModels&&"undefined"!==typeof b.myModels[a]&&0<b.myModels[a].length||b.popularModels&&"undefined"!==typeof b.popularModels[a]&&0<b.popularModels[a].length)?!0:!1};c.isValidInput=
function(b){return b?b!==c.entityContext.prevSearchQuery:!0};c.getCurrentQueryType=function(){var b="";return b=c.config.partSearch?c.config.qType.part:c.config.qType.autocomplete};c.createSuggestionsEntity=function(b,a,g,d){var k=[];e.$.each(b,function(b,h){var m="",l="";c.config.partSearch?"undefined"!==typeof g?(m=h[g][c.config.entities.part.text],l=h[g][c.config.entities.part.value]):(m=h[c.config.entities.part.text],l=h[c.config.entities.part.value]):(l=c.matchOrder(h,c.config.orderMap,a,g,d),
m=l.text,l=l.value);e.objectIsEmpty(m)||e.objectIsEmpty(l)||k.push({text:e.$.trim(m),value:l.slice(0,-1)})});return k};c.parseSearchResults=function(b,a){var g={results:[]};b&&(b.aggregations?(g.total=b.aggregations.group_by.buckets.length,e.$.each(b.aggregations.group_by.buckets,function(b,a){if(!(b>=c.config.aggregatedResultLimit)){var f;a.key&&(f=a.key.split("#"));f&&1<f.length&&g.results.push({text:f[0],value:f[1]})}})):(g.total=b.hits.total,g.results=c.createSuggestionsEntity(b.hits.hits,a,"_source",
!0)));return g};c.parseSearchResultsForMyModel=function(b,a,g){var d={};d.results=c.createSuggestionsEntity(b.data,a,g,!1);return d};c.autoPrefilled=function(){var b=c.getCurrentQueryType();if(b===c.config.qType.autocomplete){var a={};a[b]={};var g=e.state(c.config.myModelPageStateKey);g.myModels&&g.popularModels&&(a[b].myModels=c.parseSearchResultsForMyModel(g.myModels),a[b].popularModels=c.parseSearchResultsForMyModel(g.popularModels),g=c.getSuggestionsAttributes(b,!0),m.updateSuggestions(a,b,g,
""))}};c.matchOrder=function(b,a,g,d,e){var h="",m=[],l={},q="";"undefined"!==typeof g&&(m=g.toLowerCase().split(/[ -]+/));for(var n=c.config.entitySequence,r=0;r<n.length;r++){var B=n[r],x="",x="undefined"!==typeof d?b[d][c.config.entities[B].value]:b[c.config.entities[B].value];""===x&&(q=B);l[B]=x.split(/[ -]+/)}B=0;for(x=!1;B<m.length;){x=!1;for(r=0;r<n.length;r++){for(var D=l[n[r]],u=!1,C=0;C<D.length;C++)if(c.isPrefix(D[C],m[B])){for(var v=B,G=C;v<m.length&&G<D.length&&c.isPrefix(D[G],m[v]);)v++,
G++;if(v===m.length||G===D.length){""===h&&(h=n[r]);B=v;u=!0;break}}if(!0===u){x=!0;break}}if(!1===x)break}if(!e)return"undefined"===typeof g||x?c.constructSuggestionText(b,a.brand,d):{text:"",value:""};""===h&&(h=""!==q?q:"model");return c.constructSuggestionText(b,a[h],d)};c.constructSuggestionText=function(b,a,d){var h="",k="";e.$.each(a,function(a,f){h="undefined"!==typeof d?h+(b[d][c.config.entities[f].text]+" "):h+(b[c.config.entities[f].text]+" ")});var m=!1;e.$.each(c.config.entitySequence,
function(a,f){"undefined"!==typeof d?(k+=b[d][c.config.entities[f].text]+"^"+b[d][c.config.entities[f].value]+"#",c.checkFieldValueMismatch(b[d][c.config.entities[f].text],b[d][c.config.entities[f].value])&&(m=!0)):(k+=b[c.config.entities[f].text]+"^"+b[c.config.entities[f].value]+"#",c.checkFieldValueMismatch(b[c.config.entities[f].text],b[c.config.entities[f].value])&&(m=!0))});m&&c.metricsLogger.emitMetrics(c.config.metricsPrefix,"FieldValueCaseMismatch");return{text:h,value:k}};c.checkFieldValueMismatch=
function(b,a){return b.toLowerCase()===a.toLowerCase()&&b!==a?!0:!1};c.isPrefix=function(b,a){return b.length<a.length?!1:b.toLowerCase().substring(0,a.length)===a};c.updateEntityContext=function(b,a){b&&(c.entityContext.prevSearchQuery=a,e.$.each(b,function(b,a){a&&a.results&&(c.entityContext[b]=a.total)}))};c.searchResultsHandler=function(b,a,d){c.updateEntityContext(b,d);var e="";b[a]&&"undefined"!==typeof b[a].results&&0>=b[a].results.length&&!c.config.partSearch&&!c.myModelDataExists(b[a],"results")?
(a!==c.config.qType.autocomplete&&c.metricsLogger.emitMetrics(c.config.metricsPrefix,"EntityNotFound",{qType:a,q:d}),c.config.pageType!==c.DETAIL_PAGE_TYPE?c.partVerification(d,a):(e=c.config.strings.no_model_match,d=c.getSuggestionsAttributes(a,!1),m.updateSuggestions(b,a,d,e),c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"LookForWholegoodsAttemptFail"))):(d=c.getSuggestionsAttributes(a,!1),c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"LookForWholegoodsAttemptSucceed"),
m.updateSuggestions(b,a,d,e))};c.partVerification=function(b,a){if(null!==b){var d={};b=e.$.trim(b);e.state(c.config.entityFiltersPageStateKey);d.input=b;d.qType=c.config.qType.partVerification;c.config.scope&&(d.scope=c.config.scope);var h="";c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"DataQueryAjaxCall");e.$.ajax(c.config.queryUrl,{type:"GET",contentType:"application/json",data:e.$.param(d,!1),dataType:"json",success:function(d){var g=c.getSuggestionsAttributes(a,!1);d&&d.hits&&
0<d.hits.total?(g.isPartNumber=1,g.partNumber=b,h=c.config.strings.no_model_match_part,c.metricsLogger.emitMetrics(c.config.metricsPrefix,"PartNumberFound",{"partNumber:":b}),c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"LookForWholegoodsAttemptSuccess")):(c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"LookForWholegoodsAttemptFail"),h=c.config.strings.no_model_match);m.updateSuggestions(d,a,g,h);c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"DataQueryAjaxCallSucceed")},
error:function(){c.metricsLogger.emitMetrics(c.config.metricsPrefix,"SearchCallFailed",d);c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"DataQueryAjaxCallFail");h=c.config.strings.no_model_match;var b=c.getSuggestionsAttributes(a,!1);m.updateSuggestions({},a,b,h)}})}};c.checkFitment=function(){var b=e.state(c.config.entityFiltersPageStateKey),a=b.brand?b.brand.value:"",d=b.model?b.model.value:"",h=b.series?b.series.value:"",k=1,m=c.config.asin,t=c.config.scope,y={asin:m,modelBrand:a,
modelDisplayBrand:b.brand?b.brand.text:"",modelNumber:d,modelSeries:h};(b.modelType?b.modelType:"")===c.config.modelTypes.elasticSearchModels&&(k=0);c.metricsLogger.emitMetrics(c.config.metricsPrefix,"CheckFitment",y);c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"DataQueryAjaxCall");e.ajax(c.config.checkFitmentUrl,{method:"get",params:{brand:l.normalizeValue(a),model:l.normalizeModelField(d),series:l.normalizeModelField(h),scope:t,asin:m,savedModelSelected:k},success:function(b){b&&
1===b.success&&b.payload&&"yes"===b.payload.fitment_decision?(c.metricsLogger.emitMetrics(c.config.metricsPrefix,"FitmentRecordFound",y),e.state("rpp",{modelBrand:a,modelNumber:d,modelSeries:h,stripeState:c.config.state.resultsFound}),c.showFitsMessage()):(c.metricsLogger.emitMetrics(c.config.metricsPrefix,"NoFitmentRecordFound",y),e.state("rpp",{modelBrand:a,modelNumber:d,modelSeries:h,stripeState:c.config.state.noResults}),c.showNotFitsMessage());c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,
"DataQueryAjaxCallSucceed")},error:function(){c.metricsLogger.emitMetrics(c.config.metricsPrefix,"CheckFitmentError",y);c.metricsLogger.emitCSMCounterMetrics(c.config.metricsPrefix,"DataQueryAjaxCall");e.state("rpp",{modelBrand:a,modelNumber:d,modelSeries:h,stripeState:c.config.state.noResults});c.showNotFitsMessage()}})};c.updateFeedbackParams=function(){var b=e.state(c.config.entityFiltersPageStateKey),a=b.brand?b.brand.value:"",b=(b.model?b.model.value:"")+" "+(b.series?b.series.value:"");e.$("#hsx-rpp-feedback-model-series").attr("value",
b);e.$("#hsx-rpp-feedback-brand").attr("value",a)};c.getModelBrandDisplayValue=function(){var b="",a=e.state(c.config.entityFiltersPageStateKey);e.$.each(c.config.entitySequence,function(c,d){a[d]&&(b+=a[d].text+" ")});return""!==b?b.slice(0,-1):b};c.getSuggestionsAttributes=function(b,a){var d="",e="";b===c.config.qType.autocomplete?(d=c.config.qType.autocomplete,e=c.config.strings.model):b===c.config.qType.part&&(d="searchPart");return{action:d,title:e,partSearch:c.config.partSearch,isAutoPrefilled:a,
myModelTitle:{myModels:c.config.strings.my_model,popularModels:c.config.strings.popular_model}}};c.searchResultsErrorHandler=function(b,a,d){a=c.getSuggestionsAttributes(b,!1);m.updateSuggestions({},b,a,d)};c.resetStripe=function(){c.clear();c.config.pageType===c.DETAIL_PAGE_TYPE?c.showEnterModelMessage():c.submitForm()};c.clear=function(){c.config.pageType===c.DETAIL_PAGE_TYPE&&m.updateSuggestions({});e.$("#hsx-rpp-smartbox-txtModelNumber").val("");e.state.replace(c.config.entityFiltersPageStateKey,
{});c.entityContext={}};c.showEnterModelMessage=function(){c.currentState=c.config.state.enterModel;e.$("#hsx-rpp-fitsContainer").addClass("aok-hidden");e.$("#hsx-rpp-notfitsContainer").addClass("aok-hidden");e.$("#hsx-rpp-checkFitmentContainer").removeClass("aok-hidden")};c.updateEntityFilter=function(b,a,d,h){var k=e.state(c.config.entityFiltersPageStateKey);k&&(k[b]={text:a,value:d,source:h});e.state(c.config.entityFiltersPageStateKey,k);"brand"===b?e.state("rpp",{modelBrand:a}):"model"===b?e.state("rpp",
{modelNumber:a}):"series"===b&&e.state("rpp",{modelSeries:a})};c.getFiltersCount=function(){return l.getKeys(e.state(c.config.entityFiltersPageStateKey)).length};c.parseEntityFilterForQuery=function(){var b=e.state(c.config.entityFiltersPageStateKey),a={};b&&e.$.each(b,function(b,c){a[b]=c.value});return a};c.showFitsMessage=function(){c.currentState=c.config.state.resultsFound;var b=e.state(c.config.entityFiltersPageStateKey);e.$("#hsx-rpp-fitsContainer").removeClass("aok-hidden");e.$("#hsx-rpp-notfitsContainer").addClass("aok-hidden");
e.$("#hsx-rpp-checkFitmentContainer").addClass("aok-hidden");var a=c.getModelBrandDisplayValue();e.$("#hsx-rpp-fitsModelNumber").text(a);b=l.getEncodedParameterForSmartbox(b,c.config.stripe);a=e.state("rpp").rootBrowseNode;b="/s/ref="+c.config.showAllPartsForModelReftag+"?node="+a+"&rpp="+b;e.$("#hsx-rpp-smartbox-seeallparts").data("url",b)};c.showNotFitsMessage=function(){c.currentState=c.config.state.resultsFound;var b=e.state(c.config.entityFiltersPageStateKey);e.$("#hsx-rpp-fitsContainer").addClass("aok-hidden");
e.$("#hsx-rpp-notfitsContainer").removeClass("aok-hidden");e.$("#hsx-rpp-checkFitmentContainer").addClass("aok-hidden");var a=c.getModelBrandDisplayValue();e.$("#hsx-rpp-notfitsModelNumber").text(a);b=l.getEncodedParameterForSmartbox(b,c.config.stripe);a=e.state("rpp").rootBrowseNode;b="/s/ref="+c.config.showAllPartsForModelReftag+"?node="+a+"&rpp="+b;e.$("#hsx-rpp-smartbox-seeallparts").data("url",b)};return c});n.when("A","a-popover","ReplacementPartsStripeUtility","ready").register("SmartboxDisplayHandler",
function(e,a,q){var h={},l,d,c,m,b=-1,f=[];h.modelTypes={recentlySearchedModels:"myModels",popularModels:"popularModels",elasticSearchModels:"elasticSearchModels"};h.modelNumLimits={myModels:10,popularModels:10,elasticSearchModels:5};h.experienceEnhancePopoverClose=!1;h.initialize=function(b){l=e.$("#"+b);d=e.$("#hsx-rpp-smartbox-results-popover");c=d.find("#hsx-rpp-smartbox-suggestions");m=d.find("#hsx-rpp-smartbox-looking-for-more-items")};h.findPos=function(b){for(var a=b.offset(),c=0;b.length&&
!b.is("body");){var d=b.css("z-index");if((d=parseInt(d,99))||!isNaN(d))c=Math.max(d,c);b=b.offsetParent()}return{x:Math.ceil(a.left),y:Math.ceil(a.top),zIndex:c+10}};h.getSuggestions=function(b,a,c,d,m){for(var y=[],q=0,n=h.modelNumLimits[d],r=e.$.trim(l.val()),B=0;B<b.length&&q<n;B++){var x=b[B];if(x.text&&e.$.trim(x.text)){var D=x.text,x=x.value;if(-1===f.indexOf(x.toLowerCase())){f.push(x.toLowerCase());var u=h.highlightMatchingText(D.toLowerCase(),r.toLowerCase());c.isAutoPrefilled||d===h.modelTypes.recentlySearchedModels&&
(u+=m);var v=e.$("<li/>").addClass("a-size-base");c.isAutoPrefilled&&v.addClass("hsx-rpp-smartbox-list-suggestion-autoPrefilled-li");v.html(u);v.data({entity:a,id:x,action:c.action,modelType:d,modelInfo:D});v.hover(function(){e.$(this).addClass("hsx-rpp-smartbox-ac-hover")},function(){e.$(this).removeClass("hsx-rpp-smartbox-ac-hover")});y.push(v);q++}}}return y};h.getSuggestionsPopoverHeader=function(b){var a=e.$("<li/>").addClass("a-size-base hsx-rpp-smartbox-list-header");a.html("<span class='hsx-rpp-smartbox-list-header-text a-color-secondary'>"+
b+"</span>");return a};h.getSuggestionsLabel=function(b){return b="<span class='hsx-rpp-smartbox-autocomplete-lilabel a-color-secondary'>"+("<b>"+b+"<b/>")+"</span>"};h.updateSuggestions=function(b,a,k,l){if(b){c.removeClass("aok-hidden").html("");if(l){k&&k.isPartNumber&&(l=l.replace("[part]",'<b><a class="hsx-rpp-smartbox-part-search" id="hsx-rpp-smartbox-part-search">'+k.partNumber+"</a></b>"));l=e.$("<span />").attr({"class":"a-size-base a-color-base"}).html(l);var t=e.$("<div/>").addClass("a-spacing-top-mini a-padding-small");
t.append(l);c.append(t)}var y=e.$("<ul/>");f=[];k&&!k.partSearch&&(h.constructMyModelItems(y,b,a,k,h.modelTypes.recentlySearchedModels),h.constructMyModelItems(y,b,a,k,h.modelTypes.popularModels));a&&b[a]&&b[a].results&&0<b[a].results.length&&(y.data({entity:a,total:b[a].total}),l="",k.partSearch||(l=k.isAutoPrefilled?h.getSuggestionsPopoverHeader(k.myModelTitle[h.modelTypes.elasticSearchModels]):h.getSuggestionsLabel(k.myModelTitle[h.modelTypes.elasticSearchModels])),b=h.getSuggestions(b[a].results,
a,k,h.modelTypes.elasticSearchModels,l),"undefined"!==typeof b&&0<b.length&&(k.isAutoPrefilled&&y.append(l),e.$.each(b,function(b,a){y.append(a)}),c.append(y)));d.html()&&a?(h.updateresultsPopoverPosition(),d.removeClass("aok-hidden")):d.addClass("aok-hidden");m.addClass("aok-hidden")}};h.constructMyModelItems=function(b,a,d,f,m){if(d&&a[d]&&a[d][m]&&a[d][m].results&&0<a[d][m].results.length){var l="";f.isAutoPrefilled?(l=h.getSuggestionsPopoverHeader(f.myModelTitle[m]),b=e.$("<ul/>").addClass("hsx-rpp-smartbox-list-suggestion-autoPrefilled-ul")):
l=h.getSuggestionsLabel(f.myModelTitle[m]);a=h.getSuggestions(a[d][m].results,d,f,m,l);"undefined"!==typeof a&&0<a.length&&(f.isAutoPrefilled&&b.append(l),e.$.each(a,function(a,c){b.append(c)}),c.append(b))}};h.hideSuggestionBox=function(){d.addClass("aok-hidden");b=-1};h.isSuggestedBoxDisplayed=function(){return!d.hasClass("aok-hidden")};h.adjustTextboxPosition=function(){l.css({"padding-left":"58 px"})};h.highlightMatchingText=function(b,a){if(b&&a&&1<a.length){if(b.match(a))return b.replace(a,
"<b>"+a+"</b>");for(var c=b.split(/[ -]+/),d=[],f=0;f<c.length;f++)d.push(!1);for(var e=a.split(/[ -]+/),f=0;f<c.length;f++)for(var h=0;h<e.length;h++)if(c[f]===e[h]){c[f]=c[f].replace(e[h],"<b>"+e[h]+"</b>");d[f]=!0;break}for(f=0;f<c.length;f++)for(h=0;h<e.length;h++)if(c[f].startsWith(e[h])&&!1===d[f]){c[f]=c[f].replace(e[h],"<b>"+e[h]+"</b>");break}return c.join(" ")}return b};h.updateresultsPopoverPosition=function(){b=-1;var a=h.findPos(l),c=l.innerWidth(),f=l.outerHeight();d.css({width:parseInt(c,
10)+"px",top:a.y+f+"px",left:a.x+"px","z-index":a.zIndex,position:"absolute"})};h.toProperCase=function(b,a){a||(a=" ");for(var c=b.split(a),d=[],f=0;f<c.length;f++){var e=c[f].charAt(0).toUpperCase();d.push(e+c[f].slice(1))}return d.join(a)};h.moveSelect=function(a){if(h.isSuggestedBoxDisplayed()){var c=e.$("li",d);if(!(0>a&&0===b||0<a&&b===c.length-1)&&(-1<b&&b<c.length&&e.$(c[b]).removeClass("hsx-rpp-smartbox-ac-hover"),b+=a,c&&0<=b&&b<c.length)){var f=e.$(c[b]);f&&(f.data("id")?f.addClass("hsx-rpp-smartbox-ac-hover"):
(b+=a,0<=b&&b<c.length&&(f=e.$(c[b]),f.addClass("hsx-rpp-smartbox-ac-hover"))))}}};h.getHighlightedListItem=function(){if(h.isSuggestedBoxDisplayed()){var a=e.$("li",d);if(0<=b&&b<a.length)return e.$(a[b])}else return null};h.highlightEntity=function(b){b.addClass("hsx-rpp-smartbox-highlight-entity")};h.isEntityHighlighted=function(b){return b.hasClass("hsx-rpp-smartbox-highlight-entity")};h.updatePart=function(b){l.val(b);h.hideSuggestionBox()};h.showExperienceEnhancePopover=function(b,c,d){c="/gp/replacement-parts/ajax/smartbox-experience-enhance-popover.html?pageType="+
c+("&category="+d);a.create(b,{name:"rpp-smartbox-experienceEnhance-popover",url:c,width:"300",position:"triggerBottom"}).show();r.setTimeout(function(a){h.removeExperienceEnhancePopover(b);h.experienceEnhancePopoverClose=!0},1E4)};h.removeExperienceEnhancePopover=function(b){null!==a.get(b)&&"undefined"!==a.get(b)&&a.remove(b);e.$("#hsx-rpp-smartbox-txtModelNumber").focus(function(b){b.preventDefault()})};return h})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,f=c._namespace||c.attributeErrors,a=f?f("MiniSellerProfileAssets"):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,f){});
/* ******** */
