(function(h){var n=window.AmazonUIPageJS||window.P,t=n._namespace||n.attributeErrors,b=t?t("CustomerReviewsGalleryAssets"):n;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,n,t){h.when("A","load").register("review-image-asset-loader",function(b){var a=!1;b.ajax("/gp/customer-reviews/aj/private/reviewsGallery/get-image-gallery-assets",{method:"post",success:function(b){h.load.css(b.reviewsLightboxCSS);var d=document.createElement("script");d.type="text/javascript";
d.async=!0;d.setAttribute("crossorigin","anonymous");d.src=b.reviewsLightboxJS;document.getElementsByTagName("head")[0].appendChild(d);a=!0;h.register("review-image-assets-loaded",{})},error:function(){var a;a="/gp/customer-reviews/aj/metrics/log-values?noCache="+(new Date).getTime();a+="&SimpleStack:ReviewImageAssetLoaderFailure=1";n.Image&&((new Image).src=a)}});return{isLoaded:function(){return a}}});h.when("A","jQuery","cr-log-utils","review-image-assets-loaded").register("review-image-binder",
function(b,a,c){function d(b,d,g,l,n){if(!(b&&d&&g instanceof a&&l instanceof a&&n instanceof a))return c.logError("Invalid parameters for imageBinder.initializeEventHandlers with ASIN: "+b+", galleryName: "+d+", $popoverTrigger: "+g+", $thumbnails: "+l+", $galleryLink: "+n,"FATAL"),!1;var k="reviewsLightbox-ready-"+d;l.click(function(){f(b,d);var c=l.index(this);g.click();h.when(k).execute(function(){a("#"+d).trigger("jumpToImageAtIndex",c)})});n.click(function(){f(b,d);g.click();h.when(k).execute(function(){a("#"+
d).trigger("hideImmersiveView")})});return!0}function f(a,b){if(!a||!b)return c.logError("Invalid parameters for imageBinder.initializeImageGallery with ASIN: "+a+", galleryName: "+b,"FATAL"),!1;if(g)return!0;(new ReviewsLightbox(b,"DESKTOP")).initializeForAsin(a);return g=!0}var g=!1;h.when("reviewsLightbox-js").execute(function(){var b=a("#reviews-image-gallery-container"),c=b.attr("data-asin");0<b.length&&c&&d(c,"reviews-image-gallery",b.find(".a-popover-trigger"),b.find(".review-image-tile"),
b.find("#reviews-image-gallery-link"))});return{bindReview:function(b,c,d){var f=new ReviewGallery(d,"DESKTOP");f.initializeForReview(b);var g=a("#"+c);g.find(".review-image-tile").each(function(b){a(this).click(function(){g.find(".a-popover-trigger").click();h.when("reviewsLightbox-ready-"+d).execute(function(){f.render();f.showImageAtIndex(b)})})})},initializeImageGallery:f,initializeEventHandlers:d}});h.when("A","jQuery","cr-video-model","cr-video-view","reviews-constants").register("cr-video-controller",
function(b,a,c,d,f){function g(){b.each(a(".review-views .review"),function(a,b){if(a&&a.id){var f=c.getEmbedInfo(a.id);f&&d.embedVideo(f)}})}b.on(f.events.RELOAD_COMPLETE,function(){g()});g();return{initAll:g}});h.when("jQuery").register("cr-video-model",function(b){return{getEmbedInfo:function(a){var c="video-block-"+a,d=b("#"+a+" .video-url").val(),f=b("#"+a+" .video-slate-img-url").val(),g=b("#cr-video-swf-url").val();return a&&d&&g?{videoDomId:c,videoUrl:d,videoSlateImgUrl:f,videoSwfUrl:g}:
!1}}});h.when("jQuery","afterLoad").register("cr-video-view",function(b){h.now("Airy").execute(function(a){var c=b("#cr-airy-js-source-url").val(),d=b("#cr-airy-css-source-url").val();a||"string"!==typeof c||"string"!==typeof d||(h.load.js(c),h.load.css(d))});return{embedVideo:function(a){h.when("Airy").execute(function(b){b.embed({parentId:a.videoDomId,streamingUrls:[a.videoUrl],slateImages:{preloadSlate:a.videoSlateImgUrl},swfUrl:a.videoSwfUrl,desiredMode:"html"})})}}})});