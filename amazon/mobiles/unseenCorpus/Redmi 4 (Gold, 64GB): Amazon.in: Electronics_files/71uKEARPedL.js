(function(x,A,B){x.execute(function(){x.when("A","jQuery","dp-js-logger","dp-ajax-prefetch-metrics").register("dp-ajax-prefetch",function(u,q,a,b){function l(a,e,m,c,h,f){this.scope=a;this.uniqueId=e;this.url=m;this.options=c;this.context=h;this.status=0;this.selected=!1;this.error=this.successData=this.xhr=this._status=B;this.chunks=[];this.doNotAbort=f||!1;this.prefetchMetrics=b.getInstance(this.scope)}var f=new a("dpAjaxPrefetch");l.prototype._callback=function(a,e,b,c,h){"function"===typeof a&&
a.call(self,e,b,c,h)};l.prototype._canAbort=function(){return!this.doNotAbort&&1===this.status};l.prototype._isAborted=function(){return 3===this.status};l.prototype._getUniqueId=function(){return this.uniqueId};l.prototype._abort=function(){if(1===this.status)try{this.ajaxRequestRefence.abort(),this.status=3}catch(a){f.logFatal(a,{message:" Could not abort ajax request."})}};l.prototype._flushChunkData=function(){var a=this;a.chunks.length&&q.map(a.chunks,function(e){a._callback(a.options.chunk,
e,a.context)})};l.prototype._request=function(){var a=this;a.ajaxRequestRefence=u.get(a.url,{params:a.options.params,success:function(e,b,c){a.status=4;a.successData=e;a._status=b;a.xhr=c;a.selected&&a._callback(a.options.success,e,b,c,a.context)},error:function(e,b,c){a.status=2;a.xhr=e;a._status=b;a.error=c;a.selected&&a._callback(a.options.error,e,b,c,a.context)},abort:function(e){a.status=3;a.xhr=e;a.selected&&a._callback(a.options.abort,e,a.context)},chunk:function(e){e&&(a.chunks.push(e),a.selected&&
a._callback(a.options.chunk,e,a.context))},timeout:a.options.timeout||4E4})};l.prototype.prefetchContent=function(){this.prefetchMetrics.predicted(this.uniqueId);0===this.status&&(this.status=1,this._request())};l.prototype.getContent=function(a){a&&this.prefetchMetrics.selected(this.uniqueId);l._abortPrefetchesExcept(this);this.selected=!0;0===this.status?(this.status=1,this._request()):1===this.status?this._flushChunkData():4===this.status&&(this._flushChunkData(),this._callback(this.options.success,
this.successData,this._status,this.xhr,this.context),u.trigger("a:pageUpdate"))};l._objects={};l._abortPrefetchesExcept=function(a){q.each(l._objects[a.scope],function(e,b){b._canAbort()&&e!==a._getUniqueId()&&b._abort()})};l.getInstance=function(a,e,b,c,h,f){if(!a||!e||!b||"object"!==typeof c)throw"Incorrect parameter passed.";l._objects[a]=l._objects[a]||{};var p=l._objects[a][e];p&&p._isAborted()&&(delete l._objects[a][e],p=B);p||(l._objects[a][e]=new l(a,e,b,c,h,f,this));return l._objects[a][e]};
return l});x.when("A","jQuery","dp-ajax-prefetch","twister-utils","dp-js-logger").register("dimensional-summary-module",function(u,q,a,b,l){var f=new l("dpDimensionalSummary");return function(a){function e(a){t.initData.fnToDetermineSelectedVariations?"function"===typeof t.initData.fnToDetermineSelectedVariations&&(t.currentDimCombOnGlance=t.initData.fnToDetermineSelectedVariations.call(t)):(t.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,t.currentDimCombOnGlance=
DetailPage.StateController.getState().currentDimCombID);return a?t.currentDimCombOnGlance.split("_"):t.currentDimCombOnGlance}function m(a,c){for(var e="",d,k,g=0,h=a.length;g<h;g++)e=e+(0<g?",":"")+a[g];var m=p.extend(m,b.getQueryParams({psc:1})),m=p.extend(m,{parentAsin:DetailPage.StateController.getState().parent_asin,productGroupId:DetailPage.StateController.getState().productGroupID});t.initData.globalAjaxParameters&&(m=p.extend(m,t.initData.globalAjaxParameters));m&&(k=p.param(m));e&&(d=!Twister.multiDimensionWeblabEnabled||
"dropdown"!==c.dimType.toLowerCase()&&"swatch"!==c.dimType.toLowerCase()?c.dimType:"Dropdown",d="/gp/twister/dimension?asinList="+e+"&isDimensionSlotsAjax=1&dimSubType="+c.dimSubType+"&dimType="+d+(k?"&"+k:""));return d}function c(a){for(var c,e=0,d=a.length;e<d;e++)c=c+(0<e?",":"")+a[e];return c}function h(a,e,g){c(a);a=m(a,g);var d={};g.params&&(d.params=g.params);d.chunk=function(k,d){var a;(a=(a=(a=(a=k&&"JSON"==k.Type)&&typeof("undefined"!==k.Value))&&typeof("undefined"!==k.Value.content))&&
typeof("undefined"!==k.Value.content.twisterSlotDiv))?(g.executeChunk===B?g.chunk(k,d):g.executeChunk()&&g.chunk(k,d),t.asinDimSumCache[k.ASIN]=k):f.logFatal("The received data does not contain required properties.",{message:"[Twister]Invalid data received."})};d.success=function(k,d,a,c){g.success&&b.typeChecker.isFunction(g.success)&&g.success(k,d,a,c)};d.error=function(k,d,a){g.error&&b.typeChecker.isFunction(g.error)&&g.error(k,d,a)};d.abort=function(k){g.abort&&b.typeChecker.isFunction(g.abort)&&
g.abort(k)};d.timeout=6E4;u.get(a,{success:function(k,a,c){d.success(k,a,c,e)},chunk:function(k){d.chunk(k,e)},error:function(k,a,c){d.error(k,a,c)},abort:function(k){d.abort(k)}})}var t=this,p=u.$;t.initData=a;t.scopePrefix="dpDimSum";t.symbolForTriggeringDim="*";t.uniqueID="";t.urlPrefix="";t.asinDataCache={};t.glanceViewSelectedDims="";t.currentDimCombOnGlance="";t.mapOfDimToAsinMaps={};t.mapOfAsinToDimMaps={};t.asinDimSumCache={};t.scope=t.scopePrefix+"_"+t.initData.scopeSuffix;t.dimensionsList=
t.initData.dimensionsList;t.dimensionValuesList=t.initData.dimensionValuesList;t.dimensionCombinationToASINMap=t.initData.dimensionCombinationToASINMap;e();t.fetchDimSumData=function(a){if(a.dimTriggeringDimSum&&b.typeChecker.isString(a.dimTriggeringDimSum))var c=a.dimTriggeringDimSum;else throw"Wrong parameter passes to DimSumModule "+t.scope;var g=u.indexOfArray(t.dimensionsList,c);if(a){if(!a.asinList||!b.typeChecker.isArray(a.asinList))throw"Wrong parameter passed to DimSumModule "+t.scope;if(!a.chunk||
!b.typeChecker.isFunction(a.chunk))throw"Wrong parameter passed to DimSumModule "+t.scope;}else throw error("No options for dimSum");c={dimIndexTriggeringDimSum:g};c.dimCombOnPage=e();var d=e(!0).slice(0);d[g]=t.symbolForTriggeringDim;g=d.join("_");c.hashKey=g;for(var k=a.asinList,g=[],d=[],v=0,m=k.length;v<m;v++){var f=k[v];f&&(t.asinDimSumCache&&t.asinDimSumCache[f]?d.push(f):g.push(f))}k=[];k.asinListForServer=g;k.asinListForCache=d;0<k.asinListForServer.length&&h(k.asinListForServer,c,a);if(0<
k.asinListForCache.length){g=k.asinListForCache;k=0;for(v=g.length;k<v;k++)d=g[k],a.chunk(t.asinDimSumCache[d],c);g.length===a.asinList.length&&a.success(B,B,B,c)}}}});x.when("A","twister-string-constants").register("twister-modal-resize-helper",function(u,q){return function(){function a(a,e){a.each(function(a,c){var g=f(c);-1==c.className.indexOf(e)&&(g.outerWidth()>b.width&&(b.width=g.outerWidth()),g.outerHeight()>b.height&&(b.height=g.outerHeight()))});return b}var b={width:0,height:0},l=this,
f=u.$;l.getGlanceSwatchesInRow=function(a,e){e&&e.fixModalSwatchesForThinWidths();var b=f("#twister_feature_div "+a),c=0,h=0;0<b.length&&(h=b.get(0).getBoundingClientRect().top,c++);for(var t=1,p=b.length;t<p;t++){var n=b.get(t).getBoundingClientRect();if(5<Math.abs(h-n.top))break;else c++}e&&e.resizeSwatchesForThinWidths();return c};l.fixSize=function(b,e,m,c,h){b.removeClass("twisterSwatchWrapper");var t=a(b,c),p=A.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(h!=
B){var n=h.twisterModalDiv.outerWidth(),w=l.getGlanceSwatchesInRow(e,h),r=b.first().width(),r=w*(t.width-r);0<r&&0<w&&(newModalWidth=n+r,h.setModalWidth(newModalWidth))}b.addClass("twisterSwatchWrapper");Twister.isIE8()?(b.each(function(d,k){f(k).css({"min-height":t.height+"px","min-width":t.width+"px"})}),1100<p&&f("."+c).css({height:t.height+"px"})):f("#"+m).html(e+" { min-height:"+t.height+"px; min-width:"+t.width+"px; } ."+c+" { height: "+t.height+"px;}");l.resetBestSize()};l.resetBestSize=function(){b=
{width:0,height:0}}}});x.when("A").register("evdd-utils",function(u){return function(){this.PopulateEVDD=function(q,a,b,l){var f={},g,e;for(g in q)e=b[g],"undefined"!=typeof e&&(masterDimValIndex=e[0],slaveDimValIndex=e[1],l==masterDimValIndex&&(f[slaveDimValIndex]=q[g]));"function"===typeof a.dimensionViewHandlersMap[1].updateViewWithPriceInfo&&a.dimensionViewHandlersMap[1].updateViewWithPriceInfo(f)}}});x.when("A").register("scroll-event-handler",function(u){return function(q,a,b){if(a){var l=u.$,
f,g=(new Date).getTime();l(a).bind("scroll",function(a){var m=Date.now();f&&m-g<q&&clearTimeout(f);g=m;f=setTimeout(function(){b(a)},q)})}}});x.when("A").register("twister-data-translator",function(u){function q(b){var l=[],f=b.selected_variation_values;a.each(b.dimensions,function(a,e){f.hasOwnProperty(e)&&l.push({dimKey:e,val:f[e]})});return l}var a=u.$;return{getTranslatedData:function(a){var l={},f={},g=a.deviceType,e=a.ajaxTimeout;f.ajaxUrlParams=a.ajaxUrlParams;f.deviceType=g;f.ajaxTimeout=
e;l.config=f;var f={},g=a.dimToAsinMapData,m;for(m in g)if(g.hasOwnProperty(m)){var e=g[m],c=m.split("_").join(":");f[c]=e}l.dimCombinations=f;l.dimensionDisplayText=a.variationDisplayLabels;m=[];f=a.dimensions;g=a.dimensionSelectionData;e=a.variation_values;for(c=0;c<f.length;c++){var h={},t=f[c];h.dimKey=t;h.isRequired=g[c].isRequired?!0:!1;h.size=e[t].length;m.push(h)}l.dimensionInfo=m;l.dimensionList=a.dimensions;l.dimtoValueMap=a.variation_values;l.initDimCombination=q(a);return l}}});x.when("A").register("twister-availabilty-cache",
function(u){return function(q,a){function b(a,e){var m=a+":"+e,c=a.split("_"),h=c.length,t=-1,p,n;if(null!==f.asinToRenderCache[m]&&f.asinToRenderCache[m]!==B)return f.asinToRenderCache[m];f.intermediateAsinToRenderCache[m]=!0;for(m=0;m<h;m++)if("X"===c[m]){t=m;break}if(-1===t)return p=null,null!=f.twisterVariationsData.dimToAsinMapData[a]&&(p=f.twisterVariationsData.dimToAsinMapData[a]),p;for(var h=f.twisterVariationsData.dimensionValuesData[t].length,w=0;w<h&&(c[t]=w,m=c.join("_"),n=m+":"+e,f.intermediateAsinToRenderCache.hasOwnProperty(n)||
(p=b(m,e),null===p||p===B));w++);return p}function l(a){for(var e in f.intermediateAsinToRenderCache)f.asinToRenderCache[e]=a,delete f.intermediateAsinToRenderCache[e];f.intermediateAsinToRenderCache={}}var f=this;f.twisterVariationsData=q;f.dimensionHierarchyData=a.dimensionHierarchyData;f.isHierarchicalPivoting=a.hierarchicalPivoting;f.dimAvailabilityCache={};f.asinToRenderCache={};f.intermediateAsinToRenderCache={};f.isUpdateCacheReq=!1;f.isDimCombinationAvailable=function(a){var e=a.split("_"),
b,c=-1,h,t;b=e.length;if(null!==f.dimAvailabilityCache[a]&&f.dimAvailabilityCache[a]!==B)return f.dimAvailabilityCache[a];for(t=0;t<b;t++)if("X"===e[t]){c=t;break}if(-1===c)return h=!1,null!==f.twisterVariationsData.dimToAsinMapData[a]&&f.twisterVariationsData.dimToAsinMapData[a]!==B&&(h=!0),f.dimAvailabilityCache[a]=h;b=f.twisterVariationsData.dimensionValuesData[c].length;for(var p=0;p<b&&(e[c]=p,t=e.join("_"),null!==f.dimAvailabilityCache[t]&&f.dimAvailabilityCache[t]!==B?h=f.dimAvailabilityCache[t]:
(h=f.isDimCombinationAvailable(t),f.dimAvailabilityCache[t]=h),!h);p++);return f.dimAvailabilityCache[a]=h};f.gAsinToRender=function(a,e){var m=null,c,h,t=a.split("_"),p=t.length,n=a+":"+e;if(null!==f.asinToRenderCache[n]&&f.asinToRenderCache[n]!==B)return f.isUpdateCacheReq&&(l(f.asinToRenderCache[n]),f.isUpdateCacheReq=!1),f.asinToRenderCache[n];f.isUpdateCacheReq||(f.isUpdateCacheReq=!0);f.intermediateAsinToRenderCache.hasOwnProperty(n)||(m=b(a,e));if(null!==m&&m!==B)return f.isUpdateCacheReq&&
("X"===t[e]?(f.asinToRenderCache[n]=m,f.intermediateAsinToRenderCache={}):l(m),f.isUpdateCacheReq=!1),m;for(n=0;n<p;n++)if(c=f.isHierarchicalPivoting&&f.dimensionHierarchyData&&f.dimensionHierarchyData[n]<f.dimensionHierarchyData[e],n!=e&&"X"!=t[n]&&!c&&(m=t[n],t[n]="X",c=t.join("_"),h=c+":"+e,t[n]=m,!f.intermediateAsinToRenderCache.hasOwnProperty(h)&&(m=b(c,e),null!==m&&m!==B)))return f.isUpdateCacheReq&&(l(m),f.isUpdateCacheReq=!1),m;m=-1;for(n=0;n<p;n++)if(c=f.isHierarchicalPivoting&&f.dimensionHierarchyData&&
f.dimensionHierarchyData[n]<f.dimensionHierarchyData[e],"X"!==t[n]&&n!==e&&!c){m=n;break}if(-1===m)return"";t[m]="X";c=t.join("_");return f.gAsinToRender(c,e)}}});x.when("A","twister-string-constants").register("twister-utils",function(u,q){var a=u.$,b=this,l={};b.windowWidth=A.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;b.immersiveTwisterOverlay=a("#"+q.TWISTER_FEATURE_DIV_ID+" #"+q.IMMERSIVE_TWISTER_OVERLAY);b.twisterFeatureDiv=a("#"+q.TWISTER_FEATURE_DIV_ID);(function(){for(var a=
"Array Object String Date RegExp Function Boolean Number Null Undefined".split(" "),b=0,e=a.length;b<e;b++)l["is"+a[b]]=function(a){return function(c){return Object.prototype.toString.call(c).slice(8,-1)===a}}(a[b])})();return{enableTwisterDiv:function(){b.immersiveTwisterOverlay.css({opacity:"0",position:"absolute",width:"0px",height:"0px"})},disableTwisterDiv:function(){var a=b.twisterFeatureDiv.get(0).clientWidth,g=b.twisterFeatureDiv.get(0).clientHeight;b.immersiveTwisterOverlay.css({opacity:"0.8",
position:"absolute",width:a,height:g,"background-color":"white","z-index":10})},isSwatchSelected:function(a,b){var e=Twister.isImmersiveExperience?"."+q.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[q.STRING_DIM_INDEX]]+"_"+a[q.STRING_DIM_VALUE_INDEX]:"#"+b.dimensionsMap[a[q.STRING_DIM_INDEX]]+"_"+a[q.STRING_DIM_VALUE_INDEX],m=[],c;if(u.$(e).is("li")){m=u.$(e);!Twister.isImmersiveExperience||0<m.length||(m=u.$("."+q.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[q.STRING_DIM_INDEX]]+"_"+a[q.STRING_DIM_VALUE_INDEX]));
for(var m=m.get(0).className.split(" "),e=0,h=m.length;e<h;e++){var t=m[e];if(0===t.indexOf("swatch")){c=t;break}}c!==q.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER&&c!==q.CLASS_FOR_SWATCH_UNAVAILABLE||u.$("#twisterPopover.twisterPopoverSkin").hide();return c===q.CLASS_FOR_SWATCH_SELECT}return!1},isPartialState:function(a){for(var b=DetailPage.StateController.getState().currentDimCombID.split("_"),e=!1,m=0;m<a;m++)if("X"===b[m]){e=!0;break}return e},getProductizedTwisterSelectionFromDivMetaData:function(a,
b){for(var e=[],m=a.dimIndex,c=a.dimValueIndex,h=0;h<b.length;h++)if(m===parseInt(h,10)){m={};m.dimKey=b[h];m.val=parseInt(c,10);e.push(m);break}return e},getProductizedTwisterSelectionFromDimComb:function(a,b){for(var e=[],m=a.replace(/X/g,"-1").split("_"),c=0;c<b.length;c++){var h={},t=m[c];h.dimKey=b[c];h.val=parseInt(t,10);e.push(h)}return e},getImmersivePartialStateBannerContent:function(a,b){for(var e="",m=Twister.immersivePartialStateMessage,c=a.dimensionSelectionData,h=a.dimensionsDisplay,
t=0;t<c.length;t++)t!==b&&0===c[t][q.STRING_IS_SELECTED]&&(e=e?e+", "+h[t]:h[t]);return m.replace("dimName",e)},getImmersiveFullStateBannerContent:function(a,b){for(var e="",m=Twister.immersiveFullySelectedStateMessage,c=a.dimensionSelectionData,h=a.dimensions,t=a.dimensionsDisplay,p=DetailPage.StateController.getState().selected_variations,n=0;n<c.length;n++)n!==b&&1===c[n][q.STRING_IS_SELECTED]&&(e=e?e+", "+t[n]+" "+p[h[n]]:t[n]+" "+p[h[n]]);return m.replace("dimName",e)},isSmallerWidthScreen:function(){return 1100>
b.windowWidth?1:0},getAttachedClass:function(b,g){var e=b[q.STRING_DIM_VALUE_INDEX],m="#"+g+"_"+e;if(u.$(m).is("li")){var c=[],h,c=u.$(m);!Twister.isImmersiveExperience||0<c.length||(c=a("."+q.TWISTER_SWATCH_CLASS_PREFIX+g+"_"+e));c=c.get(0).className.split(" ");e=0;for(m=c.length;e<m;e++){var t=c[e];if(0===t.indexOf("swatch")){h=t;break}}return h}m=Twister.isImmersiveExperience?q.IMMERSIVE_DROPDOWN_ROW_PREFIX+g+"_"+e:q.NATIVE_DROPDOWN_DIV_PREFIX+g+"_"+e;return u.$(m).attr("class")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,
'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},getDimStyleData:function(a,b,e,m,c){a=a.split("_");for(var h=[],t=a.slice(0),p,n,w=0;w<b;w++)n={},a[e]===w.toString()?p=q.STYLE_CLASS_TYPE_FOR_SELECTED:(t[e]=w,p=t.join("_"),p=(p=m.isDimCombinationAvailable(p))?q.STYLE_CLASS_TYPE_FOR_AVAILABLE:q.STYLE_CLASS_TYPE_FOR_INAVLID),p=c[p],n.style=p,h[w]=n;return h},getVisibleTableRows:function(b,g){var e=[],m=b.getBoundingClientRect();g||(g=a(b).find("tr"));if(g.length)for(var c=
0;c<g.length;c++){var h=g.get(c),t=h.getBoundingClientRect(),p=(t.bottom-t.top)/2,n=m.bottom+p;m.top-p<t.top&&n>t.bottom&&e.push(h);if(m.bottom<t.top)break}return e},reconstructCombinationWithDimValue:function(a,b,e){if(!a)return a;var m=a.split(q.CHAR_UNDERSCORE);if(b>=m.length)return a;m[b]=e;return m.join(q.CHAR_UNDERSCORE)},isTouchDevice:function(){return u.capabilities.touch},typeChecker:l,getQueryParams:function(b){b=b===B?{}:b;var g={},e=decodeURIComponent(A.location.href).match(/^.*?\?(.*?)(#.*)?$/);
if(null===e||2>e.length||e[1]===B)return{};e=e[1].split("&");a.each(e,function(a,c){var e=c.split("=");2>e.length||b.hasOwnProperty(e[0])||(g[e[0]]=e[1])});return g},stringTrim:function(a){var b=/^\s+/,e=/\s+$/;return String.prototype.trim?String.prototype.trim.call(a):a.replace(b,"").replace(e,"")}}});x.when("A").register("aui-style-override",function(u){return{doOverride:function(){},ingressOverride:function(){}}});x.when("A").register("twister-thumbnailModule",function(u){var q=u.$;return{attach:function(a){var b=
q("#dropdown_selected_thumbnail_"+a);a=q("#dropdown_selected_"+a+" .a-button-inner");0<b.length&&0<a.length&&(b.detach(),a.append(b),"#"!==b.attr("src")&&b.show())},update:function(a){var b=q("#native_dropdown_selected_"+a).val().split(",")[0];"undefined"!==typeof b&&"-1"!==b&&(b=q("#native_"+a+"_"+b),b=0<b.length?b.attr("data-a-image-source"):"",a=q("#dropdown_selected_thumbnail_"+a),0<a.length&&""!==b?(a.attr("src",b),a.show()):a.hide())},preloadAllThumbnails:function(a){if(a){var b=q("#native_dropdown_selected_"+
a+" option");a=q("#dropdown_selected_"+a).attr("data-a-class");b&&a&&-1!==a.indexOf("twister-image-dropdown")&&q.each(b,function(a,b){var g=b.getAttribute("data-a-image-source");g&&((new Image).src=g)})}}}});x.when("A","twister-string-constants","scroll-event-handler").execute(function(u,q,a){(function(b){function l(a){function h(e,n){var d=b(n).get(0).getBoundingClientRect(),k=a.$window.get(0).getBoundingClientRect(),g=k.right-k.left,h=k.bottom-k.top;return k.top<d.top&&d.top<k.top+h&&k.left<d.left&&
d.left<k.left+g}e=!1;for(var m=0,f=a.selector.length;m<f;m++){var n=[];a.blockIsAppear!==B&&a.blockIsAppear()||(n=b(a.selector[m]).filter(function(){return b(this).is(h)}).not(g));0<n.length&&(u.trigger(a.eventToBeTriggered,[n.clone()]),g=g.add(n))}}var f=[],g=b(),e=!1,m={interval:250,force_process:!1};b.fn.extend({appearedInTwisterImmersiveView:function(c){var g=b.extend({},m,c||{}),t=this.selector||this;g.selector=[];g.selector[0]=t;var p=function(){e||(e=!0,setTimeout(function(){l(g)},g.interval))};
new a(200,c.$scrollHandlerDiv,p);c.$window.resize(p);g.force_process&&setTimeout(function(){l(g)},g.interval);f.push(t);return b(t)},forceAppear:function(a){var e=b.extend({},m,a||{});a=this.selector||this;e.selector=[];e.selector[0]=a;setTimeout(function(){l(e)},e.interval)},invalidateAppearedAlreadyCache:function(a){g=g.not(this.selector)}})})(u.$)});x.when("A").register("accessibility-helper",function(u){return{announceText:function(){}}});x.when("A").register("twister-expander",function(u){return function(q){function a(){"function"===
typeof d.synchronousPreCollapseCallback&&d.synchronousPreCollapseCallback();d.logger.logImpression(d.logger.eventTypes.COLLAPSE_BUTTON_CLICK,r);d.expanderSection.height();d.expanderSection.animate({height:d.minHeightForExpandedSection},{duration:d.scrollAnimationDuration,queue:!1,complete:function(){d.expanderSection.css("overflow-y","hidden");d.expanderSection.css("overflow","hidden");d.expanderHidesVariation&&!d.expanderButtonPostCollapse||d.expanderButton.removeClass("aok-hidden");"function"===
typeof d.synchronousPostCollapseCallback&&d.synchronousPostCollapseCallback()}});d.expanderSection.animate({scrollTop:0},{duration:d.scrollAnimationDuration,queue:!1});e.isCollapsed=!0;d.expanderHidesVariation?l():d.collapseButton.addClass("aok-hidden");e.handleVariationSwap()}function b(){n.hasClass("aok-hidden")&&(n.removeClass("aok-hidden"),d.expanderButton.prev().insertAfter(h))}function l(){e.isCollapsed?(d.collapseButton.addClass("aok-hidden"),d.expanderHidesVariation&&p.addClass("aok-hidden"),
d.expanderButtonPostCollapse||d.expanderButton.removeClass("aok-hidden")):(d.expanderButton.addClass("aok-hidden"),p.removeClass("aok-hidden"),d.collapseButton.removeClass("aok-hidden"))}function f(){w.bind("click",function(k){d.expanderButton[0].id==k.currentTarget.id||e.isCollapsed||a()})}var g=u.$,e=this,m,c,h,t,p,n,w=g(".expanderButton"),r,d={minHeightForExpandedSection:50,maxHeightForExpandedSection:100,maxHeightForExpandedSectionInView:null,scrollAnimationDuration:500,expanderSection:null,useExpanderScrollView:!0,
minAsinsForExpandedView:null,expanderButtonReplacementIndex:null,dimValuePrefix:null,initSelectedID:null,swatchImageSize:null,swatchImageMargin:null,expanderButton:null,collapseButton:null,expanderHidesVariation:!0,expanderButtonPostCollapse:!1,synchronousPreExpanderCallback:null,synchronousPostExpanderCallback:null,synchronousPreCollapseCallback:null,synchronousPostCollapseCallback:null,dimDisplayType:null,logger:null,dimOrder:null};e.handleExpand=function(){"function"===typeof d.synchronousPreExpanderCallback&&
d.synchronousPreExpanderCallback();d.logger.logImpression(d.logger.eventTypes.EXPAND_BUTTON_CLICK,r);var k=d.expanderSection.height();e.isCollapsed=!1;e.handleVariationSwap();d.expanderHidesVariation?l():d.expanderButton.addClass("aok-hidden");if(d.useExpanderScrollView)d.expanderSection.height(k).animate({height:d.maxHeightForExpandedSection},{duration:d.scrollAnimationDuration,queue:!1,complete:function(){d.expanderSection.css("overflow-y","auto");e.scrollVariationIntoView();d.expanderHidesVariation||
d.collapseButton.removeClass("aok-hidden");"function"===typeof d.synchronousPostExpanderCallback&&d.synchronousPostExpanderCallback()}});else{var a=d.expanderSection.css("height","auto").height();d.expanderSection.height(k).animate({height:a},{duration:d.scrollAnimationDuration,queue:!1,complete:function(){d.expanderHidesVariation||d.collapseButton.removeClass("aok-hidden");"function"===typeof d.synchronousPostExpanderCallback&&d.synchronousPostExpanderCallback()}})}};e.handleVariationSwap=function(k){e.isCollapsed&&
(m>=t||d.expanderHidesVariation&&n.hasClass("aok-hidden")&&c.is(n))?(k&&b(),k=n,m==t&&d.expanderHidesVariation?(p.removeClass("aok-hidden"),h=n):m==t+1&&d.expanderHidesVariation?(p.addClass("aok-hidden"),h=d.expanderButton):m==t-1&&d.expanderHidesVariation?(n.removeClass("aok-hidden"),k=p,h=g(d.dimValuePrefix+(m-1))):d.expanderHidesVariation?(p.addClass("aok-hidden"),h=g(d.dimValuePrefix+(m-1))):h=m==t?d.expanderButton:g(d.dimValuePrefix+(m-1)),c.insertBefore(d.expanderButton),k.addClass("aok-hidden")):
e.isCollapsed||b()};e.scrollVariationIntoView=function(){var k=c.offset().top,a=d.expanderSection.offset().top,e=d.expanderSection.scrollTop(),k=k-a,e=e+k;0>k?d.expanderSection.animate({scrollTop:e},{duration:d.scrollAnimationDuration,queue:!1}):k>d.maxHeightForExpandedSectionInView&&(e-=d.swatchImageSize+d.swatchImageMargin,d.expanderSection.animate({scrollTop:e},{duration:d.scrollAnimationDuration,queue:!1}))};e.updateSelectedVariation=function(k,a){null!=a&&(c=a);null!=k&&(m=k.split("_")[d.dimOrder])};
(function(){q&&g.extend(d,q);if(!d.collapseButton)throw"Expander collapseButton should not be null";if(!d.expanderButton)throw"Expander expanderButton should not be null";if(!d.expanderSection)throw"Expander expanderSection should not be null";if(!d.initSelectedID)throw"Expander initSelectedID should not be null";if(!d.minAsinsForExpandedView)throw"Expander minAsinsForExpandedView should not be null";if(!d.dimValuePrefix)throw"Expander dimValuePrefix should not be null";if(!d.swatchImageSize)throw"Expander swatchImageSize should not be null";
if(!d.swatchImageMargin)throw"Expander swatchImageMargin should not be null";if(!d.expanderButtonReplacementIndex)throw"Expander expanderButtonReplacementIndex should not be null";if(!d.dimDisplayType)throw"Expander dimDisplayType should not be null";if(!d.logger)throw"Expander Logger should not be null";d.dimOrder||(d.dimOrder=0);r={dimDisplayType:d.dimDisplayType};d.logger.logImpression(d.logger.eventTypes.EXPANDER,r);t=d.expanderButtonReplacementIndex;p=g(d.dimValuePrefix+t);n=g(d.dimValuePrefix+
(t-1));m=d.initSelectedID.split("_")[d.dimOrder];c=g(d.dimValuePrefix+d.initSelectedID.split("_")[d.dimOrder]);e.isCollapsed=!0;d.expanderButton.click(function(){e.handleExpand()});d.collapseButton.click(function(){a()});f();e.handleVariationSwap()})()}});x.when("A","twister-string-constants","migrated-views").register("view-util",function(u,q,a){function b(a){f.tvm=a.tvm;f.util=a.util}var l=u.$,f=this;b.isViewsEligibleForMigration=function(b){for(var e=!0,m=a.getMigratedViews(),c=0,h=b[q.INIT_DATA_DIMENSIONS_MAP].length;c<
h;c++){var f="undefined"!==typeof b[q.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP]?b[q.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][c]:B;if(!0===e&&f!==B)e=-1!=u.indexOfArray(m,f);else{e=!1;break}}return e};b.prototype={variationData:{getAsinToDimIndexMapData:function(){var a={},e=f.tvm.dimCombinations,b,c,h;for(b in e)e.hasOwnProperty(b)&&(h=b.split(q.CHAR_COLON),c=e[b],h=l.map(h,function(a){return parseInt(a)}),a[c]=h);return a},getDimToAsinMapData:function(){var a={},e=f.tvm.dimCombinations,b,c,h;for(b in e)e.hasOwnProperty(b)&&
(h=b.split(q.CHAR_COLON).join(q.CHAR_UNDERSCORE),c=e[b],a[h]=c);return a},getDimensionValuesData:function(){var a=[],e=f.tvm.dimtoValueMap;l.each(f.tvm.dimensionList,function(b,c){a.push(e[c])});return a},getDimensionValuesDisplay:function(){var a=this,e={},b=this.getAsinToDimIndexMapData();l.each(b,function(c,b){var m=[];l.each(b,function(c,e){var b=a.getDimValueByDimIndex(c,e);m.push(b)});e[c]=m});return e},getDimValueByDimIndex:function(a,e){var b=B,c=f.tvm.dimInfoMap,h=f.tvm.dimtoValueMap;l.each(c,
function(f,p){c.hasOwnProperty(f)&&p.dimOrder==a&&h[f]!==B&&(b=h[f][e])});return b}},getTwisterState:function(a){for(var e=[],b={dimKey:B,val:B},c=0;c<f.tvm.dimensionList.length;c++)if(a&&(b.dimKey=f.tvm.dimensionList[c],parseInt(a.dimIndex,10)===c)){b.val=a.dimValueIndex;e.push(b);break}return e},getCurrDimCombId:function(a,e,b){for(var c=[],h=0;h<f.tvm.dimensionList.length;h++){var t=a[h].val;-1===t&&(t=b?b:q.CHAR_ASTERISK);c.push(String(t))}return e===B?c:c.join(e)},getDimensionSelectionData:function(a,
e){for(var b={},c={},h=0,t=0,p=0;p<f.tvm.dimensionList.length;p++)-1!=e[p].val&&(t=1),a[e[p].dimKey].isRequired&&(h=1),c[q.STRING_IS_REQUIRED]=h,c[q.STRING_IS_SELECTED]=t,b[p]=c;return b},getDimDisplayMap:function(){var a={},e=f.tvm.dimensionList,b=f.tvm.dimensionDisplayText,c;if("undefined"!==typeof b&&"undefined"!==typeof e)for(var h in e)c=e[h],a[c]=b[c];return a},getDimensionValuesData:function(a){for(var e={},b=0;b<f.tvm.dimensionList.length;b++)e[b]=f.tvm.dimtoValueMap[a[b].dimKey][a[b].val];
return e},getDimNameByOrder:function(a){a=Number(a);var e=B;l.each(f.tvm.dimInfoMap,function(b,c){if(c.dimOrder===a)return e=b,!1});return e},isAlreadySelected:function(a,e){var b=!1,c=parseInt(e.dimValueIndex,10),h=this.getDimNameByOrder(parseInt(e.dimIndex,10));if(h)l.each(a,function(a,e){e.dimKey===h&&(b=e.val==c?!0:!1)});else return!1;return b},isDimensionSelected:function(a,e){var b=f.tvm.dimensionList[a];if(b){var c=f.util.getUnselectedDims(e);if(c&&0<c.length)return-1===l.inArray(b,c)}return!1},
createAccessibilityText:function(a,e){var b=this.getDimensionValuesData(a,f.tvm),c=f.tvm.dimensionList,h=this.getDimDisplayMap(f.tvm),t=[];l.each(c,function(a,c){t.push(h[c]+" = "+b[a])});return e+t.join(" , ")}};return b});x.when("A").register("dp-js-logger-service",function(u){return function(q,a,b,l){function f(a,b,c){b=b||{};"string"===typeof a&&(b.message+=a,a=B);b.logLevel=c;A.ueLogError&&A.ueLogError(a,b)}var g=b!==B&&null!==b?b:"";l=l||!1;this.logFatal=function(a,b){f(a,b,"FATAL")};this.logError=
function(a,b){f(a,b,"ERROR")};this.logCounter=function(a,b){var c=""===g?a:g+":"+a;A.ue&&A.ue.count&&ue.count(c,b)};this.logCounters=function(a){q.each(a,function(a,c){var e=g+":"+c.name;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Logging metric: "+e+" -> "+c.value);A.ue&&A.ue.count&&ue.count(e,c.value)})};this.consoleLog=function(a){A.console&&"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log(a)};this.init=function(){var e=this;if(l){var b=function(){var c=
a.getDataToUploadOnUnload();e.logCounters(c);return null};if("undefined"!==typeof ue.onunload)ue.onunload(b);else q(A).bind("beforeunload",b)}}}});x.when("A","dp-js-logger-service","twister-string-constants").register("dp-js-logger",function(u,q,a){return function(b,l,f){function g(c){if(!c)return null;var e=l?l.jsInteractionEnabledTime:Date.now();return(c[a.TWISTER_EVENT_DATA_TIME]||Date.now())-e}function e(a){if(a.hasOwnProperty("getMetricData"))return a.getMetricData();var c=a.stringVal;a=a.hasOwnProperty("getUploadValue")?
a.getUploadValue():a.hasOwnProperty("currentValue")?a.currentValue:a.initValue;return isNaN(a)?null:{value:a,name:c}}var m=this,c=u.$,h;this.createFunctionTimer=function(a){return{eventType:a,start:function(){this.startTime=Date.now()},stop:function(){m.logImpression(this.eventType,{duration:Date.now()-this.startTime})}}};this.eventTypes={CLICK:{metricList:["M_CLICK_COUNT","M_FIRST_CLICK"]},UNAVAILABLE_SWATCH_HOVER:{metricList:["UNAVAILABLE_SWATCH_HOVER_COUNT"]},UNAVAILABLE_SWATCH_TABLET_CLICK:{metricList:["UNAVAILABLE_SWATCH_TABLET_CLICK_COUNT"]},
UNAVAILABLE_SWATCH_PC_CLICK:{metricList:["UNAVAILABLE_SWATCH_PC_CLICK_COUNT"]},TWISTER_UNAVAILABILITY_NOTIFIER:{metricList:["UNAVAILABILE_VARIATIONS_COUNT","IS_UNAVAILABLITY_PRESENT"]},HOVER:{metricList:["M_HOVER_COUNT","M_FIRST_HOVER"]},HOVER_OUT:[],CACHE_HIT:{metricList:["M_CACHE_HIT","M_CACHE_USED"]},CACHE_MISS:{metricList:["M_CACHE_MISS","M_CACHE_USED"]},PAGE_UNLOAD:{metricList:["M_CACHE_UNUSED","M_CACHE_HIT_RATIO","M_CACHE_USED_RATIO"]},REQ_DIM_CHANGED:{metricList:["M_OTHER_REQ_DIM_SELECTED_COUNT",
"M_REQ_DIM_CHANGE_COUNT"]},DIM_SUM_LOAD:{metricList:["M_DIM_SUM_LOAD"]},CLICK_NA:{metricList:["M_NA_CLICK_COUNT"]},DIM_INIT:{metricList:["M_DIM_PAGENATION_COUNT"]},SCROLL:{metricList:["M_VIEWED_DIM_COUNT"]},CLICK_VARIATION:{metricList:["M_DIM_CLICK_VIEWED_DIM_COUNT"]},EXPAND_BUTTON_CLICK:{metricList:["EXPAND_BUTTON_CLICK_COUNT"]},COLLAPSE_BUTTON_CLICK:{metricList:["COLLAPSE_BUTTON_CLICK_COUNT"]},EXPANDER:{metricList:["EXPANDER_COUNT"]},HISTORY_API_SUPPORTED:{metricList:["M_HISTORY_API_SUPPORTED"]},
HISTORY_API_NOT_SUPPORTED:{metricList:["M_HISTORY_API_NOT_SUPPORTED"]}};var t=function(e,b){this.stringVal=b;this.initValue=NaN;this.deferLogging=!0;this.pagenationCountName=e;this.updateFunction=function(c){var d;d=25*Math.ceil(c[a.TWISTER_EVENT_DATA_PERCENTAGE]/25);var k=c[a.TWISTER_EVENT_DATA_DIV_METADATA][a.STRING_DIM_INDEX];this.metrics||(this.metrics={});this.metrics[k]||(this.metrics[k]={});(this.metrics[k].percentage||0)<d&&(this.metrics[k].percentage=d);this.metrics[k].pageCount=c[a.TWISTER_EVENT_DATA_COUNT];
this.metrics[k].dimDisplayType=c[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log(this.stringVal+": index - "+k+" page - "+this.metrics[k].pageCount+" percentage - "+this.metrics[k].percentage)};this.getMetricData=function(){if(this.metrics){var a=[],d=this;c.each(this.metrics,function(k,c){var e=d.pagenationCountName+c.pageCount;c.dimDisplayType&&(e=c.dimDisplayType+":"+e);a.push({name:e+"_"+(d.stringVal+c.percentage),value:1})});return a}}},
p={M_CACHE_HIT:{stringVal:"CacheHit",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue=0<this.currentValue?this.currentValue+1:1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("incrementing cacheHit count to "+this.currentValue)}},M_CACHE_MISS:{stringVal:"CacheMiss",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue=0<this.currentValue?this.currentValue+1:1}},M_CACHE_HIT_RATIO:{stringVal:"CacheHitRatio",initValue:NaN,deferLogging:!0,
updateFunction:function(a){a=m.getMetricCurrentValue("M_CACHE_HIT");var c=m.getMetricCurrentValue("M_CACHE_MISS");if(a||c)this.currentValue=Math.round(a/(a+c)*100)}},M_CACHE_USED:{stringVal:"CacheUsed",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue||(this.currentValue=this.initValue,this.usedIdCache={});a=a.id;this.usedIdCache.hasOwnProperty(a)||(this.currentValue++,this.usedIdCache[a]=!0)}},M_CACHE_UNUSED:{stringVal:"CacheUnused",initValue:0,deferLogging:!0,updateFunction:function(a){if(l)a=
l.twisterModel.pageRefresh.getModelCacheSize("full")-m.getMetricCurrentValue("M_CACHE_USED"),this.currentValue=0>a?0:a;else throw"EventController undefined";}},M_CACHE_USED_RATIO:{stringVal:"CacheUsedRatio",initValue:NaN,deferLogging:!0,updateFunction:function(a){a=m.getMetricCurrentValue("M_CACHE_USED");var c=m.getMetricCurrentValue("M_CACHE_UNUSED");if(a||c)this.currentValue=Math.round(a/(a+c)*100)}},M_FIRST_CLICK:{stringVal:"FirstClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.firstClickLogged||
(this.currentValue=g(a),"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("first click = "+this.currentValue),this.firstClickLogged=!0)}},M_CLICK_COUNT:{stringVal:"ClickCount",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("incrementing click count to "+this.currentValue)}},M_HOVER_COUNT:{stringVal:"HoverCount",initValue:0,deferLogging:!0,updateFunction:function(a){a=a.divMetaData;this.lastHoveredDivMetaData&&
a&&this.lastHoveredDivMetaData.dimIndex===a.dimIndex&&this.lastHoveredDivMetaData.dimValueIndex===a.dimValueIndex||(this.lastHoveredDivMetaData=a,this.currentValue=0<this.currentValue?this.currentValue+1:1,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("incrementing hover count to "+this.currentValue))}},M_FIRST_HOVER:{stringVal:"FirstHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.firstHoverLogged||(this.currentValue=g(a),"undefined"!==typeof Twister&&Twister.printConsoleLogs&&
console.log("first hover = "+this.currentValue),this.firstHoverLogged=!0)}},M_OTHER_REQ_DIM_SELECTED_COUNT:{stringVal:"OtherReqDimSelectedCount",initValue:NaN,deferLogging:!0,updateFunction:function(a){var c=a.newReqDimValueIndex;a=a.oldReqDimValueIndex;"X"===c?this.currentValue||(this.lastReqDimValueIndex=a,this.currentValue=0):this.lastReqDimValueIndex!==c&&(this.lastReqDimValueIndex=c,this.currentValue||0===this.currentValue?this.currentValue++:"X"===a?this.currentValue=0:this.currentValue=1,"undefined"!==
typeof Twister&&Twister.printConsoleLogs&&console.log("OtherReqDimSelectedCount incremented to : "+this.currentValue))}},M_REQ_DIM_CHANGE_COUNT:{stringVal:"ReqDimChangeCount",initValue:0,deferLogging:!0,updateFunction:function(a){this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("ReqDimChangeCount incremented to : "+this.currentValue)):this.currentValue=1}},M_DIM_SUM_LOAD:{stringVal:"DimSumLoadingDuration",initValue:NaN,deferLogging:!1,updateFunction:function(c){this.currentValue=
c[a.TWISTER_EVENT_DATA_DURATION];"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("DimSumLoadingDuration: "+this.currentValue)}},M_NA_CLICK_COUNT:{stringVal:"NAClickCount",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("NAClick incremented to: "+this.currentValue)}},M_DIM_PAGENATION_COUNT:{stringVal:"DimPageCount",initValue:1,deferLogging:!1,updateFunction:function(c){this.pageCount=
c[a.TWISTER_EVENT_DATA_COUNT]||1;this.dimDisplayType=c[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("DimPageCount: "+this.pageCount)},getMetricData:function(){var a=this.stringVal+(this.pageCount||1);this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:1}}},M_VIEWED_DIM_COUNT:new t("DimPageCount","ViewedVariationCount"),M_DIM_CLICK_VIEWED_DIM_COUNT:new t("DimPageCount","ViewedVariationCountBeforeClick"),EXPAND_BUTTON_CLICK_COUNT:{stringVal:"ExpandButtonClickCount",
initValue:0,deferLogging:!0,updateFunction:function(c){this.dimDisplayType=c[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Expand Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},COLLAPSE_BUTTON_CLICK_COUNT:{stringVal:"CollapseButtonClickCount",
initValue:0,deferLogging:!0,updateFunction:function(c){this.dimDisplayType=c[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Collapse Button Click Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},EXPANDER_COUNT:{stringVal:"ExpanderCount",initValue:0,deferLogging:!0,
updateFunction:function(c){this.dimDisplayType=c[a.TWISTER_EVENT_DATA_DISPLAY_TYPE];this.currentValue?(this.currentValue++,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Expander Count incremented to : "+this.currentValue)):this.currentValue=1},getMetricData:function(){var a=this.stringVal;this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:this.currentValue}}},IS_UNAVAILABLITY_PRESENT:{stringVal:"UnavailabilityPresent",initValue:NaN,deferLogging:!0,updateFunction:function(a){"undefined"===
typeof this.currentValue&&(this.currentValue=0,0<a.noOfUnavailableVariations&&(this.currentValue=1),"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("IsUnavailabilityPresent : "+this.currentValue))}},UNAVAILABILE_VARIATIONS_COUNT:{stringVal:"UnavailableVariations",initValue:NaN,deferLogging:!0,updateFunction:function(a){"undefined"==typeof this.currentValue&&(this.currentValue=a.noOfUnavailableVariations,"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("Possible unavailable variations present are : "+
this.currentValue))}},UNAVAILABLE_SWATCH_HOVER_COUNT:{stringVal:"UnavailableSwatchHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("UnavailableSwatchHoverCount is incremented to : "+this.currentValue)}},UNAVAILABLE_SWATCH_PC_CLICK_COUNT:{stringVal:"UnavailableSwatchPCClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;
"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("UnavailableSwatchPCClickCount is incremented to : "+this.currentValue)}},UNAVAILABLE_SWATCH_TABLET_CLICK_COUNT:{stringVal:"UnavailableSwatchTabletClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("UnavailableSwatchTabletClickCount is incremented to : "+this.currentValue)}},M_HISTORY_API_SUPPORTED:{stringVal:"HistoryAPISupported",
initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("History API is supported in the browser : "+this.currentValue)}},M_HISTORY_API_NOT_SUPPORTED:{stringVal:"HistoryAPINotSupported",initValue:0,deferLogging:!1,updateFunction:function(a){this.currentValue=(this.currentValue||0)+1;"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("History API is not supported in the browser : "+
this.currentValue)}}};this.logImpression=function(a,b){try{c.each(a.metricList,function(a,k){try{var c=p[k];c.updateFunction(b);p[k].deferLogging||h.logCounters(Array(e(c)))}catch(n){"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("metricUpdate failing for metric = "+k)}})}catch(g){"undefined"!==typeof Twister&&Twister.printConsoleLogs&&console.log("logImpression failed")}};this.logFatal=function(a,c){h&&h.logFatal(a,c)};this.logError=function(a,c){h&&h.logFatal(a,c)};this.logCounter=
function(a,c){h.logCounter(a,c)};this.consoleLog=function(a){h&&h.logFatal(a)};this.logPresenceOfUnavailability=function(a,c){for(var e=a.num_total_variations,d=c.dimensionValuesData,k=1,b=d.length,g=0;g<b;g++)k*=d[g].length;this.logImpression(this.eventTypes.TWISTER_UNAVAILABILITY_NOTIFIER,{noOfUnavailableVariations:k-e})};this.logUnavailableSwatchClick=function(){this.logImpression(this.eventTypes.CLICK_NA,null);var a=this.eventTypes.UNAVAILABLE_SWATCH_PC_CLICK;Twister.isTabletWeb&&(a=this.eventTypes.UNAVAILABLE_SWATCH_TABLET_CLICK);
this.logImpression(a,null)};this.getDataToUploadOnUnload=function(a){this.logImpression(this.eventTypes.PAGE_UNLOAD);var b=[];c.each(p,function(a,d){try{if(d.deferLogging){var k=e(d);k&&(c.isArray(k)?b=c.merge(k,b):b.push(k))}}catch(n){}});return b};this.getMetricCurrentValue=function(a){try{return p[a].hasOwnProperty("currentValue")?p[a].currentValue:p[a].initValue}catch(c){return p[a].initValue}};h=new q(c,m,b,f);h.init()}});x.when("A","jQuery").register("detail-page-state-controller",function(){return function(){this.state=
{};this.getState=function(){return this.state};this.setState=function(u,q){u&&q&&(this.state[u]=q)}}});x.when("A","jQuery").register("detail-page-framework",function(){return{callbacks:{},registerCallback:function(u,q,a){"after_redraw"!=u&&"asin_select"!=u||"sims-widget"!=q&&"session-similarities"!=q&&"purchase-similarities"!=q&&"buyxgety"!=q||(this.callbacks[q+"_feature_div"]=a)},registerFeature:function(){},registerFeatureConfig:function(){}}});x.when("A","jQuery","dp-js-logger").register("dp-ajax-prefetch-metrics",
function(u,q,a){function b(a){this.scope="dpPre"+a;this.data={}}new a("PrefetchMetrics");b.prototype._count=function(a,b){var g=this.scope+a,e;A.ue&&A.ue.count&&(e="undefined"!==typeof b?(e=ue.count(g,b))||b:(e=ue.count(g))||0);return e};b.prototype._incrementCounter=function(a){this._count(a,(this._count(a)||0)+1)};b.prototype._record=function(a,b,g){this.data[b]=this.data[b]||{};this.data[b][a]||(this.data[b][a]=g||(new Date).getTime(),"predicted"==a?this._incrementCounter("Predicted"):"selected"==
a&&this.data[b].predicted?(a=this.data[b].selected-this.data[b].predicted,this.data[b].lookahead=a,this._incrementCounter("PredictedSelect"),this._count("LookAhead"+this._count("PredictedSelect"),a),this._count("LookAhead",a)):"selected"!=a||this.data[b].predicted||this._incrementCounter("UnpredictedSelect"))};b.prototype.setCounter=function(a,b){this._count(a,b)};b.prototype.predicted=function(a,b){this._record("predicted",a,b)};b.prototype.selected=function(a,b){this._record("selected",a,b)};b._allInstances=
{};b.getInstance=function(a){if(!a)throw"Undefind scope. scope is a required parameter";b._allInstances[a]||(b._allInstances[a]=new b(a));return b._allInstances[a]};return b});x.when("A","twister-string-constants","twister-variations-data","parent-view","twister-view","twister-model","twister-model-new","twister-state","twister-availabilty-cache","twister-utils","evdd-utils","dp-js-logger","TwisterCore","twister-data-translator","twister-productization-view","page-refresh-view","view-util","detail-page-state-controller-view").register("twister-controller",
function(u,q,a,b,l,f,g,e,m,c,h,t,p,n,w,r,d,k){return function(v,y){var z=this,E=u.$;z.logger=new t(null,this);var G=n.getTranslatedData(y);z.twisterCore=function(k){var a=B;y[q.PRODUCTIZATION_ENABLED]&&k!==B&&(a=new p(k));return a}(G);z.twisterCore!==B&&(z.productizationView=new w(z.twisterCore),z.pageRefreshView=new r(z.twisterCore,y,t));y[q.IS_PAGE_ELIGIBLE_FOR_PRODUCTIZATION]=d.isViewsEligibleForMigration(y);z.twisterJSInitData=y;z.pageRefreshRefactor=y.pageRefreshRefactor;z.twisterVariationsData=
new a(y,z.twisterCore);z.twisterAvailabilityCache=new m(z.twisterVariationsData,y);z.initTwisterState=new e(y,z.twisterVariationsData,z.twisterAvailabilityCache);z.twisterCore!==B&&y[q.IS_PAGE_ELIGIBLE_FOR_PRODUCTIZATION]?(z.detailPageStateControllerView=new k(y,z.twisterCore),G=new b(z,y,z.twisterVariationsData,z.twisterAvailabilityCache,z.twisterCore)):G=new l(z,z.initTwisterState,y,z.twisterVariationsData,z.twisterAvailabilityCache);z.twisterView=G;x.register("desktop-twister",function(){return z.twisterCore});
z.twisterModel=z.pageRefreshRefactor?new g(z,y,z.twisterVariationsData,z.productizationView):new f(z,v,y,z.twisterVariationsData,z.twisterAvailabilityCache);E("#twister .swatches a").remove();E("#twisterNonJsData").html("");z.jsInteractionEnabledTime=Date.now();z.logger.logPresenceOfUnavailability(y,z.twisterVariationsData);z.onInitializeTwister=function(){z.twisterView.onInitializeTwister()};z.populateEVDD=function(k){var a=z.twisterView,d=z.twisterVariationsData.asinToDimIndexMapData,c=z.twisterModel.twisterState.getMaster();
k&&(new h).PopulateEVDD(k,a,d,c)};z.handleClick=function(k){z.divMetaData=k;var a=z.initTwisterState.getCurrentDimCombID(),d=c.reconstructCombinationWithDimValue(a,k.dimIndex,k.dimValueIndex);A.newTwisterInteractionStartTime=new Date;c.isSwatchSelected(k,z.twisterVariationsData)||a===d||(z.enableMouseOut=0,z.twisterModel.handleClick(k),z.twisterAvailabilityCache.isDimCombinationAvailable(d)||z.logger.logUnavailableSwatchClick())};z.handleExternalViewClick=function(k,a){try{z.handleClick(k)}catch(d){(new t(a,
this)).logFatal(d,{message:"[Failed to hand over click event of external view]"})}};z.handleMouseOver=function(k){if("undefined"!=typeof touchDeviceDetected&&touchDeviceDetected)return z.handleClick(k),!0;z.enableMouseOut=1;z.twisterModel.handleMouseOver(k);return!0};z.handleExternalViewMouseOver=function(k,a){try{z.handleMouseOver(k)}catch(d){(new t(a,this)).logFatal(d,{message:"[Failed to hand over mouse over event of external view]"})}};z.handleMouseOut=function(k,a,d){1===z.enableMouseOut&&z.twisterModel.handleMouseOut(k,
a,d)};z.handleExternalViewMouseOut=function(k,a,d,c){try{z.handleMouseOut(k,a,d)}catch(e){(new t(c,this)).logFatal(e,{message:"[Failed to hand over mouse out event of external view]"})}};z.handleDropdownOnChange=function(k,a){a.dimValueIndex=parseInt(k.value.split(",")[0]);A.newTwisterInteractionStartTime=new Date;z.twisterModel.twisterState.setPreHoverData(a);z.twisterModel.handleDropdownChange(a)};z.registerExternalView=function(k,a){z.twisterModel.registerExternalView(k,a)}}});x.when("A","twister-shelf",
"twister-counter","twister-vodd","twister-beaconized-evdd","twister-native-evdd","twister-dimension-views-swatch","twister-dimension-views-dropdown","twister-dimension-views-singleton","twister-string-constants","view-util").register("twister-dimension-view-factory",function(u,q,a,b,l,f,g,e,m,c,h){function t(a,c,e){this.dimCount=e;this.dimensionDisplayType=a.dimensionsDisplayType[e];this.dimensionDisplaySubType=a.dimensionsDisplaySubType[e];this.dimName=a.dimensions[e];this.dimensionsMap=a.dimensions;
this.dimensionDisplayString=a.dimensionsDisplay[e];this.dimensionValuesData=c.dimensionValuesData[e];this.displayConfigStylesData=c.displayConfigStylesData[this.dimensionDisplayType];this.twisterVariationsData=c;this.isIconPresentForDimensionValue=function(){var d=[];if("undefined"!==typeof a.isIconPresentForDimensionValue)d=a.isIconPresentForDimensionValue[e];else for(i=0;i<c.dimensionValuesData[e].length;i++)d.push(0);return d}}var p=u.$;return{getDimensionSubViewObject:function(n,h,r,d,k,v){r=
new t(n,h,r);h={};h[c.STRING_DIM_ORDER]=r.dimCount;h[c.STRING_DIM_NAME]=r.dimName;h[c.STRING_DIMENSIONS_MAP]=r.dimensionsMap;h[c.STRING_DIMENSION_DISPLAY_STRING]=r.dimensionDisplayString;h[c.STRING_DIMENSION_VALUES_DATA]=r.dimensionValuesData;h[c.STRING_DISPLAY_CONFIG_STYLES_DATA]=r.displayConfigStylesData;h[c.STRING_TWISTER_CONTROLLER_HANDLE]=d;h[c.STRING_TWISTER_INITIAL_STATE_KEY]=k;d=c.STRING_TWISTER_AVAILABILITY_CACHE;var y=B,y=k!=B?k.twisterAvailabilityCache:v!=B?v.twisterAvailabilityCache:B;
h[d]=y;h[c.STRING_TWISTER_VARIATION_DATA]=r.twisterVariationsData;h.isSlotsEnabled=p.isArray(Twister.isSlotsEnabled)?Twister.isSlotsEnabled[r.dimCount]:B;h.isIconPresentForDimensionValue=r.isIconPresentForDimensionValue();h.dimensionDisplaySubType=r.dimensionDisplaySubType;h[c.PRODUCTIZED_PARENT_VIEW]=v;h[c.PRODUCTIZED_VIEW_UTIL]=v?v.viewUtil:B;a:switch(r.dimensionDisplayType){case c.TWISTER_DIMENSION_VIEW_SWATCH:k=g;break;case c.TWISTER_DIMENSION_VIEW_DROPDOWN:k=e;break;case c.TWISTER_DIMENSION_VIEW_SINGLETON:k=
m;break;case c.TWISTER_DIMENSION_VIEW_EVDD:k=p("html").hasClass("a-lt-ie8")?f:l;break;case c.TWISTER_DIMENSION_VIEW_VODD:k=b;break;case c.TWISTER_DIMENSION_VIEW_COUNTER:k=a;break;case c.TWISTER_DIMENSION_VIEW_SHELF:k=q;break;default:k=B;break a}return new k(n,h)}}});x.when("A").execute(function(){"function"===typeof uet&&uet("bb","clickToTwister",{wb:1})});x.when("twisterModule").execute(function(u){"function"===typeof uex&&"function"===typeof uet&&(uet("be","clickToTwister",{wb:1}),uet("be","TwisterAUIWait",
{wb:1}),uex("ld","clickToTwister",{wb:1}),uex("ld","TwisterAUIWait",{wb:1}))});x.when("A","twister-string-constants","twister-js-init-mason-data","twister-js-init-dpx-data","twister-controller","page-refresh-manager","dimensional-summary-module","dp-js-logger").execute(function(u,q,a,b,l,f,g,e){function m(){"undefined"!=typeof amznJQ?amznJQ.declareAvailable("newTwister"):x.register("newTwister",function(){return A.newTwister});x.register("twisterModule",function(){return{getState:function(){return DetailPage.StateController.getState()}}});
"undefined"!=typeof amznJQ?(amznJQ.declareAvailable("pageRefreshJS"),amznJQ.declareAvailable("dpf")):(x.register("pageRefreshJS",function(){return A.pageRefreshJS}),x.register("dpf",function(){return A.pageRefreshJS}))}function c(a){var c={};a.extend(c,{ajaxReadyState:{NONE:-1,UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ajaxHandlerCode:{OK:0,IGNORE:1,RETRY:2,RELOAD:3,TIMEOUT:4,ABORT:5,FATAL:6,INVALID_RESP:7,INCOMPLETE_RESP:8,PAGELET_FATAL:9,DEBUG_NOAJAX:10},serverCode:{ERROR:-1,OK:200,
TIMEOUT:408},shouldReload:function(a){return!1}});A.AJAXFlushUtils=c}A.Twister={};var h=A.Twister;h.$=u.$;h.DimensionViews={};var t=new e("dpTwister");u.on.ready(function(){h.A=u;if(!u.$.isEmptyObject(b)){var e=b.updateDivLists;h.dpEnvironment=b.dpEnvironment;h.isInstaTwisterEnabled=!0;h.productTypeName=a.productTypeName;h.isImmersiveViewEnabled=b.isImmersiveViewEnabledOnDim?b.isImmersiveViewEnabledOnDim:b.isImmersiveViewEnabled;h.isSlotsEnabled=b.isSlotsEnabled;h.isImmersiveViewEnabledOnPage=b.isImmersiveViewEnabled;
h.isImmersiveExperience=b.isImmersiveExperience?b.isImmersiveExperience:b.isImmersiveViewEnabled;h.multiDimensionWeblabEnabled=b.multiDimensionWeblabEnabled?b.multiDimensionWeblabEnabled:!1;h.immersivePartialStateMessage=b.immersivePartialStateMessage?b.immersivePartialStateMessage:"";h.immersiveFullySelectedStateMessage=b.immersiveFullySelectedStateMessage?b.immersiveFullySelectedStateMessage:"";h.immersiveBannersPresent=b.immersiveBannersPresent?b.immersiveBannersPresent:!1;h.globalAjaxParameters=
{};h.isTabletWeb=b.isTabletWeb;h.isAssemblyVariationsEnabled=b.isAssemblyVariationsEnabled?b.isAssemblyVariationsEnabled:!1;var n=a.contextMetaData,w=n.full,r=n.master,d=n.parent,n=n.partial;a.dimensionSelectionData=b.dimensionSelectionData;b.dimensionsDisplayType?a.dimensionsDisplayType=b.dimensionsDisplayType:(t.logCounter("dpxDisplayTypePropertyUndefined",1),a.dimensionsDisplayType||t.logCounter("masonDisplayTypePropertyUndefined",1));a.dimensionsDisplaySubType=b.dimensionsDisplaySubType?b.dimensionsDisplaySubType:
[];a.ajaxUrlParams=b.ajaxUrlParams;a.displayTypeProperties=b.displayTypeProperties?b.displayTypeProperties:[];a.maxSwatchesForImmersiveView=b.maxSwatchesForImmersiveView?b.maxSwatchesForImmersiveView:[];a.dimensionsDisplayType&&"counter"===a.dimensionsDisplayType[0]&&"undefined"===typeof b.displayTypeProperties[0].expandedViewEnabled&&(a.useCounterConfig=!0,a.expandedViewEnabled=b.expandedViewEnabled?b.expandedViewEnabled:[],a.minAsinForExpandedView=b.minAsinForExpandedView?b.minAsinForExpandedView:
[],a.minAsinForExpandedScroll=b.minAsinForExpandedScroll?b.minAsinForExpandedScroll:[]);if("undefined"!==typeof b.twisterUpdateURLAppend){var k=a.twisterUpdateURLInfo,v=k.immutableURLPrefix,y=k.immutableParams,z=b.twisterUpdateURLAppend.immutableParams,E;for(E in z)if("function"!==typeof z.hasOwnProperty||z.hasOwnProperty(E))v+=(-1==v.indexOf("?")?"?":"&")+E+"="+z[E],y[E]=z[E];k.immutableURLPrefix=v;h.globalAjaxParameters=z}a[q.PRODUCTIZATION_ENABLED]=a[q.PRODUCTIZATION_ENABLED]&&"1"==a[q.PRODUCTIZATION_ENABLED]?
!0:!1;a.dimToAsinMapData=b.dimensionToAsinMap;a.asinToDimIndexMapData=b.asinToDimensionIndexMap;a.dimensionValuesData=b.dimensionValuesData;a.variation_values=b.variationValues;a.asin_variation_values=b.asinVariationValues;a.reactId=b.reactId;a.currentDimCombID=b.currentDimensionCombinationId;a.selected_variation_values=b.selectedVariationValues;a.dimensionHierarchyData=b.dimensionHierarchyData;a.dimensionDisplayMap=a.dimensionDisplayMap;a.topHierarchicalDimensionIndex=b.topHierarchicalDimensionIndex;
a.hierarchicalPivoting=b.hierarchicalPivoting;a.isIconPresentForDimensionValue=b.isIconPresentForDimensionValue;a.singletonDimensionKeys=b.singletonDimensionKeys;a["use-early-twister-init"]&&(a.current_asin=b.currentAsin,a.parent_asin=b.parentAsin,a.deletedLandingAsinInfo=b.deletedLandingAsinInfo,a.num_total_variations=b.num_total_variations,a.dimensions=b.dimensions,a.unselectedDimCount=b.unselectedDimCount,a.selected_variations=b.selected_variations,a.dimensionValuesDisplayData=b.dimensionValuesDisplayData,
a.prirotizeReqPrefetch=b.prioritizeReqPrefetch,a.num_variation_dimensions=b.num_variation_dimensions,a.num_total_variations=b.num_total_variations,a.dimensionsDisplay=b.dimensionsDisplay,a.variationDisplayLabels=b.variationDisplayLabels);null!=e.full&&(w.elementList=null!=w.elementList?e.full.concat(w.elementList):e.full);null!=e.master&&(r.elementList=null!=r.elementList?e.master.concat(r.elementList):e.master);null!=e.parent&&(d.elementList=null!=d.elementList?e.parent.concat(d.elementList):e.parent);
null!=e.partial&&(n.elementList=null!=n.elementList?e.partial.concat(n.elementList):e.partial)}e=a.isTablet;A.twisterInitPrefetchMode=a.twisterInitPrefetchMode;A.jqupgrade=a.jqupgrade;h.useDropdownThumbnail=e;h.useVariationsOverlay=e;h.showErrorMessageOnFailure=e;h.remainingAjaxCalls=0;h.errorMessageOnFailure="We are sorry.  Amazon has encountered an error.  Please try again.";h.isLoggingEnabled=a.isLoggingEnabled;h.printConsoleLogs=a.printConsoleLogs;h.deviceType=a.deviceType;h.useAui=1;h.useAuiAjax=
1;e=a.measurement.atf.marker;h.atfMarkerCount=a.measurement.atf.count;w=a.measurement.cf.marker;h.cfMarkerCount=a.measurement.cf.count;h.disableJsInteractions=a.disableJsInteractions?a.disableJsInteractions:!1;h.cfImageLongPollTag=a.measurement.cf.longPollImageTag;h.cfHtmlLongPollTag=a.measurement.cf.longPollHtmlTag;e=new f(u.$,a.contextMetaData,{atfMarker:e,cfMarker:w,logChannel:"twister"},a.loadingBarHtml,a.loadingBarHtml2);A.twisterController=new l(e,a);e={};e.dimensionsList=a.dimensions;e.dimensionValuesList=
a.dimensionValuesData;e.dimensionCombinationToASINMap=a.dimToAsinMapData;e.scopeSuffix="twister";e.globalAjaxParameters=h.globalAjaxParameters;h.dimensionalSummaryModule=new g(e);c(u.$);m();if("function"===typeof A.twisterController.onInitializeTwister)A.twisterController.onInitializeTwister()});h.isIEBrowser=function(a){return a.browser.msie||!!navigator.userAgent.match(/Trident/)};h.isIE8=function(){var a=h.A.$;return a("html").hasClass("a-lt-ie9")};return h});x.when("A","twister-state","twister-utils",
"detail-page-framework","twister-string-constants","dp-js-logger").register("twister-model",function(u,q,a,b,l,f){return function(g,e,m,c,h){function t(k,a,c){a=0;try{for(;a<d.externalViews.length;)d.externalViews[a].updateView(k,d.twisterState,c),a++}catch(e){(new f(externalViewNames[a])).logFatal(e,{message:"[Failed to update external view from TwisterModel]"})}}function p(k){var a,c,e,b,g,h=d.twisterState.parentASIN,m;k?(a=d.twisterState.reactId,c=d.twisterState.hoveredReactId,e=d.twisterState.unselectedDimCount,
b=0<=d.twisterState.hoveredDimCombID.search(/X/)?1:0,g=d.twisterState.hoveredAsin):(a=d.twisterState.previousReactId,c=d.twisterState.reactId,e=d.twisterState.previousPartialState,b=d.twisterState.partialState,g=d.twisterState.getCurrentASIN());m=d.twisterVariationsData.asinToDimIndexMapData[g];d.twisterVariationsData.useMS&&m&&g&&n(d.fetchMasterIDList,"m"+m[0],g,0,k);0===b?(n(d.fetchFullIDList,g,g,0,k),d.prioritizeReqPrefetch=0):0===e?(n(d.fetchPartialIDList,c,g,0,k),n(d.fetchParentIDList,h,h,0,
k),d.prioritizeReqPrefetch=1):a!==c&&n(d.fetchPartialIDList,c,g,0,k)}function n(k,a,c,e,b){b||(b=0);1!=d.idsList[a]&&a&&c&&(!d.prefetchFixWeblab||c!==d.twisterState.parentASIN||"full"!==k.type)&&k&&(d.idsList[a]=1,k.data.push({id:a,asin:c,isPrefetch:e,isHover:b}))}function w(k){k||(k=0);var a=[];0<d.fetchParentIDList.data.length&&a.push({type:"parent",idList:d.fetchParentIDList.data});0<d.fetchPartialIDList.data.length&&a.push({type:"partial",idList:d.fetchPartialIDList.data});0<d.fetchFullIDList.data.length&&
a.push({type:"full",idList:d.fetchFullIDList.data});0<d.fetchMasterIDList.data.length&&a.push({type:"master",idList:d.fetchMasterIDList.data});0<a.length&&(k||d.pageRefresh.measurement.stampCustomMetrics("ns",d.twisterState.currentASIN),d.pageRefresh.react(a,k));d.fetchParentIDList.data=[];d.fetchPartialIDList.data=[];d.fetchFullIDList.data=[];d.fetchMasterIDList.data=[];d.idsList={};d.prefetchCount=0}function r(k,c){for(var e={},b="",n=0;n<c.length;n++)b=null,d.twisterState.isDimSelected(n)&&(b=
c[n],"(Please Select)"===b&&(b=null)),null!==b&&(b=a.htmlUnescape(b)),e[d.viewHandle.dimensionsMap[n]]=b;DetailPage.StateController.setState(k+"_variations",e)}var d=this;d.twisterControllerHandle=g;d.pageRefresh=e;d.twisterJSInitData=m;d.twisterVariationsData=c;d.twisterAvailabilityCache=h;d.twisterState;d.prefetchCount=0;d.preHoverClass="";d.fetchParentIDList={type:"parent",data:[]};d.fetchPartialIDList={type:"partial",data:[]};d.fetchFullIDList={type:"full",data:[]};d.fetchMasterIDList={type:"master",
data:[]};d.idsList={};d.prefetchFixWeblab=0;d.prioritizeReqPrefetch=0;d.externalViews=[];d.externalViewNames=[];d.registerExternalView=function(k,a){try{d.externalViews.push(k),d.externalViewNames.push(a)}catch(c){(new f(a)).logFatal(c,{message:"[Failed to register external view with TwisterModel]"})}};d.handleMouseOver=function(k){var c;null!==k&&(d.twisterState.updateStateOnMouseOver(k),!a.isSwatchSelected(k,d.twisterVariationsData)||d.twisterVariationsData.useMS)&&(c=d.twisterVariationsData.getDimensionValuesDisplayData(d.twisterState.hoveredAsin),
d.twisterVariationsData.useMS||r("hovered",c),this.viewHandle.updateView(k,d.twisterState,"mouseOver"),t(k,d.twisterState,"mouseOver"),p(1),w(1))};d.handleDropdownChange=function(k){d.handleClick(k)};d.handleClick=function(k,c,e){var n=e?"mouseOut":"click",g,h,m=0;g=c;h=d.twisterState.getCurrentASIN();d.twisterVariationsData.useMS&&k&&a.isSwatchSelected(k,d.twisterVariationsData)&&(m=1);e||(e=0);if(null!==g||null!==k)if(g=d.twisterState.updateStateOnClick(k,c,n)){g=d.twisterState.getCurrentASIN();
if(!e&&h!==g&&!d.twisterState.partialState&&b.callbacks["sims-widget_feature_div"])b.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());d.twisterState.partialState||e||d.pageRefresh.measurement.start(g);h=d.twisterVariationsData.getDimensionValuesDisplayData(g);r("selected",h);r("hovered",h);d.twisterState.partialState||e||d.pageRefresh.measurement.stampCustomMetrics("bb",g);d.viewHandle.updateView({},d.twisterState,n);t(k,d.twisterState,n);d.twisterState.partialState||e||
d.pageRefresh.measurement.stampCustomMetrics("be",g);1!==m&&(p(e),w(e))}};d.handleMouseOut=function(k,c,e){c=d.twisterState.getCurrentASIN();!d.twisterVariationsData.useMS&&a.isSwatchSelected(k,d.twisterVariationsData)||d.handleClick(null,c,1)};(function(){var k;d.twisterJSInitData&&(d.twisterState=d.twisterControllerHandle.initTwisterState,d.MAX_PREFETCH_COUNT=d.twisterJSInitData.prefetchCount,d.prioritizeReqPrefetch=d.twisterJSInitData.prioritizeReqPrefetch,d.prefetchFixWeblab=d.twisterJSInitData.prefetchFixWeblab,
k=d.twisterState.getCurrentASIN(),k=d.twisterVariationsData.getDimensionValuesDisplayData(k),d.viewHandle||(d.viewHandle=d.twisterControllerHandle.twisterView),r("selected",k),r("hovered",k));d.pageRefresh.init(d.twisterJSInitData.storeID,d.twisterJSInitData.productGroupID)})()}});x.when("A","jQuery","twister-state","twister-utils","twister-string-constants","page-refresh:controller","dp-js-logger").register("twister-model-new",function(u,q,a,b,l,f,g){return function(a,m,c,h){function t(a,k,c){k=
0;try{for(;k<r.externalViews.length;)r.externalViews[k].updateView(a,r.twisterState,c),k++}catch(e){(new g(externalViewNames[k])).logFatal(e,{message:"[Failed to update external view from TwisterModel]"})}}function p(a,k,c,e){if(k&&!r.twisterVariationsData.useMS&&b.isSwatchSelected(k,r.twisterVariationsData))return!1;if(r.twisterState.updateStateOnClick(k,c,e,a)){c=r.twisterVariationsData.getDimensionValuesDisplayData(c);if(e==l.EVENT_TYPE_CLICK||e==l.EVENT_TYPE_DROPDOWN_CHANGE){for(var n=r.twisterState.getCurrentDimCombID().split("_"),
g={},p=0,q=r.twisterState.dimensionSelectionData.length;p<q;p++)g[r.twisterState.twisterJSInitData.dimensions[p]]="1"==r.twisterState.dimensionSelectionData[p].isRequired&&"0"==r.twisterState.dimensionSelectionData[p].isSelected&&"X"===n[p]?"-1":n[p];DetailPage.StateController.setState("selected_variation_values",g)}w("selected",c);w("hovered",c);r.viewHandle.updateView(k,r.twisterState,e);t(k,r.twisterState,e);Twister.disableJsInteractions?e!==l.EVENT_TYPE_CLICK&&e!==l.EVENT_TYPE_DROPDOWN_CHANGE||
f.reloadPage(a):e!==l.EVENT_TYPE_CLICK&&e!==l.EVENT_TYPE_DROPDOWN_CHANGE||!m[l.PRODUCTIZATION_ENABLED]?f.updatePage(a,e):(k=r.twisterState.getProductizedTwisterSelection(a.newDimCombID),h.handleClick(k,a));return!0}}function n(a,k,c,e,b){if(a&&1<r.twisterVariationsData.dimensionsMap.length){r.viewHandle.updateViewAfterTwisterUpdate(c,r.twisterState,b);a=0;try{for(;a<r.externalViews.length;)r.externalViews[a].updateViewAfterTwisterUpdate(c,r.twisterState,b),a++}catch(n){(new g(externalViewNames[a])).logFatal(n,
{message:"[Failed to update external view after twister update from TwisterModel]"})}}}function w(a,k){for(var c={},e="",b=0;b<k.length;b++)e=null,r.twisterState.isDimSelected(b)&&(e=k[b],"(Please Select)"===e&&(e=null)),c[r.viewHandle.dimensionsMap[b]]=e;DetailPage.StateController.setState(a+"_variations",c)}var r=this;r.twisterControllerHandle=a;r.twisterJSInitData=m;r.twisterVariationsData=c;r.pageRefresh=f.page;r.twisterState;r.externalViews=[];r.externalViewNames=[];r.registerExternalView=function(a,
k){try{r.externalViews.push(a),r.externalViewNames.push(k)}catch(c){(new g(k)).logFatal(c,{message:"[Failed to register external view with TwisterModel]"})}};r.prefetch=function(a,k){var c=r.twisterState.getRequestContext(a,!0);f.prefetchPage(c,k)};r.handleMouseOver=function(a){if(!a||r.twisterVariationsData.useMS||!b.isSwatchSelected(a,r.twisterVariationsData)){var k=r.twisterState.getHoverContext(a);r.twisterState.updateStateOnMouseOver(a,k);var c=r.twisterVariationsData.getDimensionValuesDisplayData(k.newAsin);
r.twisterVariationsData.useMS&&(!a||a.dimDisplayType!==l.TWISTER_DIMENSION_VIEW_VODD&&a.dimDisplayType!==l.TWISTER_DIMENSION_VIEW_SHELF&&a.dimDisplayType!==l.TWISTER_DIMENSION_VIEW_COUNTER)||w("hovered",c);DetailPage.StateController.setState("hovered_asin",k.newAsin);this.viewHandle.updateView(a,r.twisterState,l.EVENT_TYPE_MOUSEOVER);t(a,r.twisterState,l.EVENT_TYPE_MOUSEOVER);Twister.disableJsInteractions||f.updatePage(k,l.EVENT_TYPE_MOUSEOVER)}};r.handleClick=function(a){var k=r.twisterState.getRequestContext(a),
c=p(k,a,k.childAsin,l.EVENT_TYPE_CLICK);n(c,k,a,k.childAsin,l.EVENT_TYPE_CLICK)};r.handleMouseOut=function(a){a=r.twisterState.getCurrentContext(a);p(a,null,a.currentAsin,l.EVENT_TYPE_MOUSEOUT)};r.handleDropdownChange=function(a){var k=r.twisterState.getRequestContext(a);p(k,a,k.childAsin,l.EVENT_TYPE_DROPDOWN_CHANGE);n(k,a,k.childAsin,l.EVENT_TYPE_DROPDOWN_CHANGE)};(function(){if(r.twisterJSInitData){r.viewHandle||(r.viewHandle=r.twisterControllerHandle.twisterView);r.twisterState=r.twisterControllerHandle.initTwisterState;
var a=r.twisterState.getCurrentASIN(),a=r.twisterVariationsData.getDimensionValuesDisplayData(a);w("selected",a);w("hovered",a);f.init(m);u.on("dp:twister:prefetch",function(k,a){r.prefetch(k,a)})}})()}});x.when("A","twister-utils","detail-page-state-controller","twister-string-constants").register("twister-state",function(u,q,a,b){return function(l,f,g){function e(k){k.mType===b.MTYPE_PARENT&&k.relatedContext&&(k=k.relatedContext);return k}function m(k,a,e){var n=d.extend(!0,{},k);n.mType=b.MTYPE_MASTER;
n.id="m"+e[0];n.relatedContext=k;n.doNotAbort=!0;n.url=c(n,a,[]);n.uniqueID=t(n,[]);return n}function c(k,a,c){var e=r.twisterJSInitData.twisterUpdateURLInfo,b=e.immutableURLPrefix,n=e.immutableParams,e=e.mutableParams,g=r.twisterJSInitData.contextMetaData[k.mType].mTypeSpecificURLParams,m={};keyItr=0;m=d.extend(!0,{},e,g);if(null!=c)for(var g=0,f=c.length;g<f;g++){var t=c[g];if(!n.hasOwnProperty(t.key)){var p=t.key,w=t.value;m[p]=w;t.isPersistent&&(e[p]=w)}}for(var l in m)null!=m[l]&&(b+="&"+l+"="+
m[l]);b+="&asinList="+k.newAsin+"&isFlushing=2&dpEnvironment="+Twister.dpEnvironment+"&id="+k.id+"&mType="+k.mType;a&&(b+="&prefetchRequest=1");h()&&(b+="&isTryState=true");return b}function h(){var k=!1,a=u.state("pwState");a&&(k=a.isTryState);return k}function t(k,a){var c="",e=k.mType,b=[],n=d.extend(!0,{},r.twisterJSInitData.twisterUpdateURLInfo.mutableParams);if(null!=a)for(var g=0,m=a.length;g<m;g++){var f=a[g];n[f.key]=f.value}for(var t in n)n.hasOwnProperty(t)&&b.push(t);b.sort();g=0;for(m=
b.length;g<m;g++)f=b[g],null!=f&&null!=n&&(c+=f+"="+n[f]+"&");c+="mType="+e+"&id="+k.id;h()&&(c+="&isTryState=true");return c}function p(k){var a=k[b.STRING_DIM_INDEX],d=k[b.STRING_DIM_VALUE_INDEX];k=r.getCurrentDimCombID().split("_");k[a]=-1===d?"X":d;k=k.join("_");return r.twisterAvailabilityCache.gAsinToRender(k,a)}function n(k,a){var d=r.getCurrentDimCombID().split("_"),c=d.length,e=r.twisterVariationsData.asinToDimIndexMapData[k],n=-1,g;if(e)e=e.slice(0);else for(e=[],g=0;g<c;g++)e[g]="X";null!==
a&&a!==B&&(n=a[b.STRING_DIM_INDEX]);for(var h=0;h<c;h++)(g=r.dimensionSelectionData[h][b.STRING_IS_REQUIRED])&&h!==parseInt(n)&&e[h]!=d[h]&&(e[h]="X",r.sizeSwatch&&0!=r.partialState&&(r.dimensionSelectionData[h][b.STRING_IS_SELECTED]=0)),-1!==parseInt(n)&&-1===parseInt(a[b.STRING_DIM_VALUE_INDEX])&&(e[n]="X");return e.join("_")}function w(k,a){for(var d=k.split("_"),c=0;c<r.dimensionSelectionData.length;c++)1===r.dimensionSelectionData[c][b.STRING_IS_REQUIRED]&&0!==a&&(d[c]="X");return d.join("_")}
var r=this,d=u.$;r.twisterJSInitData=l;r.twisterVariationsData=f;r.twisterAvailabilityCache=g;r.parentASIN="";r.currentASIN="";r.dimensionSelectionData={};r.unselectedDimCount=-1;r.master="";r.currentDimCombID="";r.preHoverClass="";r.hoveredReactId="";r.hoveredAsin="";r.hoveredDimCombID="";r.partialState="";r.previousPartialState="";r.previousReactId="";r.previousAsin="";r.sizeSwatch=!1;r.setMaster=function(k){r.master=k};r.getMaster=function(){return r.master};r.getCurrentASIN=function(){return r.currentASIN};
r.setCurrentASIN=function(k){k&&(r.currentASIN=k)};r.getCurrentDimCombID=function(){return r.currentDimCombID};r.setCurrentDimCombID=function(k){k&&(r.currentDimCombID=k)};r.isDimSelected=function(k){return 1===r.dimensionSelectionData[k][b.STRING_IS_SELECTED]};r.setPreHoverData=function(k){r.useMS||(r.preHoverClass=q.getAttachedClass(k,r.twisterVariationsData.dimensionsMap[k[b.STRING_DIM_INDEX]]))};r.updateStateOnMouseOver=function(k,a){var d,c;k&&"0"===k[b.STRING_DIM_INDEX]&&r.setMaster(k[b.STRING_DIM_VALUE_INDEX]);
d=a&&a.childAsin||p(k);c=r.unselectedDimCount;if(""===d){if(0>=c)return;d=r.getCurrentASIN()}r.hoveredAsin=d;d=a&&a.newDimCombID||n(r.hoveredAsin,k);r.hoveredDimCombID=d;c=0<=d.search(/X/)?1:0;d=a&&a.reactID||w(d,c);r.hoveredReactId=d;r.setPreHoverData(k)};r.updateStateOnClick=function(k,a,d,c){var e=-1,g=-1;r.previousAsin=r.getCurrentASIN();a=a||c&&c.childAsin||p(k);k&&k[b.STRING_DIM_INDEX]&&"0"===k[b.STRING_DIM_INDEX]&&r.setMaster(k[b.STRING_DIM_VALUE_INDEX]);e=r.unselectedDimCount;r.previousPartialState=
e;if(""===a){if(0>=e)return!1;a=r.getCurrentASIN()}e=c&&c.newDimCombID||n(a,k);if(b.EVENT_TYPE_CLICK===d||b.EVENT_TYPE_DROPDOWN_CHANGE===d){var h=k[b.STRING_DIM_INDEX];d="undefined"!==typeof r.preHoverClass&&(-1!==r.preHoverClass.indexOf(b.CLASS_FOR_SWATCH_UNAVAILABLE)||-1!==r.preHoverClass.indexOf(b.CLASS_FOR_DROPDOWN_UNAVAILABLE));var m=e.split("_"),g=r.currentDimCombID.split("_");m[h]="*";g[h]="*";h=m.join("_");g=g.join("_");h!=g&&(d=!0);if(d||-1===k[b.STRING_DIM_VALUE_INDEX])for(var g=e.split("_"),
m=0,f=r.dimensionSelectionData.length;m<f;m++)h=r.dimensionSelectionData[m],"X"===g[m]&&1===h[b.STRING_IS_SELECTED]&&(h[b.STRING_IS_SELECTED]=0,r.unselectedDimCount++);DetailPage.StateController.setState("isUnavailableInOldDimCombId",d?"true":"false");d=k[b.STRING_DIM_INDEX];null!==k&&k!==B&&(d=r.dimensionSelectionData[d],0===d[b.STRING_IS_SELECTED]&&-1!==parseInt(k[b.STRING_DIM_VALUE_INDEX])&&(d[b.STRING_IS_SELECTED]=1,r.unselectedDimCount--,0>r.unselectedDimCount&&(r.unselectedDimCount=0)));g=r.unselectedDimCount;
r.previousReactId=r.reactId}else g=0<=e.search(/X/)?1:0,r.previousReactId=r.hoveredReactId;k=c&&c.reactID||w(e,g);r.partialState=g;r.setCurrentASIN(a);r.setCurrentDimCombID(e);r.reactId=k;DetailPage.StateController.setState("current_asin",r.getCurrentASIN());DetailPage.StateController.setState("currentDimCombID",r.getCurrentDimCombID());DetailPage.StateController.setState("reactId",r.reactId);DetailPage.StateController.setState("dimensionSelectionData",r.dimensionSelectionData);return!0};r.getCurrentContext=
function(){var k=r.getRequestContext();return e(k)};r.getHoverContext=function(k){k=r.getRequestContext(k);return e(k)};r.getProductizedTwisterSelection=function(k){return"string"===typeof k?q.getProductizedTwisterSelectionFromDimComb(k,r.twisterJSInitData.dimensions):q.getProductizedTwisterSelectionFromDivMetaData(k,r.twisterJSInitData.dimensions)};r.getRequestContext=function(k,a){var e=r.getCurrentASIN(),g=r.parentASIN,h;h=k&&p(k)||e;var f=r.getCurrentDimCombID(),l=n(h,k),q=0<=f.search(/X/)?1:
0,u=0<=l.search(/X/)?b.MTYPE_PARTIAL:b.MTYPE_FULL;q||u!==b.MTYPE_PARTIAL||(u=b.MTYPE_PARENT);var q=u!==b.MTYPE_FULL?1:0,x=w(l,q),e={divMetaData:k,currentAsin:e,newAsin:h,childAsin:h,currentDimCombID:f,newDimCombID:l,reactID:x,partialState:q,mType:u,id:0<=x.search(/X/)?x:h};if(r.useMS&&h){if(g=r.twisterVariationsData.asinToDimIndexMapData[h])e.relatedContext=m(e,a,g),e.doNotAbort=!0}else u===b.MTYPE_PARENT&&(h=d.extend(!0,{},e),h.mType=b.MTYPE_PARTIAL,h.relatedContext=e,h.url=c(h,a,[]),h.doNotAbort=
!0,h.uniqueID=t(h,[]),e.relatedContext=h,e.id=g,e.newAsin=g,e.doNotAbort=!0);e.url=c(e,a,[]);e.uniqueID=t(e,[]);return e};r.getRequestContextForExternalTwisterUpdates=function(k){var a=r.getCurrentASIN(),d=r.getCurrentDimCombID();d.search(/X/);var e=0<=d.search(/X/)?b.MTYPE_PARTIAL:b.MTYPE_FULL,n=e!==b.MTYPE_FULL?1:0,g=w(d,n),d={divMetaData:{},currentAsin:a,newAsin:a,childAsin:a,currentDimCombID:d,newDimCombID:d,reactID:g,partialState:n,mType:e,id:0<=g.search(/X/)?g:a};r.useMS&&a&&(a=r.twisterVariationsData.asinToDimIndexMapData[a])&&
(d.relatedContext=m(d,0,a),d.doNotAbort=!0);d.url=c(d,0,k);d.uniqueID=t(d,k);return d};(function(){var k=r.twisterJSInitData,c=k.keysToPopulateDetailPageStateController,e;if(k){DetailPage.StateController=new a;for(var n=0,g=c.length;n<g;n++)e=c[n],DetailPage.StateController.setState(e,k[e]);DetailPage.StateController.setState("variation_display_labels",k[b.INIT_DATA_VARIATIONS_DISPLAY_LABELS]);DetailPage.StateController.setState("variation_label_order",k[b.INIT_DATA_DIMENSIONS_MAP]);r.currentASIN=
k.current_asin;r.parentASIN=k.parent_asin;r.dimensionSelectionData=k.dimensionSelectionData;r.unselectedDimCount=k.unselectedDimCount;r.currentDimCombID=k.currentDimCombID;r.reactId=k.reactId;r.storeID=k.storeId;r.productGroupID=k.productGroupId;r.useMS=k[b.STRING_USE_MS];r.useMS&&r.currentASIN&&r.twisterVariationsData.asinToDimIndexMapData[r.currentASIN]&&r.setMaster(r.twisterVariationsData.asinToDimIndexMapData[r.currentASIN][0]);d("#sizeSwatch").length&&(r.sizeSwatch=!0)}})()}});x.when("A","twister-string-constants",
"view-util").register("twister-variations-data",function(u,q,a){return function(b,l){var f=this;f.dimensionValuesDisplay={};f.deletedLandingAsinInfo;f.dimToAsinMapData;f.dimensionValuesData;f.asinToDimIndexMapData;f.dimensionsDisplayType;f.displayConfigStylesData;f.useMS;f.hoverMS;f.dimensionsMap;f.twisterCore=l;f.getDimensionValuesDisplayData=function(a){var e=f.dimensionValuesDisplay[a];e||a!=f.deletedLandingAsinInfo.asin||(e=f.deletedLandingAsinInfo.dimValues);return e};(function(){if(f.twisterCore!=
B&&b[q.IS_PAGE_ELIGIBLE_FOR_PRODUCTIZATION]){var g=(new a(f.twisterCore)).variationData;f.asinToDimIndexMapData=g.getAsinToDimIndexMapData();f.dimToAsinMapData=g.getDimToAsinMapData();f.dimensionsMap=f.twisterCore.tvm.dimensionList;f.dimensionValuesData=g.getDimensionValuesData();f.dimensionValuesDisplay=g.getDimensionValuesDisplay()}else f.dimToAsinMapData=b[q.INIT_DATA_DIM_TO_ASIN_MAP],f.dimensionsMap=b[q.INIT_DATA_DIMENSIONS_MAP],f.dimensionValuesData=b[q.STRING_DIMENSION_VALUES_DATA],f.asinToDimIndexMapData=
b[q.INIT_DATA_ASIN_TO_DIM_INDEX_MAP],f.dimensionValuesDisplay=b[q.INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA];f.dimensionsDisplayType=b[q.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];f.deletedLandingAsinInfo=b[q.INIT_DATA_DELETED_LANDING_ASIN_INFO];f.displayConfigStylesData=b[q.STRING_DISPLAY_CONFIG_STYLES_DATA];f.useMS=b[q.STRING_USE_MS];f.hoverMS=b[q.STRING_HOVER_MS]})()}});x.when("A").register("twister-string-constants",function(u){return{YES:"YES",NO:"NO",MTYPE_PARENT:"parent",MTYPE_PARTIAL:"partial",
MTYPE_FULL:"full",MTYPE_MASTER:"master",AUI_DROPDOWN_EVENT_PREFIX:"a:dropdown:selected:",AUI_EVENT_FOR_SWATCHTHUMB:"swatchthumb-action",CHAR_COLON:":",CHAR_SEMICOLON:";",CHAR_UNDERSCORE:"_",CHAR_ASTERISK:"*",CLASS_FOR_DROPDOWN_UNAVAILABLE:"dropdownUnavailable",CLASS_FOR_NEW_TWISTER_EVDD:"#newTwisterEVDD",CLASS_FOR_NON_JS_EVDD:"#nonJSEVDD",CLASS_FOR_SWATCH_AVAILABLE:"swatchAvailable",CLASS_FOR_SWATCH_HOVER:"swatchHover",CLASS_FOR_SWATCH_SELECT:"swatchSelect",CLASS_FOR_SWATCH_UNAVAILABLE:"swatchUnavailable",
CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:"swatchUnavailableHover",AUI_CLASS_FOR_SWATCH_UNAVAILABLE:"a-button-unavailable",AUI_CLASS_FOR_SWATCH_SELECT:"a-button-selected",CLASS_FOR_VODD_AVAILABLE:"voddAvailable",CLASS_FOR_VODD_HOVER:"voddHover",CLASS_FOR_VODD_SELECT:"voddSelect",CLASS_FOR_VODD_UNAVAILABLE:"voddUnavailable",CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION:"dropdownSelect",DROPDOWN_DIV_NAME:"dropdown_selected_",EVENT_TYPE_SHOWPOPOVER:"showPopover",EVENT_TYPE_HIDEPOPOVER:"hidePopover",EVENT_TYPE_UPDATEPOPOVERPOSITION:"updatePopoverPosition",
EVENT_TYPE_DROPDOWN_CHANGE:"dropdownChange",EVENT_TYPE_CLICK:"click",EVENT_TYPE_MOUSEENTER:"mouseenter",EVENT_TYPE_MOUSELEAVE:"mouseleave",EVENT_TYPE_MOUSEDOWN:"mousedown",EVENT_TYPE_MOUSEOUT:"mouseOut",EVENT_TYPE_MOUSEOVER:"mouseOver",EVENT_TYPE_TOUCHSTART:"touchstart",EVENT_TYPE_TOUCHEND:"touchend",EVENT_TYPE_TOUCHMOVE:"touchmove",EVENT_TYPE_KEYPRESS:"keypress",ID_SELECTOR:"#",CLASS_SELECTOR:".",TWISTER_POPOVER:"twisterPopover",INDEX_FOR_SELECT_OPTION:"-1",INIT_DATA_ASIN_TO_DIM_INDEX_MAP:"asinToDimIndexMapData",
INIT_DATA_DELETED_LANDING_ASIN_INFO:"deletedLandingAsinInfo",INIT_DATA_DIM_TO_ASIN_MAP:"dimToAsinMapData",INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA:"dimensionValuesDisplayData",INIT_DATA_DIMENSIONS_DISPLAY:"dimensionsDisplay",INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP:"dimensionsDisplayType",INIT_DATA_DIMENSIONS_MAP:"dimensions",INIT_DATA_VARIATIONS_DISPLAY_LABELS:"variationDisplayLabels",INIT_DATA_MAX_POPOVER_HEIGHT:"maxPopoverHeight",INIT_DATA_VISIBLE_ROW_COUNT:"visibleRowCount",INIT_DATA_POPOVER_POSITION:"popoverPosition",
INIT_DATA_ANIMATE_BUTTON_CONTENT:"animateButtonContent",INIT_DATA_DISPLAY_TYPE_PROPERTIES:"displayTypeProperties",NATIVE_DROPDOWN_DIV_PREFIX:"#native_",STRING_CSS_CLASS:"css_class",STRING_DIM_COMB_ID:"dimCombID",CURR_DIM_COMB_ID:"currentDimCombID",STRING_DIM_DATA:"dimData",STRING_DIM_INDEX:"dimIndex",STRING_DIM_NAME:"dimName",STRING_DIM_ORDER:"dimOrder",STRING_DIM_VALUE_INDEX:"dimValueIndex",STRING_DIMENSION_DISPLAY_MAP:"dimensionDisplayMap",STRING_DIMENSION_DISPLAY_STRING:"dimensionDisplayString",
STRING_DIMENSION_SELECTION_DATA:"dimensionSelectionData",STRING_DIMENSION_VALUES_DATA:"dimensionValuesData",STRING_DIMENSION_VALUES_DATA_GLOBAL:"dimensionValuesDataGlobal",STRING_DIMENSIONS_MAP:"dimensionsMap",STRING_DISPLAY_CONFIG_STYLES_DATA:"displayConfigStylesData",STRING_EVENT_DATA:"eventData",STRING_EVENT_DIM_DATA:"dimData",STRING_EVENT_DIM_INFO:"eventDimInfo",STRING_EVENT_DIV_METADATA:"divMetaData",STRING_EVENT_POPOVER_DATA:"popoverData",STRING_EVENT_TYPE:"eventType",STRING_HIDE_POPOVER:"hidePopover",
STRING_HOVER_MS:"hoverMS",STRING_IS_REQUIRED:"isRequired",STRING_IS_SELECTED:"isSelected",STRING_NATIVE_CSS_CLASS:"native_css_class",STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER:"showDimSecondUnavailablePopover",STRING_STYLE:"style",STRING_TWISTER_CONTROLLER_HANDLE:"twisterControllerHandle",STRING_TWISTER_AVAILABILITY_CACHE:"twisterAvailabilityCache",STRING_TWISTER_VARIATION_DATA:"twisterVariationData",STRING_TWISTER_INITIAL_STATE_KEY:"twisterInitialState",STRING_UNAVAILABLE_POPOVER_STRING_VALUE:"unavailablePopOverStringValue",
STRING_ACCESSIBILITY_CURRENT_SELECTION:"twisterAccessibilityCurrentSelection",STRING_USE_MS:"useMS",STYLE_CLASS_TYPE_FOR_AVAILABLE:"available",STYLE_CLASS_TYPE_FOR_INAVLID:"invalid",STYLE_CLASS_TYPE_FOR_SELECTED:"selected",TWISTER_DIMENSION_VIEW_DROPDOWN:"dropdown",TWISTER_DIMENSION_VIEW_EVDD:"etdd",TWISTER_DIMENSION_VIEW_SINGLETON:"singleton",TWISTER_DIMENSION_VIEW_SWATCH:"swatch",TWISTER_DIMENSION_VIEW_VODD:"vodd",TWISTER_DIMENSION_VIEW_COUNTER:"counter",TWISTER_DIMENSION_VIEW_SHELF:"shelf",TWISTER_EVENT_DATA_DIV_METADATA:"divMetaData",
TWISTER_EVENT_DATA_DISPLAY_TYPE:"dimDisplayType",TWISTER_EVENT_DATA_TIME:"time",TWISTER_EVENT_DATA_DURATION:"duration",TWISTER_EVENT_DATA_COUNT:"count",TWISTER_EVENT_DATA_PERCENTAGE:"percentage",TWISTER_EVENT_DATA_DIM_INDEX:"dimIndex",MODAL_SWATCH_PREFIX:"modal_",STRING_MAX_SWATCHES_IMMERSIVE_VIEW:"maxSwatchesForImmersiveView",TWISTER_SWATCH_CLASS_PREFIX:"twister_",PRICE_SLOT_CLASS_NAME:"twister_swatch_price",CLASS_FOR_PRICE_SECONDARY:"a-color-secondary",CLASS_FOR_PRICE_SELECTED:"a-color-price",TWISTER_MODAL_ID_PREFIX:"twister_modal_",
TWISTER_INGRESS_ID_PREFIX:"twister_ingress_",AUI_EVENT_FOR_INGRESS_PREFIX:"twister-ingress-click-",TWISTER_FEATURE_DIV_ID:"twister_feature_div",IMMERSIVE_TWISTER_OVERLAY:"immersiveTwisterOverlay",CENTER_COL_DIV_ID:"centerCol",MODAL_CONTENTDIV_PREFIX:"twister_modal_innerDiv_",MODAL_HEADER_PREFIX:"twister_modal_header_",IMMERSIVE_DROPDOWN_ROW_PREFIX:"twister_idd_",DYNAMIC_STYLE_RULES_ID:"twisterSwatchWrapperDynaStyle",CLASSNAME_FOR_STYLERBOTTOM:"twisterModal_stylerBottom",CLASSNAME_FOR_STYLERTOP:"twisterModal_stylerTop",
CLASSNAME_FOR_SWATCH:"twisterSwatchWrapper",CLASSNAME_FOR_INGRESS:"twisterIngressWrapper",AUI_EVENT_CLOSE_MODAL_PREFIX:"close-twisterModal-",AUI_EVENT_VISIBILITY_PREFIX:"twister-appear-",CLASSNAME_FOR_THIN_WIDTH_OVERRIDE:"thinWidthOverride",DIMENSION_SUB_TYPE:"dimensionDisplaySubType",AUI_EVENT_FOR_COUNTER:"twister_counter-action",EXPANDED_VIEW_ENABLED:"expandedViewEnabled",MIN_HEIGHT_EXPANDED_SECTION:"minHeightForExpandedSection",MAX_HEIGHT_EXPANDED_SECTION:"maxHeightForExpandedSection",MIN_ASINS_FOR_EXPANDED_VIEW:"minAsinForExpandedView",
MIN_ASINS_FOR_EXPANDED_VIEW_TEXT:"minAsinForExpandedViewText",MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE:"minAsinForExpandedViewImage",MIN_ASINS_FOR_EXPANDED_SCROLL:"minAsinForExpandedScroll",MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT:"minAsinForExpandedScrollText",MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE:"minAsinForExpandedScrollImage",SUFFIX_FOR_DROPDOWN_PANEL_PLACEHOLDER:"_placeHolderDivForDD",DIMENSION_VALUE_HAS_ICON:"isIconPresentForDimensionValue",HIDDEN_DIMENSION_DISPLAY_TYPE:"hidden",PRODUCTIZATION_ENABLED:"isProductizationEnabled",
PRODUCTIZATION_VIEW_ENABLED:"isViewProductizationEnabled",PRODUCTIZED_PARENT_VIEW:"parentView",PRODUCTIZED_VIEW_UTIL:"viewUtil",VARIATION_CHANGE:"VARIATION_CHANGE",VARIATION_PEEK:"VARIATION_PEEK",METADATA:"METADATA",PRODUCTIZED_VIEW_SUBTYPE:"PRODUCTIZED_VIEW_METADATA",DP_STATE_VIEW_SUBTYPE:"DETAILPAGE_STATE_VIEW_METADATA",IS_PAGE_ELIGIBLE_FOR_PRODUCTIZATION:"isPageEligibleForProductizationMigration"}});x.when("A","twisterModule","dp-js-logger").register("twister-view-registry",function(u,q,a){var b=
this;b.logger=new a("DpTwisterViewRegistry");var l=u.createClass({init:function(a,e){this.twisterControllerHandle=a;this.externalViewName=e;this.dimensions=a.twisterJSInitData.dimensions;this.dimensionToAsinMap=a.twisterJSInitData.dimToAsinMapData;this.dimensionValues=a.twisterJSInitData.dimensionValuesData;this.dimensionAsinToValuesMap=a.twisterJSInitData.dimensionValuesDisplayData;this.variationValues=a.twisterJSInitData.variation_values;this.asinVariationValues=a.twisterJSInitData.asin_variation_values;
this.parentAsin=a.twisterJSInitData.parent_asin;this.currentDimCombID=a.twisterJSInitData.currentDimCombID;this.currentAsin=a.twisterJSInitData.current_asin;this.isConsolesOrAccessories=a.twisterJSInitData.isConsolesOrAccessories;this.ajaxUrlParams=a.twisterJSInitData.ajaxUrlParams;this.getControllerInterface=function(){function e(a,b,g){return{dimIndex:a,dimValueIndex:b,dimDisplayType:g}}return{handleClick:function(c,b,f){c=e(c,b,f);a.handleExternalViewClick(c,this.externalViewName)},handleMouseOver:function(c,
b,f){c=e(c,b,f);a.handleExternalViewMouseOver(c,this.externalViewName)},handleMouseOut:function(c,b,f){c=e(b);a.handleExternalViewMouseOut(c,c.dimIndex,c.dimValueIndex,this.externalViewName)}}}},updateView:function(a,e,b){},updateViewAfterTwisterUpdate:function(a,e,b){}}),f=A.twisterController;this.createAndRegisterExternalView=function(a){var e=new l(f,a);f.registerExternalView(e,a);b.logger.logCounter("TwisterExternalView_"+a,1);return e};return this});x.when("A","jQuery","twisterModule","dp-js-logger",
"page-refresh:controller","twister-controller","twister-state","twister-string-constants").register("detailPage:RefreshHandler",function(u,q,a,b,l,f,g,e){var m=A.twisterController.twisterModel.twisterState,c=new b("dpPageRegreshHandler"),h={},t=function(a){var b=this;b.clientId=a;b.doPageRefresh=function(g){if(!Array.isArray(g))throw"Incorrect parameters passed to doPageRefresh for clientId "+b.clientId;g=m.getRequestContextForExternalTwisterUpdates(g);try{l.updatePage(g,e.EVENT_TYPE_CLICK)}catch(h){c.logFatal(h,
{message:" Error doing page-refresh for clientId "+a})}};b.getURLParamObject=function(a,c,d){if(!a||null==d)throw"Incorrect parameters passed to getURLParams for clientId "+b.clientId;return{key:encodeURIComponent(a),value:encodeURIComponent(c),isPersistent:d}}};return{getHandlerInstance:function(a){if(null==a||""==a)throw"Incorrect clientID passed to getHandlerInstance of dpRefreshHandler";h[a]||(h[a]=new t(a));return h[a]}}});x.when("A","jQuery","detailPage:RefreshHandler","twister-string-constants").register("your-module-name",
function(u,q,a,b){A.handleClickForMyButton=function(){for(var b=[],f="",g="",e=0,m=arguments.length;e<m;e++)g=arguments[e],0==e?f=a.getHandlerInstance(g):(g=f.getURLParamObject(g[0],g[1],g[2]),b.push(g));f.doPageRefresh(b)}});x.when("A","jQuery","dp-ajax-prefetch","detail-page-framework","dp-js-logger","twister-string-constants","page-refresh:meta-cache","page-refresh:page").register("page-refresh:controller",function(u,q,a,b,l,f,g,e){var m={intermediateEOS:1,EOS:1},c=new l("dpTwister");return new function(){function h(a,
d){if(!(1<d.recordImpressionPending)){var e=d.impressionCallbackData&&d.impressionCallbackData.relatedRequestID,b="/gp/twister/impression.html/?relatedRequestID="+e;e?u.delay(function(){u.get(b,{success:function(a){c.logCounter("dpTwisterImpression",1)},timeout:4E4,error:function(a,k,d){c.logCounter("dpTwisterImpressionFailed",1)}})},1500):c.logFatal("prefetchRequestId does not exists. twister prefetch ajax requests are not returning the metadata.");d.recordImpressionPending++;g.set(a,d)}}function t(a,
d,c){"undefined"===typeof d.forceFullPrefetch&&(d.forceFullPrefetch=c||f.NO,g.set(a,d));return d.forceFullPrefetch===f.NO&&r.metadata[a.mType]&&!r.metadata[a.mType].fullyPrefetchable}function p(a,d){n(a,function(a){e.executeClientFeatures(a,d)})}function n(a,d){var c=[a];a.relatedContext&&c.push(a.relatedContext);q.each(c,function(a,k){d.apply(r,[k])})}function w(k,c){n(k,function(k){e.fadeInFeatures(k);var b=k.uniqueID,n=k.url;md=g.get(k);r.newPrefetchWeblab&&md.prefetchSent&&t(k,md)&&(b+="_prefetch_1",
n+="&prefetchParam=1",md.hotFeaturesPending=!0);md.requestSent=!0;g.set(k,md);var h=r.newPrefetchWeblab&&c===f.EVENT_TYPE_CLICK;a.getInstance("dpTwister",b,n,d,k,k.doNotAbort).getContent(h)})}var r=this;r.metadata={};r.newPrefetchWeblab=!1;r.page=e;r.twisterPSCParam="psc";var d={chunk:function(a,d){var c=a.ASIN,b=a.Value,n=a.FeatureName;if(!m[n]){var h=g.get(d);"twister-request-metadata"===n?(h.impressionCallbackData=u.parseJSON(b.content[n]),g.set(d,h)):e.refreshFeature(c,n,b)}},success:function(k,
c,e,b){k=g.get(b);k.hotFeaturesPending&&(k.hotFeaturesPending=!1,g.set(b,k),a.getInstance("dpTwister",b.uniqueID+"_prefetch_2",b.url+"&prefetchParam=2",d,b,b.doNotAbort).getContent());k.recordImpressionPending&&h(b,k)},error:function(a,d,e){Twister.$("#variations-overlay").hide();Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());c.logFatal(d+" "+e)},abort:function(a){c.logFatal(" Ajax aborted: "+a)},timeout:4E4};r.prefetchPage=function(k,c){n(k,function(k){var e=
k.uniqueID,b=k.url,n=g.get(k);n.requestSent||(t(k,n,c)&&(e+="_prefetch_1",b+="&prefetchParam=1"),n.prefetchSent=!0,n.recordImpressionPending=n.recordImpressionPending||1,n.requestSent=!0,g.set(k,n),a.getInstance("dpTwister",e,b,d,k,k.doNotAbort).prefetchContent())})};r.updatePage=function(a,d){if(d===f.EVENT_TYPE_CLICK||d===f.EVENT_TYPE_DROPDOWN_CHANGE){if(!a.partialState){if(b.callbacks["sims-widget_feature_div"])b.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());e.startMeasurement(a)}w(a,
d)}p(a,d)};r.reloadPage=function(a){var d;if(A.location.search){d=A.location.search;var c={};d=d.substring(d.indexOf("?")+1).split("&");for(var e=0;e<d.length;e++){var b=d[e].split("=");b[0]&&0<=b[0].length&&(c[decodeURIComponent(b[0])]=decodeURIComponent(b[1]))}d=c}var n,c="/dp/"+a.childAsin;a.partialState?d[r.twisterPSCParam]&&delete d[r.twisterPSCParam]:d[r.twisterPSCParam]=1;(a="?"+q.param(d))&&c&&(n=c+a);A.location.href=n};r.init=function(a){r.newPrefetchWeblab=a.newPrefetchWeblab;q.each(a.contextMetaData,
function(a,k){if(k.elementList){for(var d=k.elementList.length,c=!0,e=0;e<d;e++)if(!k.elementList[e].isPrefetchable){c=!1;break}r.metadata[a]||(r.metadata[a]={});r.metadata[a].fullyPrefetchable=c}});e.init(a)}}});x.when("A","jQuery","page-refresh-measurement","twister-string-constants","dp-js-logger").register("page-refresh:page",function(u,q,a,b,l){var f=new l("dpTwister");return new function(){var g=this;g.measurement=B;g.config={partial:{},full:{},parent:{},master:{}};g.dimensionsDisplayType=B;
g.initializeMeasurement=function(e){var b=e.measurement;g.dimensionsDisplayType=e.dimensionsDisplayType;g.measurement=new a(q,b.atf.marker,b.cf.marker);g.measurement.init(e.storeID,e.productGroupID)};g.init=function(a){g.initializeMeasurement(a);q.each(a.contextMetaData,function(a,c){var e=[],f={},p=c.elementList||[],n=p.length;f[b.EVENT_TYPE_MOUSEOVER]={};f[b.EVENT_TYPE_CLICK]={};for(var w=0;w<n;w++){var r=q("#"+p[w].divToUpdate);e.push("#"+p[w].divToUpdate);r.length&&p[w].customClientFunction&&
(p[w].updateOnHover&&(f[b.EVENT_TYPE_MOUSEOVER][p[w].divToUpdate]=r.attr("customfunctionname")),f[b.EVENT_TYPE_CLICK][p[w].divToUpdate]=r.attr("customfunctionname"))}g.config[a].affectedFeatures=e.join(",");g.config[a].clientFeatures=f})};g.startMeasurement=function(a){var m,c,h=g.dimensionsDisplayType;null!=a.divMetaData&&(m=a.divMetaData.dimDisplayType);"undefined"!==typeof a.currentDimCombID&&(c=a.currentDimCombID.split(b.CHAR_UNDERSCORE).length);this.measurement.start(a.newAsin,m,c,h)};g.fadeInFeatures=
function(a){q(this.config[a.mType].affectedFeatures).css({opacity:.5})};g.executeClientFeatures=function(a,m){q.each(g.config[a.mType].clientFeatures[m===b.EVENT_TYPE_CLICK||m===b.EVENT_TYPE_DROPDOWN_CHANGE?b.EVENT_TYPE_CLICK:b.EVENT_TYPE_MOUSEOVER],function(c,b){try{eval("var twisterCustomFunction = "+b+";"),twisterCustomFunction(a.reactID,DetailPage.StateController,function(){g.measurement.stampImageLoad(a.newAsin)})}catch(m){f.logFatal(m)}})};g.refreshFeature=function(a,b,c){var g,t;try{b&&c&&
c.content&&(t=c.content[b],"undefined"!==typeof t&&(g=q("#"+b),g.html(t),g.css({opacity:""})))}catch(p){b=b||"NoFeatureName",f.logFatal(p,{message:" Error in feature "+b})}this.measurement.stampFeature(b,a)}}});x.when("twister-string-constants").register("page-refresh:meta-cache",function(u){return{data:{},set:function(q,a){var b=this.getKey(q);return b?this.data[b]=a:B},get:function(q){q=this.getKey(q);return this.data[q]||{}},getKey:function(q){var a;q&&q.newAsin&&(a=q.mType===u.MTYPE_PARENT?q.mType+
q.newAsin:q.mType===u.MTYPE_MASTER?q.mType+q.id:q.mType+q.newAsin+q.reactID);if(!a)throw"Twister PageRefresh::MetaCache:getKey incorrect context passed.";return a}}});x.when("A","jQuery").register("page-refresh-ajax-scope",function(u,q){return function(a,b,l){this.scopeName=b;this.url=l;ues("t0",b,A.newTwisterInteractionStartTime);ues("ctb",b,"1");this.signalMarker=function(a){!this.markers[a]||0>=this.markers[a].conditions||0===--this.markers[a].conditions&&"function"==typeof this.markers[a].handler&&
this.markers[a].handler()};this.addlongPoleTag=function(a,e){a=a.toLowerCase();this.markers[a]&&0==this.markers[a].conditions&&0==this.markers[a].conditions&&A.ue&&"function"===typeof ue.tag&&ue.tag(e)};this.postData=function(){var b=this.scopeName;a.ajax({url:this.url,dataType:"text",timeout:4E4,error:function(){},success:function(a,m,c){ues("id",b,a);uex("ld",b)}})};var f=this;this.markers={image:{conditions:1,handler:function(){uet("ne",b);f.signalMarker("af")}},af:{conditions:Twister.atfMarkerCount?
Twister.atfMarkerCount:2,handler:function(){uet("af",b);uet("cf",b);f.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",b);f.postData()}}}}});x.when("A","jQuery").register("page-refresh-cache",function(u,q){return function(){this.data={};this.getValue=function(a,b){return null==this.data[a]?null:b?this.data[a][b]:this.data[a]};this.setValue=function(a,b,l){if(null==this.data[a]||this.data[a].pending)this.data[a]={};this.data[a][b]=l};this.clear=
function(a){this.data[a]=null}}});x.when("A","jQuery","page-refresh-refresh","page-refresh-measurement","page-refresh-model","detail-page-framework").register("page-refresh-manager",function(u,q,a,b,l,f){return function(g,e,m,c,h){this.$=g;this.model={};this.refresh=new a(g,c,h);this.contextMetaData=e;this.measurement=new b(g,m.atfMarker,m.cfMarker);this.init=function(a,c){for(var e in this.contextMetaData)this.model[e]=new l(g,this.contextMetaData[e].AJAXUrl,this.contextMetaData[e].elementList,e.toString());
this.measurement.init(a,c)};this.getModelCacheSize=function(a){var c=0;this.model.hasOwnProperty(a)&&g.each(this.model[a].cache.data,function(a,e){e.hasOwnProperty("cacheStatus")&&("preFetched"!==e.cacheStatus&&"completeFetched"!==e.cacheStatus||c++)});return c};this.react=function(a,c){for(var e in this.model)c||this.model[e].finishAjaxCall(this.model[e].currentRequestId,1);e=0;for(var b=a.length;e<b;e++){var g=a[e];c||this.model[g.type].finishAjaxCall(this.model[g.type].currentRequestId,2);var d=
this.model[g.type].getUpdateData(this,g);this.refresh.startRefresh(d);this.model[g.type].makePendingCallBacks()}};this.pageRefreshHandler=function(a,c,e,b){if(!b.noRefresh)for(var h in b.content)try{this.refresh.doRefresh(h,b.content[h]);if(e.isFinishRefreshReq)if(this.refresh.finishRefresh(h),"session-similarities_feature_div"==h||"purchase-similarities_feature_div"==h||"buyxgety_feature_div"==h){if(f.callbacks[h])f.callbacks[h]()}else"zeroes-buy-box_feature_div"===h&&Twister.isIEBrowser(g)&&g("#"+
h).css({opacity:"",zoom:1});this.measurement.stampFeature(c,a)}catch(d){}}}});x.when("A","jQuery","page-refresh-ajax-scope").register("page-refresh-measurement",function(u,q,a){return function(b,l,f){this.atfMarker=l;this.cfMarker=f;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=function(a,e){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s="+a+"&pgid="+e+"&deviceType="+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="&ptd="+Twister.productTypeName)};this.start=
function(g,e,m,c){if(A.ue){this.scopeCount[g]||(this.scopeCount[g]=0);var h=g+(this.scopeCount[g]+1);this.scopeCount[g]++;var f=this.url;e&&(f+="&dimensionType="+e);"undefined"!==typeof m&&(f+="&dimensionCount="+m);"undefined"!==typeof c&&(f+="&dimensionsDisplayType="+c);this.ajaxScopes[g]=new a(b,h,f)}};this.stampImageLoad=function(a){this.ajaxScopes[a]&&(this.ajaxScopes[a].signalMarker("image"),Twister.cfImageLongPollTag&&this.ajaxScopes[a].addlongPoleTag("cf",Twister.cfImageLongPollTag))};this.stampFeature=
function(a,e){this.ajaxScopes[e]&&(a===this.atfMarker&&this.ajaxScopes[e].signalMarker("af"),a===this.cfMarker&&(this.ajaxScopes[e].signalMarker("cf"),Twister.cfHtmlLongPollTag&&this.ajaxScopes[e].addlongPoleTag("cf",Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(a,e){this.ajaxScopes[e]&&uet(a,this.ajaxScopes[e].scopeName)}}});x.when("A","jQuery","page-refresh-cache").register("page-refresh-model",function(u,q,a){return function(b,l,f,g){this.$=b;this.pendingCallBacks={};this.pendingCallBacksASIN=
"";this.cache=new a;this.AJAXUrl=l;this.AJAXRequests={};this.requestIdHash={};this.elementList=f;this.currentRequestId=null;this.pendingCallbacksList={};this.immediateCallbacksList=[];this.elementsToRefresh=[];this.modelType=g;this.getNewRequestId=function(){for(var a=0;100>a;a++){var b=a.toString();if(!this.requestIdHash.hasOwnProperty(b))return this.requestIdHash[b]=!0,b}};this.removeRequestId=function(a){"string"!=typeof a&&(a=a.toString());this.requestIdHash.hasOwnProperty(a)&&delete this.requestIdHash[a]};
this.executeActionItems=function(a,b,c,g,f){c=c.divToUpdate;for(var p=0,n=a.length;p<n;p++){var w=a[p];if("addToImmediate"==w)w={},w.id=b,w.key=c,this.immediateCallbacksList.push(w);else if("addToElementsRefresh"==w||"addToElementsRefreshWithLoading"==w)f.push(c+("addToElementsRefreshWithLoading"==w?",loadingBar":""));else if("updateCache"==w)w={handler:this,callbackType:"updateCache"},this.addToPendingCallbacksList(b,c,w);else if("customClientFunction"==w){var w={handler:this,callbackType:"customClientFunction"},
r={};r.refreshHandler=g;w.callbackParams=r;this.addToPendingCallbacksList(b,c,w)}else if("doRefreshAndFinish"==w||"doRefresh"==w)w={},w.handler=g,w.callbackType="doRefresh",r={isFinishRefreshReq:1},w.callbackParams=r,this.addToPendingCallbacksList(b,c,w)}};this.getAjaxCallContext=function(a,b,c,g,f,p){b=[];var n=f=0,w="notFetched";this.cache.getValue(a,"cacheStatus")&&(w=this.cache.getValue(a,"cacheStatus"));for(var r=0,d=this.elementList.length;r<d;r++){var k=this.elementList[r],v=k.divToUpdate,
y=[],z=1,l=0,q=0,u=0;"0"==k.isPrefetchable&&(z=0,n=1);"1"==k.customClientFunction&&(l=1,z=0);"1"==k.updateOnHover&&(q=1);"1"==k.loadingBar&&(u=1);if(!p||q){if(c)if(l||!z||this.cache.getValue(a,v))continue;else y.push("updateCache"),f||(f=1);else l?(y.push("customClientFunction"),y.push("addToImmediate")):this.cache.getValue(a,v)?(y.push("doRefresh"),y.push("addToImmediate")):(y.push("updateCache"),y.push("doRefreshAndFinish"),u?y.push("addToElementsRefreshWithLoading"):y.push("addToElementsRefresh"),
f||(f=1));(1==c&&"preFetched"==w||0==c&&"completeFetched"==w||1==c&&"completeFetched"==w)&&1==f&&(f=0);this.executeActionItems(y,a,k,g,b)}}(1==c&&"preFetched"==w||0==c&&"completeFetched"==w||1==c&&"completeFetched"==w)&&1==f&&(f=0);p&&f&&(f=0);f&&this.cache.setValue(a,"cacheStatus",c?n?"preFetching":"completeFetching":"preFetched"==w?"hotFeaturesFetching":"completeFetching");a={};a.isAjaxCallReq=f;a.elementsToRefresh=b;return a};this.getUpdateData=function(a,b){for(var c=b.idList,g=[],f=[],p=[],n=
[],w=0,r,d,k,v,y,z=1,l=0,q=c.length;l<q;l++){d=c[l].id;k=c[l].asin;v=c[l].isPrefetch;r=c[l].requiredDivs;r=this.getAjaxCallContext(d,k,v,a,r,c[l].isHover);y=r.elementsToRefresh;for(var u=0,I=y.length;u<I;u++)n.push(y[u]);if(r.isAjaxCallReq){w=1;v=v?1:"hotFeaturesFetching"==this.cache.getValue(d,"cacheStatus")?2:0;if(0==v||2==v)z=0;f.push(d);p.push(k);g.push(v)}}if(w){c={};c.asinList=p.join(",");c.id=f.join(",");c.prefetchParam=g.join(",");c.managerHandler=a;c.modelType=this.modelType;c.containsOnlyPrefetches=
z;try{this.doAjaxCall(c)}catch(F){}}this.elementsToRefresh=n.slice();return n};this.makeCallback=function(a,b,c,g){var f=c.handler,p=c.callbackType;c=c.callbackParams;null==g&&(g=this.cache.getValue(a,b));if("function"==typeof f)f(a,b,c,g);else if("doRefresh"==p)f.pageRefreshHandler(a,b,c,g);else if("customClientFunction"==p)try{f.callCustomClientFunction(a,b,c,g)}catch(n){}else"updateCache"==p&&f.updateCache(a,b,c,g)};this.makePendingCallBacks=function(a,b,c){var g;if(a){if("object"===typeof this.pendingCallbacksList[a])if(b){g=
this.pendingCallbacksList[a][b];if(!g){g=[];var f={handler:this,callbackType:"updateCache"};g.push(f)}for(var p=0,n=g.length;p<n;p++){f=g[p];try{this.makeCallback(a,b,f,c)}catch(w){}}this.pendingCallbacksList[a][b]&&delete this.pendingCallbacksList[a][b]}else{for(f in this.pendingCallbacksList[a])for(g=this.pendingCallbacksList[a][f],p=0,n=g.length;p<n;p++)this.makeCallback(a,b,callbackargs,c);delete this.pendingCallbacksList[a]}}else{a=0;for(n=this.immediateCallbacksList.length;a<n;a++)b=this.immediateCallbacksList[a],
this.makePendingCallBacks(b.id,b.key,null);this.immediateCallbacksList=[]}};this.addToPendingCallbacksList=function(a,b,c){this.pendingCallbacksList.hasOwnProperty(a)||(this.pendingCallbacksList[a]={});this.pendingCallbacksList[a].hasOwnProperty(b)||(this.pendingCallbacksList[a][b]=[]);this.pendingCallbacksList[a][b].push(c)};this.doAjaxCall=function(a){Twister.useVariationsOverlay&&0===Twister.remainingAjaxCalls&&Twister.$("#variations-overlay").show();Twister.remainingAjaxCalls+=1;var b=this.getNewRequestId();
this.currentRequestId=b;var c=a.managerHandler,g=this.AJAXUrl+a.asinList+"&isFlushing=2&id="+a.id+"&prefetchParam="+a.prefetchParam+"&mType="+a.modelType;Twister.isInstaTwisterEnabled&&(g+="&dpEnvironment="+Twister.dpEnvironment);var f={};if(Twister.useAuiAjax){var p=this,g=Twister.A.ajax(g,{method:"get",chunk:function(a){p.AJAXHandler(null,a,AJAXFlushUtils.ajaxReadyState.LOADING)},success:function(){p.AJAXHandler(null,null,AJAXFlushUtils.ajaxReadyState.DONE);--Twister.remainingAjaxCalls;0===Twister.remainingAjaxCalls&&
Twister.$("#variations-overlay").hide()},error:function(){Twister.$("#variations-overlay").hide();--Twister.remainingAjaxCalls;Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());Twister.printConsoleLogs&&console.logs("ajax call failed")},timeout:4E4});f.streamingXhrRef=g}f.ajaxParams=a;f.managerHandler=c;this.AJAXRequests[b]=f};this.abortAllAjaxCalls=function(){for(requestId in this.requestIdHash)this.finishAjaxCall(requestId,!0)};this.finishAjaxCall=function(a,
b){if(a){var c=this.AJAXRequests[a],g=c.streamingXhrRef,f=c.ajaxParams,c=f.id.split(","),f=f.containsOnlyPrefetches;if(1!=b||!f){this.pendingCallbacksList={};this.immediateCallbacksList=[];if(b)for(g&&"function"===typeof g.abort&&g.abort(AJAXFlushUtils.ajaxHandlerCode.ABORT),g=0,f=c.length;g<f;g++)if(this.cache.getValue(c[g])){var p=this.cache.getValue(c[g],"cacheStatus");"preFetching"==p||"completeFetching"==p?b?this.cache.clear(c[g]):this.cache.setValue(c[g],"cacheStatus","preFetching"==p?"preFetched":
"completeFetched"):"hotFeaturesFetching"==p&&this.cache.setValue(c[g],"cacheStatus",b?"preFetched":"completeFetched")}this.elementsToRefresh=[];this.removeRequestId(a);delete this.AJAXRequests[a];this.currentRequestId=null}}};this.updateCache=function(a,b,c,g){"intermediateEOS"==b||"EOS"==b?(b=this.cache.getValue(a,"cacheStatus"),"preFetching"==b?this.cache.setValue(a,"cacheStatus","preFetched"):"completeFetching"!=b&&"hotFeaturesFetching"!=b||this.cache.setValue(a,"cacheStatus","completeFetched")):
this.cache.setValue(a,b,g)};this.callCustomClientFunction=function(a,g,c,h){var f=b("#"+g).attr("customFunctionName");if(f){var p=c.refreshHandler,n=DetailPage.StateController.getState().current_asin;h=function(){p.measurement.stampImageLoad(n)};c=Twister.useAui?h:null;if(f=Twister.useAui?eval("var customFunction = "+f+"; customFunction")(a,DetailPage.StateController,c):eval(f)(a,DetailPage.StateController,c)){c={isFinishRefreshReq:0};if(!Twister.useAui){var w;if("twister-main-image"==g&&n){w=document.getElementById("main-image");
if(!w){var r=document.getElementById("main_image_0");r&&(w=(w=r.getElementsByTagName("img"))?w[0]:null)}w&&(w.onload=h)}}p.pageRefreshHandler(a,g,c,f);Twister.useAui||-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&w&&w.complete&&h()}}};this.AJAXHandler=function(a,b,c){if(c==AJAXFlushUtils.ajaxReadyState.DONE)return this.finishAjaxCall(this.currentRequestId,0),AJAXFlushUtils.ajaxHandlerCode.OK;for(a=0;1>a;a++){var g=b;c=g.ASIN;b=g.Value;g=g.FeatureName;"intermediateEOS"==g||"EOS"==g?this.updateCache(c,
g,null,b):this.makePendingCallBacks(c,g,b)}return AJAXFlushUtils.ajaxHandlerCode.OK};this.AJAXErrorHandler=function(a,b,c){(a=a.xhrStatus)||(a=c);return a}}});x.when("A","jQuery").register("page-refresh-refresh",function(u,q){return function(a,b,l){this.$=a;this.loadingBarHtml=b;this.loadingBarHtml2=l;this.doRefresh=function(b,g){a("#"+b).html(g)};this.startRefresh=function(b){if(b)for(var g=0,e=b.length;g<e;g++){var m=b[g].split(","),c=m[0],h=!0,t=!1;if("buy-box_feature_div"==c||"more-buying-choices_feature_div"==
c||"session-similarities_feature_div"==c&&a.browser.msie)h=!1;1<m.length&&"loadingBar"==m[1]&&(t=!0);h&&!Twister.useVariationsOverlay&&a("#"+c).css("opacity","0.5");t&&this.appendLoadingBar(c)}};this.appendLoadingBar=function(b){var g=a("#"+b);"moreBuyingChoices_feature_div"==b||g.attr("loadingBarSet")||(g.attr("loadingBarSet","1"),"more-buying-choices_feature_div"==b?(g=a("#more-buying-choice-content-div"),g.html(this.loadingBarHtml2)):(b=g.find("h2, h1, b"),0<b.length&&(b=a(b[0]),b.css({display:"inline",
padding:"0px"}),b.after(a(this.loadingBarHtml)))))};this.finishRefresh=function(b){var g=!0,e=!0;"buy-box_feature_div"==b&&(e=g=!1);if("session-similarities_feature_div"==b&&a.browser.msie||"more-buying-choices_feature_div"==b)g=!1;var m="0";"more-buying-choices_feature_div"==b&&(m="1");g&&a("#"+b).css({opacity:"",zoom:m});e&&a("#"+b).removeAttr("loadingBarSet")}}});x.when("A","twisterModule","dp-js-logger").execute(function(u,q,a){var b=u.$,l=u.state("URL-Refresh-State");q=new a(null,this,!0);l&&
l.isUrlRefreshEnable&&(A.history&&A.history.replaceState?(q.logImpression(q.eventTypes.HISTORY_API_SUPPORTED,null),u.on("a:pageUpdate",function(){if(DetailPage&&DetailPage.StateController&&"function"===typeof DetailPage.StateController.getState){var a=DetailPage.StateController.getState()||{},g=Twister&&Twister.isAssemblyVariationsEnabled,e=a.current_asin;if(e){for(var m=A.location.search,c={},m=m.substring(m.indexOf("?")+1).split("&"),h=0;h<m.length;h++){var t=m[h].split("=");t[0]&&0<=t[0].length&&
(c[decodeURIComponent(t[0])]=decodeURIComponent(t[1]))}g&&(c.customId=e);"th"in c||(c.th=1);"psc"in c&&delete c.psc;h=m=!1;for(i=0;i<a.dimensionSelectionData.length;i++)if(t=a.dimensionSelectionData[i],1==parseInt(t.isRequired,10)&&(h=!0,0==parseInt(t.isSelected,10))){m=!0;break}!m&&h&&(c.psc=1);a="";c=(a=b.param(c))&&0<a.length?"?"+a:a;urlPath=g?A.location.pathname:A.location.pathname.replace(new RegExp(l.landingAsin,"i"),e);A.history.replaceState({},document.title,urlPath+c);l.landingAsin=e}}})):
q.logImpression(q.eventTypes.HISTORY_API_NOT_SUPPORTED,null))});x.when("A","twister-string-constants").register("twister-productization-view",function(u,q){return function(a){var b=this;b.twister=B;b.twisterUtil=a.util;b.handleClick=function(a,b){b.subType=q.PRODUCTIZED_VIEW_SUBTYPE;this.twister.metaData(b);this.twister.dimensionChanged(a)};(function(){b.twister=a.registerActive({viewAttribution:"DetailPage",viewName:"TwisterDesktopProductizationView"},{updateView:function(a,b){}})})()}});x.when("A",
"a-dropdown","twister-thumbnailModule","twister-utils","twister-string-constants").register("twister-dimension-views-dropdown",function(u,q,a,b,l){return function(f,g){function e(){var a=l.DROPDOWN_DIV_NAME+c.dimName,b={},e;b[l.STRING_DIM_INDEX]=c.dimOrder;e=function(a){c.twisterControllerHandle&&c.twisterControllerHandle.handleDropdownOnChange(a,b)};x.when("A").execute(function(c){c.on(l.AUI_DROPDOWN_EVENT_PREFIX+a,e)})}function m(){for(var a,b=0,e=c.dimensionsMap.length;b<e;b++)a=c.dimensionsMap[b],
c.thumbnailHandle.attach(a),c.thumbnailHandle.preloadAllThumbnails(a)}var c=this,h=u.$;c.dimType="dropdown";c.AuiDropdownHandle=q;c.thumbnailHandle=a;c.dimName;c.dimOrder;c.dimStyleData;c.dimensionsMap;c.dimNameDisplayString;c.dimValuesDisplayData;c.twisterControllerHandle;c.isTablet;c.updateView=function(a){switch(a[l.STRING_EVENT_TYPE]){case l.EVENT_TYPE_MOUSEOUT:case l.EVENT_TYPE_DROPDOWN_CHANGE:case l.EVENT_TYPE_CLICK:var e,n,g,f;n=l.ID_SELECTOR+c.dimName+l.CHAR_UNDERSCORE+l.INDEX_FOR_SELECT_OPTION;
var d=l.NATIVE_DROPDOWN_DIV_PREFIX+l.DROPDOWN_DIV_NAME+c.dimName,k=h(d).val().split(",")[0],v=a[l.STRING_EVENT_TYPE],m=a[l.STRING_EVENT_DATA][l.STRING_DIMENSION_SELECTION_DATA];a=b.getDimStyleData(a.dimCombID,c.dimValuesDisplayData.length,c.dimOrder,c.twisterControllerHandle.twisterAvailabilityCache,c.displayConfigStylesData);0===m[c.dimOrder][l.STRING_IS_SELECTED]&&k!==l.INDEX_FOR_SELECT_OPTION&&"undefined"!==typeof c.AuiDropdownHandle&&c.AuiDropdownHandle.getSelect(d).val("-1");v!==l.EVENT_TYPE_CLICK&&
v!==l.EVENT_TYPE_DROPDOWN_CHANGE||0!==m[c.dimOrder][l.STRING_IS_REQUIRED]||1!==m[c.dimOrder][l.STRING_IS_SELECTED]||h(n).remove();k=0;for(m=a.length;k<m;k++)if(e=a[k],n=l.NATIVE_DROPDOWN_DIV_PREFIX+c.dimName+l.CHAR_UNDERSCORE+k,e=e[l.STRING_STYLE],g=h(n).get(0).className,e===l.CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION&&(f=h(n).attr("value"),h(d).val()!==f&&c.AuiDropdownHandle.getSelect(d).val(f)),g!==e)try{g={},g[l.STRING_CSS_CLASS]=e,g[l.STRING_NATIVE_CSS_CLASS]=e,c.AuiDropdownHandle.updateOption(n,
g)}catch(z){}c.isTablet&&(v===l.EVENT_TYPE_CLICK||v===l.EVENT_TYPE_DROPDOWN_CHANGE)&&c.thumbnailHandle&&c.thumbnailHandle.update(c.dimName)}};(function(){var a;c.dimOrder=g[l.STRING_DIM_ORDER];c.dimName=g[l.STRING_DIM_NAME];c.dimensionsMap=g[l.STRING_DIMENSIONS_MAP];c.dimNameDisplayString=g[l.STRING_DIMENSION_DISPLAY_STRING];c.dimValuesDisplayData=g[l.STRING_DIMENSION_VALUES_DATA];c.twisterControllerHandle=g[l.STRING_TWISTER_CONTROLLER_HANDLE];c.displayConfigStylesData=g[l.STRING_DISPLAY_CONFIG_STYLES_DATA];
c.initialTwisterState=g[l.STRING_TWISTER_INITIAL_STATE_KEY];c.isTablet=f.isTablet;a=c.initialTwisterState.getCurrentDimCombID();c.dimStyleData=b.getDimStyleData(a,c.dimValuesDisplayData.length,c.dimOrder,c.twisterControllerHandle.twisterAvailabilityCache,c.displayConfigStylesData);e();c.isTablet&&m();if("undefined"!==typeof TwisterNonJs){a=TwisterNonJs.handleDropDown.length;for(var h=0;h<a;h++)TwisterNonJs.handleDropDown[h]=function(){}}})()}});x.when("A").register("twister-dimension-views-singleton",
function(u){return function(q,a){this.updateView=function(a){}}});x.when("A","twister-dimension-views-unavailablePopover","twister-utils","twister-string-constants","aui-style-override","dp-js-logger").register("twister-dimension-views-swatch",function(u,q,a,b,l,f){return function(g,e){function m(){u.declarative(Twister.isImmersiveExperience?b.AUI_EVENT_FOR_SWATCHTHUMB+"-"+k.dimOrder:b.AUI_EVENT_FOR_SWATCHTHUMB,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_MOUSEENTER,b.EVENT_TYPE_MOUSELEAVE,b.EVENT_TYPE_MOUSEDOWN,
b.EVENT_TYPE_TOUCHSTART],function(a){a.type===b.EVENT_TYPE_CLICK?k.twisterControllerHandle&&k.twisterControllerHandle.handleClick(a.data):a.type===b.EVENT_TYPE_MOUSEENTER?k.twisterControllerHandle&&k.twisterControllerHandle.handleMouseOver(a.data):a.type===b.EVENT_TYPE_MOUSELEAVE?k.twisterControllerHandle&&k.twisterControllerHandle.handleMouseOut(a.data,a.data[b.STRING_DIM_INDEX],a.data[b.STRING_DIM_VALUE_INDEX]):!k.newPrefetchWeblab||a.type!==b.EVENT_TYPE_MOUSEDOWN&&a.type!==b.EVENT_TYPE_TOUCHSTART||
k.twisterControllerHandle&&k.twisterControllerHandle.handleClickPrediction(a.data,"T1"===k.newPrefetchWeblab?b.YES:b.NO)})}function c(){for(var a,d,c=0,e=k.dimData.length;c<e;c++)if(a=k.dimData[c],d=n(c))a=a[b.STRING_STYLE],w(c,d,a),r(c,a)}function h(a,d){var c=DetailPage.StateController.getState().selected_variations,e=DetailPage.StateController.getState()[b.STRING_DIMENSION_SELECTION_DATA];if(d)v("#variation_"+k.dimName+" .selection").html(a).addClass("hover");else{var n=v("#variation_"+k.dimName+
" .selection");v("#"+b.TWISTER_MODAL_ID_PREFIX+k.dimName+" .selection");if(k.sizeSwatch){var g="";p(e,k.dimOrder)&&""===a||(null==c[k.dimName]?t(e,k.dimOrder)&&(g=a):g=c[k.dimName]);n.html(g).removeClass("hover")}else v("#variation_"+k.dimName+" .selection").html(a).removeClass("hover")}}function t(a,k){var d=!1;1==a[k][b.STRING_IS_SELECTED]&&(d=!0);return d}function p(a,k){var d=!1;1==a[k][b.STRING_IS_REQUIRED]&&(d=!0);return d}function n(a){var d=Twister.isImmersiveExperience?v("."+b.TWISTER_SWATCH_CLASS_PREFIX+
k.dimName+b.CHAR_UNDERSCORE+a):v(b.ID_SELECTOR+k.dimName+b.CHAR_UNDERSCORE+a);a=[];var c;if(0<d.length){a=d.get(0).className.split(" ");for(var d=0,e=a.length;d<e;d++){var n=a[d];if(0===n.indexOf("swatch")){c=n;break}}}return c}function w(a,d,c){a=Twister.isImmersiveExperience?v("."+b.TWISTER_SWATCH_CLASS_PREFIX+k.dimName+b.CHAR_UNDERSCORE+a):v(b.ID_SELECTOR+k.dimName+b.CHAR_UNDERSCORE+a);d!==c&&v(a).removeClass(d).addClass(c);l.doOverride(c,a)}function r(a,d){var c=Twister.isImmersiveExperience?
v("."+b.TWISTER_SWATCH_CLASS_PREFIX+k.dimName+b.CHAR_UNDERSCORE+a+" ."+b.PRICE_SLOT_CLASS_NAME):v(b.ID_SELECTOR+k.dimName+b.CHAR_UNDERSCORE+a+"_price"),e=b.CLASS_FOR_PRICE_SECONDARY;if(d===b.CLASS_FOR_SWATCH_SELECT||d===b.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||d===b.CLASS_FOR_SWATCH_HOVER)e=b.CLASS_FOR_PRICE_SELECTED;c.length&&c.removeClass(b.CLASS_FOR_PRICE_SECONDARY+" "+b.CLASS_FOR_PRICE_SELECTED).addClass(e)}function d(d){var c={};c.asinList=d;v("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",k.twisterDimmedOpacity);
c.dimTriggeringDimSum=k.dimName;c.dimType=k.dimType;c.dimSubType=k.dimSubType;c.dimCombId=DetailPage.StateController.getState().currentDimCombID;c.executeChunk=function(){var d=DetailPage.StateController.getState().currentDimCombID,b=d.split("_"),e=c.dimCombId.split("_");if(c.dimCombId===d)return!0;if(!a.isPartialState(k.dimensionsMap.length)){for(var d=k.dimensionsMap.length,n=!0,g=0;g<d;g++)if(g!==parseInt(k.dimOrder)&&e[g]!==b[g]){n=!1;break}return n}return!1};c.chunk=function(a){for(var d=v(".twister_"+
k.dimName+"_"+k.twisterJSInitData.asin_variation_values[a.ASIN][k.dimName]+" .twisterSlotDiv"),c="",b=0;a.Value.content.twisterSlotDiv[b];)"IMAGE"===k.dimSubType&&(c+="<div>"),c+=a.Value.content.twisterSlotDiv[b],"IMAGE"===k.dimSubType&&(c+="</div>"),b++;d.html(c)};c.success=function(a,k,d,c){v("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",1)};c.error=function(){v("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",1)};c.abort=function(){v("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",1)};Twister.dimensionalSummaryModule.fetchDimSumData(c)}
var k=this,v=u.$;k.dimType="swatch";k.dimSubType="";k.dimName;k.dimOrder;k.dimData;k.dimensionsMap;k.dimNameDisplayString;k.dimValuesDisplayData;k.twisterControllerHandle;k.maxSwatchLimitForImmersive;k.finalLimitForSwatches;k.twisterJSInitData=g;k.newPrefetchWeblab=!1;k.landingDimCombId;if(Twister.multiDimensionWeblabEnabled)var y="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&(y="ImmersiveSwatchSingleDimensionView");k.logger=new f(y,this,!0);k.sizeSwatch=!1;k.updateView=function(d){if(d[b.STRING_EVENT_TYPE]===
b.EVENT_TYPE_MOUSEOVER){var c,e,g,f,m=d[b.STRING_EVENT_DATA],y=m[b.STRING_EVENT_DIM_INFO],l=y[b.STRING_DIMENSION_VALUES_DATA]!=B?y[b.STRING_DIMENSION_VALUES_DATA][k.dimOrder]:"",m=m[b.STRING_EVENT_DIV_METADATA];if(k.dimOrder==m[b.STRING_DIM_INDEX]){var y=n(m[b.STRING_DIM_VALUE_INDEX]),u=a.getDimStyleData(d.dimCombID,k.dimValuesDisplayData.length,k.dimOrder,k.twisterControllerHandle.twisterAvailabilityCache,k.displayConfigStylesData);c=k.dimName+"_"+m.dimValueIndex;e=k.twisterJSInitData;g={};g.hidePopover=
e.hidePopover;g.unavailablePopOverStringValue=e.unavailablePopOverStringValue;g.showDimSecondUnavailablePopover=e.showDimSecondUnavailablePopover;parseInt(m[b.STRING_DIM_INDEX])===parseInt(k.dimOrder)&&(y!==b.CLASS_FOR_SWATCH_UNAVAILABLE||k.twisterJSInitData[b.STRING_HIDE_POPOVER]||q.triggerPopover(d,g,c));v(b.ID_SELECTOR+b.TWISTER_POPOVER).css("z-index","2000");h(l,!0);y===b.CLASS_FOR_SWATCH_UNAVAILABLE&&k.logger.logImpression(k.logger.eventTypes.UNAVAILABLE_SWATCH_HOVER,null);d=0;for(l=u.length;d<
l;d++)c=u[d],c=c[b.STRING_STYLE],e=n(d),g=e===b.CLASS_FOR_SWATCH_SELECT?!0:!1,f=parseInt(m[b.STRING_DIM_INDEX])===parseInt(k.dimOrder)&&parseInt(m[b.STRING_DIM_VALUE_INDEX])===parseInt(d)?!0:!1,g||y===b.CLASS_FOR_SWATCH_UNAVAILABLE&&!f||(c===b.CLASS_FOR_SWATCH_SELECT&&(c=e===b.CLASS_FOR_SWATCH_UNAVAILABLE?b.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:b.CLASS_FOR_SWATCH_HOVER,r(d,c)),w(d,e,c))}}else for(eventData=d[b.STRING_EVENT_DATA],eventDimInfo=eventData[b.STRING_EVENT_DIM_INFO],dimensionValueDisplay=eventDimInfo[b.STRING_DIMENSION_VALUES_DATA]!=
B?eventDimInfo[b.STRING_DIMENSION_VALUES_DATA][k.dimOrder]:"",divMetaData=eventData[b.STRING_EVENT_DIV_METADATA],dimensionSelectionData=eventData[b.STRING_DIMENSION_SELECTION_DATA],dimCombID=d.dimCombID,dimDataForThisInteraction=a.getDimStyleData(dimCombID,k.dimValuesDisplayData.length,k.dimOrder,k.twisterControllerHandle.twisterAvailabilityCache,k.displayConfigStylesData),k.sizeSwatch?(y=dimCombID.split("_")[0],m=p(dimensionSelectionData,k.dimOrder),u=t(dimensionSelectionData,k.dimOrder),"X"==y&&
m&&u||h(dimensionValueDisplay,!1)):h(dimensionValueDisplay,!1),l=0,c=dimDataForThisInteraction.length;l<c;l++)y=dimDataForThisInteraction[l],u=y[b.STRING_STYLE],0===dimensionSelectionData[k.dimOrder][b.STRING_IS_SELECTED]&&u===b.CLASS_FOR_SWATCH_SELECT&&(u=b.CLASS_FOR_SWATCH_AVAILABLE),d=n(l),k.sizeSwatch&&(m=p(dimensionSelectionData,k.dimOrder),e=!t(dimensionSelectionData,k.dimOrder),d==b.CLASS_FOR_SWATCH_SELECT&&y[b.STRING_STYLE]==b.CLASS_FOR_SWATCH_SELECT&&m&&e&&(u=y[b.STRING_STYLE])),d&&(k.sizeSwatch&&
(m=p(dimensionSelectionData,k.dimOrder),d!=b.CLASS_FOR_SWATCH_SELECT&&d!=b.CLASS_FOR_SWATCH_HOVER||!m||u!=b.CLASS_FOR_SWATCH_UNAVAILABLE||h("",!1)),d=n(l),w(l,d,u),r(l,u))};k.updateViewAfterTwisterUpdate=function(c){var e=c[b.STRING_EVENT_DATA][b.STRING_EVENT_DIV_METADATA];c=DetailPage.StateController.getState().currentDimCombID.split("_");if(Twister.multiDimensionWeblabEnabled&&(v(b.ID_SELECTOR+b.MODAL_SWATCH_PREFIX+k.dimName+"_"+c[k.dimOrder]),k.isSlotsEnabled))if(a.isPartialState(k.dimensionsMap.length))c=
v(" .twisterSwatchWrapper_"+k.dimOrder+" .twisterSlotDiv"),"none"!==c.css("display")&&(document.getElementById("twisterSwatchWrapperDynaStyle_"+k.dimOrder).innerHTML=".twisterSwatchWrapper_"+k.dimOrder+" {min-width:100%;min-height:100%;}",c.css("display","none")),Twister.immersiveBannersPresent&&(c=a.getImmersivePartialStateBannerContent(g,parseInt(k.dimOrder)),e=v("#twisterImmersiveGlanceBanner"),e.html(c),e.removeClass("twisterImmersiveBannerHide"),v("#twisterImmersiveModalBanner").html(c));else if(e[b.STRING_DIM_INDEX]!=
k.dimOrder||"true"===DetailPage.StateController.getState().isUnavailableInOldDimCombId){for(var n=v(b.ID_SELECTOR+"variation_"+k.dimName+" > ul > li"),e=[],h=k.twisterJSInitData.dimensionValuesData[k.dimOrder].length,f=k.isImmersiveViewEnabled?k.finalLimitForSwatches:h,m=0;m<h;m++)v("."+b.TWISTER_SWATCH_CLASS_PREFIX+k.dimName+"_"+m+" ."+b.CLASSNAME_FOR_SWATCH+"_"+k.dimOrder).css("min-width","");for(h=0;h<f;h++){var m=v(n.get(h)).find(".a-declarative"),r=m.attr("data-action"),m=JSON.parse(m.attr("data-"+
r)).dimValueIndex;c[k.dimOrder]=m;var p=c.join("_"),r=v("."+b.TWISTER_SWATCH_CLASS_PREFIX+k.dimName+"_"+m+" .twisterSlotDiv");r.css("display","");(p=k.twisterJSInitData[b.INIT_DATA_DIM_TO_ASIN_MAP][p])?(e.push(p),r.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1'      style='width: 30px; margin : 5px 0px 0px 5px; height : 7px'></div>")):v("."+b.TWISTER_SWATCH_CLASS_PREFIX+k.dimName+"_"+m+" .twisterSlotDiv").html("<span class='a-color-tertiary'>- -</span>")}v(b.ID_SELECTOR+
b.TWISTER_MODAL_ID_PREFIX+k.dimName+" .swatches li").invalidateAppearedAlreadyCache();h=k.twisterJSInitData.dimensionValuesData[k.dimOrder].length;for(m=0;m<h;m++)c=v(b.ID_SELECTOR+b.TWISTER_MODAL_ID_PREFIX+k.dimName+" ."+b.TWISTER_SWATCH_CLASS_PREFIX+k.dimName+"_"+m+" .twisterSlotDiv"),c.css("display",""),c.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1' style='width: 30px;  margin : 5px 0px 0px 5px; height : 7px'></div>");
0<e.length&&d(e);Twister.immersiveBannersPresent&&(v("#twisterImmersiveGlanceBanner").addClass("twisterImmersiveBannerHide"),c=a.getImmersiveFullStateBannerContent(g,parseInt(k.dimOrder)),v("#twisterImmersiveModalBanner").html(c))}};(function(){k.isImmersiveViewEnabled=e.isImmersiveViewEnabled;k.isSlotsEnabled=e.isSlotsEnabled;k.newPrefetchWeblab=k.twisterJSInitData.newPrefetchWeblab;k.dimOrder=e[b.STRING_DIM_ORDER];k.dimName=e[b.STRING_DIM_NAME];k.dimensionsMap=e[b.STRING_DIMENSIONS_MAP];k.dimNameDisplayString=
e[b.STRING_DIMENSION_DISPLAY_STRING];k.dimValuesDisplayData=e[b.STRING_DIMENSION_VALUES_DATA];k.displayConfigStylesData=e[b.STRING_DISPLAY_CONFIG_STYLES_DATA];k.twisterControllerHandle=e[b.STRING_TWISTER_CONTROLLER_HANDLE];k.initialTwisterState=e[b.STRING_TWISTER_INITIAL_STATE_KEY];currDimCombID=k.initialTwisterState.getCurrentDimCombID();k.dimData=a.getDimStyleData(currDimCombID,k.dimValuesDisplayData.length,k.dimOrder,k.twisterControllerHandle.twisterAvailabilityCache,k.displayConfigStylesData);
k.maxSwatchLimitForImmersive=e[b.STRING_MAX_SWATCHES_IMMERSIVE_VIEW];k.dimSubType=e.dimensionDisplaySubType;k.finalLimitForSwatches=k.maxSwatchLimitForImmersive-1;m();c();k.swatchWrapper=".twisterSwatchWrapper_"+k.dimOrder;k.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+k.dimOrder;k.$swatches=v(k.swatchWrapper);k.twisterDimmedOpacity=.2;v("#sizeSwatch").length&&(k.sizeSwatch=!0);k.landingDimCombId=DetailPage.StateController.getState().currentDimCombID;v(".variations .swatchOuter a").each(function(){var a=
jQuery(k).contents();v(k).replaceWith(a)})})();x.when("twister-lazy-load-data").execute(function(d){if(d.context.dimKey===k.dimName){var c=DetailPage.StateController.getState().currentDimCombID,e=k.landingDimCombId.split("_"),c=c.split("_");e[k.dimOrder]="*";c[k.dimOrder]="*";c=c.join("_");e=e.join("_");if(c==e){var n=d.context;d=d.responseData.split("&&&");v("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",.2);v.each(d,function(k,d){var c;if(""!==a.stringTrim(d))try{c=v.parseJSON(d)}catch(b){}else c=
d;var e=v(document.querySelectorAll('[data-defaultAsin="'+c.ASIN+'"]'));divToBeReplaced=e.find(" .twisterSlotDiv");if(0<divToBeReplaced.length){divToBeReplaced.css("display","");if(Twister.multiDimensionWeblabEnabled){for(var g="",h=0;c.Value.content.twisterSlotDiv[h];)"IMAGE"===n.dimSubType&&(g+="<div>"),g+=c.Value.content.twisterSlotDiv[h],"IMAGE"===n.dimSubType&&(g+="</div>"),h++;divToBeReplaced.html(g)}else divToBeReplaced.html(c.Value.content.twisterSlotDiv);e.removeAttr("data-defaultAsin")}});
v("#"+b.TWISTER_FEATURE_DIV_ID).css("opacity",1)}}})}});x.when("A","twister-string-constants","dp-js-logger").register("twister-vodd-override-behavior",function(u,q,a){this.VoddOverride=u.createClass({test:!1,shouldGetNextAvailableAsin:function(a,l){return!1},getSupplementString:function(a,l,f,g){return""}});this.voddOverrideBehavior=new VoddOverride;this.externalFeatureName="";this.setExternalOverrideBehavior=function(b,l){try{this.voddOverrideBehavior=b,this.externalFeatureName=l}catch(f){(new a(l)).logFatal(f,
{message:"[Override behavior for VODD failed]"})}};this.getVoddOverrideBehavior=function(){return this.voddOverrideBehavior};return this});x.when("A","twister-string-constants").register("twister-dimension-views-unavailablePopover",function(u,q){function a(a,b,g,e,m){for(var c="",h=0;h<b.length;h++)h!==a&&1===b[h][q.STRING_IS_SELECTED]&&(c=c?c+", "+g[h]:g[h]);c="<strong>"+c+"</strong>";return m?e+"&nbsp;"+c:c+"&nbsp;"+e}var b=u.$;return{triggerPopover:function(l,f,g){var e=l[q.STRING_EVENT_DATA];
l=e[q.STRING_EVENT_DIM_INFO][q.STRING_DIMENSION_DISPLAY_MAP];var m=e[q.STRING_DIMENSION_SELECTION_DATA],e=e[q.STRING_EVENT_DIV_METADATA][q.STRING_DIM_INDEX],c=f[q.STRING_UNAVAILABLE_POPOVER_STRING_VALUE];f=f[q.STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER];if("undefined"===typeof touchDeviceDetected||!touchDeviceDetected){f=a(e,m,l,c,f);l="ap_body";m=[2,22];if(b.browser.msie||navigator.userAgent.match(/Trident/))l+=" styleIE";e=b("#"+g);b.AmazonPopover.displayPopover({modal:!1,showOnHover:!0,draggable:!1,
showCloseButton:!1,hoverShowDelay:50,hoverHideDelay:0,width:null,closeEventInclude:"CLICK_TRIGGER",literalContent:f,skin:"<div id='twisterPopover' class='ap_popover twisterPopoverSkin a-text-color-white'><div class='ap_header'></div><div class='"+l+"'><div class='ap_content'></div></div><div class='ap_footer'><div class='ap_middle'></div></div></div>",location:"top",locationElement:Twister.$("#"+g),align:"center",attached:!1,group:"TwisterPopover",locationOffset:m,paddingLeft:5,paddingRight:5,paddingBottom:5,
onShow:function(){var a=b("#twisterPopover").width();b.browser.msie?b("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({top:"16px",width:a-68+"px"}):b("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({width:a-68+"px"})}},e);b("#"+g).trigger("mouseover.amzPopover")}}}});x.when("A","twister-utils","twister-string-constants","twister-expander").register("twister-counter",function(u,q,a,b){return function(l,f){function g(){F=
new b({minHeightForExpandedSection:55,maxHeightForExpandedSection:155,maxHeightForExpandedSectionInView:101,scrollAnimationDuration:500,expanderSection:v,useExpanderScrollView:y>=p.minAsinsForExpandedScroll-1,minAsinsForExpandedView:p.minAsinsForExpandedView,expanderButtonReplacementIndex:p.minAsinsForExpandedView-2,dimValuePrefix:k,initSelectedID:p.currDimCombID,swatchImageSize:54,swatchImageMargin:10,expanderButton:w,collapseButton:r,dimDisplayType:"counter",logger:x,dimOrder:p.dimOrder,synchronousPostExpanderCallback:function(){u.trigger("TwisterCounterExpanded")},
synchronousPostCollapseCallback:function(){u.trigger("TwisterCounterCollapsed")}})}function e(k){E=n(a.ID_SELECTOR+k.data.dimValueSelectedID);var d=q.reconstructCombinationWithDimValue(p.currDimCombID,k.data[a.TWISTER_EVENT_DATA_DIM_INDEX],k.data[a.STRING_DIM_VALUE_INDEX]);p.currDimCombID!=d&&p.twisterControllerHandle&&p.twisterControllerHandle.handleClick(k.data)}function m(d){var c=d[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA][a.TWISTER_EVENT_DATA_DISPLAY_TYPE];L=n(k+d.dimCombID.split(a.CHAR_UNDERSCORE)[p.dimOrder]);
(I=n(".vodd-dim-wrapper").length)&&L.hasClass("counter_unavailable")&&c===a.TWISTER_DIMENSION_VIEW_COUNTER&&u.animate(n(".vodd-dim-wrapper"),{scale:1.1},150,"ease-in",function(){u.animate(n(".vodd-dim-wrapper"),{scale:1},100,"ease-out",function(){})})}function c(a,d){var c=n(k+d);a?c.addClass("hoverSwatch"):c.removeClass("hoverSwatch")}function h(){"undefined"===typeof p.$variationList&&(p.$variationList=n("#"+a.TWISTER_DIMENSION_VIEW_COUNTER+"-"+p.dimName+" .counterSwatch"));for(var k=p.$variationList,
d=p.initialTwisterState.getCurrentDimCombID(),c=parseInt(p.dimOrder),b=[],e=0;e<k.length;e++){5===b.length&&(t(b),b=[]);var g;(g=k[e].id)?(g=g.split(a.CHAR_UNDERSCORE),g=g[g.length-1]):g=-1;g=q.reconstructCombinationWithDimValue(d,c,g);(g=p.dimensionToAsinMap[g])?b.push(g):n(k[e]).addClass("counter_unavailable")}0<b.length&&t(b)}function t(a){var d=x.createFunctionTimer(x.eventTypes.DIM_SUM_LOAD);d.start();var c=function(){d.stop()};0<a.length&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:B,
asinList:a,dimTriggeringDimSum:p.dimName,dimSubType:p.dimSubType,dimType:p.dimType,chunk:function(a){var d=parseInt(N[a.ASIN][parseInt(p.dimOrder)]),d=n(k+d);0<a.Value.content.twisterSlotDiv.length&&d.removeClass("counter_unavailable")},success:function(a,k,d,b){c()},error:c,abort:c})}var p=this,n=u.$,w=n(a.ID_SELECTOR+"expanderButton"),r=n(a.ID_SELECTOR+"collapseButton"),d,k,v,y,z,E,G,L,I,F,x,N;p.updateView=function(c){if(c[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&p.currDimCombID!=c[a.STRING_DIM_COMB_ID]){var b=
c[a.STRING_EVENT_DATA][a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][p.dimOrder];G.css("z-index",0);E.css("z-index",1);d.html(b);E=n(k+c.dimCombID.split(a.CHAR_UNDERSCORE)[p.dimOrder]);E.removeClass("hoverSwatch");G.removeClass("selectedSwatch");E.addClass("selectedSwatch");m(c);h();p.currDimCombID=c[a.STRING_DIM_COMB_ID];u.trigger("counter:select",p.currDimCombID);null!=F&&(F.updateSelectedVariation(p.currDimCombID,E),F.isCollapsed&&z&&F.handleVariationSwap(z),F.isCollapsed?F.handleVariationSwap(!0):
F.scrollVariationIntoView());G=E}};p.selectCounterVariationAtIndex=function(a){z=!0;n(k+a).children().click()};p.getCurrentSelectedIndex=function(){return parseInt(p.currDimCombID,10)};p.expandCounter=function(){null!=F&&F.isCollapsed&&F.handleExpand()};p.onInitializeTwister=function(){h()};p.dimOrder=f[a.STRING_DIM_ORDER];p.dimName=f[a.STRING_DIM_NAME];p.dimensionsMap=f[a.STRING_DIMENSIONS_MAP];p.dimNameDisplayString=f[a.STRING_DIMENSION_DISPLAY_STRING];p.dimValuesDisplayData=f[a.STRING_DIMENSION_VALUES_DATA];
p.twisterControllerHandle=f[a.STRING_TWISTER_CONTROLLER_HANDLE];p.initialTwisterState=f[a.STRING_TWISTER_INITIAL_STATE_KEY];p.dimensionToAsinMap=p.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;l.useCounterConfig?(p.expandedViewEnabled=l[a.EXPANDED_VIEW_ENABLED],p.minAsinsForExpandedView=l[a.MIN_ASINS_FOR_EXPANDED_VIEW],p.minAsinsForExpandedScroll=l[a.MIN_ASINS_FOR_EXPANDED_SCROLL]):(p.displayTypeProperties=l[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][p.dimOrder],p.expandedViewEnabled=p.displayTypeProperties[a.EXPANDED_VIEW_ENABLED],
p.minAsinsForExpandedView=p.displayTypeProperties[a.MIN_ASINS_FOR_EXPANDED_VIEW],p.minAsinsForExpandedScroll=p.displayTypeProperties[a.MIN_ASINS_FOR_EXPANDED_SCROLL]);p.dimSubType=f.dimensionDisplaySubType;p.currDimCombID=p.initialTwisterState.getCurrentDimCombID();x=p.twisterControllerHandle.logger;N=p.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;d=n(a.ID_SELECTOR+"counter-label-"+p.dimName+" .selection");k=a.ID_SELECTOR+p.dimName+a.CHAR_UNDERSCORE;v=n(a.ID_SELECTOR+"counterSwatchSection-"+
p.dimName);y=p.dimValuesDisplayData.length;G=n(k+p.currDimCombID.split(a.CHAR_UNDERSCORE)[p.dimOrder]);E=n(k+p.currDimCombID.split(a.CHAR_UNDERSCORE)[p.dimOrder]);z=!1;(function(){n(".counterSwatch").each(function(a){a=n(this);a.parent().is("a")&&a.unwrap()})})();(function(){var b=a.AUI_EVENT_FOR_COUNTER;if(q.isTouchDevice()){var g=!1,h="";u.declarative(b,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_TOUCHSTART,a.EVENT_TYPE_TOUCHEND,a.EVENT_TYPE_TOUCHMOVE],function(k){k.data&&(k.data.dimDisplayType=a.TWISTER_DIMENSION_VIEW_COUNTER);
k.type===a.EVENT_TYPE_CLICK?e(k):k.type===a.EVENT_TYPE_TOUCHSTART?(h=k.data.dimValueSelectedID,g=!1):k.type===a.EVENT_TYPE_TOUCHMOVE?g=!0:k.type!==a.EVENT_TYPE_TOUCHEND||g||h!==k.data.dimValueSelectedID||(h="",g=!1,e(k));z=!1})}else u.declarative(b,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE],function(b){b.data&&(b.data.dimDisplayType=a.TWISTER_DIMENSION_VIEW_COUNTER);b.type===a.EVENT_TYPE_CLICK?e(b):b.type===a.EVENT_TYPE_MOUSEENTER?(p.twisterControllerHandle&&p.twisterControllerHandle.handleMouseOver(b.data),
b=b.data[a.STRING_DIM_VALUE_INDEX],n(k+b).css("cursor","pointer"),b!=p.currDimCombID.split(a.CHAR_UNDERSCORE)[p.dimOrder]&&(n(k+b).css("z-index",1),c(!0,b),d.html(p.dimValuesDisplayData[b]))):b.type===a.EVENT_TYPE_MOUSELEAVE&&(p.twisterControllerHandle&&p.twisterControllerHandle.handleMouseOut(b.data,b.data[a.STRING_DIM_INDEX],b.data[a.STRING_DIM_VALUE_INDEX]),b=b.data[a.STRING_DIM_VALUE_INDEX],b!=p.currDimCombID.split(a.CHAR_UNDERSCORE)[p.dimOrder]&&(n(k+b).css("z-index",0),c(!1,b),b=p.dimValuesDisplayData[p.currDimCombID.split(a.CHAR_UNDERSCORE)[p.dimOrder]],
d.html(b)));z=!1})})();p.expandedViewEnabled&&y>=p.minAsinsForExpandedView&&g();A.CounterScenesController&&A.CounterScenesController.registerCounter(p)}});x.when("A","twister-utils","twister-string-constants","twister-expander","atf").register("twister-shelf",function(u,q,a,b){return function(l,f){function g(a){"undefined"!==a&&A.ue&&A.ue.tag&&A.ue.tag(a)}function e(a){var k=A.ue;if(k){var d=k.count(a)||0;k.count(a,d+1)}}function m(){H=new b({minHeightForExpandedSection:d.minHeightForExpandedSection,
maxHeightForExpandedSection:d.maxHeightForExpandedSection,maxHeightForExpandedSectionInView:d.maxHeightForExpandedSection-74,scrollAnimationDuration:500,expanderSection:G,useExpanderScrollView:L>=d.minAsinsForExpandedScroll-1,minAsinsForExpandedView:d.minAsinsForExpandedView,expanderButtonReplacementIndex:d.expanderButtonReplacementIndex,dimValuePrefix:E,initSelectedID:d.currDimCombID,swatchImageSize:74,swatchImageMargin:17,expanderButton:v,collapseButton:y,expanderHidesVariation:d.expanderHidesVariation,
dimDisplayType:"shelf",logger:x,dimOrder:d.dimOrder,expanderButtonPostCollapse:d.expanderButtonPostCollapse,synchronousPreExpanderCallback:function(){G.removeClass("twisterShelf_isCollapsed");G.removeClass("twisterShelf_isCollapsedAnimated");G.addClass("twisterShelf_isExpanded");G.addClass("twisterShelf_isExpandedAnimated");p()},synchronousPostExpanderCallback:function(){t();G.removeClass("twisterShelf_isExpandedAnimated");u.trigger("TwisterShelfExpanded");d.dualDimension&&e("dualDimshelfExpanded")},
synchronousPreCollapseCallback:function(){G.removeClass("twisterShelf_isExpanded");G.removeClass("twisterShelf_isExpandedAnimated");G.addClass("twisterShelf_isCollapsed");G.addClass("twisterShelf_isCollapsedAnimated");p()},synchronousPostCollapseCallback:function(){t();G.removeClass("twisterShelf_isCollapsedAnimated");u.trigger("TwisterShelfCollapsed")}})}function c(k){if(!k)return-1;k=k.split(a.CHAR_UNDERSCORE);return k[k.length-1]}function h(k){return{dimIndex:d.dimOrder,dimValueIndex:k?c(k.id):
null,dimDisplayType:a.TWISTER_DIMENSION_VIEW_SHELF,dimValueSelectedID:k.id}}function t(){p();I.bind(a.EVENT_TYPE_CLICK,function(c){c=h(c.currentTarget);K=k(a.ID_SELECTOR+c.dimValueSelectedID);var b=q.reconstructCombinationWithDimValue(d.currDimCombID,c.dimIndex,c.dimValueIndex);d.currDimCombID!=b&&d.twisterControllerHandle&&d.twisterControllerHandle.handleClick(c)});q.isTouchDevice()||(I.bind(a.EVENT_TYPE_MOUSEENTER,function(c){c=h(c.currentTarget);d.twisterControllerHandle&&d.twisterControllerHandle.handleMouseOver(c);
c=c[a.STRING_DIM_VALUE_INDEX];var b=k(E+c);b.css("cursor","pointer");c!=d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]&&(b.addClass("hoverSwatch"),z.html(d.dimValuesDisplayData[c]))}),I.bind(a.EVENT_TYPE_MOUSELEAVE,function(c){c=h(c.currentTarget);d.twisterControllerHandle&&d.twisterControllerHandle.handleMouseOut(c,c[a.STRING_DIM_INDEX],c[a.STRING_DIM_VALUE_INDEX]);c=c[a.STRING_DIM_VALUE_INDEX];var b=k(E+c);c!=d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]&&(b.removeClass("hoverSwatch"),
c=d.dimValuesDisplayData[d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]],z.html(c))}))}function p(){I.unbind(a.EVENT_TYPE_CLICK);q.isTouchDevice()||(I.unbind(a.EVENT_TYPE_MOUSEENTER),I.unbind(a.EVENT_TYPE_MOUSELEAVE))}function n(c){var b=c[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA][a.TWISTER_EVENT_DATA_DISPLAY_TYPE];N=k(E+c.dimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);(Z=k(".vodd-dim-wrapper").length)&&N.hasClass("shelf_unavailable")&&b===a.TWISTER_DIMENSION_VIEW_SHELF&&u.animate(k(".vodd-dim-wrapper"),
{scale:1.1},150,"ease-in",function(){u.animate(k(".vodd-dim-wrapper"),{scale:1},100,"ease-out",function(){})})}function w(b){"undefined"===typeof d.$variationList&&(d.$variationList=k("#"+a.TWISTER_DIMENSION_VIEW_SHELF+"-"+d.dimName+" .twisterShelf_swatch"));for(var e=d.$variationList,n=d.initialTwisterState.getCurrentDimCombID(),g=parseInt(d.dimOrder),h=[],v=0;v<e.length;v++){5===h.length&&(r(h),h=[]);var f=c(e[v].id),f=q.reconstructCombinationWithDimValue(n,g,f);if(f=d.dimensionToAsinMap[f])b?k(".twisterShelf_container #"+
d.dimName+"_"+F[f]+" .twisterShelf_infoSection_slots").length||(h.push(f),C+=1):(h.push(f),C+=1);else{var f=k(e[v]),m,p=e[v];m=d.initialTwisterState.getCurrentDimCombID().split(a.CHAR_UNDERSCORE);var t=[],y=parseInt(d.dimOrder),p=c(p.id);m[y]=p;for(var p=m.join(a.CHAR_UNDERSCORE),p=d.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(p,y),p=F[p],w=0;w<m.length;w++)y!==w&&t.push(d.dimensionValuesList[w][p[w]]);m=t.join(", ");f.addClass("shelf_unavailable");"undefined"!==typeof m?(t=f.find(".unavailableV2"),
t.find(".variation-combination-text").html(m),f.find(".unavailable-text").removeClass("aok-hidden"),f.find(".shelf_loading_placeholder").hide(),t.removeClass("aok-hidden"),f.find(".twisterShelf_infoSection").empty().addClass("aok-hidden")):(f.find(".shelf_loading_placeholder").hide(),f.find(".outofstock-text").removeClass("aok-hidden"),f.find(".shelf-outofstock").removeClass("aok-hidden"))}}0<h.length&&r(h)}function r(c){var b=x.createFunctionTimer(x.eventTypes.DIM_SUM_LOAD);b.start();var e=function(){b.stop();
J+=c.length;J==C&&d.dualDimension&&g("twisterDualDimPlaceholderRemove")};0<c.length&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:B,asinList:c,dimTriggeringDimSum:d.dimName,dimSubType:d.dimSubType,dimType:d.dimType,chunk:function(c){if(c&&"object"===typeof c){var b=parseInt(F[c.ASIN][parseInt(d.dimOrder)]),b=k(E+b);if(c.Value&&c.Value.content&&c.Value.content.twisterSlotDiv){var e=k.trim(c.Value.content.twisterSlotDiv);if(0<e.length){b.removeClass("shelf_unavailable");b.find(".unavailableV2").addClass("aok-hidden");
b.find(".outofstock-text").addClass("aok-hidden");b.find(".shelf-outofstock").addClass("aok-hidden");b.find(".unavailable-text").addClass("aok-hidden");c=b.find(".twisterShelf_infoSection");c.empty();c.addClass("aok-hidden");c.append(e);var e=b.find(".twisterShelf_infoSection .price_slot_ppu, .twisterShelf_infoSection .deal_slot_ppu"),n=b.find(".twisterShelf_infoSection .sampling_twister_message"),g=b.find(".twisterShelf_infoSection .sampling_twister_price"),h=b.find(".twisterShelf_infoSection .twister_swatch_price");
if(e.length||n.length){var v=k("<p></p>");n.length&&g.length?(h.length&&g.empty(),e.empty(),v.append(n)):v.append(e);c.append(v);e=b.find(".twisterShelf_infoSection i");b=b.find(".twisterShelf_infoSection .olpWrapper");n=k(".twisterShelf_swatchSection.twisterShelf_isCollapsed");e.length&&b.length&&n.length&&c.addClass("hasAllItems")}c.removeClass("aok-hidden");e=G.find(".twisterShelf_swatch.selectedSwatch .twisterShelf_infoSection");e.length&&(b=e.find("[id*=_price]"),e=e.find(".a-size-mini.[class*=_slot_ppu]"),
b.length&&b.hasClass(a.CLASS_FOR_PRICE_SECONDARY)&&b.removeClass(a.CLASS_FOR_PRICE_SECONDARY).addClass(a.CLASS_FOR_PRICE_SELECTED),e.length&&e.addClass(a.CLASS_FOR_PRICE_SELECTED));d.dualDimensionShelf&&(b=c.find(".twister_swatch_price").find(".a-size-mini"),e=b.text().replace(/\s+/g,"").length,c.find("i").length&&7<e&&b.addClass("twisterShelf_dual_dim_price_long"))}}}},success:function(a,k,d,c){e()},error:e,abort:e})}var d=this,k=u.$,v,y,z,E,G,L,I,F,x,N,Z,K,D,H,C=0,J=0;d.updateView=function(c){if(c[a.STRING_EVENT_TYPE]===
a.EVENT_TYPE_CLICK&&d.currDimCombID!=c[a.STRING_DIM_COMB_ID]){for(var b=c[a.STRING_EVENT_DATA][a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][d.dimOrder],g=0;g<d.$variationList.length;g++){var h=k(d.$variationList[g]);h.find("twisterShelf_infoSection").addClass("shelf_loading_placeholder");h.find("twisterShelf_infoSection").removeClass("aok-hidden");h.find("twisterShelf_infoSection").addClass("twisterShelf_placeholder_price");h.find("twisterShelf_infoSection").addClass("twisterShelf_placeholder_badge");
h.find("unavailableV2").addClass("aok-hidden");h.find("twister_swatch_price").addClass("aok-hidden")}z.html(b);K=k(E+c.dimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);K.removeClass("hoverSwatch");D.removeClass("selectedSwatch");K.addClass("selectedSwatch");n(c);w(!1);d.dualDimension&&e("dualDimShelfVariationDoubleClick");d.currDimCombID=c[a.STRING_DIM_COMB_ID];null!=H&&(H.updateSelectedVariation(d.currDimCombID,K),H.isCollapsed?H.handleVariationSwap(!0):H.scrollVariationIntoView());D=K}};d.onInitializeTwister=
function(){u.loadDescendantImagesManually(G);w(!1)};d.dimOrder=f[a.STRING_DIM_ORDER];d.dimName=f[a.STRING_DIM_NAME];d.dimensionsMap=f[a.STRING_DIMENSIONS_MAP];d.dimNameDisplayString=f[a.STRING_DIMENSION_DISPLAY_STRING];d.dimValuesDisplayData=f[a.STRING_DIMENSION_VALUES_DATA];d.twisterControllerHandle=f[a.STRING_TWISTER_CONTROLLER_HANDLE];d.initialTwisterState=f[a.STRING_TWISTER_INITIAL_STATE_KEY];d.expandedViewEnabled=l[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.EXPANDED_VIEW_ENABLED];d.dimensionToAsinMap=
d.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;"IMAGE"===f[a.DIMENSION_SUB_TYPE]?(d.minAsinsForExpandedView=l[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.MIN_ASINS_FOR_EXPANDED_VIEW_IMAGE],d.minAsinsForExpandedScroll=l[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.MIN_ASINS_FOR_EXPANDED_SCROLL_IMAGE]):(d.minAsinsForExpandedView=l[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.MIN_ASINS_FOR_EXPANDED_VIEW_TEXT],d.minAsinsForExpandedScroll=l[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.MIN_ASINS_FOR_EXPANDED_SCROLL_TEXT]);
d.dualDimension=k(".dualDim-Swatch").length;d.dualDimension?(d.expanderButtonReplacementIndex=d.minAsinsForExpandedView-2,d.expanderHidesVariation=!0,d.expanderButtonPostCollapse=!0,d.dualDimensionShelf=!0,d.minHeightForExpandedSection=89,d.maxHeightForExpandedSection=209,g("twisterDualDimPlaceholderShow2")):(d.expanderButtonReplacementIndex=d.minAsinsForExpandedView-1,d.expanderHidesVariation=!1,d.expanderButtonPostCollapse=!1,d.dualDimensionShelf=!1,d.minHeightForExpandedSection=l[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.MIN_HEIGHT_EXPANDED_SECTION],
d.maxHeightForExpandedSection=l[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES][d.dimOrder][a.MAX_HEIGHT_EXPANDED_SECTION]);d.dimType=a.TWISTER_DIMENSION_VIEW_SHELF;d.dimSubType=f[a.DIMENSION_SUB_TYPE];d.currDimCombID=d.initialTwisterState.getCurrentDimCombID();x=d.twisterControllerHandle.logger;F=d.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;d.dimensionValuesList=d.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;I=k(a.ID_SELECTOR+"shelfSwatchSection-"+
d.dimName+" .twisterShelf_swatch");z=k(a.ID_SELECTOR+"shelf-label-"+d.dimName+" .twisterShelf_dimension_label span");E=a.ID_SELECTOR+d.dimName+a.CHAR_UNDERSCORE;G=k(a.ID_SELECTOR+"shelfSwatchSection-"+d.dimName);L=d.dimValuesDisplayData.length;D=k(E+d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);K=k(E+d.currDimCombID.split(a.CHAR_UNDERSCORE)[d.dimOrder]);v=k(a.ID_SELECTOR+"shelfSwatchSection-"+d.dimName+" .expanderButton");y=k(a.ID_SELECTOR+"shelfSwatchSection-"+d.dimName+" .collapseButton");
(function(){k(".twisterShelf_swatch").each(function(a){a=k(this);a.parent().is("a")&&a.unwrap()})})();t();d.expandedViewEnabled&&L>=d.minAsinsForExpandedView&&m()}});x.when("A","a-popover","twister-string-constants","twister-utils").register("twister-vodd-popover",function(u,q,a,b){return function(l){function f(a,c){n.eventListener&&n.eventListener.handlePopoverEvent&&n.eventListener.handlePopoverEvent(a,c)}function g(b){f(a.EVENT_TYPE_SHOWPOPOVER,b);var e="bottom"===n.displayPosition?"vodd-modified-popover":
"vodd-modified-top-popover";b.popover.$container.hasClass(e)||b.popover.$container.addClass(e);c(b.popover.$container)}function e(c){f(a.EVENT_TYPE_HIDEPOPOVER,c);c.popover.$trigger.blur()}function m(b){c(b.popover.$container);f(a.EVENT_TYPE_UPDATEPOPOVERPOSITION,b)}function c(a){var c=p.get(0).getBoundingClientRect(),d,k;A.pageYOffset?(d=A.pageYOffset,k=A.pageXOffset):"CSS1Compat"===(document.compatMode||"")?(d=document.documentElement.scrollTop,k=document.documentElement.scrollLeft):(d=document.body.scrollTop,
k=document.body.scrollLeft);d="bottom"===n.displayPosition?c.bottom+d:c.top+d-a.height();var b=c.right-c.left,c=c.left+k;a&&a.css({top:d+"px",left:c+"px",width:b+"px"})}var h,t=u.$,p,n={name:null,trigger:null,eventListener:null,displayPosition:"bottom",positionOnTwisterContainer:!0};this.getHandle=function(){return h};l&&t.extend(n,l);if(!n.name)throw"Popover name should not be null";if(!n.trigger)throw"Popover trigger should not be null";(function(){var a="triggerBottom";"top"===n.displayPosition&&
(a="triggerTop");a={closeButton:!1,closeButtonLabel:"close",position:a,name:n.name,popoverLabel:n.name,activate:b.isTouchDevice()?"onmouseover":"onclick"};n.height&&t.extend(a,{height:n.height});h=q.create(n.trigger,a)})();(function(){u.on("a:popover:afterShow:"+n.name,g);u.on("a:popover:afterHide:"+n.name,e);u.on("a:popover:afterUpdatePosition:"+n.name,m);var a=function(){h&&h.isActive()&&c(h.$container)};u.on("a:pageUpdate",a);t(A).resize(a)})();p=n.positionOnTwisterContainer?t("#twister"):n.trigger}});
x.when("A","twister-utils","twister-string-constants","scroll-event-handler","twister-vodd-popover","twister-vodd-override-behavior","dp-js-logger").register("twister-vodd",function(u,q,a,b,l,f,g){return function(e,m){function c(){return C.parentView?C.parentView.getCurrDimCombId():C.initialTwisterState.getCurrentDimCombID()}function h(){var a=100*parseInt(C.dimensionOrder),k=a,d=function(a,k,d){a.addClass("animation-start");setTimeout(function(){a.animate({top:d||"0px"},{duration:300,complete:function(){J(this).removeClass("animation-start")}})},
k)};W.length&&W.parent("td").is(":visible")&&(d(W.parent("td"),a,"5px"),k=a+50);d(ga.parent("td"),k,"5px")}function t(){ea=a.ID_SELECTOR+"vodd-button-"+C.dimensionName;DIMENSION_SINGLETON_ID=a.ID_SELECTOR+"vodd-singleton-"+C.dimensionName;qa=a.CLASS_SELECTOR+"vodd-button-label-"+C.dimensionName;ha=a.CLASS_SELECTOR+"vodd-button-icon-"+C.dimensionName;ra=a.ID_SELECTOR+"vodd-table-"+C.dimensionName;sa=a.ID_SELECTOR+"dimension-button-img-"+C.dimensionName;X=a.ID_SELECTOR+C.dimensionName+a.CHAR_UNDERSCORE;
ta="vodd-popover-"+C.dimensionName;var k=parseInt(C.dimensionOrder),d=e[a.INIT_DATA_DISPLAY_TYPE_PROPERTIES];d&&J.isArray(d)&&d.length>k&&(k=d[k],k[a.INIT_DATA_VISIBLE_ROW_COUNT]&&(aa=k[a.INIT_DATA_VISIBLE_ROW_COUNT]),k[a.INIT_DATA_MAX_POPOVER_HEIGHT]&&(S=k[a.INIT_DATA_MAX_POPOVER_HEIGHT]),k[a.INIT_DATA_ANIMATE_BUTTON_CONTENT]&&(fa=k[a.INIT_DATA_ANIMATE_BUTTON_CONTENT]),k[a.INIT_DATA_POPOVER_POSITION]&&(ia=k[a.INIT_DATA_POPOVER_POSITION]))}function p(k){if(U){var d=U.length/C.dimensionsMap.length*
100,d={divMetaData:y(null),count:Math.ceil(C.dimensionsMap.length/aa),percentage:Math.floor(d),dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD};na.logImpression(k,d)}}function n(){2==pa&&1===da&&(V=!1);var k={trigger:C.dimensionButton,name:ta,eventListener:C,displayPosition:ia,positionOnTwisterContainer:V},d=P.find("tr").not(".aok-hidden");d.length&&d.length>aa&&S&&"undefined"!==typeof S&&J.extend(k,{height:S});T=new l(k);C.dimensionButton.bind(q.isTouchDevice()?a.EVENT_TYPE_TOUCHEND:a.EVENT_TYPE_CLICK,
function(a){if(T&&T.getHandle()&&T.getHandle().isActive())return T.getHandle().hide(),!1;na.logImpression(ja.CLICK,{time:Date.now()});q.isTouchDevice()&&C.dimensionButton.trigger("mouseenter")})}function w(a,k){var c=na.createFunctionTimer(ja.DIM_SUM_LOAD);c.start();Twister.dimensionalSummaryModule&&Twister.dimensionalSummaryModule.fetchDimSumData({indices:k,asinList:a,dimTriggeringDimSum:C.dimensionName,dimSubType:C.dimSubType,dimType:C.dimType,chunk:function(a){if(a&&"object"===typeof a){var k=
R[a.ASIN][parseInt(C.dimensionOrder)],k=P.find(X+k);if(a.Value&&a.Value.content&&a.Value.content.twisterSlotDiv){var c=J.trim(a.Value.content.twisterSlotDiv);0<c.length&&(k.find(".vodd-loading-placeholder").hide(),I(k),a=k.find(".dimension-details"),a.append(c),k=a.find(".twister_swatch_price").parent(),k.is("div")&&!k.attr("class")&&(k=d(k),k.find(".a-size-mini").addClass("a-size-small").removeClass("a-size-mini"),k.addClass("a-color-price")),a=a.find(".sns-data-slot").parent(),a.is("div")&&!a.attr("class")&&
d(a))}}},success:function(a,k,d,b){c.stop()},error:function(){c.stop()},abort:function(){c.stop()}})}function r(k){var d=c(),b=parseInt(C.dimensionOrder),e=[],n=[];U||(U=[]);override=f.getVoddOverrideBehavior();C.voddOverrideEnabled=!0;try{C.shouldFetchNextAvailableAsin=override.shouldGetNextAvailableAsin(C.dimensionOrder,C.dimensionsMap)}catch(h){var m=new g(override.externalFeatureName),r={message:"[shouldFetchNextAvailableAsin failed for VODD Twister Override]"};m.logFatal(h,r)}for(var p=0;p<k.length;p++){7===
e.length&&(w(e,n),e=[],n=[]);var t=v(k[p].id),m=q.reconstructCombinationWithDimValue(d,b,t);asin=Y[m];0>u.indexOfArray(U,t)&&U.push(t);null==asin&&C.shouldFetchNextAvailableAsin&&(m=c().split(a.CHAR_UNDERSCORE),b=parseInt(C.dimensionOrder),m[b]=t,asin=N(m,b));if(asin){if(C.voddOverrideEnabled){var y="";try{y=override.getSupplementString(asin,Y,R,la)}catch(l){m=new g(override.externalFeatureName),r={message:"[getSupplementString failed for VODD Twister Override]"},m.logFatal(l,r)}J(k[p]).find(".supplementString").remove();
J(k[p]).find(".dimension-display-text").append('<span class="supplementString a-size-mini">'+y+"</span>")}n.push(t);e.push(asin)}}0<e.length&&w(e,n)}function d(a){var k=a.prev(),d=a.children();a.remove();k.after(d);return d}function k(a){a=q.getVisibleTableRows(a.currentTarget,P.find("tr"));r(a)}function v(k){if(!k)return-1;k=k.split(a.CHAR_UNDERSCORE);return k[k.length-1]}function y(k){return{dimIndex:C.dimensionOrder,dimValueIndex:k?v(k.id):null,dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD}}function z(a){p(ja.CLICK_VARIATION);
ba||p(ja.SCROLL);ba=!0;U=null;var k=y(a.currentTarget),d=c(),b=q.reconstructCombinationWithDimValue(d,k.dimIndex,k.dimValueIndex);b!=d&&(K(),L(k,a.type,C.parentView?C.parentView.handleClick:B,C.twisterControllerHandle.handleClick,null));T&&T.getHandle()&&T.getHandle().hide();k={dimensionOrder:C.dimensionOrder,dimensionValueIndex:k.dimValueIndex,isSelectedDimValueAvailable:ka.dimToAsinMapData[b]?!0:!1};J(a.currentTarget).trigger("TwisterVODD.dimensionRowClick",k)}function E(a){J(a.currentTarget).addClass("vodd-row-hovered");
var k=y(a.currentTarget);L(k,a.type,C.parentView?C.parentView.handleMouseOver:B,C.twisterControllerHandle.handleMouseOver,null)}function G(a){J(a.currentTarget).removeClass("vodd-row-hovered");var k=y(a.currentTarget);L(k,a.type,C.parentView?C.parentView.handleMouseOut:B,C.twisterControllerHandle.handleMouseOut,v(a.currentTarget.id))}function L(a,k,d,c,b){d!=B?d.call(C.parentView,a,k):c.call(C.twisterControllerHandle,a,C.dimensionOrder,b)}function I(a){a.find(".dimension-slots .availability-message").nextAll().remove()}
function F(k,d){if(d)k.find(".unavailable-text").hide(),k.find(".vodd-loading-placeholder").show();else{k.find(".vodd-loading-placeholder").hide();k.find(".unavailableV2").removeClass("aok-hidden");var b;b=c().split(a.CHAR_UNDERSCORE);var e=[],n=parseInt(C.dimensionOrder),g=v(k[0].id);b[n]=g;g=N(b,n);if(g=R[g])for(var h=0;h<b.length;h++)n!==h&&ca[h]!==a.HIDDEN_DIMENSION_DISPLAY_TYPE&&e.push(la[h][g[h]]);if(b=e.join(", "))k.find(".unavailable-text").show(),k.find(".variation-combination-text").text(b);
a:{b=0;e=parseInt(C.dimensionOrder);n=parseInt(v(k[0].id));for(asin in R)if(parseInt(R[asin][e])===n&&1<++b){b=!0;break a}b=!1}b||k.find(".variation-more-text").hide()}I(k)}function M(k){Q.sort(function(d,c){var b=v(d.id),e=v(c.id);if(k[b][a.STRING_STYLE]!==k[e][a.STRING_STYLE]){if(k[b][a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE)return 1;if(k[e][a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE)return-1}return b-e});Q.detach().appendTo(P)}function N(k,d){var c="";if(C.parentView)var b=String(k[d]),
e=C.parentView.twisterCore,c=C.parentView.twisterCore.util,b=e.util.predictNextState(e.util.createSelectionInfo(e.state()),e.util.createSelectionInfo(e.util.getSelectionInfoFromDimIndexAndValue(d,b))),c=c.getAsinFromSelectionInfo(b.selectionInfo());else c=C.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(k.join(a.CHAR_UNDERSCORE),d);return c}function Z(a){var k=P.find("tr").not(".aok-hidden");a=k.index(a);var d=k.length-aa;a>d?(a=d,0>a&&(a=0)):a=0==a?a:a-1;k=k.slice(a,a+aa);r(k)}function K(){Q.unbind(a.EVENT_TYPE_CLICK,
z);q.isTouchDevice()||Q.unbind(a.EVENT_TYPE_MOUSEENTER,E).unbind(a.EVENT_TYPE_MOUSELEAVE,G)}function D(k,d,c){var b=k;if(H()){var e=k.split(a.CHAR_UNDERSCORE);k=C.dimensionOrder;for(var e=e.slice(0),n=0;n<dimensionHierarchyData.length;n++)k!=n&&dimensionHierarchyData[k]<dimensionHierarchyData[n]&&(e[n]="X",b=e.join("_"))}k=b;b=q.getDimStyleData(b,C.dimValuesDisplayData.length,C.dimensionOrder,C.twisterAvailabilityCache,C.displayConfigStylesData);M(b);var g=null;k=b.length;for(e=0;e<b.length;e++){var n=
b[e],h=P.find(X+e);if(n[a.STRING_STYLE]===a.CLASS_FOR_VODD_SELECT){if(g=h,h.addClass("vodd-row-selected"),C.dimensionValueHasIcon[e]?(ga.text(""),ma.attr("class","background-sprite "+C.dimValuesDisplayData[e].replace(/\s/g,""))):(ma.attr("class",""),ga.text(C.dimValuesDisplayData[e])),W.length){var v=h.find("img.vodd-dimension-img");(v=0<v.length?v.attr("src"):null)&&W.attr("src",v).show()}}else h.removeClass("vodd-row-selected");h.removeClass("vodd-row-hovered");1<C.dimensionsMap.length&&F(h,n[a.STRING_STYLE]!==
a.CLASS_FOR_VODD_UNAVAILABLE);H(c)&&(n[a.STRING_STYLE]===a.CLASS_FOR_VODD_UNAVAILABLE?(h.addClass("aok-hidden"),--k):h.removeClass("aok-hidden"))}H(c)&&(1>=k?(J(ea).addClass("aok-hidden"),J(DIMENSION_SINGLETON_ID).removeClass("aok-hidden")):(J(DIMENSION_SINGLETON_ID).addClass("aok-hidden"),J(ea).removeClass("aok-hidden")));d?u.on.load(function(){Z(g)}):Z(g)}function H(){var a=!1;isHierarchicalPivoting&&topHierarchicalDimensionIndex!==parseInt(C.dimensionOrder)&&(a=!0);return a}var C=this,J=u.$,T,
oa,la,pa,da,V=!0,O,Q,P,W,ga,ma,qa,ha,sa,ea,ra,X,ta,aa=0,ia="bottom",fa=!1,S,ba=!1,U,Y,ca,R,na,ja,ka=m[a.STRING_TWISTER_VARIATION_DATA];C.onInitializeTwister=function(){D(c(),!0,null);u.loadDescendantImagesManually(P);n()};C.handlePopoverEvent=function(d,c){if(d===a.EVENT_TYPE_SHOWPOPOVER){K();Q.bind(a.EVENT_TYPE_CLICK,z);q.isTouchDevice()||Q.bind(a.EVENT_TYPE_MOUSEENTER,E).bind(a.EVENT_TYPE_MOUSELEAVE,G);ba=!1;var e=c.popover.$trigger,n={popover:c};e.addClass("highlighted");e.trigger("TwisterVODD.showPopup",
n);oa||(O=P.closest(".a-popover-inner"),oa=new b(200,O,k));e=P.find("tr.vodd-row-selected");O&&O.length&&e.length&&O.scrollTop(e.get(0).offsetTop-33)}else d===a.EVENT_TYPE_HIDEPOPOVER?(e=c.popover.$trigger,n={popover:c},ba||(p(ja.SCROLL),U=null),ba=!0,J(e).removeClass("highlighted"),e.trigger("TwisterVODD.hidePopup",n)):d===a.EVENT_TYPE_UPDATEPOPOVERPOSITION&&c.popover.$trigger.trigger("TwisterVODD.updatePopupPosition",{popover:c})};C.updateView=function(k){k[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_CLICK&&
D(k[a.STRING_DIM_COMB_ID],!1,k[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA])};C.showVariationSelection=function(){q.isTouchDevice()||C.dimensionButton.trigger("click")};(function(){C.twisterAvailabilityCache=m[a.STRING_TWISTER_AVAILABILITY_CACHE];C.dimensionOrder=m[a.STRING_DIM_ORDER];C.dimType=a.TWISTER_DIMENSION_VIEW_VODD;C.parentView=m[a.PRODUCTIZED_PARENT_VIEW];C.twisterJSInitData=e;C.viewUtil=m[a.PRODUCTIZED_VIEW_UTIL];C.displayConfigStylesData=m[a.STRING_DISPLAY_CONFIG_STYLES_DATA];C.dimSubType=
m[a.DIMENSION_SUB_TYPE];C.dimensionValueHasIcon=m[a.DIMENSION_VALUE_HAS_ICON];C.initialTwisterState=m[a.STRING_TWISTER_INITIAL_STATE_KEY];C.twisterControllerHandle=m[a.STRING_TWISTER_CONTROLLER_HANDLE];C.dimensionsMap=ka.dimensionsMap;C.dimensionName=C.dimensionsMap[C.dimensionOrder];C.dimValuesDisplayData=ka.dimensionValuesData[C.dimensionOrder];pa=C.dimensionsMap.length;la=ka.dimensionValuesData;Y=ka.dimToAsinMapData;na=new g("DPTwisterVODDView");ja=na.eventTypes;ca=ka.dimensionsDisplayType;R=ka.asinToDimIndexMapData;
da=J(".vodd-dim-wrapper").size();dimensionHierarchyData=e.dimensionHierarchyData;isHierarchicalPivoting=e.hierarchicalPivoting;topHierarchicalDimensionIndex=e.topHierarchicalDimensionIndex;t();C.dimensionButton=J(ea);P=J(ra);Q=P.find("tr");W=J(sa);ga=J(qa);ma=J(ha);var k=Math.ceil(C.dimensionsMap.length/aa);na.logImpression(ja.DIM_INIT,{count:k,dimDisplayType:a.TWISTER_DIMENSION_VIEW_VODD});fa&&x.when("A","ready").execute(function(a){A.setTimeout(function(){h()},1E3)})})()}});x.when("A","twister-utils",
"twister-string-constants","legacy-popover").register("twister-beaconized-evdd",function(u,q,a){return function(b,l){function f(){var a=8+t(p).height(),a={localContent:n,location:"bottom",showOnHover:!1,showCloseButton:!1,skin:null,clone:!1,controlCallbacks:!0,locationOffset:[-2,-a],closeEventInclude:"CLICK_OUTSIDE",forceAlignment:!0,group:"DonsBoxDropDowns",width:null};d=t(p).amazonPopoverTrigger(a);t(document).bind("touchend click",function(){v=!1;d.amznPopoverHide()})}function g(a){v=!0;a=a.currentTarget.id.split("_");
twisterController.handleClick({dimIndex:h.dimOrder,dimValueIndex:a[a.length-1]});v&&(d.amznPopoverHide(),v=!1);return!1}function e(a){t(a.currentTarget).addClass("evdd-row-hovered")}function m(a){t(a.currentTarget).removeClass("evdd-row-hovered");return!1}function c(a){t(a.currentTarget).removeClass("evdd-row-hovered");g(a);return!1}var h=this,t=u.$,p,n,w,r,d,k={},v=!1;h.dimType="evdd";h.dimNameDisplayString;h.dimData;h.dimensionsMap;h.dimNameDisplayString;h.dimValuesDisplayData;h.dimName;h.dimOrder;
h.isMasterDim=!1;h.updateView=function(a){var c=q.getDimStyleData(a.dimCombID,h.dimValuesDisplayData.length,h.dimOrder,h.twisterControllerHandle.twisterAvailabilityCache,h.displayConfigStylesData),b,e,n,g=-1;a=0;g="";d.amznPopoverHide();v=!1;for(var f=0,m=c.length;f<m;f++)b=c[f],e=k[b.style],n="#"+h.dimName+"_"+f,"evdd-row-selected"===e&&(g=f,g=h.dimValuesDisplayData[g]),"available"!==b.style&&"selected"!==b.style||a++,$rowElement=t(n),$rowElement.removeClass(r).addClass(e),$rowElement.find(".evdd-row-snake-wrapper").show(),
$rowElement.find(".evdd-row-price-info-wrapper").html(""),$rowElement.find(".evdd-row-prime-badge-wrapper").html("");c=!1;h.isMasterDim||1!==a||(c=!0);a=c;t(p).find("button").text(g);t(w).text(g);a?(t(p).addClass("evdd-hidden"),t(w).removeClass("evdd-hidden")):(t(w).addClass("evdd-hidden"),t(p).removeClass("evdd-hidden"))};h.updateViewWithPriceInfo=function(a){var k,d,c;for(k in a)d=a[k],c="#"+h.dimName+"_"+k,c=t(c),c.find(".evdd-row-snake-wrapper").hide(),c.find(".evdd-row-price-info-wrapper").html(d[2]),
c.find(".evdd-row-prime-badge-wrapper").html(d[3])};(function(){var d;h.dimOrder=l[a.STRING_DIM_ORDER];h.dimName=l[a.STRING_DIM_NAME];h.dimensionsMap=l[a.STRING_DIMENSIONS_MAP];h.dimNameDisplayString=l[a.STRING_DIMENSION_DISPLAY_STRING];h.dimValuesDisplayData=l[a.STRING_DIMENSION_VALUES_DATA];h.displayConfigStylesData=l[a.STRING_DISPLAY_CONFIG_STYLES_DATA];h.twisterControllerHandle=l[a.STRING_TWISTER_CONTROLLER_HANDLE];h.initialTwisterState=l[a.STRING_TWISTER_INITIAL_STATE_KEY];d=h.initialTwisterState.getCurrentDimCombID();
h.dimData=q.getDimStyleData(d,h.dimValuesDisplayData.length,h.dimOrder,h.twisterControllerHandle.twisterAvailabilityCache,h.displayConfigStylesData);h.isMasterDim=!1;"0"===h.dimOrder&&(h.isMasterDim=!0);h.dimNameDisplayString=l[a.STRING_DIMENSION_DISPLAY_STRING];p="#evdd-button-"+h.dimName;n="#evdd-table-wrapper-"+h.dimName;w="#evdd-singleton-"+h.dimName;k.invalid=h.isMasterDim?"evdd-row-default":"evdd-row-hidden";k.available="evdd-row-default";k.selected="evdd-row-selected";r="evdd-hidden evdd-row-hovered evdd-row-hidden evdd-row-default evdd-row-selected";
f();for(var b=0,v=h.dimData.length;b<v;b++)d="#"+h.dimName+"_"+b,t(d).bind("click",g).bind("touchend",c).bind("touchstart",e).bind("mouseenter",e).bind("mouseleave",m)})()}});x.when("A","twister-utils","twister-string-constants").register("twister-native-evdd",function(u,q,a){return function(b,l){var f=this,g=u.$,e;f.dimType="evdd";f.dimNameDisplayString;f.dimName;f.dimOrder;f.isMasterDim=!1;f.updateView=function(a){a=q.getDimStyleData(a.dimCombID,f.dimValuesDisplayData.length,f.dimOrder,f.twisterControllerHandle.twisterAvailabilityCache,
f.displayConfigStylesData);var c,b="";g(e).empty();for(var t=0,p=a.length;t<p;t++)if(rowData=a[t],c=rowData.style,"invalid"!==c||f.isMasterDim)c="selected"===c?"selected":"",rowId="#native-"+f.dimName+"_"+t,c='<option id="'+rowId+'" value="'+t+'," '+c+">"+f.dimValuesDisplayData[t]+"</option>",b+=c;g(e).html(b)};f.dimOrder=l[a.STRING_DIM_ORDER];f.dimName=l[a.STRING_DIM_NAME];f.dimValuesDisplayData=l[a.STRING_DIMENSION_VALUES_DATA];f.isMasterDim=!1;"0"===f.dimOrder&&(f.isMasterDim=!0);f.dimNameDisplayString=
l[a.STRING_DIMENSION_DISPLAY_STRING];f.displayConfigStylesData=l[a.STRING_DISPLAY_CONFIG_STYLES_DATA];f.twisterControllerHandle=l[a.STRING_TWISTER_CONTROLLER_HANDLE];e="#evdd-select-"+f.dimName;g(e).change(function(){var a=g(e).val(),a=parseInt(a.split(",")[0]);twisterController.handleClick({dimIndex:f.dimOrder,dimValueIndex:a})})}});x.when("A","twister-dimension-view-factory","twister-string-constants").register("twister-view",function(u,q,a){return function(b,l,f,g,e){function m(c,b,e,g,h){var d=
{},k={};d[a.STRING_EVENT_TYPE]=c;d[a.STRING_DIM_COMB_ID]=b;k[a.STRING_EVENT_DIV_METADATA]=e;k[a.STRING_EVENT_DIM_INFO]=g;k[a.STRING_DIMENSION_SELECTION_DATA]=h;d[a.STRING_EVENT_DATA]=k;return d}var c=this,h=u.$;c.twisterControllerHandle=b;c.twisterJSInitData=f;c.twisterVariationsData=g;c.twisterAvailabilityCache=e;c.dimensionsMap={};c.dimensionDisplayMap={};c.dimensionDisplayTypeMap={};c.dimensionViewHandlersMap={};c.updateView=function(b,e,n){var g={},h,d=e.dimensionSelectionData;n===a.EVENT_TYPE_MOUSEOVER?
(h=e.hoveredAsin,e=e.hoveredDimCombID):(h=e.getCurrentASIN(),e=e.getCurrentDimCombID());g[a.STRING_DIMENSION_VALUES_DATA]=c.twisterVariationsData.getDimensionValuesDisplayData(h);g[a.STRING_DIMENSION_DISPLAY_MAP]=c.dimensionDisplayMap;g[a.STRING_DIMENSIONS_MAP]=c.dimensionsMap;b=m(n,e,b,g,d);n=0;for(g=c.dimensionsMap.length;n<g;n++)c.dimensionViewHandlersMap[n].updateView(b)};c.updateViewAfterTwisterUpdate=function(b,e,n){var g={},h=e.dimensionSelectionData;e.getCurrentASIN();e=e.getCurrentDimCombID();
g[a.STRING_DIMENSION_DISPLAY_MAP]=c.dimensionDisplayMap;g[a.STRING_DIMENSIONS_MAP]=c.dimensionsMap;b=m(n,e,b,g,h);if(n===a.EVENT_TYPE_DROPDOWN_CHANGE||n===a.EVENT_TYPE_CLICK)for(n=0,g=c.dimensionsMap.length;n<g;n++)c.dimensionViewHandlersMap[n].updateViewAfterTwisterUpdate&&c.dimensionViewHandlersMap[n].updateViewAfterTwisterUpdate(b)};c.onInitializeTwister=function(){"undefined"!==typeof c.dimensionViewHandlersMap&&c.dimensionViewHandlersMap&&h.each(c.dimensionViewHandlersMap,function(a,c){if("function"===
typeof c.onInitializeTwister)c.onInitializeTwister()})};(function(b){var e=c.twisterJSInitData,n=e[a.INIT_DATA_DIMENSIONS_MAP].length,g=[],f=[],d=[],k=0;for(index=0;index<n;index++)e[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP]&&e[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][index]!==a.HIDDEN_DIMENSION_DISPLAY_TYPE&&(g[k]=e[a.INIT_DATA_DIMENSIONS_MAP][index],f[k]=e[a.INIT_DATA_DIMENSIONS_DISPLAY][index],d[k]=e[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][index],k++);c.dimensionsMap=g;c.dimensionDisplayMap=f;
c.dimensionDisplayTypeMap=d;n=0;for(g=c.dimensionsMap.length;n<g;n++)e=q.getDimensionSubViewObject(c.twisterJSInitData,c.twisterVariationsData,n.toString(10),c.twisterControllerHandle,b),c.dimensionViewHandlersMap[n]=e;h(a.CLASS_FOR_NON_JS_EVDD).hide();h(a.CLASS_FOR_NEW_TWISTER_EVDD).show();c.updateView({},c.twisterControllerHandle.initTwisterState,a.EVENT_TYPE_CLICK)})(l)}});x.when("A","twister-string-constants").register("migrated-views",function(u,q){var a=[q.TWISTER_DIMENSION_VIEW_VODD];return{getMigratedViews:function(){return a}}});
x.when("A","twister-dimension-view-factory","twister-string-constants","view-util","twister-utils").register("parent-view",function(u,q,a,b,l){return function(f,g,e,m,c){function h(){return{updateView:function(b,d){var k={},e=c.tvm;switch(b){case a.VARIATION_CHANGE:k=d.selected();n.viewUtil.getDimensionValuesData(k.selInfo,e);n.updateView(n.eventType,n.divMetaData);n.eventType===a.EVENT_TYPE_CLICK&&updateViewAfterTwisterUpdate(n.divMetaData,n.eventType);break;case a.VARIATION_PEEK:k=d.peek(),n.viewUtil.getDimensionValuesData(k.selInfo,
e),n.updateView(n.eventType,n.divMetaData)}}}}function t(){return{divMetadata:n.divMetaData,eventType:n.eventType,subType:a.DP_STATE_VIEW_SUBTYPE,dimensionsMap:n.dimensionsMap,currDimCombId:n.viewUtil.getCurrDimCombId(c.state(),a.CHAR_UNDERSCORE)}}function p(b,d){var k=c.state(),e={},g={},h={dimensionDisplayMap:n.viewUtil.getDimDisplayMap(),dimensionsMap:n.dimensionsMap,dimensionValuesData:n.viewUtil.getDimensionValuesData(k)};e[a.STRING_DIM_COMB_ID]=n.viewUtil.getCurrDimCombId(k,a.CHAR_UNDERSCORE);
e[a.STRING_EVENT_TYPE]=b;g[a.STRING_EVENT_DIV_METADATA]=d;g[a.STRING_EVENT_DIM_INFO]=h;g[a.STRING_DIMENSION_SELECTION_DATA]=n.viewUtil.getDimensionSelectionData(c.util.dimensionMetaData,k);e[a.STRING_EVENT_DATA]=g;return e}var n=this,w=u.$;n.twisterControllerHandle=f;n.twisterJSInitData=g;n.twisterVariationsData=e;n.twisterAvailabilityCache=m;n.viewUtil=new b(c);n.deletedLandingAsinInfo=g[a.INIT_DATA_DELETED_LANDING_ASIN_INFO];n.dimensionsMap=[];n.dimensionDisplayTypeMap={};n.dimensionViewHandlersMap=
{};n.divMetaData={};n.eventType="";n.twisterCore=c;n.enableMouseOut;n.handleClick=function(a,d){A.newTwisterInteractionStartTime=new Date;var k=c.state();n.divMetaData=a;n.eventType=d;if(n.viewUtil.isAlreadySelected(k,a))return!1;k=n.viewUtil.getTwisterState(a);n.twister.metaData(t());n.twister.dimensionChanged(k)};n.getCurrDimCombId=function(){return n.viewUtil.getCurrDimCombId(c.state(),a.CHAR_UNDERSCORE)};n.handleDropdownChange=function(a,d){};n.handleMouseOver=function(a,d){if(l.isTouchDevice())return n.handleClick(a,
d),!0;n.divMetaData=a;n.eventType=d;var k=c.state();n.enableMouseOut=1;if(n.viewUtil.isAlreadySelected(k,a))return!1;k=n.viewUtil.getTwisterState(a);n.twister.metaData(t());n.twister.dimensionPeek(k);return!0};n.handleMouseOut=function(a,d){n.divMetaData=a;n.eventType=d;n.viewUtil.getTwisterState(a);return 1===n.enableMouseOut?(n.enableMouseOut=0,n.twister.metaData(t()),n.twister.dimensionPeek(c.state()),!0):!1};n.updateView=function(a,d){for(var k=p(a,d),c=0,b=n.dimensionsMap.length;c<b;c++)n.dimensionViewHandlersMap[c].updateView(k)};
updateViewAfterTwisterUpdate=function(c,d){var k=p(d,c);if(d===a.EVENT_TYPE_DROPDOWN_CHANGE||d===a.EVENT_TYPE_CLICK)for(var b=0,e=n.dimensionsMap.length;b<e;b++)"function"===n.dimensionViewHandlersMap[b].updateViewAfterTwisterUpdate&&n.dimensionViewHandlersMap[b].updateViewAfterTwisterUpdate(k)};n.onInitializeTwister=function(){"undefined"!==typeof n.dimensionViewHandlersMap&&n.dimensionViewHandlersMap&&w.each(n.dimensionViewHandlersMap,function(a,d){if("function"===typeof d.onInitializeTwister)d.onInitializeTwister()})};
(function(){for(var b,d=0,k=c.tvm.dimensionList.length;d<k;d++)n.twisterJSInitData[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP]&&n.twisterJSInitData[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][d]!==a.HIDDEN_DIMENSION_DISPLAY_TYPE&&(n.dimensionDisplayTypeMap[d]=n.twisterJSInitData[a.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP][d],n.dimensionsMap[d]=n.twisterJSInitData[a.INIT_DATA_DIMENSIONS_MAP][d],b=q.getDimensionSubViewObject(n.twisterJSInitData,n.twisterVariationsData,d.toString(10),n.twisterControllerHandle,
B,n),n.dimensionViewHandlersMap[d]=b);w(a.CLASS_FOR_NON_JS_EVDD).hide();w(a.CLASS_FOR_NEW_TWISTER_EVDD).show()})();(function(){var a=h();n.twister=c.registerActive({viewAttribution:"DetailPage",viewName:"TwisterDesktopView"},a)})();n.updateView(a.EVENT_TYPE_CLICK)}});x.when("A","twister-string-constants","detail-page-state-controller","view-util","twister-utils","dp-js-logger").register("detail-page-state-controller-view",function(u,q,a,b,l,f){return function(a,e){function f(){return{updateView:function(a,
k){var b={},g=e.util,f=e.tvm,m="",t={};switch(a){case q.METADATA:k.subType===q.DP_STATE_VIEW_SUBTYPE&&(p=k.divMetadata,n=k.dimensionsMap,w=k.currDimCombId);break;case q.VARIATION_CHANGE:b=k.selected();t=r.getDimensionValuesData(b.selInfo,f);m=g.getAsinFromSelectionInfo(b.selInfo);g=r.getCurrDimCombId(b.selInfo,q.CHAR_UNDERSCORE);f=e.util;if(h.eventType==q.EVENT_TYPE_CLICK||h.eventType==q.EVENT_TYPE_DROPDOWN_CHANGE){for(var u=r.getCurrDimCombId(b.selInfo),I={},F=0,x=n.length;F<x;F++)"1"==f.isRequiredDim(n[F])&&
p.dimIndex==F&&"*"===u[F]?I[n[F]]="-1":I[n[F]]=u[F];DetailPage.StateController.setState("selected_variation_values",I)}c("selected",t,b.selInfo);c("hovered",t,b.selInfo);DetailPage.StateController.setState("current_asin",m);DetailPage.StateController.setState("currentDimCombID",g);DetailPage.StateController.setState("reactId",g);DetailPage.StateController.setState("dimensionSelectionData",r.getDimensionSelectionData(e.util.dimensionMetaData,b.selInfo));m=p[q.STRING_DIM_INDEX];b=l.getAttachedClass(p,
r.getDimNameByOrder(m));b="undefined"!==typeof b&&(-1!==b.indexOf(q.CLASS_FOR_SWATCH_UNAVAILABLE)||-1!==b.indexOf(q.CLASS_FOR_DROPDOWN_UNAVAILABLE));t=g.split(q.CHAR_UNDERSCORE);g=w.split(q.CHAR_UNDERSCORE);t[m]=q.CHAR_ASTERISK;g[m]=q.CHAR_ASTERISK;m=t.join(q.CHAR_UNDERSCORE);g=g.join(q.CHAR_UNDERSCORE);m!=g&&(b=!0);DetailPage.StateController.setState("isUnavailableInOldDimCombId",b?"true":"false");break;case q.VARIATION_PEEK:b=k.peek(),t=r.getDimensionValuesData(b.selInfo,f),m=g.getAsinFromSelectionInfo(b.selInfo),
!p||p.dimDisplayType!==q.TWISTER_DIMENSION_VIEW_VODD&&p.dimDisplayType!==q.TWISTER_DIMENSION_VIEW_SHELF&&p.dimDisplayType!==q.TWISTER_DIMENSION_VIEW_COUNTER||c("hovered",t,b.selInfo),DetailPage.StateController.setState("hovered_asin",m)}}}}function c(d,k,c){var b={};t.each(k,function(k,d){r.isDimensionSelected(k,c)&&"(Please Select)"===d&&(d=null);b[a[q.INIT_DATA_DIMENSIONS_MAP][k]]=d});DetailPage.StateController.setState(d+"_variations",b)}var h=this,t=u.$,p={},n={},w="",r=new b(e);(function(){var a=
f();h.twister=e.registerPassive({viewAttribution:"DetailPage",viewName:"DPStateControllerView"},a)})()}})})})(function(){var x=window.AmazonUIPageJS||window.P,A=x._namespace||x.attributeErrors;return A?A("DetailPageTwisterAssets"):x}(),window);