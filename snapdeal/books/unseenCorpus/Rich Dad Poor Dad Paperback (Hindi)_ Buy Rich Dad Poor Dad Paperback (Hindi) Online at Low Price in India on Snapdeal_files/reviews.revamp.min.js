$.easing.circleProgressEasing=function(B,C,A,E,D){if((C/=D/2)<1){return E/2*C*C*C+A}return E/2*((C-=2)*C*C+2)+A};$.fn.circleProgress=function(A){if(A=="widget"){return this.data("circle-progress")}$.circleProgress={defaults:{value:0,size:110,startAngle:-Math.PI,thickness:"auto",fill:{gradient:["#3aeabb","#fdd250"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,easing:"circleProgressEasing"}}};A=$.extend({},$.circleProgress.defaults,A);return this.each(function(){var C=$(this),J=A.size,E=J/2,B=J/14,L=A.value,O=A.startAngle,N=A.emptyFill,R;if($.isNumeric(A.thickness)){B=A.thickness}var D=C.data("circle-progress");if(!D){D=$("<canvas>").prependTo(C)[0];C.data("circle-progress",D)}if($("html").hasClass("ie8")==true){return }D.width=J;D.height=J;var M=D.getContext("2d");if(!A.fill){throw Error("The fill is not specified!")}if(A.fill.color){R=A.fill.color}if(A.fill.gradient){var K=A.fill.gradient;if(K.length==1){R=K[0]}else{if(K.length>1){var I=M.createLinearGradient(0,0,J,0);for(var P=0;P<K.length;P++){I.addColorStop(P/(K.length-1),K[P])}R=I}}}if(A.fill.image){var S=new Image();S.src=A.fill.image;S.onload=function(){var T=$("<canvas>")[0];T.width=J;T.height=J;T.getContext("2d").drawImage(S,0,0,J,J);R=M.createPattern(T,"no-repeat");if(!A.animation){H(L)}}}if(A.animation){Q(L)}else{H(L)}function H(T){M.clearRect(0,0,J,J);F(T);G(T)}function F(T){M.save();M.beginPath();M.arc(E,E,E-B/2,O,O+Math.PI*2*T);M.lineWidth=B;M.strokeStyle=R;M.stroke();M.restore()}function G(T){M.save();if(T<1){M.beginPath();if(T<=0){M.arc(E,E,E-B/2,0,Math.PI*2)}else{M.arc(E,E,E-B/2,O+Math.PI*2*T,O)}M.lineWidth=B;M.strokeStyle=N;M.stroke()}M.restore()}function Q(T){C.trigger("circle-animation-start");$(D).css({progress:0}).animate({progress:T},$.extend({},A.animation,{step:function(U){H(U);C.trigger("circle-animation-progress",[U/T,U])},complete:function(){C.trigger("circle-animation-end")}}))}})};
(function(A){"function"===typeof define&&define.amd?define(["jquery"],A):"undefined"!==typeof module&&module.exports?module.exports=A(require("jquery")):A(jQuery)})(function(B){function D(E){return !E.nodeName||-1!==B.inArray(E.nodeName.toLowerCase(),["iframe","#document","html","body"])}function A(E){return B.isFunction(E)||B.isPlainObject(E)?E:{top:E,left:E}}var C=B.scrollTo=function(F,G,E){return B(window).scrollTo(F,G,E)};C.defaults={axis:"xy",duration:0,limit:!0};B.fn.scrollTo=function(F,H,E){"object"===typeof H&&(E=H,H=0);"function"===typeof E&&(E={onAfter:E});"max"===F&&(F=9000000000);E=B.extend({},C.defaults,E);H=H||E.duration;var G=E.queue&&1<E.axis.length;G&&(H/=2);E.offset=A(E.offset);E.over=A(E.over);return this.each(function(){function K(Q){var R=B.extend({},E,{queue:!0,duration:H,complete:Q&&function(){Q.call(O,P,E)}});M.animate(N,R)}if(null!==F){var I=D(this),O=I?this.contentWindow||window:this,M=B(O),P=F,N={},L;switch(typeof P){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(P)){P=A(P);break}P=I?B(P):B(P,O);if(!P.length){return }case"object":if(P.is||P.style){L=(P=B(P)).offset()}}var J=B.isFunction(E.offset)&&E.offset(O,P)||E.offset;B.each(E.axis.split(""),function(R,W){var U="x"===W?"Left":"Top",Q=U.toLowerCase(),T="scroll"+U,S=M[T](),V=C.max(O,W);L?(N[T]=L[Q]+(I?0:S-M.offset()[Q]),E.margin&&(N[T]-=parseInt(P.css("margin"+U),10)||0,N[T]-=parseInt(P.css("border"+U+"Width"),10)||0),N[T]+=J[Q]||0,E.over[Q]&&(N[T]+=P["x"===W?"width":"height"]()*E.over[Q])):(U=P[Q],N[T]=U.slice&&"%"===U.slice(-1)?parseFloat(U)/100*V:U);E.limit&&/^\d+$/.test(N[T])&&(N[T]=0>=N[T]?0:Math.min(N[T],V));!R&&1<E.axis.length&&(S===N[T]?N={}:G&&(K(E.onAfterFirst),N={}))});K(E.onAfter)}})};C.max=function(G,J){var E="x"===J?"Width":"Height",I="scroll"+E;if(!D(G)){return G[I]-B(G)[E.toLowerCase()]()}var E="client"+E,H=G.ownerDocument||G.document,F=H.documentElement,H=H.body;return Math.max(F[I],H[I])-Math.min(F[E],H[E])};B.Tween.propHooks.scrollLeft=B.Tween.propHooks.scrollTop={get:function(E){return B(E.elem)[E.prop]()},set:function(F){var G=this.get(F);if(F.options.interrupt&&F._last&&F._last!==G){return B(F.elem).stop()}var E=Math.round(F.now);G!==E&&(B(F.elem)[F.prop](E),F._last=this.get(F))}};return C});
var Snapdeal=Snapdeal||{};var productId=$("#product_Id").val();var productPageUrl=$("#productPageUrl").val();var reviewPgSrc=$("#reviewPgSrc").val();var rc_sortBy=$("#rc_sortBy").val();Snapdeal.pdpReview=(function(D,G){var F,H,A,C,B,E;var I=0;C={RVW_CONST:{TAGS:[],USER_NICK_NAME:"",SOURCE:"",SHOW_TAGS:false,FEEDBACK:{YES:1,NO:2,UN_MARK:3},PAGE_STATE:{},CONFIG:{NON_BUYER_FLAG:true,BUYER:false},REVIEW:{ID:null,RATING:0,RECOMMENDATION:null}},readReviewScroll:false,isRatingDone:false};E={USER:{SDPT:{REQ:0,MAX_REQ:5}}};A={COLORS:["#fba565","#5fcbef","#aa8fb7","#63d6d1","#e06a6e","#daab85"],showReturnReplaceTooltip:D(".showReturnReplaceTooltip"),heroProductAttr:D("#product-attr-options"),pincodeVal:D("#pincode-check").val(),pogId:D("#productId")};H={_init:function(J){B=D.extend(true,{},C,J,A);H._fetchUserInitial();D(document).ready(function(){H._customizeSelect("#defaultReviewsCard");window.onpopstate=function(L){var K=window.location.href;if(L.state){document.getElementById("defaultReviewsCard").innerHTML=L.state.html;H._fetchUserActions(true);H._fetchUserInitial();Snapdeal.selectCommonConfigure.customSelect(D("#defaultReviewsCard"))}else{if(I==1&&(K.indexOf("/reviews")!=-1||K.indexOf("/searchReviews")!=-1)){location.reload()}}};D("#sdHeader").on("userLoggedIn",function(L,K){window.loggedinUser=true;H._fetchPostToken(function(){H._fetchUserContent(function(){H._submitSavedPost(function(){H._fetchUserActions()})})})});D("#sdHeader").on("userLoggedOut",function(L,K){window.loggedinUser=false});if(window.loggedinUser){H._fetchPostToken(function(){H._fetchUserContent(function(){H._submitSavedPost(function(){H._fetchUserActions()})})})}D("[md-data-rating]").each(function(){var N=D(this);var L,K,M,O;L=N.find("i.sd-icon").width();L=L||13;if(N.hasClass("sd-product-main-rating")){L=14}else{if(N.hasClass("sd-product-float-buy-rating")){L=13}}K=N.attr("md-data-rating");O=K-parseInt(K);M=L*K;M+=(O!==0?5*(0.5-(O)):0);N.css("width",M+"px")});D("#searchReviewsBox").on("focus",function(L){var K=D(this);if(K.val().length){K.css("opacity","1")}else{K.css("opacity","0.6")}}).on("blur",function(L){var K=D(this);K.css("opacity","1")}).on("keydown",function(L){var K=D(this);K.css("opacity","1")})});D(window).load(function(){if(reviewPgSrc=="PDP"&&D(".commentreview").length!=0){D(window).scroll(H._readReviewScroll)}});if(D("#rc_reviewSwitch").val()=="true"){D(".third .fa-star").on("mouseover",function(){var L=D(this).attr("sval");var K=H._textForRating(L);D(this).parent().next().html(K);D(this).addClass("active");D(this).nextAll().removeClass("active");D(this).prevAll().addClass("active")});D(".third .fa-star").on("mouseout",function(){var L=D(this).parent().attr("_rateScore");var K=H._textForRating(L);D(this).parent().next().html(K);D(this).parent().find("i").each(function(M){if(L>M){D(this).addClass("active")}else{D(this).removeClass("active")}})});if(reviewPgSrc&&reviewPgSrc=="PDP"){D(".product_review").on("click",".js-pdp-nav-sec",function(){D(window).scrollTo(D(D(this).attr("data-link-nav")).offset().top-60,1000)})}D(".pdp-e-i-ratereviewQA").on("click",".js-jl-omni",function(){getOmnitureScript({catalogId:D("#catalogId").val(),clickLink:D(this).attr("source")},"reviewJumpLink")})}D(".sidebar .sidebaroverlay, .sidebar .close1").click(function(){D("body").removeClass("lock");D(".sidebar").removeClass("open")});D("body").click(function(K){if(D(K.target).attr("id")==="ratings-details-box-outer"||D(K.target).parentsUntil("#ratings-details-box-outer").parent().attr("id")==="ratings-details-box-outer"){}else{if(D("#ratings-details-box-outer").is(":visible")){D("#ratings-details-box-outer").addClass("displaynone");D("a.showRatingTooltip").removeClass("attach-arrow")}}});D(".showRatingTooltip").on("click",function(K){K.stopPropagation();D(".popover,.tooltip,div.options").hide();D("a.showRatingTooltip").removeClass("attach-arrow");D("a.showRatingTooltip").addClass("attach-arrow");H._infogramBox(productId);getOmnitureScript({catalogId:D("#catalogId").val()},"ratingInfogram")});A.showReturnReplaceTooltip.on("click",function(K){K.stopPropagation();Snapdeal.tooltip.init({parent:D(this),position:"bottom",content:D("#policyengn-box-outer").html(),isPopOver:true,customClass:"policyEngineTooltip"})})},_customizeSelect:function(J){Snapdeal.selectCommonConfigure.customSelect(D(J))},_fetchUserInitial:function(){D(".reviewer-imgName").remove();D(".userimg").each(function(){var J=H._getRandomColorForUserImg(this,true);D(this).prepend(J)})},_fetchPostToken:function(J){if(E.USER.SDPT.TOKEN||E.USER.SDPT.REQ>=E.USER.SDPT.MAX_REQ){return }D.ajax({url:"/acors/getSDPT",type:"GET",dataType:"json",success:function(M){E.USER.SDPT.REQ=++E.USER.SDPT.REQ;var L=M.items;if(L){E.USER.SDPT.TOKEN={};for(var K in L){E.USER.SDPT.TOKEN[K]=L[K]}}if(J){J.call()}},error:function(N,K,M){E.USER.SDPT.REQ=++E.USER.SDPT.REQ;var L=N.responseText;H._showMsgOnConsole(L.message)}})},_getPostToken:function(){if(E.USER.SDPT.TOKEN){var K="";for(var J in E.USER.SDPT.TOKEN){K+="&"+J+"="+E.USER.SDPT.TOKEN[J]}return K}},_tokenError:function(J){if(J.status==403){E.USER.SDPT.TOKEN="";H._fetchPostToken();return true}return false},_fetchUserActions:function(L){if(!window.loggedinUser){if(!L){window.showLogin()}}else{H._customizeSelect("#defaultReviewsCard");var J=[];D(".commentlist.jsUserAction").each(function(M){var N=this.getAttribute("id");N=N.replace("_reviewDiv","");J.push(N)});if(J.length>0){var K="/review/userAction/"+productId+"?reviewIds="+J;D.ajax({url:K,type:"GET",dataType:"JSON",success:function(O){D(".hf-review .hf-yes").removeClass("yesClicked");for(var M in O){var N=O[M];if(N.liked){var P=N.reviewId+"_reviewDiv";D("div[id="+P+"]").each(function(){var Q=D(this).find(".hf-review .hf-yes");if(Q){D(Q).addClass("yesClicked")}})}}},error:function(P,M,O){if(P.responseText){var N=JSON.parse(P.responseText);H._showMsgOnConsole(N.message)}}})}}},_fetchUserContent:function(K){if(!window.loggedinUser){window.showLogin()}else{var J="/review/userContent/"+productId;D.ajax({url:J,type:"GET",dataType:"JSON",success:function(M){C.RVW_CONST.CONFIG.NON_BUYER_FLAG=M.nonBuyerReviewFlag;C.RVW_CONST.CONFIG.BUYER=M.buyer;if(M.review){var L=M.review;C.RVW_CONST.REVIEW=L;C.RVW_CONST.REVIEW.ID=L.id;if(L.reviewed==true){H._markRatingStars(L.rating,true);D(".js-userReviewed").addClass("disabled");D(".fa-star").unbind("mouseover");D(".fa-star").unbind("mouseout");D(".fa-star").css("cursor","auto");D(".fa-star").prop("onclick",null);D("#rev-text span").text("Thank you for your review.")}else{if(L.reviewed==false&&L.rating>0){H._markRatingStars(L.rating,true)}}if(L.recommended){H._markUserRecommendation(L.recommended,true)}}},error:function(O,L,N){if(O.responseText){var M=JSON.parse(O.responseText);H._showMsgOnConsole(M.message)}}}).always(function(){if(K){K.call()}})}},_markRatingStars:function(L,M){C.isRatingDone=true;C.RVW_CONST.REVIEW.RATING=L;var K=document.getElementById("user-reviewRate-content-div");var J=H._textForRating(L);D(K).find(".rate-txt").html(J);D(K).find("strong").attr("_rateScore",L);D(K).find(".circle").attr("data-percent",L*20);if(M){D("#rev-text span").html("Thank you for your rating.")}else{D("#rev-text span").html("Thank you!<br />Your rating will reflect soon.")}D(K).find(".charttxt i").each(function(N){--L;if(L>=0){D(this).addClass("active")}else{D(this).removeClass("active")}})},_markUserRecommendation:function(J,L){if(J=="ABSTAIN"){C.RVW_CONST.REVIEW.RECOMMENDATION="ABSTAIN";return }if(L){D("#rcmnd-text span").addClass("thankText").html("Thank you for your recommendation.")}else{D("#rcmnd-text span").html("").html("Thank you!<br />Your recommendation will reflect soon.").addClass("thankText")}D(".recom-subtext").css("visibility","hidden");C.RVW_CONST.REVIEW.RECOMMENDATION=J;var K=document.getElementById("user-reviewRec-content-div");if(J=="YES"){D(K).find("#recBtn").addClass("disabled").removeClass("btn-blue");D(K).find("#notRecBtn").addClass("btn-blue").removeClass("disabled")}else{if(J=="NO"){D(K).find("#notRecBtn").addClass("disabled").removeClass("btn-blue");D(K).find("#recBtn").addClass("btn-blue").removeClass("disabled")}}},_textForRating:function(J){if(J<1){return"Rate it!"}else{if(J<1.1){return"Disappointing"}else{if(J<2.1){return"Bad"}else{if(J<3.1){return"Average"}else{if(J<4.1){return"Good"}}}}}return"Perfect"},_infogramBox:function(K){var J=D("#ratings-details-box-outer")[0];if(D(J).hasClass("displaynone")){D("#reviews-Overlay").addClass("popup-Overlay");D(J).removeClass("displaynone");if(!D(J).hasClass("infodata")){D(J).addClass("infodata");D(J).addClass("infogram-loader");var L="/review/stats/"+K;D.ajax({url:L,type:"GET",dataType:"html",success:function(M){D(J).append(M);D(J).removeClass("infogram-loader")},error:function(P,M,O){if(P.responseText){var N=JSON.parse(P.responseText);H._showMsgOnConsole(N.message)}D(J).removeClass("infodata")}})}}},_fetchHelpfulReviews:function(L,J){if(reviewPgSrc&&reviewPgSrc=="PDP"){H._searchOmniture("PDPReviewSortBy","Helpful");var M="/product/"+productId+"/reviews/ajax?sortBy=HELPFUL";if(L>0){M+="&rateFilter="+L}D.ajax({url:M,type:"GET",dataType:"html",success:function(O){D("#defaultReviewsCard").html(O);H._fetchUserActions(true);H._fetchUserInitial();Snapdeal.selectCommonConfigure.customSelect(D("#defaultReviewsCard"))},error:function(R,O,Q){if(R.responseText){var P=JSON.parse(R.responseText);H._showMsg(P.message)}}})}else{var N=window.location.href;if(L>0&&J==""){if(N.indexOf("ratedreviews")!=-1){var K=N.split("ratings=")[1].split("#defRevPDP")[0].split("&")[0];window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/ratedreviews?ratings="+K+"&sortBy=HELPFUL"+(L>0?("&rateFilter="+L):"")+"#defRevPDP"}else{window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/reviews?sortBy=HELPFUL"+(L>0?("&rateFilter="+L):"")+"#defRevPDP"}}else{if(L>0&&J!=""){window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/searchReviews/"+productId+"?keywords="+J+"&sortBy=HELPFUL"+(L>0?("&rateFilter="+L):"")+"#defRevPDP"}else{if(L==0&&J==""){var N=window.location.href;if(N.indexOf("ratedreviews")!=-1){var K=N.split("ratings=")[1].split("#defRevPDP")[0].split("&")[0];window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/ratedreviews?ratings="+K+"&sortBy=HELPFUL#defRevPDP"}else{window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/reviews?sortBy=HELPFUL#defRevPDP"}}else{window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/searchReviews/"+productId+"?keywords="+J+"&sortBy=HELPFUL#defRevPDP"}}}}},_fetchRecentReviews:function(L,J){if(reviewPgSrc&&reviewPgSrc=="PDP"){H._searchOmniture("PDPReviewSortBy","Recent");var M="/product/"+productId+"/reviews/ajax?sortBy=RECENCY";if(L>0){M+="&rateFilter="+L}D.ajax({url:M,type:"GET",dataType:"html",success:function(O){D("#defaultReviewsCard").html(O);H._fetchUserActions(true);H._fetchUserInitial();Snapdeal.selectCommonConfigure.customSelect(D("#defaultReviewsCard"))},error:function(R,O,Q){if(R.responseText){var P=JSON.parse(R.responseText);H._showMsg(P.message)}}})}else{var N=window.location.href;if(L>0&&J==""){if(N.indexOf("ratedreviews")!=-1){var K=N.split("ratings=")[1].split("#defRevPDP")[0].split("&")[0];window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/ratedreviews?ratings="+K+"&sortBy=RECENCY"+(L>0?("&rateFilter="+L):"")+"#defRevPDP"}else{window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/reviews?sortBy=RECENCY"+(L>0?("&rateFilter="+L):"")+"#defRevPDP"}}else{if(L>0&&J!=""){window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/searchReviews/"+productId+"?keywords="+J+"&sortBy=RECENCY"+(L>0?("&rateFilter="+L):"")+"#defRevPDP"}else{if(L==0&&J==""){if(N.indexOf("ratedreviews")!=-1){var K=N.split("ratings=")[1].split("#defRevPDP")[0].split("&")[0];window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/ratedreviews?ratings="+K+"&sortBy=RECENCY#defRevPDP"}else{window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/reviews?sortBy=RECENCY#defRevPDP"}}else{window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/searchReviews/"+productId+"?keywords="+J+"&sortBy=RECENCY#defRevPDP"}}}}},_fetchRatingFilteredReviews:function(M,N,L){if(reviewPgSrc&&reviewPgSrc=="PDP"){var J="/product/"+productId+"/reviews/ajax";if(M>0){H._searchOmniture("PDPReviewFilterBy",M+"star");J+="?rateFilter="+M;if(N=="HELPFUL"||N=="RECENCY"){J+="&sortBy="+N}else{if(N=="default"){J+="&sortBy="+rc_sortBy}}}else{if(N=="HELPFUL"||N=="RECENCY"){J+="?sortBy="+N}else{if(N=="default"){J+="?sortBy="+rc_sortBy}}}var K=D("#defaultReviewsCard")[0];D.ajax({url:J,type:"GET",dataType:"html",success:function(O){D(K).html(O);H._fetchUserActions(true);H._fetchUserInitial();Snapdeal.selectCommonConfigure.customSelect(D("#defaultReviewsCard"))},error:function(R,O,Q){if(R.responseText){var P=JSON.parse(R.responseText);H._showMsg(P.message)}}})}else{if(N=="RECENCY"&&L==""){window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/reviews?sortBy=RECENCY"+(M>0?("&rateFilter="+M):"")+"#defRevPDP"}else{if(N=="RECENCY"&&L!=""){window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/searchReviews/"+productId+"?sortBy=RECENCY&keywords="+L+(M>0?("&rateFilter="+M):"")+"#defRevPDP"}else{if(N=="HELPFUL"&&L==""){window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/reviews?sortBy=HELPFUL"+(M>0?("&rateFilter="+M):"")+"#defRevPDP"}else{window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/searchReviews/"+productId+"?sortBy=HELPFUL&keywords="+L+(M>0?("&rateFilter="+M):"")+"#defRevPDP"}}}}},_navigateToWriteReviewPage:function(J,K){if(!window.loggedinUser){H._savePageState(J,K,"","isBuyer");window.showLogin()}else{var L="/review/isBuyer/"+K;D.ajax({url:L,type:"GET",dataType:"JSON",success:function(N){if(N.buyer==false){D(".js-userReviewed").addClass("disabled");D(".fa-star").unbind("mouseover");D(".fa-star").unbind("mouseout");D(".fa-star").css("cursor","auto");D(".fa-star").prop("onclick",null);D("#rev-text span").text("Only verified buyers are allowed to Write Review");D("html, body").animate({scrollTop:(D("#reviewsContainer").offset().top)-70},1500);return }if(!C.RVW_CONST.CONFIG.NON_BUYER_FLAG&&!C.RVW_CONST.CONFIG.BUYER){return }var O=C.RVW_CONST.REVIEW.RECOMMENDATION&&C.RVW_CONST.REVIEW.RECOMMENDATION!="ABSTAIN"?"&recomm="+C.RVW_CONST.REVIEW.RECOMMENDATION:"";var M=C.RVW_CONST.REVIEW.RATING&&C.RVW_CONST.REVIEW.RATING!=0?"&rating="+C.RVW_CONST.REVIEW.RATING:"";window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/review/create?productId="+K+O+M+"&source=pdp"},error:function(P,M,O){if(H._tokenError(P)){return }if(P.responseText){var N=JSON.parse(P.responseText);H._showMsg(N.message)}}}).always(function(){localStorage.removeItem(K+"_rvw_content");D(J).removeClass("prevent-clicks")})}},_submitSavedPost:function(M){var K=H._getSavedPageState();if(!K){if(M){M.call()}return }var J={};var L="";if(K.USER_STATE){J=K.USER_STATE;if(K.USER_STATE.type=="vote"){H._markReviewHelpfulAfterLogin(J.dis,J.productId,J.reviewId,M);L="vote"}if(K.USER_STATE.type=="rate"){H._rateProduct(J.obj,J.productId,J.reviewId,M);L="rate"}if(K.USER_STATE.type=="recommend"){H._recommendProduct(J.obj,J.productId,J.reviewId,M);L="recommend"}if(K.USER_STATE.type=="isBuyer"){H._navigateToWriteReviewPage(J.obj,J.productId);L="isBuyer"}H._removeSavedPageState()}else{if(M){M.call()}return }},_savePageState:function(K,M,J,L){var N={productId:M,reviewId:J,type:L};if(L=="vote"){N.dis=jQuery(K).hasClass("yesClicked")}var O=H._getSavedPageState();O=O?O:{};B.RVW_CONST.PAGE_STATE.USER_STATE=N;O.USER_STATE=N;console.log(O);localStorage.setItem(M+"_rvw_content",JSON.stringify(O));setTimeout(function(){H._removeSavedPageState()},1800000)},_removeSavedPageState:function(){localStorage.removeItem(productId+"_rvw_content")},_getSavedPageState:function(){var J=localStorage.getItem(productId+"_rvw_content");if(J){return JSON.parse(J)}},_markReviewHelpfulAfterLogin:function(K,L,J,O){if(!window.loggedinUser){H._savePageState(K,L,J,"vote");window.showLogin()}else{if(K!="true"){getOmnitureScript({catalogId:D("#catalogId").val(),pageSource:reviewPgSrc,reviewId:J},"markReviewHelpful")}var N=K!="true"?C.RVW_CONST.FEEDBACK.YES:C.RVW_CONST.FEEDBACK.UN_MARK;var M="/review/feedback?productId="+L+"&reviewId="+J+"&value="+N;M+=H._getPostToken();console.log("sdd");D.ajax({url:M,type:"POST",dataType:"JSON",success:function(P){var Q=J+"_reviewDiv";D("div[id="+Q+"]").each(function(){var R=D(this).find(".hf-num")[0];if(N==C.RVW_CONST.FEEDBACK.YES){D(this).find(".hf-yes").addClass("yesClicked");if(R){R.innerHTML=parseInt(R.innerHTML)+1}}else{if(N==C.RVW_CONST.FEEDBACK.UN_MARK){D(this).find(".hf-yes").removeClass("yesClicked");if(R){R.innerHTML=parseInt(R.innerHTML)-1}}}})},error:function(S,P,R){if(H._tokenError(S)){return }if(S.responseText){var Q=JSON.parse(S.responseText);H._showMsg(Q.message)}}}).always(function(){if(O){O.call()}})}},_markReviewHelpful:function(K,L,J,O){if(!window.loggedinUser){H._savePageState(K,L,J,"vote");window.showLogin()}else{if(D(K).hasClass("prevent-clicks")){return }else{D(K).addClass("prevent-clicks");if(D(K).hasClass("yesClicked")){getOmnitureScript({catalogId:D("#catalogId").val(),pageSource:reviewPgSrc,reviewId:J},"markReviewHelpful")}var N=K.className.indexOf("yesClicked")==-1?C.RVW_CONST.FEEDBACK.YES:C.RVW_CONST.FEEDBACK.UN_MARK;var M="/review/feedback?productId="+L+"&reviewId="+J+"&value="+N;M+=H._getPostToken();D.ajax({url:M,type:"POST",dataType:"JSON",success:function(P){var Q=J+"_reviewDiv";D("div[id="+Q+"]").each(function(){var R=D(this).find(".hf-num")[0];if(N==C.RVW_CONST.FEEDBACK.YES){D(this).find(".hf-yes").addClass("yesClicked");if(R){R.innerHTML=parseInt(R.innerHTML)+1}}else{if(N==C.RVW_CONST.FEEDBACK.UN_MARK){D(this).find(".hf-yes").removeClass("yesClicked");if(R){R.innerHTML=parseInt(R.innerHTML)-1}}}})},error:function(S,P,R){if(H._tokenError(S)){return }if(S.responseText){var Q=JSON.parse(S.responseText);H._showMsg(Q.message)}}}).always(function(){localStorage.removeItem(L+"_rvw_content");D(K).removeClass("prevent-clicks");if(O){O.call()}})}}},_rateProduct:function(J,L,K,N){if(!window.loggedinUser){H._savePageState(J,L,K,"rate");window.showLogin()}else{var M="/review/isBuyer/"+L;D.ajax({url:M,type:"GET",dataType:"JSON",success:function(P){if(P.buyer==false){H._markRatingStars(0);D(".js-userReviewed").addClass("disabled");D(".fa-star").unbind("mouseover");D(".fa-star").unbind("mouseout");D(".fa-star").css("cursor","auto");D(".fa-star").prop("onclick",null);D("#rev-text span").text("Only verified buyers are allowed to Write Review");return }if(!C.isRatingDone){getOmnitureScript({email:D("#sharerEmail").val(),catalogId:D("#catalogId").val(),ratingValue:K,pageSource:reviewPgSrc},"rateProduct")}var O="/review/rate/"+L+"/create?rating="+K;if(C.RVW_CONST.REVIEW.ID&&C.RVW_CONST.REVIEW.ID!=""){O="/review/rate/"+L+"/update?rating="+K+"&reviewId="+C.RVW_CONST.REVIEW.ID}O+=H._getPostToken();D.ajax({url:O,type:"POST",dataType:"JSON",success:function(Q){H._markRatingStars(K);C.RVW_CONST.REVIEW.ID=Q&&Q.object?Q.object:C.RVW_CONST.REVIEW.ID},error:function(T,Q,S){if(H._tokenError(T)){return }if(T.responseText){var R=JSON.parse(T.responseText);H._showMsg(R.message)}}}).always(function(){localStorage.removeItem(L+"_rvw_content");if(N){N.call()}})},error:function(R,O,Q){if(H._tokenError(R)){return }if(R.responseText){var P=JSON.parse(R.responseText);H._showMsg(P.message)}}})}},_recommendProduct:function(J,K,N,O){if(!window.loggedinUser){H._savePageState(J,K,N,"recommend");window.showLogin()}else{if(D(J).hasClass("disabled")||D(J).hasClass("prevent-clicks")){return }else{D(J).addClass("prevent-clicks");getOmnitureScript({catalogId:D("#catalogId").val(),recommendValue:N,pageSource:reviewPgSrc},"recommendReview");var M="/review/recommendation/"+K+"/create?rec="+N;var L=C.RVW_CONST.REVIEW.RECOMMENDATION;if(C.RVW_CONST.REVIEW.ID&&C.RVW_CONST.REVIEW.ID!=""){M="/review/recommendation/"+K+"/update?";if(L==N){N="ABSTAIN"}M+="rec="+N+"&reviewId="+C.RVW_CONST.REVIEW.ID}M+=H._getPostToken();D.ajax({url:M,type:"POST",dataType:"JSON",success:function(P){H._markUserRecommendation(N);C.RVW_CONST.REVIEW.ID=P&&P.object?P.object:C.RVW_CONST.REVIEW.ID},error:function(S,P,R){if(H._tokenError(S)){return }if(S.responseText){var Q=JSON.parse(S.responseText);H._showMsg(Q.message)}}}).always(function(){localStorage.removeItem(K+"_rvw_content");D(J).removeClass("prevent-clicks");if(O){O.call()}})}}},_getRandomColorForUserImg:function(N,J){if(J){var L="U";if(N){var M=D(N).find("._reviewUserName")[0];if(M){L=M.innerHTML;L=L?L.substr(0,1).toUpperCase():""}}var K=B.COLORS[Math.floor(Math.random()*B.COLORS.length)];return'<span class="reviewer-imgName" style="background:'+K+'">'+(L)+"</span>"}else{return'<span class="reviewer-imgName"></span>'}},_showSuccessMsg:function(J){D(".review-alert-success").show();D(window).scrollTo(D(".customer_review_tab"),600);D(".alert-success").text(J?J:"Feedback Submitted");setTimeout(function(){D(".review-alert-success").hide()},5000)},_showMsg:function(J){D(".review-alert-error").show();D(window).scrollTo(D(".customer_review_tab"),400);D(".alert-failure").text(J?J:"Server Error");setTimeout(function(){D(".review-alert-error").hide()},5000)},_showMsgOnConsole:function(J){console.log(J?J:"Server Error")},_searchReviews:function(K,L,N){H._searchOmniture("SubmitSearchReview","");if(reviewPgSrc&&reviewPgSrc=="PDP"){window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/searchReviews/"+productId+"?keywords="+K+(L>0?("&rateFilter="+L):"")+"&sortBy="+N+"#defRevPDP"}else{var M="/searchReviews/"+productId+"/ajax?keywords="+K+"&sortBy="+N;var J="/searchReviews/"+productId+"?keywords="+K+"&sortBy="+N;if(L>0){M+="&rateFilter="+L;J+="&rateFilter="+L}D("#loadingmessage").show();D("#resetImgRnR").hide();D.ajax({url:M,type:"GET",dataType:"html",success:function(Q){I=1;var P=D("#searchReviewsBox").val();D("#defaultReviewsCard").html(Q);window.history.pushState({html:Q,url:J},"",J);H._fetchUserActions(true);H._fetchUserInitial();Snapdeal.selectCommonConfigure.customSelect(D("#defaultReviewsCard"));D("#loadingmessage").hide();D("#resetImgRnR").show();var O=document.getElementById("searchReviewsBox");O.value=P;O.focus();O.setSelectionRange(O.value.length,O.value.length)},error:function(R,O,Q){if(R.responseText){var P=JSON.parse(R.responseText);H._showMsg(P.message)}}})}},_resetReviews:function(J){location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/reviews?sortBy="+J+"#defRevPDP"},_searchOmniture:function(L,J){var K={email:D("#sharerEmail").val(),catalogId:D("#catalogId").val()};if(J){K.clickLink=J}getOmnitureScript(K,L)},_positiveReviews:function(){var J="4,5";H._searchOmniture("ViewAllPositiveReviews","");window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/ratedreviews?ratings="+J+"#defRevPDP"},_negativeReviews:function(){var J="1,2,3";H._searchOmniture("ViewAllNegativeReviews","");window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/ratedreviews?ratings="+J+"#defRevPDP"},_showPopup:function(J){D("#"+J).css("display","block")},_hidePopup:function(J){D("#"+J).css("display","none")},_readReviewScroll:function(){var M=".commentreview";var K=D(M).offset().top;var J=D(window).scrollTop();var L=D(M).height();if(J>K+L){if(C.readReviewScroll==false){C.readReviewScroll=true;H._searchOmniture("PDP_Scroll_RecentReviews","")}}}};F={init:function(){return H._init.apply(this,arguments)},fetchUserInitial:function(){H._fetchUserInitial()},fetchHelpfulReviews:function(J,L,K){H._fetchHelpfulReviews(L,K)},fetchRecentReviews:function(J,L,K){H._fetchRecentReviews(L,K)},applyRatingFilter:function(J,L,K){H._fetchRatingFilteredReviews(J.value,L,K)},displayReviewsWithRatingFilter:function(K,J,L){if(J&&J>0&&J<6){H._fetchRatingFilteredReviews(J,L,keywords)}else{if(J==0){H._fetchRatingFilteredReviews(0,L,keywords)}}if(reviewPgSrc!=undefined){getOmnitureScript({catalogId:D("#catalogId").val(),ratingFilter:J,sortBy:L,pageSource:reviewPgSrc,clickLink:D(this).attr("source")},"ratingFilterBar")}},rateProduct:function(J,L,K){if(!L||!K||K<0||K>6){return }H._rateProduct(J,L,K)},recommendProduct:function(J,K,L){if(!K||!L){return }H._recommendProduct(J,K,L)},navigateToHelpfulReviewsPage:function(J,K,L){window.location.href=(window.location.protocol?window.location.protocol+"//":"")+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/"+productPageUrl+"/reviews?page=2&sortBy=HELPFUL"+(K&&K>0?"&rateFilter="+K:"")},searchReviewsClickOmniture:function(){H._searchOmniture("ClickOnSearchReview","");return true},writeReview:function(J,K){if(D(J).hasClass("disabled")){return }else{H._navigateToWriteReviewPage(J,K)}},markReviewHelpful:function(K,J){H._markReviewHelpful(K,window.productId,J)},textForRating:function(J){H._textForRating(J)},searchReviews:function(J,K,L){if(J.match(/^\s*$/)&&reviewPgSrc=="PDP"){return }else{if(J.match(/^\s*$/)&&reviewPgSrc!="PDP"){H._resetReviews(L)}else{H._searchReviews(J,K,L)}}},resetReviews:function(J){H._resetReviews(J)},positiveReviews:function(){H._positiveReviews()},negativeReviews:function(){H._negativeReviews()},showReviewPopup:function(J){if(J=="reviewPopupForPositiveReview"){H._searchOmniture("ReadMoreReviews","positiveReviews")}else{H._searchOmniture("ReadMoreReviews","negativeReviews")}H._showPopup(J)},hideReviewPopup:function(J){H._hidePopup(J)}};return F})(window.jQuery,Snapdeal);$(document).ready(function(){Snapdeal.pdpReview.init()});
var Snapdeal=Snapdeal||{};Snapdeal.pdpSelfies=(function(F,D){var C,B,A,E;E={slider:null,enlargedSelfie:null,enlargedViewData:null,slideIndex:1,slideData:{},slideDataLength:0,selfieMaxSlides:5,slideCount:0,eid:Snapdeal.Cookie.get("eid")||"",selfieHeadline:"Selfie",};A={pdpSelfieSliderDiv:F("#pdp-selfie-div"),productIdDiv:F("#productId"),selfieBlock:F("#selfiesBlk"),selfieProducts:F("#pdp-selfie-div .selfie-product"),selfieSliderWidget:F("#selfieSliderWidget"),selfieClass:F(".selfieClass"),selfieCountHeader:F("#selfieCount"),selfieCountValue:F(".selfieCountValue"),};B={_init:function(){B._bindEvents();B._afterWindowLoad()},_bindEvents:function(){A.pdpSelfieSliderDiv.one("click",".selfie-product",B._openEnlargedView);A.pdpSelfieSliderDiv.on("click",".sd-icon-previous",B._onSlidePrev);F(document).on("sidebarClosed",function(G){setTimeout(function(){A.pdpSelfieSliderDiv.one("click",".selfie-product",B._openEnlargedView)},500)})},_openEnlargedView:function(H){getOmnitureScript({email:E.eid,productId:A.productIdDiv.val(),launchPlatform:"web"},"selfieTrainConsume");E.enlargedViewData=null;E.selfieHeadline=F(this).find(".selfie-headLine").html()||"Selfie";E.enlargedViewData=F(this).clone();E.enlargedSelfie=E.enlargedViewData.find(".imgBlock img");E.enlargedSelfie[0].src="";Snapdeal.sidebar.open(E.enlargedViewData,E.selfieHeadline,"selfieClass");A.selfieClass=F(".selfieClass");A.selfieClass.find(".sidebarin-content").hide();var G=new Image();G.onload=function(){E.enlargedSelfie[0].src=E.enlargedSelfie.data("enlargedimg");A.selfieClass.find(".sidebarin-content").show()};G.src=E.enlargedSelfie.data("enlargedimg")},_onSlideNext:function(){getOmnitureScript({email:E.eid,productId:A.productIdDiv.val(),launchPlatform:"web"},"selfieViewCount");if(E.slideDataLength==(E.slideIndex+1)*E.selfieMaxSlides){B._getSelfies()}E.slideIndex++},_onSlidePrev:function(){if(E.slideIndex>1){E.slideIndex--}},_reloadSelfieSlider:function(){var H=E.slider.getCurrentSlide()-1;var G={pager:false,slideMargin:0,slideWidth:120,useCSS:false,prevText:'<div class="prev"><i class="prev-i"></i><i class="sd-icon sd-icon-previous"></i></div>',nextText:'<div class="next"><i class="next-i"></i><i class="sd-icon sd-icon-next"></i></div>',startSlide:H,minSlides:6,maxSlides:7,auto:false,infiniteLoop:false,hideControlOnEnd:true,onSlideNext:B._onSlideNext};E.slider.reloadSlider(G);E.slider.goToSlide(H+1)},_initialiseSelfieSlider:function(){var G={pager:false,slideMargin:0,slideWidth:120,useCSS:false,prevText:'<div class="prev"><i class="prev-i"></i><i class="sd-icon sd-icon-previous"></i></div>',nextText:'<div class="next"><i class="next-i"></i><i class="sd-icon sd-icon-next"></i></div>',minSlides:6,maxSlides:7,auto:false,infiniteLoop:false,hideControlOnEnd:true,onSlideNext:B._onSlideNext};E.slider=A.selfieSliderWidget.bxSlider(G)},_getSelfies:function(){function G(H){if(H!=null||H!=undefined){var J=F(".numbr-selfie a");J.css("cursor","pointer");J.on("click",function(L){F("html, body").animate({scrollTop:(F("#selfiesBlk").offset().top)-70},1500);getOmnitureScript({catalogId:F("#catalogId").val()},"jumpToSelfie_PDP")});var K=A.selfieBlock;var I=doT.template(F("#pdp_selfie").html());K.find("#selfieSliderWidget").append(I(H));Snapdeal.pdpReview.fetchUserInitial();A.selfieProducts=A.pdpSelfieSliderDiv.find(".selfie-product");if(A.selfieProducts.length>0){K.removeClass("hidden")}E.slideDataLength=A.selfieProducts.length;E.slideCount=E.slideDataLength;if(E.slideIndex>1){B._reloadSelfieSlider()}else{A.selfieCountValue=A.selfieSliderWidget.find(".selfieCountValue");A.selfieCountHeader.append("("+A.selfieCountValue.val()+")");if(A.selfieProducts.length>E.selfieMaxSlides){B._initialiseSelfieSlider()}}}else{return }}F.ajax({url:"/acors/web/getSelfieList/v2?productId="+A.productIdDiv.val()+"&offset="+E.slideCount,type:"GET",success:G,error:function(){}})},_afterWindowLoad:function(){B._getSelfies()}};C={init:function(){return B._init.apply(this,arguments)},};return C})(window.jQuery,Snapdeal);if($("#isSelfieEnabled").val()=="true"){Snapdeal.pdpSelfies.init()};
