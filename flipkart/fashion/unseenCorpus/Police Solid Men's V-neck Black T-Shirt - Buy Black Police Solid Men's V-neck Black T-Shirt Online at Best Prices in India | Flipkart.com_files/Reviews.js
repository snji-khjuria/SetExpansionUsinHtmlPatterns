webpackJsonp([5],{"./actions/AddRatingAndReviewActions.js":function(e,t,a){"use strict";function n(){return{type:l}}function r(e){return{type:u,data:e}}function i(e){return{type:d,error:e}}function s(e){return function(t){return t(n()),o.a.post(Object.assign({},c.a,{pathname:"/api/3/reviews/product",credentials:"include",acceptErrors:!0}),e).then(function(e){return t(r(e.RESPONSE))},function(e){return t(i(e)),Promise.reject(e.RESPONSE||e)})}}t.a=s;var o=a("./actions/ApiCaller.ts"),c=a("./actions/BaseAjaxConfig.ts"),l="ADD_PRODUCT_RATING_REVIEW_REQUEST",u="ADD_PRODUCT_RATING_REVIEW_SUCCESS",d="ADD_PRODUCT_RATING_REVIEW_ERROR"},"./components/AspectRatingWidget/AspectRatingWidget.css":function(e,t){e.exports={"aspect-rating":"_1nl9s1","aspect-rating-class":"R3upVV","aspect-rating-svg":"_1jHJkZ",trail:"nNeArc","progress-green":"yAaxjK","progress-orange":"_2UwRUl","progress-red":"_3F7hhu",text:"PRNS4f",title:"_3wUVEm"}},"./components/AspectRatingWidget/AspectRatingWidget.js":function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a.d(t,"a",function(){return v});var s=a("./node_modules/react/react.js"),o=a.n(s),c=a("./utils/safeTraverse.ts"),l=a("./utils/FDPHelper.js"),u=a("./components/AspectRatingWidget/AspectRatingWidget.css"),d=a.n(u),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=[d.a["progress-red"],d.a["progress-red"],d.a["progress-orange"],d.a["progress-green"],d.a["progress-green"],d.a["progress-green"]],v=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.aspect,n=e.position,r=e.sendFDPEvent,i=e.pid;r&&l.a.trackEvent({iid:a.i(c.a)(t,["tracking","impressionId"]),an:a.i(c.a)(t,["value","name"]),pid:i,aid:a.i(c.a)(t,["value","id"]),ar:a.i(c.a)(t,["value","average"]),p:n,en:"ASRI"})}},{key:"getPath",value:function(e,t,a,n){var r=void 0,i=n/2,s=360/t*e,o=s*Math.PI/180,c=a+i+a*Math.sin(o),l=a+i-a*Math.cos(o),u=void 0;return t===e?u="M"+(a+i)+","+i+" A "+a+","+a+",0,1,1,"+(a+i-1e-4)+","+i:(r=s>180?1:0,u="M"+(a+i)+","+i+" A "+a+","+a+",0,"+r+",1,"+c+","+l),u}},{key:"render",value:function(){var e=this.props.aspect,t=a.i(c.a)(e,["value","average"])||a.i(c.a)(e,["averageRating"]),n=a.i(c.a)(e,["value","base"])||5;if("number"!=typeof t)return null;var r=Math.round(10*t)/10,i=m[Math.floor(r)];return o.a.createElement("div",{className:d.a["aspect-rating"]},o.a.createElement("div",{className:d.a["aspect-rating-class"]},o.a.createElement("svg",{className:d.a["aspect-rating-svg"],viewBox:"0 0 100 100"},o.a.createElement("path",{className:d.a.trail,d:this.getPath(n,n,46,8),strokeWidth:8,fillOpacity:0}),t&&o.a.createElement("path",{className:i,d:this.getPath(r,n,46,8),strokeWidth:8,fillOpacity:0}),o.a.createElement("text",{className:d.a.text,x:50,y:50},r.toFixed(1)))),o.a.createElement("div",{className:d.a.title},a.i(c.a)(e,["value","name"])))}}]),t}(s.Component)},"./components/FiveStarWidget/FiveStarWidget.css":function(e,t){e.exports={"yellow-star":"wvjgRW","grey-star":"_3Hc5hn",rating:"kcuK2o",tooltip:"_14Na-3",star:"_2tZufY",ratingText:"_1Dk1bd",ratingText0:"XfETOX",ratingText1:"LV79LE",ratingText2:"sHUoTq",ratingText3:"_1jV6JI",ratingText4:"_3IFYIT"}},"./components/FiveStarWidget/FiveStarWidget.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=a("./node_modules/react/react.js"),c=a.n(o),l=a("./node_modules/react-redux/es/index.js"),u=a("./node_modules/classnames/index.js"),d=a.n(u),p=a("./components/Tooltip/index.js"),m=a("./strings.json"),v=a.n(m),g=a("./actions/tooltipActions.js"),f=a("./components/FiveStarWidget/FiveStarWidget.css"),h=a.n(f),w=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),y=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleRatingClick=function(e){return function(){var t=a.props.starCount-e;a.setState({selectedRating:t}),a.props.sendRating&&a.props.rateClicked(t),a.props.addRating&&a.props.addRatingClicked(t,a.props.pid)}},a.handleMouseOut=function(e){var t=a.props.hideTooltip;"function"==typeof t&&t(e)},a.state={selectedRating:e.selectedRating},a}return s(t,e),w(t,[{key:"getTootipData",value:function(e){switch(e){case 0:return v.a.excellent;case 1:return v.a.veryGood;case 2:return v.a.good;case 3:return v.a.bad;case 4:return v.a.veryBad;default:return""}}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.starCount;t++){var a,r=d()(h.a.star,(a={},n(a,h.a["yellow-star"],t>this.props.starCount-1-this.state.selectedRating),n(a,h.a["grey-star"],t<this.props.starCount-this.state.selectedRating),a));e.push(c.a.createElement("span",{id:"star-"+t+"-"+this.props.id,onClick:this.handleRatingClick(t),className:r,key:t},"★",c.a.createElement(p.a,{className:h.a.tooltip,anchor:"#star-"+t+"-"+this.props.id,position:"top",hoverInTimeout:0,hoverOutTimeout:0},this.getTootipData(t))))}var i=void 0;return this.state.selectedRating&&(i=this.props.starCount-parseInt(this.state.selectedRating,10)),c.a.createElement("div",null,c.a.createElement("div",{className:h.a.rating,onMouseOut:this.handleMouseOut},e),i>=0&&i<=4&&!this.props.addRating&&c.a.createElement("span",{className:d()(h.a.ratingText,h.a["ratingText"+i])},this.getTootipData(i)))}}]),t}(o.Component),b=function(e){return{hideTooltip:g.d}};t.a=a.i(l.connect)(null,b)(y)},"./components/FiveStarWidget/index.js":function(e,t,a){"use strict";var n=a("./components/FiveStarWidget/FiveStarWidget.js");t.a=n.a},"./components/MinimalProductInfo/MinimalProductInfo.css":function(e,t){e.exports={"product-info":"_3wBtPi",name:"Sw6kZ2","rating-widget":"mBjPf6","image-container":"_2sxWXr",image:"hoZMHD"}},"./components/MinimalProductInfo/MinimalProductInfo.js":function(e,t,a){"use strict";var n=a("./node_modules/react/react.js"),r=a.n(n),i=a("./node_modules/react-router/es/index.js"),s=a("./components/ProductRatingWidget/ProductRatingWidget.js"),o=a("./utils/getImageUrl.js"),c=a("./components/MinimalProductInfo/MinimalProductInfo.css"),l=a.n(c),u=function(e){var t=e.rating,n=e.image,c=e.title,u=e.productUrl,d=a.i(o.a)(n,48);return r.a.createElement(i.Link,{to:u||""},r.a.createElement("div",{className:l.a["product-info"]},r.a.createElement("div",{className:l.a.name},r.a.createElement("span",null,c)),r.a.createElement("div",{className:l.a["rating-widget"]},r.a.createElement(s.a,{product:{value:{rating:t}},view:"minimal"}))),r.a.createElement("div",{className:l.a["image-container"]},r.a.createElement("img",{src:d,className:l.a.image})))};u.propTypes={image:n.PropTypes.string.isRequired,rating:n.PropTypes.object.isRequired,title:n.PropTypes.string.isRequired},t.a=u},"./components/ReviewsSortUnit/ReviewsSortUnit.css":function(e,t){e.exports={outerContainer:"H6JLlu",sortOption:"_3MuAT6",selected:"_25FbMV"}},"./components/ReviewsSortUnit/ReviewsSortUnit.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=a("./node_modules/react/react.js"),c=a.n(o),l=a("./node_modules/classnames/index.js"),u=a.n(l),d=a("./components/ReviewsSortUnit/ReviewsSortUnit.css"),p=a.n(d),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),v=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),m(t,[{key:"render",value:function(){return c.a.createElement("div",{className:u()(p.a.outerContainer),onClick:this.props.onClick},c.a.createElement("div",{className:u()(p.a.sortOption,n({},p.a.selected,this.props.selected))},this.props.sortOption," ",this.props.showCount&&c.a.createElement("span",null,"(",this.props.count,")")))}}]),t}(o.Component);t.a=v},"./components/ReviewsSortUnit/index.js":function(e,t,a){"use strict";var n=a("./components/ReviewsSortUnit/ReviewsSortUnit.js");t.a=n.a},"./components/ReviewsWidget/index.js":function(e,t,a){"use strict";var n=a("./components/ReviewsWidget/ReviewsWidget.js");t.a=n.a},"./components/SimpleProductHeader/SimpleProductHeader.css":function(e,t){e.exports={"header-card":"_1Z9vji",title:"NWW_bH",arrow:"lVlJHX","product-info":"_2tw077"}},"./components/SimpleProductHeader/SimpleProductHeader.js":function(e,t,a){"use strict";var n=a("./node_modules/react/react.js"),r=a.n(n),i=a("./node_modules/react-router/es/index.js"),s=a("./components/MinimalProductInfo/MinimalProductInfo.js"),o=a("./components/Icons/Icons.tsx"),c=a("./components/SimpleProductHeader/SimpleProductHeader.css"),l=a.n(c),u=function(e){var t=function(t){e.router.goBack()};return r.a.createElement("div",{className:l.a["header-card"]},e.showBackBtn&&r.a.createElement("a",{href:"javascript:void(0)",onClick:t,className:l.a.arrow},a.i(o.u)()),r.a.createElement("div",{className:l.a.title},r.a.createElement("span",null,e.headerCaption)),r.a.createElement("div",{className:l.a["product-info"]},r.a.createElement(s.a,e)))};u.defaultProps={showBackBtn:!1},u.propTypes={title:n.PropTypes.string.isRequired,rating:n.PropTypes.object.isRequired,productUrl:n.PropTypes.string.isRequired,image:n.PropTypes.string.isRequired,headerCaption:n.PropTypes.string.isRequired,showBackBtn:n.PropTypes.bool},t.a=a.i(i.withRouter)(u)},"./pages/AddRatingAndReviewPage/AddRatingAndReviewPage.css":function(e,t){e.exports={"review-rating-content":"_2vvRAH","loader-container":"_269OP5","error-container":"_39G8Ox","not-allowed-container":"_3KMsCk",overlay:"_2z2sqF","overlay-loader":"_3fX1k7"}},"./pages/AddRatingAndReviewPage/AddRatingAndReviewPage.js":function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var a=t.location.query.pid,n=t.location.query.rating;return{productSummary:e.productSummary[a],reviewData:e.reviewPageData,userState:e.userState,productId:a,rating:n}}function o(e){return a.i(d.bindActionCreators)({AddProductRatingAndReview:C.a,fetchReviewData:x.d,fetchProductSummary:k.d,postProductRating:j.d},e)}Object.defineProperty(t,"__esModule",{value:!0});var c=a("./node_modules/react/react.js"),l=a.n(c),u=a("./node_modules/react-redux/es/index.js"),d=a("./node_modules/redux/es/index.js"),p=a("./node_modules/react-router/es/index.js"),m=a("./strings.json"),v=a.n(m),g=a("./components/Common/Loader/Loader.tsx"),f=a("./utils/asyncStatusHelper.ts"),h=a("./components/SimpleProductHeader/SimpleProductHeader.js"),w=a("./components/Toast/Toast.js"),y=a("./components/Error/Error.js"),b=a("./pages/AddRatingAndReviewPage/AddReviewSidebar/AddReviewSidebar.js"),R=a("./pages/AddRatingAndReviewPage/AddRatingAndReviewWidget/AddRatingAndReviewWidget.js"),E=a("./components/Title/Title.js"),_=a("./toasts.json"),P=a.n(_),C=a("./actions/AddRatingAndReviewActions.js"),j=a("./actions/reviewsConfirmationPageActions.js"),k=a("./actions/productSummaryActions.js"),x=a("./actions/reviewPageActions.js"),S=a("./utils/omnitureHelper.js"),N=a("./utils/safeTraverse.ts"),A=a("./utils/FDPHelper.js"),T=a("./node_modules/fk-cp-perf-beacon/index.js"),D=a.n(T),O=a("./pages/AddRatingAndReviewPage/AddRatingAndReviewPage.css"),W=a.n(O),I=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),H=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={overlay:!1,ratingStatus:"",reviewData:null},a.submit=a.submit.bind(a),a.postRating=a.postRating.bind(a),a}return i(t,e),I(t,[{key:"componentDidMount",value:function(){D()({prefix:"des",sampleRate:.2});var e=this.props.productId;this.props.fetchReviewData(e),this.props.productSummary||this.props.fetchProductSummary([{productId:e}])}},{key:"postRating",value:function(e){var t=this,n=a.i(N.a)(this.props,["location","query","source"]);this.props.postProductRating(this.props.productId,e,n).then(function(e){t.setState({ratingStatus:"SUCCESS"});var n=t.props.productSummary;if(n){var r=[],i={},s=a.i(N.a)(n,["value","id"]),o=a.i(N.a)(n,["value","rating","count"]);i.eVar16=i.prop16=a.i(N.a)(n,["value","analyticsData","superCategory"]),i.eVar17=i.prop17=a.i(N.a)(n,["value","analyticsData","subCategory"]),i.eVar19=i.prop19=a.i(N.a)(n,["value","analyticsData","vertical"]),i.products=";"+s+";;;;eVar22="+a.i(N.a)(n,["value","analyticsData","superCategory"])+"| eVar19="+i.eVar19,0===o&&r.push("event50"),r.push("event34"),i.events=r.join(","),S.a.trackLink(i,"Rating added")}},function(e){return t.setState({ratingStatus:"ERROR"}),Promise.reject(e)})}},{key:"componentWillReceiveProps",value:function(e){this.sendToAnalytics(e)}},{key:"sendToAnalytics",value:function(e){var t=e.productSummary,n=e.location,r=e.userState;if(a.i(f.g)(t)&&!this.isAnalyticsSend){var i="Write Review: "+a.i(N.a)(t,["value","titles","title"]);A.a.setNavigationContext({pn:"Write Review",pt:i}),A.a.trackPageView();var s=[],o={};o.eVar16=o.prop16=a.i(N.a)(t,["value","analyticsData","superCategory"]),o.eVar17=o.prop17=a.i(N.a)(t,["value","analyticsData","subCategory"]),o.eVar19=o.prop19=a.i(N.a)(t,["value","analyticsData","vertical"]),o.products=";"+a.i(N.a)(t,["value","id"])+";;;;eVar22="+a.i(N.a)(t,["value","analyticsData","category"])+"|eVar19="+o.eVar19,s.push("event1");var c=Object.assign({},S.a.getBaseOmnitureFields({pageName:"Write Review",pageType:i,location:n,userState:r}),o,{events:s.join(",")});S.a.trackOmniturePageView(c),this.isAnalyticsSend=!0}}},{key:"submit",value:function(e){var t=this,n=this.props.userState,r=n.firstName,i=n.lastName,s=r||i?r+" "+i:e.author,o=a.i(N.a)(this.props,["location","query","source"]),c={title:e.title,rating:e.rating,text:e.description,productId:this.props.productId,isCompleted:!0,author:s,source:o},l=this.props.productSummary;this.setState({showOverlay:!0}),this.props.AddProductRatingAndReview(c).then(function(e){var n=[],r={},i=a.i(N.a)(l,["value","id"]),s=a.i(N.a)(l,["value","rating","reviewCount"]);r.prop16=a.i(N.a)(l,["value","analyticsData","superCategory"]),r.prop17=a.i(N.a)(l,["value","analyticsData","subCategory"]),r.prop19=r.eVar19=a.i(N.a)(l,["value","analyticsData","vertical"]),r.products=";"+i+";;;;eVar22="+a.i(N.a)(l,["value","analyticsData","superCategory"])+"| eVar19="+r.eVar19,n.push("event33"),0===s&&n.push("event51"),r.prop47="Write Review Page",r.events=n.join(","),S.a.trackLink(r,"Review Submitted"),t.setState({showOverlay:!1}),t.props.toast.show(P.a.reviewConfirmationToast),t.props.router.push(a.i(N.a)(e,["data","url"]))},function(e){t.setState({showOverlay:!1}),t.props.toast.show({message:e.message||e.ERROR_MESSAGE,level:"ERROR"})})}},{key:"render",value:function(){var e=this.props,t=e.productSummary,n=e.userState,r=e.reviewData,i=e.rating,s=a.i(N.a)(r,["isCertifiedBuyer"])||!1;if(a.i(f.g)(t)&&a.i(f.g)(r)){var o=t.value;return l.a.createElement("div",{className:W.a["review-rating-content"]},l.a.createElement(E.a,{title:v.a.homePageTitle,overrideServerTitle:!0}),o&&l.a.createElement(h.a,{headerCaption:v.a.ratingAndReview,image:a.i(N.a)(o,["media","images",0,"url"]),title:a.i(N.a)(o,["titles","title"]),rating:a.i(N.a)(o,["rating"]),productUrl:a.i(N.a)(o,["baseUrl"])}),l.a.createElement(b.a,null),s&&l.a.createElement(R.a,{submitHandler:this.submit,hasAuthorName:!(!n.firstName&&!n.lastName),postRatingHandler:this.postRating,ratingStatus:this.state.ratingStatus,reviewData:r,rating:i}),!s&&l.a.createElement("div",{className:W.a["not-allowed-container"]},l.a.createElement(y.a,{errorType:"error404",title:"",subtitle:v.a.reviewNotAllowed})),this.state.showOverlay&&l.a.createElement("div",{className:W.a.overlay},l.a.createElement(g.a,{className:W.a["overlay-loader"]})))}return a.i(f.f)(t)||a.i(f.f)(r)?l.a.createElement("div",{className:W.a["error-container"]},l.a.createElement(y.a,null)):l.a.createElement("div",{className:W.a["loader-container"]},l.a.createElement(g.a,null))}}]),t}(c.Component),F=a.i(u.connect)(s,o)(H);t.default=a.i(w.a)(a.i(p.withRouter)(F))},"./pages/AddRatingAndReviewPage/AddRatingAndReviewWidget/AddRatingAndReviewWidget.css":function(e,t){e.exports={"rating-review-card":"_2rfo2u","submit-btn":"_3oe6G6","review-card":"_3zS_0H","rating-card":"_3AwHsn",caption:"_1O_Sj9","rating-status":"_3lM63h",error:"Huglld",success:"_1tudS1","rating-widget":"Kj7FZF","review-content":"_2ynvot","text-box":"_1b7zWX","description-box":"_2Vq_k8",label:"_1huZCe",control:"_2lNh_V","h-border":"_2qU1N7","move-right":"_1v1y1A"}},"./pages/AddRatingAndReviewPage/AddRatingAndReviewWidget/AddRatingAndReviewWidget.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o,c,l,u=a("./node_modules/react/react.js"),d=a.n(u),p=a("./node_modules/react-redux/es/index.js"),m=a("./components/FiveStarWidget/FiveStarWidget.js"),v=a("./pages/AddRatingAndReviewPage/ReviewPageTextBox/ReviewPageTextBox.js"),g=a("./components/StringWidget/StringWidget.js"),f=a("./strings.json"),h=a.n(f),w=a("./pages/AddRatingAndReviewPage/AddRatingAndReviewWidget/AddRatingAndReviewWidget.css"),y=a.n(w),b=a("./utils/asyncStatusHelper.ts"),R=a("./utils/validators.js"),E=a("./node_modules/classnames/index.js"),_=a.n(E),P=a("./utils/safeTraverse.ts"),C=a("./actions/reviewPageTitleActions.js"),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),x=60,S=5e3,N=5,A=(c=o=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));l.call(n);var s=a.i(P.a)(e.reviewData,["title"])||"",o=a.i(P.a)(e.reviewData,["text"])||"",c=a.i(P.a)(e.reviewData,["author"])||"",u=e.rating&&e.rating<=N?e.rating:a.i(P.a)(e.reviewData,["rating"])||"";return n.state={controls:{title:{value:s,valid:!0},description:{value:o,valid:!0},author:{value:c,valid:!0},rating:{value:u,valid:!0}}},n.validators={title:function(e){return{valid:a.i(R.g)(e,x),message:h.a.reviewTitleMax,value:e.substring(0,x)}},description:function(e){var t={valid:a.i(R.h)(e),message:h.a.reviewDescriptionEmpty};return t.valid&&(t={valid:a.i(R.g)(e,S),message:h.a.reviewDescriptionMax,value:e.substring(0,S)}),t},rating:function(e){return{valid:a.i(R.h)(e),message:h.a.reviewRatingEmpty}},author:function(e){return{valid:!0}}},n.setRating=n.setRating.bind(n),n.submitHandler=n.submitHandler.bind(n),n.titleChangeHandler=n.onChangeHandler("title").bind(n),n.descriptionChangeHandler=n.onChangeHandler("description").bind(n),n.authorChangeHandler=n.onChangeHandler("author").bind(n),n}return s(t,e),k(t,[{key:"onChangeHandler",value:function(e){var t=this;return function(a){var r=t.validators[e],i=void 0;return"function"==typeof r&&(i=t.validators[e](a),t.setState({controls:j({},t.state.controls,n({},e,j({value:a},i)))})),i}}},{key:"setRating",value:function(e){this.setState({controls:j({},this.state.controls,{rating:{valid:!0,value:e}})}),this.props.postRatingHandler(e)}},{key:"submitHandler",value:function(){var e=this,t=this.state.controls,a=t.title,r=t.description,i=t.author,s=t.rating,o=Object.keys(this.state.controls).reduce(function(t,a){var r,i=e.validators[a]?e.validators[a](e.state.controls[a].value):{valid:!0};return j({},t,(r={},n(r,a,j({},e.state.controls[a],i)),n(r,"valid",t.valid&&i.valid),r))},{valid:!0});this.setState({controls:o}),o.valid&&this.props.submitHandler({title:a.value,description:r.value,author:i.value,rating:s.value})}},{key:"getRatingWidget",value:function(){return d.a.createElement("div",{className:y.a["rating-widget"]},!this.state.controls.rating.valid&&d.a.createElement("div",{className:_()(y.a["rating-status"],y.a.error)},h.a.ratingEmpty),a.i(b.g)(this.props.ratingStatus)&&d.a.createElement("div",{className:_()(y.a["rating-status"],y.a.success)},h.a.ratingSuccess),a.i(b.f)(this.props.ratingStatus)&&d.a.createElement("div",{className:_()(y.a["rating-status"],y.a.error)},h.a.ratingError),d.a.createElement(m.a,{sendRating:!0,id:"add-rating",rateClicked:this.setRating,starCount:N,selectedRating:this.state.controls.rating.value}))}},{key:"getTitleBox",value:function(){var e=this.state.controls.title;return d.a.createElement(v.a,{value:e.value,type:"text",onChangeHandler:this.titleChangeHandler,placeholder:h.a.reviewTitlePlaceholder,label:h.a.reviewTitle,valid:e.valid,errorMessage:e.message})}},{key:"getDescriptionBox",value:function(){var e=this.state.controls.description;return d.a.createElement(v.a,{onBlurComp:this.handleAutoTitleCall,value:e.value,type:"textarea",onChangeHandler:this.descriptionChangeHandler,placeholder:h.a.reviewDescPlaceholder,label:h.a.reviewDescription,valid:e.valid,selectedRating:this.state.controls.rating.value,errorMessage:e.message})}},{key:"getAuthorBox",value:function(){return d.a.createElement(v.a,{value:this.state.controls.author.value,type:"text",onChangeHandler:this.authorChangeHandler,placeholder:h.a.reviewAuthorPlaceholder,label:h.a.reviewerName})}},{key:"render",value:function(){var e=this.props.hasAuthorName;return d.a.createElement("div",{className:y.a["rating-review-card"]},d.a.createElement("div",{className:y.a["rating-card"]},d.a.createElement("div",{className:y.a.caption},d.a.createElement(g.b,{strKey:"ratingCaption"})),this.getRatingWidget()),d.a.createElement("hr",{className:y.a["h-border"]}),d.a.createElement("div",{className:y.a["review-card"]},d.a.createElement("div",{className:y.a.caption},d.a.createElement(g.b,{strKey:"reviewCaption"})),d.a.createElement("div",{className:y.a["review-content"]},this.getDescriptionBox(),d.a.createElement("hr",{className:y.a["h-border"]}),this.getTitleBox(),!e&&d.a.createElement("div",null,d.a.createElement("hr",{className:y.a["h-border"]}),this.getAuthorBox()))),d.a.createElement("button",{className:y.a["submit-btn"],onClick:this.submitHandler},h.a.submit))}}]),t}(u.Component),l=function(){var e=this;this.handleAutoTitleCall=function(t,n){e.props.fetchProductReviewData(t,n).then(function(t){var n=a.i(P.a)(t,["data","reviewTitle"]);e.setState({controls:j({},e.state.controls,{title:{valid:!0,value:n}})})})}},c),T={fetchProductReviewData:C.d};t.a=a.i(p.connect)("",T)(A)},"./pages/AddRatingAndReviewPage/AddReviewSidebar/AddReviewSidebar.css":function(e,t){e.exports={"review-side-bar":"_1ZCgAu",header:"_3SyFhG",instructions:"_1gZBWY",item:"_13cTJo",question:"_1RrlUn",answer:"_20QwAZ",link:"_1vqsw_"}},"./pages/AddRatingAndReviewPage/AddReviewSidebar/AddReviewSidebar.js":function(e,t,a){"use strict";var n=a("./node_modules/react/react.js"),r=a.n(n),i=a("./components/StringWidget/StringWidget.js"),s=a("./strings.json"),o=a.n(s),c=a("./pages/AddRatingAndReviewPage/AddReviewSidebar/AddReviewSidebar.css"),l=a.n(c),u=function(e){var t=[{questionKey:"reviewSidebarQuestion_1",answerKey:"reviewSidebarAnswer_1"},{questionKey:"reviewSidebarQuestion_2",answerKey:"reviewSidebarAnswer_2"},{questionKey:"reviewSidebarQuestion_3",answerKey:"reviewSidebarAnswer_3",linkTextKey:"reviewSidebarLinkText_3",link:"/helpcentre"}];return r.a.createElement("div",{className:l.a["review-side-bar"]},r.a.createElement("div",{className:l.a.header},r.a.createElement(i.b,{strKey:"reviewSidebarHeading"})),r.a.createElement("div",{className:l.a.instructions},t.map(function(e,t){return r.a.createElement("div",{className:l.a.item,key:t},r.a.createElement("div",{className:l.a.question},r.a.createElement(i.b,{strKey:e.questionKey})),r.a.createElement("div",{className:l.a.answer},r.a.createElement(i.b,{strKey:e.answerKey}),e.linkTextKey&&r.a.createElement("a",{className:l.a.link,href:e.link,title:o.a[e.linkTextKey]},r.a.createElement(i.b,{strKey:e.linkTextKey}))))})))};t.a=u},"./pages/AddRatingAndReviewPage/ReviewPageTextBox/ReviewPageTextBox.css":function(e,t){e.exports={"text-box":"_32o8JY",error:"_2o5VpG",label:"_1AyhZ5","error-text":"_1aV0fV",control:"_16nh-W",focused:"ofBQLv","description-box":"_2onsaO","move-right":"_3bf835"}},"./pages/AddRatingAndReviewPage/ReviewPageTextBox/ReviewPageTextBox.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=a("./node_modules/lodash/pick.js"),c=a.n(o),l=a("./node_modules/react/react.js"),u=a.n(l),d=a("./node_modules/classnames/index.js"),p=a.n(d),m=a("./utils/shallowEqual.js"),v=a("./pages/AddRatingAndReviewPage/ReviewPageTextBox/ReviewPageTextBox.css"),g=a.n(v),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),w=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={value:e.value,valid:!0,errorMessage:""},a.onChangeHandler=a.onChangeHandler.bind(a),a.onFocus=a.onFocus.bind(a),a.onBlur=a.onBlur.bind(a),a}return s(t,e),h(t,[{key:"componentWillReceiveProps",value:function(e){var t=["value","valid","errorMessage"],n=c()(e,t);a.i(m.a)(n,c()(this.props,t))||this.setState(n)}},{key:"onFocus",value:function(){this.setState({focused:!0})}},{key:"onBlur",value:function(){var e=this.state.value;this.setCurrentFieldState({value:e,focused:!1}),"textarea"===this.props.type&&this.props.onBlurComp(this.props.selectedRating,e)}},{key:"setCurrentFieldState",value:function(e){if(this.props.onChangeHandler){var t=this.props.onChangeHandler(e.value);this.setState(f({},e,t))}else this.setState(f({},e))}},{key:"onChangeHandler",value:function(e){this.setCurrentFieldState({value:e.target.value})}},{key:"getTextElement",value:function(){var e={onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChangeHandler,value:this.state.value,placeholder:this.props.placeholder,className:g.a.control};switch(this.props.type){case"text":return u.a.createElement("input",e);case"textarea":return u.a.createElement("textarea",f({rows:"8"},e));default:return null}}},{key:"render",value:function(){var e,t=this.state,a=t.valid,r=t.focused;return u.a.createElement("div",{className:p()(g.a["text-box"],(e={},n(e,g.a.error,!a),n(e,g.a.focused,r),e))},!a&&u.a.createElement("div",{className:p()(g.a["move-right"],g.a["error-text"])},u.a.createElement("span",null,this.state.errorMessage)),u.a.createElement("div",{className:g.a.label},u.a.createElement("span",null,this.props.label)),this.getTextElement())}}]),t}(l.Component);w.defaultProps={value:"",validators:[],type:"text"},w.propTypes={value:l.PropTypes.string,type:l.PropTypes.string.isRequired,validators:l.PropTypes.array,label:l.PropTypes.string,placeholder:l.PropTypes.string,helpText:l.PropTypes.string,onChangeHandler:l.PropTypes.func,onBlurComp:l.PropTypes.func,selectedRating:l.PropTypes.number},t.a=w},"./pages/Checkout/CheckoutSection.css":function(e,t){e.exports={"checkout-section":"_38vNoF","section-heading":"_2RMAtd","section-number":"_1Tmvyj","section-text":"_1Toqp8","completed-step":"_1QbRjw","right-mark-icon":"_3baQOY",text:"_3FNwOm",title:"_1_m52b",description:"_2jDL7w","change-button":"_3Jk8fm","children-container":"_3K1hJZ",active:"_2onfBH","change-btn":"_1VUqRc",overlay:"_1WCovg","card-container":"_38uuYr","loader-container":"_1svvgn",loader:"_2Je4mr","loading-message-card":"IykI7k","card-content":"_2KZLhc"}},"./pages/Checkout/CheckoutSection.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e){return o.a.createElement("div",{className:f.a.overlay},o.a.createElement("div",{className:f.a["card-container"]},o.a.createElement("div",{className:f.a["loading-message-card"]},o.a.createElement("div",{className:f.a["card-content"]},o.a.createElement("div",{className:f.a["loader-container"]},o.a.createElement(p.a,{className:f.a.loader})),a.i(v.a)("loading")))))}function i(e){var t=e.index,i=e.title,s=e.visualState,c=e.children,p=e.description,g=e.changeTrigger,h=e.overlay,w=e.checkoutAsyncStatus;return"COMPLETED"===s?o.a.createElement(u.a,{className:l()(f.a["checkout-section"])},o.a.createElement("div",{className:f.a["completed-step"]},o.a.createElement("h3",{className:f.a["section-heading"]},o.a.createElement("span",{className:f.a["section-number"]},t)),o.a.createElement("div",{className:f.a.text},o.a.createElement("div",{className:f.a.title},i,o.a.createElement(d.f,{className:f.a["right-mark-icon"],stroke:"#2974f0",width:16,height:10})),o.a.createElement("div",{className:f.a.description},p)),"function"==typeof g&&o.a.createElement("button",{className:f.a["change-button"],onClick:g,disabled:a.i(m.e)(w)},a.i(v.a)("changeButton")))):o.a.createElement(u.a,{className:l()(f.a["checkout-section"],n({},f.a.active,"EXPANDED"===s))},o.a.createElement("h3",{className:f.a["section-heading"]},t?o.a.createElement("span",{className:f.a["section-number"]},t):null,o.a.createElement("span",{className:f.a.title},i)),o.a.createElement("div",{className:f.a["children-container"]},"EXPANDED"===s&&c,"EXPANDED"===s&&h?r():null))}t.b=r,t.a=i;var s=a("./node_modules/react/react.js"),o=a.n(s),c=a("./node_modules/classnames/index.js"),l=a.n(c),u=a("./components/Common/Card/index.js"),d=a("./components/Icons/Icons.tsx"),p=a("./components/Common/Loader/Loader.tsx"),m=a("./utils/asyncStatusHelper.ts"),v=a("./components/StringWidget/StringWidget.js"),g=a("./pages/Checkout/CheckoutSection.css"),f=a.n(g);i.propTypes={changeTrigger:s.PropTypes.func,children:s.PropTypes.node,description:s.PropTypes.node,index:s.PropTypes.number,title:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.element]),visualState:s.PropTypes.string}},"./pages/ReadReviewsPage/ReadReviewsPage.css":function(e,t){e.exports={"full-width-pagination":"_1vKM3Y","full-opacity":"_3BRC7L","no-opacity":"_1KVtzT","read-reviews-page-margin":"lDK8vn","read-reviews-content":"hFPo14","header-container":"_1vJnV0","page-title":"_1SJWAA","minimal-info":"_2WNU6h",line:"_3DCdKt","top-border":"_5PYJrC",ratingClicked:"_2xRHIi",showAll:"_1FVdAJ","left-panel":"_3n2LXv","image-container":"_1LAYGY",name:"_1SFrA2","rating-widget":"_2flroY","price-widget":"NWgUtU","rating-text":"_2FuBeO","right-pannel":"_2RmBZs","button-gray":"_2yST67","full-width":"_3wYu6I","tabs-container":"_2_xtR5","dropdown-and-certified":"FAWsKi","dropdown-container":"_1vl_HT",dropdown:"_1kL65M","dropdown-bar":"_3hcHXX",checkbox:"_3cPF7a","ratings-container":"UUOe7N",sentiments:"_19oIq_","aspect-rating":"UP6Cnc","text-class":"KlzRDz","positive-text":"_3MBycG","negative-text":"bZiMmh","min-height":"_3y6XNb","error-or-loader":"_15pqpV","error-container":"_3Xw3Jf","no-reviews":"FOr-VY"}},"./pages/ReadReviewsPage/ReadReviewsPage.js":function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){return{rnrDetails:e.ratingsAndReviews,userState:e.userState}}function c(e){return a.i(g.bindActionCreators)({fetchReadReviewsPageData:B.d,fetchProductReviewsForPage:K.h,fetchProductAspectReviewsForPage:K.i,showModal:L.c,voteAction:K.g},e)}function l(e){return m.a.createElement("div",{className:W.a["read-reviews-page-margin"]},m.a.createElement($,e))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=a("./node_modules/lodash/omit.js"),d=a.n(u),p=a("./node_modules/react/react.js"),m=a.n(p),v=a("./node_modules/react-redux/es/index.js"),g=a("./node_modules/redux/es/index.js"),f=a("./node_modules/classnames/index.js"),h=a.n(f),w=a("./node_modules/fk-cp-perf-beacon/index.js"),y=a.n(w),b=a("./node_modules/react-router/es/index.js"),R=a("./utils/asyncStatusHelper.ts"),E=a("./components/RatingStarsUnit/index.js"),_=a("./components/RatingCountUnit/index.js"),P=a("./components/ReviewsSortUnit/index.js"),C=a("./components/ReviewsWidget/index.js"),j=a("./components/ProductRatingWidget/ProductRatingWidget.js"),k=a("./components/PriceWidget/index.js"),x=a("./utils/omnitureHelper.js"),S=a("./components/Title/Title.js"),N=a("./strings.json"),A=a.n(N),T=a("./utils/safeTraverse.ts"),D=a("./components/Common/Card/index.js"),O=a("./pages/ReadReviewsPage/ReadReviewsPage.css"),W=a.n(O),I=a("./components/Pagination/Pagination.js"),H=a("./components/Dropdown/Dropdown.js"),F=a("./components/Checkbox/index.js"),V=a("./utils/shallowEqual.js"),M=a("./pages/Checkout/CheckoutSection.js"),q=a("./components/Error/Error.js"),B=a("./actions/readReviewsPageActions.js"),U=a("./components/StringWidget/StringWidget.js"),K=a("./actions/productReviewActions.js"),L=a("./actions/modalActions.js"),Z=a("./utils/FDPHelper.js"),X=a("./utils/stringUtils.js"),J=a("./utils/getImageUrl.js"),Y=a("./components/AspectRatingWidget/AspectRatingWidget.js"),z=a("./utils/uniqueId.js"),G=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Q=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchReviewsData=function(){var e=n.props.location.query,t=e.pid,r=e.aid,i=e.sort,s=e.certifiedBuyer,o=n.props.location.query.page,c=a.i(T.a)(n.props,["rnrDetails","reviewsData"])||{},l=c.REVIEW_COUNT;o&&"1"!==o?n.props.fetchReadReviewsPageData(t,r,i,s,o,l):n.props.fetchReadReviewsPageData(t,r,i,s)},n.handleCertifiedChanged=function(e){n.setState({ratingClicked:!1});var t=n.props.location.query.sort,r=n.props.location.query.aid,i=a.i(T.a)(n.props,["rnrDetails","tabsData","tabs"]),s=a.i(T.a)(n.props,["rnrDetails","tabsData","sort"]);e.checked&&n.trackClick("PP_ParameterizedReviewclick_FilterReview_certified_buyer","PP_Review_FilterReview"),n.trackFDPFilter(e,!0),n.props.router.push({pathname:n.props.location.pathname,query:{pid:n.props.location.query.pid,certifiedBuyer:e.checked,sort:t||s[0].sortOrder,aid:r||i[0].tabId,page:"1"}})},n.handleSortChanged=function(e){n.setState({ratingClicked:!1});var t=n.props.location.query.certifiedBuyer,r=n.props.location.query.aid,i=a.i(T.a)(n.props,["rnrDetails","tabsData","tabs"]);n.trackClick("PP_ParameterizedReviewclick_FilterReview_"+e,"PP_Review_FilterReview"),n.trackFDPFilter(e,!1),n.props.router.push({pathname:n.props.location.pathname,query:{pid:n.props.location.query.pid,certifiedBuyer:t||!1,sort:e,aid:r||i[0].tabId,page:"1"}})},n.renderSentiments=function(){var e=a.i(T.a)(n.props,["rnrDetails","ratingsData"]),t=a.i(T.a)(e,["histogramFeedbackList"])||[];return m.a.createElement("div",{className:W.a.sentiments},m.a.createElement("div",{className:W.a["aspect-rating"]},m.a.createElement(Y.a,{aspect:e})),t&&m.a.createElement("div",{className:W.a["text-class"]},t[0]&&m.a.createElement("div",null,m.a.createElement("span",{className:"POSITIVE"===t[0].feedbackPolarity?W.a["positive-text"]:W.a["negative-text"]},t[0].percent,"% "),m.a.createElement("span",null,t[0].text)),t[1]&&m.a.createElement("div",null,m.a.createElement("span",{className:"POSITIVE"===t[1].feedbackPolarity?W.a["positive-text"]:W.a["negative-text"]},t[1].percent,"% "),m.a.createElement("span",null,t[1].text))))},n.trackClick=function(e,t){x.a.trackLink({prop20:e,prop3:"Read Review",prop4:"Read Review",products:x.a.getValueFromPageContext("READREVIEWS","products")},t)},n.trackFDPFilter=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=a.i(T.a)(n.props,["rnrDetails","tabsData","tabs"])||[],i=r.find(function(e){return e.isSelected}),s=a.i(T.a)(n.props,["rnrDetails","tabsData","certifiedBuyer"]),o=a.i(T.a)(s,["value","isSelected"]),c=a.i(T.a)(n.props,["rnrDetails","tabsData","sort"])||[],l=c.find(function(e){return e.isSelected}),u=l.text,d={};t||(d=c.find(function(t){return t.sortOrder===e}),u=a.i(T.a)(d,["text"])),Z.a.trackEvent({iid:t?a.i(T.a)(s,["impressionId"]):a.i(T.a)(d,["impressionId"]),an:a.i(T.a)(i,["value"]),pid:a.i(T.a)(n.props,["location","query","pid"]),aid:a.i(T.a)(i,["tabId"]),cb:t?!o:o,sn:u,en:"AFC"})},n.renderNoReviewText=function(e,t){return m.a.createElement("div",{className:W.a["no-reviews"]},e?m.a.createElement(U.b,{strKey:"noAspectReviews",attributes:{aspectValue:t}}):m.a.createElement(U.b,{strKey:"noReviews"}))},n.renderError=function(){return m.a.createElement("div",null,m.a.createElement(D.a,{className:h()(W.a["read-reviews-content"],W.a["error-or-loader"])},m.a.createElement("div",{className:W.a["error-container"]},m.a.createElement(q.a,{errorAction:n.fetchReviewsData}))))},n.tabClicked=n.tabClicked.bind(n),n.onClick=n.onClick.bind(n),n.onRatingClicked=n.onRatingClicked.bind(n),n.state={ratingClicked:!1,rating:null},n}return s(t,e),G(t,[{key:"componentDidMount",value:function(){y()({prefix:"des",sampleRate:.2}),this.fetchReviewsData(),Z.a.setNavigationContext({pn:"Read Review",pt:"Read Review"})}},{key:"componentWillReceiveProps",value:function(e){var t=a.i(T.a)(e,["rnrDetails","tabsData","tabs"])||[],n=a.i(T.a)(e,["rnrDetails","reviewsData"])||{},r=e.location,i=r.query,s=n.REVIEW_COUNT,o=a.i(T.a)(n,["reviewsData","nonAspectReview"]),c=i.pid,l=i.aid,u=i.certifiedBuyer,d=i.sort,p=i.page,m=i.aspectName,v=t.map(function(e){return e.isSelected}).indexOf(!0),g=p||"1";if(a.i(V.a)(this.props.location.query,r.query)||(this.props.location.query.page!==p&&"1"!==g?o?this.props.fetchProductReviewsForPage(null,t[v],c,g,s,d,u):this.props.fetchProductAspectReviewsForPage(c,g,s,l,d,u):this.props.fetchReadReviewsPageData(c,l,d,u)),a.i(R.g)(n)&&!this.isOmniturePVSend){var f=a.i(T.a)(e,["rnrDetails","tabsData","tabs",v,"value"]),h=a.i(T.a)(e,["rnrDetails","reviewsData","reviewsData","pageContext"]),w={},y={},b=["event1"];w.pageType="Read Review",w.category=y.eVar1=a.i(T.a)(h,["analyticsData","category"]),w.superCategory=y.eVar16=y.prop16=a.i(T.a)(h,["analyticsData","superCategory"]),w.subCategory=y.eVar17=y.prop17=a.i(T.a)(h,["analyticsData","subCategory"]),w.vertical=y.eVar19=y.prop19=a.i(T.a)(h,["analyticsData","vertical"]),w.title=y.prop49=a.i(T.a)(h,["titles","title"]),y.prop22=f,m&&(y.prop20="PP_ParameterizedReviewClick_"+m),w.products=y.products=";"+a.i(T.a)(h,["productId"])+";;;;eVar22="+a.i(T.a)(h,["analyticsData","category"])+"| eVar19="+y.eVar19,w.pageName="Read Review: "+w.title;var E=Object.assign({},x.a.getBaseOmnitureFields({pageName:w.pageName,pageType:w.pageType,location:this.props.location,userState:this.props.userState}),y,{events:b.join(",")});x.a.setPageContext("READREVIEWS",w),x.a.trackOmniturePageView(E),Z.a.setNavigationContext({pn:w.pageName,pt:w.pageType}),Z.a.trackPageView(),this.isOmniturePVSend=!0}}},{key:"componentWillUnmount",value:function(){Z.a.flushEvents()}},{key:"onRatingClicked",value:function(e){this.setState({ratingClicked:!0,rating:e});var t=a.i(T.a)(this.props,["rnrDetails","reviewsData"]),n=t.REVIEW_COUNT,r=this.props.location,i=r.query,s=i.pid,o=i.sort,c=i.certifiedBuyer,l=a.i(T.a)(this.props,["rnrDetails","tabsData","tabs",0]),u=i.page,d=u||1;this.props.fetchProductReviewsForPage(e,l,s,d,n,o,c)}},{key:"onClick",value:function(e){if(!a.i(T.a)(this.props,["userState","isLoggedIn"]))return void this.props.showModal("login");this.props.router.push(e)}},{key:"tabClicked",value:function(e,t,n){if(this.setState({ratingClicked:!1}),t!==e||n){var r=a.i(T.a)(this.props,["rnrDetails","tabsData","tabs"]),i=this.props.location,s=i.query;this.trackClick("PP_ParameterizedReviewClick_Tabchange_"+r[e].value,"PP_Review_Tab change"),Z.a.trackEvent({iid:a.i(T.a)(r,[e,"impressionId"]),an:a.i(T.a)(r,[e,"value"]),pid:s.pid,aid:a.i(T.a)(r,[e,"tabId"]),en:"ATC"});var o=d()(s,["page"]);r[e].tabId&&(o.aid=r[e].tabId),this.props.router.push({pathname:this.props.location.pathname,query:o})}}},{key:"render",value:function(){var e,t=this,r=this.props,i=r.userState,s=r.showModal,o=r.voteAction,c=a.i(T.a)(this.props,["rnrDetails","tabsData","tabs"])||[],l=c.map(function(e){return e.isSelected}).indexOf(!0),u=a.i(T.a)(this.props,["rnrDetails","tabsData","sort"])||[],d=u.find(function(e){return e.isSelected}),p=a.i(T.a)(this.props,["rnrDetails","tabsData","certifiedBuyer"]),v=a.i(T.a)(this.props,["rnrDetails","reviewsData"])||{},g=a.i(T.a)(this.props,["rnrDetails","ratingsData"])||{},f=a.i(T.a)(i,["isLoggedIn"]),w=g.totalReviewsCount,y=g.averageRating,x=g.totalRatingsCount,N=g.breakup,O=v.REVIEW_COUNT,V=v.totalCount,q=a.i(T.a)(this.props,["rnrDetails","reviewsData","reviewsData","productSummary","value"]),B=this.props.location.query.page||1,K=Math.ceil(V/O),L=a.i(T.a)(this.props.location,["query","aid"]),Z=void 0!==a.i(T.a)(v,["reviewsData","aspectReview"])&&L&&"overall"!==L.toLowerCase(),Y=(Z?a.i(T.a)(v,["reviewsData","aspectReview"]):a.i(T.a)(v,["reviewsData","nonAspectReview"]))||[],G=a.i(T.a)(q,["title"]),Q=a.i(J.a)(a.i(T.a)(q,["imageUrl"]),246),$=a.i(T.a)(q,["rating"]),ee=a.i(T.a)(q,["pricing"]),te=a.i(R.h)(v);return a.i(R.f)(v)?this.renderError():m.a.createElement("div",null,te&&a.i(M.b)(),m.a.createElement(S.a,{title:q?a.i(X.a)(A.a.readReviewsPageTitle,{title:G}):A.a.homePageTitle}),m.a.createElement(D.a,{className:h()(W.a["read-reviews-content"],n({},W.a["min-height"],!a.i(R.g)(v)))},m.a.createElement("div",{className:h()("row")},m.a.createElement("div",{className:h()("col-3-12")},q&&m.a.createElement("div",null,m.a.createElement(b.Link,{to:a.i(T.a)(this.props,["rnrDetails","reviewsData","reviewsData","productSummary","action","url"])||""},m.a.createElement("div",{className:h()("row",W.a["left-panel"])},m.a.createElement("div",{className:W.a["image-container"]},m.a.createElement("img",{src:Q,className:W.a.image})),m.a.createElement("div",{className:W.a.name},m.a.createElement("span",null,G)),m.a.createElement("div",{className:W.a["rating-widget"]},m.a.createElement(j.a,{product:{value:{rating:$}},view:"minimal",showCount:!1}),m.a.createElement(U.b,{strKey:"ratingsTitleNew",attributes:{ratingsCount:Number(a.i(T.a)($,["count"])||0).toLocaleString()},className:W.a["rating-text"]})," ",m.a.createElement(U.b,{strKey:"ReviewsTitle",attributes:{reviewsCount:Number(a.i(T.a)($,["reviewCount"])||0).toLocaleString()},className:W.a["rating-text"]})),m.a.createElement("div",{className:W.a["price-widget"]},m.a.createElement(k.a,{pricing:ee,sellingPriceClass:W.a["selling-price"],oldPriceClass:W.a["old-price"],discountClass:W.a.discount,display:["selling-price","old-price","discount"]})))))),m.a.createElement("div",{className:h()(W.a["right-pannel"],"col-9-12")},m.a.createElement("div",{className:W.a["page-title"]},m.a.createElement(U.b,{strKey:"allReviews"})),m.a.createElement("div",{className:h()("row",W.a["tabs-container"])},c&&c.map(function(e,a){return m.a.createElement(P.a,{key:a,selected:a===l,sortOption:e.value,onClick:t.tabClicked.bind(t,a,l,e.firstLoad)})}),m.a.createElement("div",{className:W.a["dropdown-and-certified"]},u&&u.length&&m.a.createElement("div",{className:W.a["dropdown-container"]},m.a.createElement(H.a,{className:W.a.dropdown,barClassName:W.a["dropdown-bar"],name:"sort",onChange:this.handleSortChanged},u.map(function(e,t){return m.a.createElement("option",{key:t,value:e.sortOrder,selected:e.isSelected},e.text)}))),a.i(T.a)(p,["value","text"])&&m.a.createElement(F.a,{className:W.a.checkbox,label:p.value.text,onChange:this.handleCertifiedChanged,checked:p.value.isSelected}))),Z?this.renderSentiments():y&&m.a.createElement("div",{className:h()("row",W.a["ratings-container"])},m.a.createElement("div",{className:"col-3-12"},m.a.createElement(_.a,{ratingsCount:x,reviewsCount:w,avgRating:y})),m.a.createElement("div",{className:"col-9-12"},m.a.createElement(E.a,{onClick:this.onRatingClicked.bind(this),total:x,breakup:N}))),this.state.ratingClicked?m.a.createElement("div",{onClick:this.tabClicked.bind(this,0,0,!0),className:h()(W.a.ratingClicked,W.a.line)},m.a.createElement(U.b,{strKey:"ratingClicked",attributes:{rating:this.state.rating,activeSort:a.i(T.a)(d,["text"])}}),m.a.createElement("span",{className:h()(W.a.showAll)}," ",m.a.createElement(U.b,{strKey:"showAll"}))):null,m.a.createElement("div",{className:h()("row",W.a["full-width"],(e={},n(e,W.a["no-opacity"],!a.i(R.g)(v)),n(e,W.a["full-opacity"],a.i(R.g)(v)),e))},a.i(R.g)(v)&&0===Y.length&&this.renderNoReviewText(Z,a.i(T.a)(c,[l,"value"])),a.i(R.g)(v)&&Y.map(function(e,t){return m.a.createElement("div",{className:h()(W.a.line,n({},W.a["top-border"],0!==t)),key:a.i(z.a)()},m.a.createElement(C.a,{className:h()(W.a["full-width"]),userReview:e.value,voteAction:o,showModal:s,isLoggedIn:f,isAspect:Z,aspect:a.i(T.a)(c,[l]),impressionId:v.impressionId}))}),K>1&&a.i(R.g)(v)&&!this.state.ratingClicked?m.a.createElement(I.a,{className:h()(W.a["full-width-pagination"]),currentPage:B,numOfPages:K,pathname:this.props.location.pathname,query:this.props.location.query}):null)))))}}]),t}(p.Component),$=a.i(v.connect)(o,c)(a.i(b.withRouter)(Q))},"./pages/ReviewsConfirmationPage/ReviewsConfirmationPage.css":function(e,t){e.exports={"reviews-confirmation-page-margin":"_3X6CC3","reviews-confirmation-content":"_1hhliZ","page-title":"owgplv","no-products-text":"_1Zk21-","product-card":"_3sw6Ub","product-image-container":"P3ETrn","product-title":"_2hU8nC","write-review-link":"_3cPzR5",clearfix:"_1XsgH5"}},"./pages/ReviewsConfirmationPage/ReviewsConfirmationPage.js":function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{reviewsConfirmationData:e.reviewsConfirmationPage,userState:e.userState}}function o(e){return a.i(p.bindActionCreators)({fetchReviewsConfirmationPageData:P.e,postProductRating:P.d,showModal:A.c},e)}function c(e){return u.a.createElement("div",{className:y.a["reviews-confirmation-page-margin"]},u.a.createElement(I,e))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var l=a("./node_modules/react/react.js"),u=a.n(l),d=a("./node_modules/react-redux/es/index.js"),p=a("./node_modules/redux/es/index.js"),m=a("./node_modules/classnames/index.js"),v=a.n(m),g=a("./node_modules/fk-cp-perf-beacon/index.js"),f=a.n(g),h=a("./node_modules/react-router/es/index.js"),w=a("./pages/ReviewsConfirmationPage/ReviewsConfirmationPage.css"),y=a.n(w),b=a("./utils/asyncStatusHelper.ts"),R=a("./components/Common/Card/index.js"),E=a("./components/FiveStarWidget/index.js"),_=a("./components/Title/Title.js"),P=a("./actions/reviewsConfirmationPageActions.js"),C=a("./utils/safeTraverse.ts"),j=a("./components/Common/Image/SimpleImage.js"),k=a("./utils/getImageUrl.js"),x=a("./components/StringWidget/index.js"),S=a("./components/Common/Loader/Loader.tsx"),N=a("./utils/omnitureHelper.js"),A=a("./actions/modalActions.js"),T=a("./strings.json"),D=a.n(T),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),W=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.rateClicked=a.rateClicked.bind(a),a.onClickHandler=a.onClickHandler.bind(a),a}return i(t,e),O(t,[{key:"componentDidMount",value:function(){if(!a.i(C.a)(this.props,["userState","isLoggedIn"]))return void this.props.showModal("login");var e=a.i(C.a)(this.props,["location","query","source"]);this.props.fetchReviewsConfirmationPageData(0,5,e);var t=Object.assign({},N.a.getBaseOmnitureFields({pageName:"Review My Purchases",pageType:"Review My Purchases",location:this.props.location,userState:this.props.userState}),{events:"event1"});f()({prefix:"des",sampleRate:.2}),N.a.trackOmniturePageView(t)}},{key:"rateClicked",value:function(e,t){var n=[],r={},i=a.i(C.a)(this.props,["location","query","source"]);n.push("event34"),r.prop46="RMP",r.prop4="Review My Purchase",r.events=n.join(","),N.a.trackLink(r,"RMP Rating added"),this.props.postProductRating(e,t,i)}},{key:"onClickHandler",value:function(e){if(!a.i(C.a)(this.props,["userState","isLoggedIn"]))return void this.props.showModal("login");this.props.router.push(e)}},{key:"render",value:function(){var e=this,t=a.i(C.a)(this.props,["reviewsConfirmationData","product"]);return a.i(b.g)(this.props.reviewsConfirmationData)?u.a.createElement("div",null,u.a.createElement(_.a,{title:D.a.reviewsConfirmationPageTitle}),u.a.createElement(R.a,{className:y.a["reviews-confirmation-content"]},u.a.createElement("div",{className:v()(y.a["page-title"])},u.a.createElement(x.a,{strKey:"reviewYourPurchases"})),t&&t.length<1?u.a.createElement("div",{className:y.a["no-products-text"]},u.a.createElement(x.a,{strKey:"confirmationNoProducts"})):null,t&&t.map(function(t,n){return u.a.createElement("div",{key:n,className:y.a["product-card"]},u.a.createElement("div",{className:y.a["product-image-container"]},u.a.createElement(j.a,{src:a.i(k.a)(t.dynamicImageUrl,232,90),size:232})),u.a.createElement("div",{className:y.a["product-title"]},t.productTitle),u.a.createElement("div",{className:y.a.clearfix},u.a.createElement(E.a,{sendRating:!0,rateClicked:e.rateClicked.bind(e,t.pid),starCount:5,selectedRating:t.rating})),t.writeUrl?u.a.createElement("div",{onClick:e.onClickHandler.bind(e,t.writeUrl),className:y.a["write-review-link"]},u.a.createElement(x.a,{strKey:"writeAReviewLink"})):null)}))):u.a.createElement("div",{className:y.a["reviews-confirmation-content"]},u.a.createElement(R.a,null,u.a.createElement(S.a,null)))}}]),t}(l.Component),I=a.i(d.connect)(s,o)(a.i(h.withRouter)(W))}});